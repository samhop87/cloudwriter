import{z as kt,o as me,g as ye,d as ce}from"./app.204f9d43.js";import{_ as be}from"./_plugin-vue_export-helper.cdc0426e.js";var ne={};(function(At){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(d){return d==0?0:d>0?1:-1});var J={subtract:function(d,E){return{x:d.x-E.x,y:d.y-E.y}},dotProduct:function(d,E){return d.x*E.x+d.y*E.y},square:function(d){return Math.sqrt(d.x*d.x+d.y*d.y)},scale:function(d,E){return{x:d.x*E,y:d.y*E}}},c=64,Y=Math.pow(2,-c-1),nt=function(d,E){for(var N=[],B=et(d,E),W=E.length-1,n=2*W-1,o=h(B,n,N,0),t=J.subtract(d,E[0]),p=J.square(t),v=0,F=0;F<o;F++){t=J.subtract(d,m(E,W,N[F],null,null));var I=J.square(t);I<p&&(p=I,v=N[F])}return t=J.subtract(d,E[W]),I=J.square(t),I<p&&(p=I,v=1),{location:v,distance:p}},K=function(d,E){var N=nt(d,E);return{point:m(E,E.length-1,N.location,null,null),location:N.location}},et=function(d,E){for(var N=E.length-1,B=2*N-1,W=[],n=[],o=[],t=[],p=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],v=0;v<=N;v++)W[v]=J.subtract(E[v],d);for(var v=0;v<=N-1;v++)n[v]=J.subtract(E[v+1],E[v]),n[v]=J.scale(n[v],3);for(var F=0;F<=N-1;F++)for(var I=0;I<=N;I++)o[F]||(o[F]=[]),o[F][I]=J.dotProduct(n[F],W[I]);for(v=0;v<=B;v++)t[v]||(t[v]=[]),t[v].y=0,t[v].x=parseFloat(v)/B;for(var X=N,R=N-1,V=0;V<=X+R;V++){var at=Math.max(0,V-R),st=Math.min(V,X);for(v=at;v<=st;v++){var it=V-v;t[v+it].y+=o[it][v]*p[it][v]}}return t},h=function(d,E,N,B){var W=[],n=[],o,t,p=[],v=[];switch(O(d,E)){case 0:return 0;case 1:{if(B>=c)return N[0]=(d[0].x+d[E].x)/2,1;if(a(d,E))return N[0]=i(d,E),1;break}}m(d,E,.5,W,n),o=h(W,E,p,B+1),t=h(n,E,v,B+1);for(var F=0;F<o;F++)N[F]=p[F];for(var F=0;F<t;F++)N[F+o]=v[F];return o+t},O=function(d,E){var N=0,B,W;B=W=Math.sgn(d[0].y);for(var n=1;n<=E;n++)B=Math.sgn(d[n].y),B!=W&&N++,W=B;return N},a=function(d,E){var N,B,W,n,o,t,p,v,F,I,X,R,V,at,st,it;t=d[0].y-d[E].y,p=d[E].x-d[0].x,v=d[0].x*d[E].y-d[E].x*d[0].y;var rt,gt;rt=gt=0;for(var dt=1;dt<E;dt++){var lt=t*d[dt].x+p*d[dt].y+v;lt>rt?rt=lt:lt<gt&&(gt=lt)}return X=0,R=1,V=0,at=t,st=p,it=v-rt,F=X*st-at*R,I=1/F,B=(R*it-st*V)*I,at=t,st=p,it=v-gt,F=X*st-at*R,I=1/F,W=(R*it-st*V)*I,n=Math.min(B,W),o=Math.max(B,W),N=o-n,N<Y?1:0},i=function(d,E){var N=1,B=0,W=d[E].x-d[0].x,n=d[E].y-d[0].y,o=d[0].x-0,t=d[0].y-0,p=W*B-n*N,v=1/p,F=(W*t-n*o)*v;return 0+N*F},m=function(d,E,N,B,W){for(var n=[[]],o=0;o<=E;o++)n[0][o]=d[o];for(var t=1;t<=E;t++)for(var o=0;o<=E-t;o++)n[t]||(n[t]=[]),n[t][o]||(n[t][o]={}),n[t][o].x=(1-N)*n[t-1][o].x+N*n[t-1][o+1].x,n[t][o].y=(1-N)*n[t-1][o].y+N*n[t-1][o+1].y;if(B!=null)for(o=0;o<=E;o++)B[o]=n[o][0];if(W!=null)for(o=0;o<=E;o++)W[o]=n[E-o][o];return n[E][0]},S={},T=function(d){var E=S[d];if(!E){E=[];var N=function(){return function(I){return Math.pow(I,d)}},B=function(){return function(I){return Math.pow(1-I,d)}},W=function(I){return function(X){return I}},n=function(){return function(I){return I}},o=function(){return function(I){return 1-I}},t=function(I){return function(X){for(var R=1,V=0;V<I.length;V++)R=R*I[V](X);return R}};E.push(new N);for(var p=1;p<d;p++){for(var v=[new W(d)],F=0;F<d-p;F++)v.push(new n);for(var F=0;F<p;F++)v.push(new o);E.push(new t(v))}E.push(new B),S[d]=E}return E},P=function(d,E){for(var N=T(d.length-1),B=0,W=0,n=0;n<d.length;n++)B=B+d[n].x*N[n](E),W=W+d[n].y*N[n](E);return{x:B,y:W}},g=function(d,E){return Math.sqrt(Math.pow(d.x-E.x,2)+Math.pow(d.y-E.y,2))},e=function(d){return d[0].x===d[1].x&&d[0].y===d[1].y},M=function(d,E,N){if(e(d))return{point:d[0],location:E};for(var B=P(d,E),W=0,n=E,o=N>0?1:-1,t=null;W<Math.abs(N);)n+=.005*o,t=P(d,n),W+=g(t,B),B=t;return{point:t,location:n}},L=function(d){var E=new Date().getTime();if(e(d))return 0;for(var N=P(d,0),B=0,W=0,n=1,o=null;W<1;)W+=.005*n,o=P(d,W),B+=g(o,N),N=o;return console.log("length",new Date().getTime()-E),B},U=function(d,E,N){return M(d,E,N).point},G=function(d,E,N){return M(d,E,N).location},C=function(d,E){var N=P(d,E),B=P(d.slice(0,d.length-1),E),W=B.y-N.y,n=B.x-N.x;return W===0?1/0:Math.atan(W/n)},A=function(d,E,N){var B=M(d,E,N);return B.location>1&&(B.location=1),B.location<0&&(B.location=0),C(d,B.location)},r=function(d,E,N,B){B=B==null?0:B;var W=M(d,E,B),n=C(d,W.location),o=Math.atan(-1/n),t=N/2*Math.sin(o),p=N/2*Math.cos(o);return[{x:W.point.x+p,y:W.point.y+t},{x:W.point.x-p,y:W.point.y-t}]},f=function(d,E,N,B,W){var n=B-E,o=d-N,t=d*(E-B)+E*(N-d),p=u(W),v=[n*p[0][0]+o*p[1][0],n*p[0][1]+o*p[1][1],n*p[0][2]+o*p[1][2],n*p[0][3]+o*p[1][3]+t],F=b.apply(null,v),I=[];if(F!=null)for(var X=0;X<3;X++){var R=F[X],V=Math.pow(R,2),at=Math.pow(R,3),st=[p[0][0]*at+p[0][1]*V+p[0][2]*R+p[0][3],p[1][0]*at+p[1][1]*V+p[1][2]*R+p[1][3]],it;N-d!==0?it=(st[0]-d)/(N-d):it=(st[1]-E)/(B-E),R>=0&&R<=1&&it>=0&&it<=1&&I.push(st)}return I},l=function(d,E,N,B,W){var n=[];return n.push.apply(n,f(d,E,d+N,E,W)),n.push.apply(n,f(d+N,E,d+N,E+B,W)),n.push.apply(n,f(d+N,E+B,d,E+B,W)),n.push.apply(n,f(d,E+B,d,E,W)),n},_=function(d,E){var N=[];return N.push.apply(N,f(d.x,d.y,d.x+d.w,d.y,E)),N.push.apply(N,f(d.x+d.w,d.y,d.x+d.w,d.y+d.h,E)),N.push.apply(N,f(d.x+d.w,d.y+d.h,d.x,d.y+d.h,E)),N.push.apply(N,f(d.x,d.y+d.h,d.x,d.y,E)),N};function x(d,E){return[-d[0][E]+3*d[1][E]+-3*d[2][E]+d[3][E],3*d[0][E]-6*d[1][E]+3*d[2][E],-3*d[0][E]+3*d[1][E],d[0][E]]}function u(d){return[x(d,"x"),x(d,"y")]}function j(d){return d<0?-1:d>0?1:0}function b(d,E,N,B){var W=E/d,n=N/d,o=B/d,t=(3*n-Math.pow(W,2))/9,p=(9*W*n-27*o-2*Math.pow(W,3))/54,v=Math.pow(t,3)+Math.pow(p,2),F,I,X=[];if(v>=0)F=j(p+Math.sqrt(v))*Math.pow(Math.abs(p+Math.sqrt(v)),1/3),I=j(p-Math.sqrt(v))*Math.pow(Math.abs(p-Math.sqrt(v)),1/3),X[0]=-W/3+(F+I),X[1]=-W/3-(F+I)/2,X[2]=-W/3-(F+I)/2,Math.abs(Math.sqrt(3)*(F-I)/2)!==0&&(X[1]=-1,X[2]=-1);else{var R=Math.acos(p/Math.sqrt(-Math.pow(t,3)));X[0]=2*Math.sqrt(-t)*Math.cos(R/3)-W/3,X[1]=2*Math.sqrt(-t)*Math.cos((R+2*Math.PI)/3)-W/3,X[2]=2*Math.sqrt(-t)*Math.cos((R+4*Math.PI)/3)-W/3}for(var V=0;V<3;V++)(X[V]<0||X[V]>1)&&(X[V]=-1);return X}var w=this.jsBezier={distanceFromCurve:nt,gradientAtPoint:C,gradientAtPointAlongCurveFrom:A,nearestPointOnCurve:K,pointOnCurve:P,pointAlongCurveFrom:U,perpendicularToCurveAt:r,locationAlongCurveFrom:G,getLength:L,lineIntersection:f,boxIntersection:l,boundingBoxIntersection:_,version:"0.9.0"};At.jsBezier=w}).call(typeof window<"u"?window:kt),function(){var J=this,c=J.Biltong={version:"0.4.0"};At.Biltong=c;var Y=function(a){return Object.prototype.toString.call(a)==="[object Array]"},nt=function(a,i,m){return a=Y(a)?a:[a.x,a.y],i=Y(i)?i:[i.x,i.y],m(a,i)},K=c.gradient=function(a,i){return nt(a,i,function(m,S){return S[0]==m[0]?S[1]>m[1]?1/0:-1/0:S[1]==m[1]?S[0]>m[0]?0:-0:(S[1]-m[1])/(S[0]-m[0])})};c.normal=function(a,i){return-1/K(a,i)},c.lineLength=function(a,i){return nt(a,i,function(m,S){return Math.sqrt(Math.pow(S[1]-m[1],2)+Math.pow(S[0]-m[0],2))})};var et=c.quadrant=function(a,i){return nt(a,i,function(m,S){return S[0]>m[0]||S[0]==m[0]?S[1]>m[1]?2:1:S[1]>m[1]?3:4})};c.theta=function(a,i){return nt(a,i,function(m,S){var T=K(m,S),P=Math.atan(T),g=et(m,S);return(g==4||g==3)&&(P+=Math.PI),P<0&&(P+=2*Math.PI),P})},c.intersects=function(a,i){var m=a.x,S=a.x+a.w,T=a.y,P=a.y+a.h,g=i.x,e=i.x+i.w,M=i.y,L=i.y+i.h;return m<=g&&g<=S&&T<=M&&M<=P||m<=e&&e<=S&&T<=M&&M<=P||m<=g&&g<=S&&T<=L&&L<=P||m<=e&&g<=S&&T<=L&&L<=P||g<=m&&m<=e&&M<=T&&T<=L||g<=S&&S<=e&&M<=T&&T<=L||g<=m&&m<=e&&M<=P&&P<=L||g<=S&&m<=e&&M<=P&&P<=L},c.encloses=function(a,i,m){var S=a.x,T=a.x+a.w,P=a.y,g=a.y+a.h,e=i.x,M=i.x+i.w,L=i.y,U=i.y+i.h,G=function(C,A,r,f){return m?C<=A&&r>=f:C<A&&r>f};return G(S,e,T,M)&&G(P,L,g,U)};var h=[null,[1,-1],[1,1],[-1,1],[-1,-1]],O=[null,[-1,-1],[-1,1],[1,1],[1,-1]];c.pointOnLine=function(a,i,m){var S=K(a,i),T=et(a,i),P=m>0?h[T]:O[T],g=Math.atan(S),e=Math.abs(m*Math.sin(g))*P[1],M=Math.abs(m*Math.cos(g))*P[0];return{x:a.x+M,y:a.y+e}},c.perpendicularLineTo=function(a,i,m){var S=K(a,i),T=Math.atan(-1/S),P=m/2*Math.sin(T),g=m/2*Math.cos(T);return[{x:i.x+g,y:i.y+P},{x:i.x-g,y:i.y-P}]}}.call(typeof window<"u"?window:kt),function(){function J(n,o,t,p,v,F,I,X){return new Touch({target:o,identifier:W(),pageX:t,pageY:p,screenX:v,screenY:F,clientX:I||v,clientY:X||F})}function c(){var n=[];return Array.prototype.push.apply(n,arguments),n.item=function(o){return this[o]},n}function Y(n,o,t,p,v,F,I,X){return c(J.apply(null,arguments))}var nt=this,K=function(n,o,t){t=t||n.parentNode;for(var p=t.querySelectorAll(o),v=0;v<p.length;v++)if(p[v]===n)return!0;return!1},et=function(n){return typeof n=="string"||n.constructor===String?document.getElementById(n):n},h=function(n){return n.srcElement||n.target},O=function(n,o,t,p){if(p){if(typeof n.path<"u"&&n.path.indexOf)return{path:n.path,end:n.path.indexOf(t)};var v={path:[],end:-1},F=function(I){v.path.push(I),I===t?v.end=v.path.length-1:I.parentNode!=null&&F(I.parentNode)};return F(o),v}else return{path:[o],end:1}},a=function(n,o){for(var t=0,p=n.length;t<p&&n[t]!=o;t++);t<n.length&&n.splice(t,1)},i=1,m=function(n,o,t){var p=i++;return n.__ta=n.__ta||{},n.__ta[o]=n.__ta[o]||{},n.__ta[o][p]=t,t.__tauid=p,p},S=function(n,o,t){if(n.__ta&&n.__ta[o]&&delete n.__ta[o][t.__tauid],t.__taExtra){for(var p=0;p<t.__taExtra.length;p++)N(n,t.__taExtra[p][0],t.__taExtra[p][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()},T=function(n,o,t,p){if(n==null)return t;var v=n.split(","),F=function(I){F.__tauid=t.__tauid;var X=h(I),R=X,V=O(I,X,o,n!=null);if(V.end!=-1)for(var at=0;at<V.end;at++){R=V.path[at];for(var st=0;st<v.length;st++)K(R,v[st],o)&&t.apply(R,arguments)}};return P(t,p,F),F},P=function(n,o,t){n.__taExtra=n.__taExtra||[],n.__taExtra.push([o,t])},g=function(n,o,t,p){if(C&&r[o]){var v=T(p,n,t,r[o]);E(n,r[o],v,t)}o==="focus"&&n.getAttribute("tabindex")==null&&n.setAttribute("tabindex","1"),E(n,o,T(p,n,t,o),t)},e=function(n,o,t,p){if(n.__taSmartClicks==null){var v=function(X){n.__tad=x(X)},F=function(X){n.__tau=x(X)},I=function(X){if(n.__tad&&n.__tau&&n.__tad[0]===n.__tau[0]&&n.__tad[1]===n.__tau[1])for(var R=0;R<n.__taSmartClicks.length;R++)n.__taSmartClicks[R].apply(h(X),[X])};g(n,"mousedown",v,p),g(n,"mouseup",F,p),g(n,"click",I,p),n.__taSmartClicks=[]}n.__taSmartClicks.push(t),t.__taUnstore=function(){a(n.__taSmartClicks,t)}},M={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},L=function(n,o){return function(t,p,v,F){if(p=="contextmenu"&&A)g(t,p,v,F);else{if(t.__taTapHandler==null){var I=t.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},X=function(st){for(var it=h(st),rt=O(st,it,t,F!=null),gt=!1,dt=0;dt<rt.end;dt++){if(gt)return;it=rt.path[dt];for(var lt=0;lt<I.downSelectors.length;lt++)if(I.downSelectors[lt]==null||K(it,I.downSelectors[lt],t)){I.down=!0,setTimeout(V,n),setTimeout(at,o),gt=!0;break}}},R=function(st){if(I.down){var it=h(st),rt,gt;I.taps++;var dt=d(st);for(var lt in M)if(M.hasOwnProperty(lt)){var yt=M[lt];if(yt.touches===dt&&(yt.taps===1||yt.taps===I.taps))for(var pt=0;pt<I[lt].length;pt++){gt=O(st,it,t,I[lt][pt][1]!=null);for(var Z=0;Z<gt.end;Z++)if(rt=gt.path[Z],I[lt][pt][1]==null||K(rt,I[lt][pt][1],t)){I[lt][pt][0].apply(rt,[st]);break}}}}},V=function(){I.down=!1},at=function(){I.taps=0};g(t,"mousedown",X),g(t,"mouseup",R)}t.__taTapHandler.downSelectors.push(F),t.__taTapHandler[p].push([v,F]),v.__taUnstore=function(){a(t.__taTapHandler[p],v)}}}},U=function(n,o,t,p){for(var v in t.__tamee[n])t.__tamee[n].hasOwnProperty(v)&&t.__tamee[n][v].apply(p,[o])},G=function(){var n=[];return function(o,t,p,v){if(!o.__tamee){o.__tamee={over:!1,mouseenter:[],mouseexit:[]};var F=function(X){var R=h(X);(v==null&&R==o&&!o.__tamee.over||K(R,v,o)&&(R.__tamee==null||!R.__tamee.over))&&(U("mouseenter",X,o,R),R.__tamee=R.__tamee||{},R.__tamee.over=!0,n.push(R))},I=function(X){for(var R=h(X),V=0;V<n.length;V++)R==n[V]&&!K(X.relatedTarget||X.toElement,"*",R)&&(R.__tamee.over=!1,n.splice(V,1),U("mouseexit",X,o,R))};E(o,"mouseover",T(v,o,F,"mouseover"),F),E(o,"mouseout",T(v,o,I,"mouseout"),I)}p.__taUnstore=function(){delete o.__tamee[t][p.__tauid]},m(o,t,p),o.__tamee[t][p.__tauid]=p}},C="ontouchstart"in document.documentElement||navigator.maxTouchPoints,A="onmousedown"in document.documentElement,r={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},f=function(){var n=-1;if(navigator.appName=="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(n=parseFloat(RegExp.$1))}return n}(),l=f>-1&&f<9,_=function(n,o){if(n==null)return[0,0];var t=w(n),p=b(t,0);return[p[o+"X"],p[o+"Y"]]},x=function(n){return n==null?[0,0]:l?[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop]:_(n,"page")},u=function(n){return _(n,"screen")},j=function(n){return _(n,"client")},b=function(n,o){return n.item?n.item(o):n[o]},w=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},d=function(n){return w(n).length},E=function(n,o,t,p){if(m(n,o,t),p.__tauid=t.__tauid,n.addEventListener)n.addEventListener(o,t,!1);else if(n.attachEvent){var v=o+t.__tauid;n["e"+v]=t,n[v]=function(){n["e"+v]&&n["e"+v](window.event)},n.attachEvent("on"+o,n[v])}},N=function(n,o,t){t!=null&&B(n,function(){var p=et(this);if(S(p,o,t),t.__tauid!=null){if(p.removeEventListener)p.removeEventListener(o,t,!1),C&&r[o]&&p.removeEventListener(r[o],t,!1);else if(this.detachEvent){var v=o+t.__tauid;p[v]&&p.detachEvent("on"+o,p[v]),p[v]=null,p["e"+v]=null}}t.__taTouchProxy&&N(n,t.__taTouchProxy[1],t.__taTouchProxy[0])})},B=function(n,o){if(n!=null){n=typeof Window<"u"&&typeof n.top!="unknown"&&n==n.top?[n]:typeof n!="string"&&n.tagName==null&&n.length!=null?n:typeof n=="string"?document.querySelectorAll(n):[n];for(var t=0;t<n.length;t++)o.apply(n[t])}},W=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,t=n=="x"?o:o&3|8;return t.toString(16)})};nt.Mottle=function(n){n=n||{};var o=n.clickThreshold||250,t=n.dblClickThreshold||450,p=new G,v=new L(o,t),F=n.smartClicks,I=function(X,R,V,at){V!=null&&B(X,function(){var st=et(this);F&&R==="click"?e(st,R,V,at):R==="tap"||R==="dbltap"||R==="contextmenu"?v(st,R,V,at):R==="mouseenter"||R=="mouseexit"?p(st,R,V,at):g(st,R,V,at)})};this.remove=function(X){return B(X,function(){var R=et(this);if(R.__ta){for(var V in R.__ta)if(R.__ta.hasOwnProperty(V))for(var at in R.__ta[V])R.__ta[V].hasOwnProperty(at)&&N(R,V,R.__ta[V][at])}R.parentNode&&R.parentNode.removeChild(R)}),this},this.on=function(X,R,V,at){var st=arguments[0],it=arguments.length==4?arguments[2]:null,rt=arguments[1],gt=arguments[arguments.length-1];return I(st,rt,gt,it),this},this.off=function(X,R,V){return N(X,R,V),this},this.trigger=function(X,R,V,at){var st=A&&(typeof MouseEvent>"u"||V==null||V.constructor===MouseEvent),it=C&&!A&&r[R]?r[R]:R,rt=!(C&&!A&&r[R]),gt=x(V),dt=u(V),lt=j(V);return B(X,function(){var yt=et(this),pt;V=V||{screenX:dt[0],screenY:dt[1],clientX:lt[0],clientY:lt[1]};var Z=function(vt){at&&(vt.payload=at)},q={TouchEvent:function(vt){var Dt=Y(window,yt,0,gt[0],gt[1],dt[0],dt[1],lt[0],lt[1]),Mt=vt.initTouchEvent||vt.initEvent;Mt(it,!0,!0,window,null,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,Dt,Dt,Dt,1,0)},MouseEvents:function(vt){vt.initMouseEvent(it,!0,!0,window,0,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,1,yt)}};if(document.createEvent){var $=!rt&&!st&&C&&r[R],ut=$?"TouchEvent":"MouseEvents";pt=document.createEvent(ut),q[ut](pt),Z(pt),yt.dispatchEvent(pt)}else document.createEventObject&&(pt=document.createEventObject(),pt.eventType=pt.eventName=it,pt.screenX=dt[0],pt.screenY=dt[1],pt.clientX=lt[0],pt.clientY=lt[1],Z(pt),yt.fireEvent("on"+it,pt))}),this}},nt.Mottle.consume=function(n,o){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!o&&n.preventDefault&&n.preventDefault()},nt.Mottle.pageLocation=x,nt.Mottle.setForceTouchEvents=function(n){C=n},nt.Mottle.setForceMouseEvents=function(n){A=n},nt.Mottle.version="0.8.0",At.Mottle=nt.Mottle}.call(typeof window>"u"?kt:window),function(){var J=this,c=function(n,o,t){return n.indexOf(o)===-1?(t?n.unshift(o):n.push(o),!0):!1},Y=function(n,o){var t=n.indexOf(o);t!==-1&&n.splice(t,1)},nt=function(n,o){for(var t=[],p=0;p<n.length;p++)o.indexOf(n[p])===-1&&t.push(n[p]);return t},K=function(n){return n==null?!1:typeof n=="string"||n.constructor===String},et=function(n){var o=n.getBoundingClientRect(),t=document.body,p=document.documentElement,v=window.pageYOffset||p.scrollTop||t.scrollTop,F=window.pageXOffset||p.scrollLeft||t.scrollLeft,I=p.clientTop||t.clientTop||0,X=p.clientLeft||t.clientLeft||0,R=o.top+v-I,V=o.left+F-X;return{top:Math.round(R),left:Math.round(V)}},h=function(n,o,t){t=t||n.parentNode;for(var p=t.querySelectorAll(o),v=0;v<p.length;v++)if(p[v]===n)return!0;return!1},O=function(n,o,t){if(h(o,t,n))return o;for(var p=o.parentNode;p!=null&&p!==n;){if(h(p,t,n))return p;p=p.parentNode}},a=function(n,o,t){for(var p=null,v=o.getAttribute("katavorio-draggable"),F=v!=null?"[katavorio-draggable='"+v+"'] ":"",I=0;I<n.length;I++)if(p=O(o,t,F+n[I].selector),p!=null){if(n[I].filter){var X=h(t,n[I].filter,p),R=n[I].filterExclude===!0;if(R&&!X||X)return null}return[n[I],p]}return null},i=function(){var n=-1;if(navigator.appName==="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(n=parseFloat(RegExp.$1))}return n}(),m=10,S=10,T=i>-1&&i<9,P=i===9,g=function(n){if(T)return[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop];var o=M(n),t=e(o,0);return P?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},e=function(n,o){return n.item?n.item(o):n[o]},M=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},L={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},U="katavorio-drag-scope",G=["stop","start","drag","drop","over","out","beforeStart"],C=function(){},A=function(){return!0},r=function(n,o,t){for(var p=0;p<n.length;p++)n[p]!=t&&o(n[p])},f=function(n,o,t,p){r(n,function(v){v.setActive(o),o&&v.updatePosition(),t&&v.setHover(p,o)})},l=function(n,o){if(n!=null){n=!K(n)&&n.tagName==null&&n.length!=null?n:[n];for(var t=0;t<n.length;t++)o.apply(n[t],[n[t]])}},_=function(n){n.stopPropagation?(n.stopPropagation(),n.preventDefault()):n.returnValue=!1},x="input,textarea,select,button,option",u=function(n,o,t){var p=n.srcElement||n.target;return!h(p,t.getInputFilterSelector(),o)},j=function(n,o,t,p){this.params=o||{},this.el=n,this.params.addClass(this.el,this._class),this.uuid=N();var v=!0;return this.setEnabled=function(F){v=F},this.isEnabled=function(){return v},this.toggleEnabled=function(){v=!v},this.setScope=function(F){this.scopes=F?F.split(/\s+/):[p]},this.addScope=function(F){var I={};l(this.scopes,function(R){I[R]=!0}),l(F?F.split(/\s+/):[],function(R){I[R]=!0}),this.scopes=[];for(var X in I)this.scopes.push(X)},this.removeScope=function(F){var I={};l(this.scopes,function(R){I[R]=!0}),l(F?F.split(/\s+/):[],function(R){delete I[R]}),this.scopes=[];for(var X in I)this.scopes.push(X)},this.toggleScope=function(F){var I={};l(this.scopes,function(R){I[R]=!0}),l(F?F.split(/\s+/):[],function(R){I[R]?delete I[R]:I[R]=!0}),this.scopes=[];for(var X in I)this.scopes.push(X)},this.setScope(o.scope),this.k=o.katavorio,o.katavorio},b=function(){return!0},w=function(){return!1},d=function(n,o,t,p){this._class=t.draggable;var v=j.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var F=[0,0],I=null,X=null,R=[0,0],V=!1,at=[0,0],st=this.params.consumeStartEvent!==!1,it=this.el,rt=this.params.clone;this.params.scroll;var gt=o.multipleDrop!==!1,dt=!1,lt,yt,pt=null,Z=[],q=null,$=o.ghostProxyParent,ut,vt,Dt,Mt;if(o.ghostProxy===!0?lt=b:o.ghostProxy&&typeof o.ghostProxy=="function"?lt=o.ghostProxy:lt=function(Q,_t){return q&&q.useGhostProxy?q.useGhostProxy(Q,_t):!1},o.makeGhostProxy?yt=o.makeGhostProxy:yt=function(Q){return q&&q.makeGhostProxy?q.makeGhostProxy(Q):Q.cloneNode(!0)},o.selector){var Ft=n.getAttribute("katavorio-draggable");Ft==null&&(Ft=""+new Date().getTime(),n.setAttribute("katavorio-draggable",Ft)),Z.push(o)}var Gt=o.snapThreshold,Nt=function(Q,_t,Pt,bt,Et){var xt=Math.floor(Q[0]/_t),s=_t*xt,D=s+_t,y=Math.abs(Q[0]-s)<=bt?s:Math.abs(D-Q[0])<=bt?D:Q[0],k=Math.floor(Q[1]/Pt),H=Pt*k,z=H+Pt,tt=Math.abs(Q[1]-H)<=Et?H:Math.abs(z-Q[1])<=Et?z:Q[1];return[y,tt]};this.posses=[],this.posseRoles={},this.toGrid=function(Q){if(this.params.grid==null)return Q;var _t=this.params.grid?this.params.grid[0]/2:Gt||m/2,Pt=this.params.grid?this.params.grid[1]/2:Gt||S/2;return Nt(Q,this.params.grid[0],this.params.grid[1],_t,Pt)},this.snap=function(Q,_t){if(it!=null){Q=Q||(this.params.grid?this.params.grid[0]:m),_t=_t||(this.params.grid?this.params.grid[1]:S);var Pt=this.params.getPosition(it),bt=this.params.grid?this.params.grid[0]/2:Gt,Et=this.params.grid?this.params.grid[1]/2:Gt,xt=Nt(Pt,Q,_t,bt,Et);return this.params.setPosition(it,xt),xt}},this.setUseGhostProxy=function(Q){lt=Q?b:w};var Ut,ie=function(Q){return o.allowNegative===!1?[Math.max(0,Q[0]),Math.max(0,Q[1])]:Q},se=function(Q){Ut=typeof Q=="function"?Q:Q?function(_t,Pt,bt,Et){return ie([Math.max(0,Math.min(bt.w-Et[0],_t[0])),Math.max(0,Math.min(bt.h-Et[1],_t[1]))])}.bind(this):function(_t){return ie(_t)}}.bind(this);se(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(Q){se(Q)};var re=function(Q,_t,Pt,bt){return q!=null&&q.constrain&&typeof q.constrain=="function"?q.constrain(Q,_t,Pt,bt):Ut(Q,_t,Pt,bt)},Ht;this.setRevert=function(Q){Ht=Q},this.params.revert&&(Ht=this.params.revert);var Zt=function(Q){return typeof Q=="function"?(Q._katavorioId=N(),Q._katavorioId):Q},Bt={},Jt=function(Q){for(var _t in Bt){var Pt=Bt[_t],bt=Pt[0](Q);if(Pt[1]&&(bt=!bt),!bt)return!1}return!0},$t=this.setFilter=function(Q,_t){if(Q){var Pt=Zt(Q);Bt[Pt]=[function(bt){var Et=bt.srcElement||bt.target,xt;return K(Q)?xt=h(Et,Q,n):typeof Q=="function"&&(xt=Q(bt,n)),xt},_t!==!1]}};this.addFilter=$t,this.removeFilter=function(Q){var _t=typeof Q=="function"?Q._katavorioId:Q;delete Bt[_t]},this.clearAllFilters=function(){Bt={}},this.canDrag=this.params.canDrag||A;var Qt,jt=[],Wt=[];this.addSelector=function(Q){Q.selector&&Z.push(Q)},this.downListener=function(Q){if(!Q.defaultPrevented){var _t=this.rightButtonCanDrag||Q.which!==3&&Q.button!==2;if(_t&&this.isEnabled()&&this.canDrag()){var Pt=Jt(Q)&&u(Q,this.el,this.k);if(Pt){if(q=null,pt=null,Z.length>0){var bt=a(Z,this.el,Q.target||Q.srcElement);if(bt!=null&&(q=bt[0],pt=bt[1]),pt==null)return}else pt=this.el;if(rt)if(it=pt.cloneNode(!0),this.params.addClass(it,L.clonedDrag),it.setAttribute("id",null),it.style.position="absolute",this.params.parent!=null){var Et=this.params.getPosition(this.el);it.style.left=Et[0]+"px",it.style.top=Et[1]+"px",this.params.parent.appendChild(it)}else{var xt=et(pt);it.style.left=xt.left+"px",it.style.top=xt.top+"px",document.body.appendChild(it)}else it=pt;st&&_(Q),F=g(Q),it&&it.parentNode&&(at=[it.parentNode.scrollLeft,it.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),v.markSelection(this),v.markPosses(this),this.params.addClass(document.body,t.noSelect),Yt("beforeStart",{el:this.el,pos:I,e:Q,drag:this})}else this.params.consumeFilteredEvents&&_(Q)}}}.bind(this),this.moveListener=function(Q){if(F){if(!V){var _t=Yt("start",{el:this.el,pos:I,e:Q,drag:this});if(_t!==!1){if(!F)return;this.mark(!0),V=!0}else this.abort()}if(F){Wt.length=0;var Pt=g(Q),bt=Pt[0]-F[0],Et=Pt[1]-F[1],xt=this.params.ignoreZoom?1:v.getZoom();it&&it.parentNode&&(bt+=it.parentNode.scrollLeft-at[0],Et+=it.parentNode.scrollTop-at[1]),bt/=xt,Et/=xt,this.moveBy(bt,Et,Q),v.updateSelection(bt,Et,this),v.updatePosses(bt,Et,this)}}}.bind(this),this.upListener=function(Q){F&&(F=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,t.noSelect),this.unmark(Q),v.unmarkSelection(this,Q),v.unmarkPosses(this,Q),this.stop(Q),v.notifyPosseDragStop(this,Q),V=!1,Wt.length=0,rt?(it&&it.parentNode&&it.parentNode.removeChild(it),it=null):Ht&&Ht(it,this.params.getPosition(it))===!0&&(this.params.setPosition(it,I),Yt("revert",it)))}.bind(this),this.getFilters=function(){return Bt},this.abort=function(){F!=null&&this.upListener()},this.getDragElement=function(Q){return Q?pt||this.el:it||this.el};var Tt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};o.events.start&&Tt.start.push(o.events.start),o.events.beforeStart&&Tt.beforeStart.push(o.events.beforeStart),o.events.stop&&Tt.stop.push(o.events.stop),o.events.drag&&Tt.drag.push(o.events.drag),o.events.revert&&Tt.revert.push(o.events.revert),this.on=function(Q,_t){Tt[Q]&&Tt[Q].push(_t)},this.off=function(Q,_t){if(Tt[Q]){for(var Pt=[],bt=0;bt<Tt[Q].length;bt++)Tt[Q][bt]!==_t&&Pt.push(Tt[Q][bt]);Tt[Q]=Pt}};var Yt=function(Q,_t){var Pt=null;if(q&&q[Q])Pt=q[Q](_t);else if(Tt[Q])for(var bt=0;bt<Tt[Q].length;bt++)try{var Et=Tt[Q][bt](_t);Et!=null&&(Pt=Et)}catch{}return Pt};this.notifyStart=function(Q){Yt("start",{el:this.el,pos:this.params.getPosition(it),e:Q,drag:this})},this.stop=function(Q,_t){if(_t||V){var Pt=[],bt=v.getSelection(),Et=this.params.getPosition(it);if(bt.length>0)for(var xt=0;xt<bt.length;xt++){var s=this.params.getPosition(bt[xt].el);Pt.push([bt[xt].el,{left:s[0],top:s[1]},bt[xt]])}else Pt.push([it,{left:Et[0],top:Et[1]},this]);Yt("stop",{el:it,pos:zt||Et,finalPos:Et,e:Q,drag:this,selection:Pt})}},this.mark=function(Q){I=this.params.getPosition(it),X=this.params.getPosition(it,!0),R=[X[0]-I[0],X[1]-I[1]],this.size=this.params.getSize(it),jt=v.getMatchingDroppables(this),f(jt,!0,!1,this),this.params.addClass(it,this.params.dragClass||t.drag);var _t;this.params.getConstrainingRectangle?_t=this.params.getConstrainingRectangle(it):_t=this.params.getSize(it.parentNode),Qt={w:_t[0],h:_t[1]},Dt=0,Mt=0,Q&&v.notifySelectionDragStart(this)};var zt;this.unmark=function(Q,_t){if(f(jt,!1,!0,this),dt&&lt(pt,it)?(zt=[it.offsetLeft-Dt,it.offsetTop-Mt],it.parentNode.removeChild(it),it=pt):zt=null,this.params.removeClass(it,this.params.dragClass||t.drag),jt.length=0,dt=!1,!_t){Wt.length>0&&zt&&o.setPosition(pt,zt),Wt.sort(B);for(var Pt=0;Pt<Wt.length;Pt++){var bt=Wt[Pt].drop(this,Q);if(bt===!0)break}}},this.moveBy=function(Q,_t,Pt){Wt.length=0;var bt=this.toGrid([I[0]+Q,I[1]+_t]),Et=re(bt,it,Qt,this.size);if(lt(this.el,it))if(bt[0]!==Et[0]||bt[1]!==Et[1]){if(!dt){var xt=yt(pt);o.addClass(xt,L.ghostProxy),$?($.appendChild(xt),ut=o.getPosition(pt.parentNode,!0),vt=o.getPosition(o.ghostProxyParent,!0),Dt=ut[0]-vt[0],Mt=ut[1]-vt[1]):pt.parentNode.appendChild(xt),it=xt,dt=!0}Et=bt}else dt&&(it.parentNode.removeChild(it),it=pt,dt=!1,ut=null,vt=null,Dt=0,Mt=0);var s={x:Et[0],y:Et[1],w:this.size[0],h:this.size[1]},D={x:s.x+R[0],y:s.y+R[1],w:s.w,h:s.h},y=null;this.params.setPosition(it,[Et[0]+Dt,Et[1]+Mt]);for(var k=0;k<jt.length;k++){var H={x:jt[k].pagePosition[0],y:jt[k].pagePosition[1],w:jt[k].size[0],h:jt[k].size[1]};this.params.intersects(D,H)&&(gt||y==null||y===jt[k].el)&&jt[k].canDrop(this)?(y||(y=jt[k].el),Wt.push(jt[k]),jt[k].setHover(this,!0,Pt)):jt[k].isHover()&&jt[k].setHover(this,!1,Pt)}Yt("drag",{el:this.el,pos:Et,e:Pt,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?$t(this.params.handle,!1):$t(this.params.filter,this.params.filterExclude)},E=function(n,o,t,p){this._class=t.droppable,this.params=o||{},this.rank=o.rank||0,this._activeClass=this.params.activeClass||t.active,this._hoverClass=this.params.hoverClass||t.hover,j.apply(this,arguments);var v=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(F){this.params[F?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(F){return!0},this.isHover=function(){return v},this.setHover=function(F,I,X){(I||this.el._katavorioDragHover==null||this.el._katavorioDragHover===F.el._katavorio)&&(this.params[I?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=I?F.el._katavorio:null,v!==I&&this.params.events[I?"over":"out"]({el:this.el,e:X,drag:F,drop:this}),v=I)},this.drop=function(F,I){return this.params.events.drop({drag:F,e:I,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,v=null}},N=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,t=n==="x"?o:o&3|8;return t.toString(16)})},B=function(n,o){return n.rank<o.rank?1:n.rank>o.rank?-1:0},W=function(n){return n==null||(n=typeof n=="string"||n.constructor===String?document.getElementById(n):n,n==null)?null:(n._katavorio=n._katavorio||N(),n)};J.Katavorio=function(n){var o=[],t={};this._dragsByScope={},this._dropsByScope={};var p=1,v=function(Z,q){l(Z,function($){for(var ut=0;ut<$.scopes.length;ut++)q[$.scopes[ut]]=q[$.scopes[ut]]||[],q[$.scopes[ut]].push($)})},F=function(Z,q){var $=0;return l(Z,function(ut){for(var vt=0;vt<ut.scopes.length;vt++)if(q[ut.scopes[vt]]){var Dt=n.indexOf(q[ut.scopes[vt]],ut);Dt!==-1&&(q[ut.scopes[vt]].splice(Dt,1),$++)}}),$>0};this.getMatchingDroppables=function(Z){for(var q=[],$={},ut=0;ut<Z.scopes.length;ut++){var vt=this._dropsByScope[Z.scopes[ut]];if(vt)for(var Dt=0;Dt<vt.length;Dt++)vt[Dt].canDrop(Z)&&!$[vt[Dt].uuid]&&(vt[Dt].allowLoopback||vt[Dt].el!==Z.el)&&($[vt[Dt].uuid]=!0,q.push(vt[Dt]))}return q.sort(B),q};var I=function(Z){Z=Z||{};var q={events:{}},$;for($ in n)q[$]=n[$];for($ in Z)q[$]=Z[$];for($=0;$<G.length;$++)q.events[G[$]]=Z[G[$]]||C;return q.katavorio=this,q}.bind(this),X=function(Z,q){for(var $=0;$<G.length;$++)q[G[$]]&&Z.on(G[$],q[G[$]])}.bind(this),R={},V=n.css||{},at=n.scope||U;for(var st in L)R[st]=L[st];for(var st in V)R[st]=V[st];var it=n.inputFilterSelector||x;this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(Z){return it=Z,this},this.draggable=function(Z,q){var $=[];return l(Z,function(ut){if(ut=W(ut),ut!=null)if(ut._katavorioDrag==null){var vt=I(q);ut._katavorioDrag=new d(ut,vt,R,at),v(ut._katavorioDrag,this._dragsByScope),$.push(ut._katavorioDrag),n.addClass(ut,vt.selector?R.delegatedDraggable:R.draggable)}else X(ut._katavorioDrag,q)}.bind(this)),$},this.droppable=function(Z,q){var $=[];return l(Z,function(ut){if(ut=W(ut),ut!=null){var vt=new E(ut,I(q),R,at);ut._katavorioDrop=ut._katavorioDrop||[],ut._katavorioDrop.push(vt),v(vt,this._dropsByScope),$.push(vt),n.addClass(ut,R.droppable)}}.bind(this)),$},this.select=function(Z){return l(Z,function(){var q=W(this);q&&q._katavorioDrag&&(t[q._katavorio]||(o.push(q._katavorioDrag),t[q._katavorio]=[q,o.length-1],n.addClass(q,R.selected)))}),this},this.deselect=function(Z){return l(Z,function(){var q=W(this);if(q&&q._katavorio){var $=t[q._katavorio];if($){for(var ut=[],vt=0;vt<o.length;vt++)o[vt].el!==q&&ut.push(o[vt]);o=ut,delete t[q._katavorio],n.removeClass(q,R.selected)}}}),this},this.deselectAll=function(){for(var Z in t){var q=t[Z];n.removeClass(q[0],R.selected)}o.length=0,t={}},this.markSelection=function(Z){r(o,function(q){q.mark()},Z)},this.markPosses=function(Z){Z.posses&&l(Z.posses,function(q){Z.posseRoles[q]&&yt[q]&&r(yt[q].members,function($){$.mark()},Z)})},this.unmarkSelection=function(Z,q){r(o,function($){$.unmark(q)},Z)},this.unmarkPosses=function(Z,q){Z.posses&&l(Z.posses,function($){Z.posseRoles[$]&&yt[$]&&r(yt[$].members,function(ut){ut.unmark(q,!0)},Z)})},this.getSelection=function(){return o.slice(0)},this.updateSelection=function(Z,q,$){r(o,function(ut){ut.moveBy(Z,q)},$)};var rt=function(Z,q){q.posses&&l(q.posses,function($){q.posseRoles[$]&&yt[$]&&r(yt[$].members,function(ut){Z(ut)},q)})};this.updatePosses=function(Z,q,$){rt(function(ut){ut.moveBy(Z,q)},$)},this.notifyPosseDragStop=function(Z,q){rt(function($){$.stop(q,!0)},Z)},this.notifySelectionDragStop=function(Z,q){r(o,function($){$.stop(q,!0)},Z)},this.notifySelectionDragStart=function(Z,q){r(o,function($){$.notifyStart(q)},Z)},this.setZoom=function(Z){p=Z},this.getZoom=function(){return p};var gt=function(Z,q,$,ut){l(Z,function(vt){F(vt,$),vt[ut](q),v(vt,$)})};l(["set","add","remove","toggle"],function(Z){this[Z+"Scope"]=function(q,$){gt(q._katavorioDrag,$,this._dragsByScope,Z+"Scope"),gt(q._katavorioDrop,$,this._dropsByScope,Z+"Scope")}.bind(this),this[Z+"DragScope"]=function(q,$){gt(q.constructor===d?q:q._katavorioDrag,$,this._dragsByScope,Z+"Scope")}.bind(this),this[Z+"DropScope"]=function(q,$){gt(q.constructor===E?q:q._katavorioDrop,$,this._dropsByScope,Z+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(Z,q){for(var $ in this._dragsByScope)r(this._dragsByScope[$],function(ut){ut.snap(Z,q)})},this.getDragsForScope=function(Z){return this._dragsByScope[Z]},this.getDropsForScope=function(Z){return this._dropsByScope[Z]};var dt=function(Z,q,$){if(Z=W(Z),Z[q]){var ut=o.indexOf(Z[q]);ut>=0&&o.splice(ut,1),F(Z[q],$)&&l(Z[q],function(vt){vt.destroy()}),delete Z[q]}},lt=function(Z,q,$,ut){Z=W(Z),Z[q]&&Z[q].off($,ut)};this.elementRemoved=function(Z){Z._katavorioDrag&&this.destroyDraggable(Z),Z._katavorioDrop&&this.destroyDroppable(Z)},this.destroyDraggable=function(Z,q,$){arguments.length===1?dt(Z,"_katavorioDrag",this._dragsByScope):lt(Z,"_katavorioDrag",q,$)},this.destroyDroppable=function(Z,q,$){arguments.length===1?dt(Z,"_katavorioDrop",this._dropsByScope):lt(Z,"_katavorioDrop",q,$)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},o=[],t={},yt={}};var yt={},pt=function(Z,q,$){var ut=K(q)?q:q.id,vt=K(q)?!0:q.active!==!1,Dt=yt[ut]||function(){var Mt={name:ut,members:[]};return yt[ut]=Mt,Mt}();return l(Z,function(Mt){if(Mt._katavorioDrag){if($&&Mt._katavorioDrag.posseRoles[Dt.name]!=null)return;c(Dt.members,Mt._katavorioDrag),c(Mt._katavorioDrag.posses,Dt.name),Mt._katavorioDrag.posseRoles[Dt.name]=vt}}),Dt};this.addToPosse=function(Z,q){for(var $=[],ut=1;ut<arguments.length;ut++)$.push(pt(Z,arguments[ut]));return $.length===1?$[0]:$},this.setPosse=function(Z,q){for(var $=[],ut=1;ut<arguments.length;ut++)$.push(pt(Z,arguments[ut],!0).name);return l(Z,function(vt){if(vt._katavorioDrag){var Dt=nt(vt._katavorioDrag.posses,$),Mt=[];Array.prototype.push.apply(Mt,vt._katavorioDrag.posses);for(var Ft=0;Ft<Dt.length;Ft++)this.removeFromPosse(vt,Dt[Ft])}}.bind(this)),$.length===1?$[0]:$},this.removeFromPosse=function(Z,q){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var $=1;$<arguments.length;$++)q=arguments[$],l(Z,function(ut){if(ut._katavorioDrag&&ut._katavorioDrag.posses){var vt=ut._katavorioDrag;l(q,function(Dt){Y(yt[Dt].members,vt),Y(vt.posses,Dt),delete vt.posseRoles[Dt]})}})},this.removeFromAllPosses=function(Z){l(Z,function(q){if(q._katavorioDrag&&q._katavorioDrag.posses){var $=q._katavorioDrag;l($.posses,function(ut){Y(yt[ut].members,$)}),$.posses.length=0,$.posseRoles={}}})},this.setPosseState=function(Z,q,$){var ut=yt[q];ut&&l(Z,function(vt){vt._katavorioDrag&&vt._katavorioDrag.posses&&(vt._katavorioDrag.posseRoles[ut.name]=$)})}},J.Katavorio.version="1.0.0",At.Katavorio=J.Katavorio}.call(typeof window<"u"?window:kt),function(){var J=this;J.jsPlumbUtil=J.jsPlumbUtil||{};var c=J.jsPlumbUtil;At.jsPlumbUtil=c;function Y(n){return Object.prototype.toString.call(n)==="[object Array]"}c.isArray=Y;function nt(n){return Object.prototype.toString.call(n)==="[object Number]"}c.isNumber=nt;function K(n){return typeof n=="string"}c.isString=K;function et(n){return typeof n=="boolean"}c.isBoolean=et;function h(n){return n==null}c.isNull=h;function O(n){return n==null?!1:Object.prototype.toString.call(n)==="[object Object]"}c.isObject=O;function a(n){return Object.prototype.toString.call(n)==="[object Date]"}c.isDate=a;function i(n){return Object.prototype.toString.call(n)==="[object Function]"}c.isFunction=i;function m(n){return i(n)&&n.name!=null&&n.name.length>0}c.isNamedFunction=m;function S(n){for(var o in n)if(n.hasOwnProperty(o))return!1;return!0}c.isEmpty=S;function T(n){if(K(n))return""+n;if(et(n))return!!n;if(a(n))return new Date(n.getTime());if(i(n))return n;if(Y(n)){for(var o=[],t=0;t<n.length;t++)o.push(T(n[t]));return o}else if(O(n)){var p={};for(var v in n)p[v]=T(n[v]);return p}else return n}c.clone=T;function P(n,o,t,p){var v={},F,I,X={};for(t=t||[],p=p||[],I=0;I<t.length;I++)v[t[I]]=!0;for(I=0;I<p.length;I++)X[p[I]]=!0;var R=T(n);for(I in o)if(R[I]==null||X[I])R[I]=o[I];else if(K(o[I])||et(o[I]))v[I]?(F=[],F.push.apply(F,Y(R[I])?R[I]:[R[I]]),F.push.apply(F,et(o[I])?o[I]:[o[I]]),R[I]=F):R[I]=o[I];else if(Y(o[I]))F=[],Y(R[I])&&F.push.apply(F,R[I]),F.push.apply(F,o[I]),R[I]=F;else if(O(o[I])){O(R[I])||(R[I]={});for(var V in o[I])R[I][V]=o[I][V]}return R}c.merge=P;function g(n,o,t){if(n!=null){var p=n,v=p;return o.replace(/([^\.])+/g,function(F,I,X,R){var V=F.match(/([^\[0-9]+){1}(\[)([0-9+])/),at=X+F.length>=R.length,st=function(){return v[V[1]]||function(){return v[V[1]]=[],v[V[1]]}()};if(at)V?st()[V[3]]=t:v[F]=t;else if(V){var it=st();v=it[V[3]]||function(){return it[V[3]]={},it[V[3]]}()}else v=v[F]||function(){return v[F]={},v[F]}();return""}),n}}c.replace=g;function e(n,o,t){for(var p=0;p<t.length;p++){var v=t[p][0][t[p][1]].apply(t[p][0],t[p][2]);if(v===o)return v}return n}c.functionChain=e;function M(n,o,t,p){var v=function(I){var X=I.match(/(\${.*?})/g);if(X!=null)for(var R=0;R<X.length;R++){var V=o[X[R].substring(2,X[R].length-1)]||"";V!=null&&(I=I.replace(X[R],V))}return I},F=function(I){if(I!=null){if(K(I))return v(I);if(i(I)&&!p&&(t==null||(I.name||"").indexOf(t)===0))return I(o);if(Y(I)){for(var X=[],R=0;R<I.length;R++)X.push(F(I[R]));return X}else if(O(I)){var V={};for(var at in I)V[at]=F(I[at]);return V}else return I}};return F(n)}c.populate=M;function L(n,o){if(n){for(var t=0;t<n.length;t++)if(o(n[t]))return t}return-1}c.findWithFunction=L;function U(n,o){var t=L(n,o);return t>-1&&n.splice(t,1),t!==-1}c.removeWithFunction=U;function G(n,o){var t=n.indexOf(o);return t>-1&&n.splice(t,1),t!==-1}c.remove=G;function C(n,o,t){L(n,t)===-1&&n.push(o)}c.addWithFunction=C;function A(n,o,t,p){var v=n[o];return v==null&&(v=[],n[o]=v),v[p?"unshift":"push"](t),v}c.addToList=A;function r(n,o,t){return n.indexOf(o)===-1?(t?n.unshift(o):n.push(o),!0):!1}c.suggest=r;function f(n,o,t){var p;o=Y(o)?o:[o];var v=function(R){for(var V=R.__proto__;V!=null;)if(V.prototype!=null){for(var at in V.prototype)V.prototype.hasOwnProperty(at)&&!n.prototype.hasOwnProperty(at)&&(n.prototype[at]=V.prototype[at]);V=V.prototype.__proto__}else V=null};for(p=0;p<o.length;p++){for(var F in o[p].prototype)o[p].prototype.hasOwnProperty(F)&&!n.prototype.hasOwnProperty(F)&&(n.prototype[F]=o[p].prototype[F]);v(o[p])}var I=function(R,V){return function(){for(p=0;p<o.length;p++)o[p].prototype[R]&&o[p].prototype[R].apply(this,arguments);return V.apply(this,arguments)}},X=function(R){for(var V in R)n.prototype[V]=I(V,R[V])};if(arguments.length>2)for(p=2;p<arguments.length;p++)X(arguments[p]);return n}c.extend=f;for(var l=[],_=0;_<256;_++)l[_]=(_<16?"0":"")+_.toString(16);function x(){var n=Math.random()*4294967295|0,o=Math.random()*4294967295|0,t=Math.random()*4294967295|0,p=Math.random()*4294967295|0;return l[n&255]+l[n>>8&255]+l[n>>16&255]+l[n>>24&255]+"-"+l[o&255]+l[o>>8&255]+"-"+l[o>>16&15|64]+l[o>>24&255]+"-"+l[t&63|128]+l[t>>8&255]+"-"+l[t>>16&255]+l[t>>24&255]+l[p&255]+l[p>>8&255]+l[p>>16&255]+l[p>>24&255]}c.uuid=x;function u(n){if(n==null)return null;for(var o=n.replace(/^\s\s*/,""),t=/\s/,p=o.length;t.test(o.charAt(--p)););return o.slice(0,p+1)}c.fastTrim=u;function j(n,o){n=n.length==null||typeof n=="string"?[n]:n;for(var t=0;t<n.length;t++)o(n[t])}c.each=j;function b(n,o){for(var t=[],p=0;p<n.length;p++)t.push(o(n[p]));return t}c.map=b;function w(n,o,t){t=t||"parent";var p=function(R){return R?o[R]:null},v=function(R){return R?p(R[t]):null},F=function(R,V){if(R==null)return V;var at=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];V.mergeStrategy==="override"&&Array.prototype.push.apply(at,["events","overlays"]);var st=P(R,V,[],at);return F(v(R),st)},I=function(R){if(R==null)return{};if(typeof R=="string")return p(R);if(R.length){for(var V=!1,at=0,st=void 0;!V&&at<R.length;)st=I(R[at]),st?V=!0:at++;return st}},X=I(n);return X?F(v(X),X):{}}c.mergeWithParents=w,c.logEnabled=!0;function d(){if(c.logEnabled&&typeof console<"u")try{var n=arguments[arguments.length-1];console.log(n)}catch{}}c.log=d;function E(n,o,t){return function(){var p=null;try{o!=null&&(p=o.apply(this,arguments))}catch(v){d("jsPlumb function failed : "+v)}if(n!=null&&(t==null||p!==t))try{p=n.apply(this,arguments)}catch(v){d("wrapped function failed : "+v)}return p}}c.wrap=E;var N=function(){function n(){var o=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,p,v){var F=function(X){A(o._listeners,X,p,v),p.__jsPlumb=p.__jsPlumb||{},p.__jsPlumb[x()]=X};if(typeof t=="string")F(t);else if(t.length!=null)for(var I=0;I<t.length;I++)F(t[I]);return o},this.fire=function(t,p,v){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var F=this._listeners[t].length,I=0,X=!1,R=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,p,v))for(;!X&&I<F&&R!==!1;){if(this.eventsToDieOn[t])this._listeners[t][I].apply(this,[p,v]);else try{R=this._listeners[t][I].apply(this,[p,v])}catch(V){d("jsPlumb: fire failed for event "+t+" : "+V)}I++,(this._listeners==null||this._listeners[t]==null)&&(X=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=o.queue.pop();t&&o.fire.apply(o,t)},this.unbind=function(t,p){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var v=void 0;for(var F in t.__jsPlumb)v=t.__jsPlumb[F],G(this._listeners[v]||[],t)}}else arguments.length===2&&G(this._listeners[t]||[],p);return this},this.getListener=function(t){return o._listeners[t]},this.setSuspendEvents=function(t){o.eventsSuspended=t},this.isSuspendEvents=function(){return o.eventsSuspended},this.silently=function(t){o.setSuspendEvents(!0);try{t()}catch(p){d("Cannot execute silent function "+p)}o.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in o._listeners)o._listeners[t]=null}}return n}();c.EventGenerator=N;function B(n,o,t){var p=[n[0]-o[0],n[1]-o[1]],v=Math.cos(t/360*Math.PI*2),F=Math.sin(t/360*Math.PI*2);return[p[0]*v-p[1]*F+o[0],p[1]*v+p[0]*F+o[1],v,F]}c.rotatePoint=B;function W(n,o){var t=B(n,[0,0],o);return[Math.round(t[0]),Math.round(t[1])]}c.rotateAnchorOrientation=W}.call(typeof window<"u"?window:kt),function(){var J=this;J.jsPlumbUtil.matchesSelector=function(c,Y,nt){nt=nt||c.parentNode;for(var K=nt.querySelectorAll(Y),et=0;et<K.length;et++)if(K[et]===c)return!0;return!1},J.jsPlumbUtil.consume=function(c,Y){c.stopPropagation?c.stopPropagation():c.returnValue=!1,!Y&&c.preventDefault&&c.preventDefault()},J.jsPlumbUtil.sizeElement=function(c,Y,nt,K,et){c&&(c.style.height=et+"px",c.height=et,c.style.width=K+"px",c.width=K,c.style.left=Y+"px",c.style.top=nt+"px")}}.call(typeof window<"u"?window:kt),function(){var J={deriveAnchor:function(K,et,h,O){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[K][et]}},c=this,Y=function(K,et){this.count=0,this.instance=K,this.lists={},this.options=et||{},this.instance.addList=function(h,O){return this.listManager.addList(h,O)},this.instance.removeList=function(h){this.listManager.removeList(h)},this.instance.bind("manageElement",function(h){for(var O=this.instance.getSelector(h.el,"[jtk-scrollable-list]"),a=0;a<O.length;a++)this.addList(O[a])}.bind(this)),this.instance.bind("unmanageElement",function(h){this.removeList(h.el)}),this.instance.bind("connection",function(h,O){O==null&&(this._maybeUpdateParentList(h.source),this._maybeUpdateParentList(h.target))}.bind(this))};c.jsPlumbListManager=Y,Y.prototype={addList:function(K,et){var h=this.instance.extend({},J);this.instance.extend(h,this.options),et=this.instance.extend(h,et||{});var O=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[O]=new nt(this.instance,K,et,O)},removeList:function(K){var et=this.lists[K._jsPlumbList];et&&(et.destroy(),delete this.lists[K._jsPlumbList])},_maybeUpdateParentList:function(K){for(var et=K.parentNode,h=this.instance.getContainer();et!=null&&et!==h;){if(et._jsPlumbList!=null&&this.lists[et._jsPlumbList]!=null){et._jsPlumbScrollHandler();return}et=et.parentNode}}};var nt=function(K,et,h,O){et._jsPlumbList=O;function a(T,P,g,e){return h.anchor?h.anchor:h.deriveAnchor(T,P,g,e)}function i(T,P,g,e){return h.deriveEndpoint?h.deriveEndpoint(T,P,g,e):h.endpoint?h.endpoint:g.type}function m(T){for(var P=T.parentNode,g=K.getContainer();P!=null&&P!==g;){if(K.hasClass(P,"jtk-managed")){K.recalculateOffsets(P);return}P=P.parentNode}}var S=function(T){for(var P=K.getSelector(et,".jtk-managed"),g=K.getId(et),e=0;e<P.length;e++){if(P[e].offsetTop<et.scrollTop)P[e]._jsPlumbProxies||(P[e]._jsPlumbProxies=P[e]._jsPlumbProxies||[],K.select({source:P[e]}).each(function(L){K.proxyConnection(L,0,et,g,function(){return i("top",0,L.endpoints[0],L)},function(){return a("top",0,L.endpoints[0],L)}),P[e]._jsPlumbProxies.push([L,0])}),K.select({target:P[e]}).each(function(L){K.proxyConnection(L,1,et,g,function(){return i("top",1,L.endpoints[1],L)},function(){return a("top",1,L.endpoints[1],L)}),P[e]._jsPlumbProxies.push([L,1])}));else if(P[e].offsetTop+P[e].offsetHeight>et.scrollTop+et.offsetHeight)P[e]._jsPlumbProxies||(P[e]._jsPlumbProxies=P[e]._jsPlumbProxies||[],K.select({source:P[e]}).each(function(L){K.proxyConnection(L,0,et,g,function(){return i("bottom",0,L.endpoints[0],L)},function(){return a("bottom",0,L.endpoints[0],L)}),P[e]._jsPlumbProxies.push([L,0])}),K.select({target:P[e]}).each(function(L){K.proxyConnection(L,1,et,g,function(){return i("bottom",1,L.endpoints[1],L)},function(){return a("bottom",1,L.endpoints[1],L)}),P[e]._jsPlumbProxies.push([L,1])}));else if(P[e]._jsPlumbProxies){for(var M=0;M<P[e]._jsPlumbProxies.length;M++)K.unproxyConnection(P[e]._jsPlumbProxies[M][0],P[e]._jsPlumbProxies[M][1],g);delete P[e]._jsPlumbProxies}K.revalidate(P[e])}m(et)};K.setAttribute(et,"jtk-scrollable-list","true"),et._jsPlumbScrollHandler=S,K.on(et,"scroll",S),S(),this.destroy=function(){K.off(et,"scroll",S),delete et._jsPlumbScrollHandler;for(var T=K.getSelector(et,".jtk-managed"),P=K.getId(et),g=0;g<T.length;g++)if(T[g]._jsPlumbProxies){for(var e=0;e<T[g]._jsPlumbProxies.length;e++)K.unproxyConnection(T[g]._jsPlumbProxies[e][0],T[g]._jsPlumbProxies[e][1],P);delete T[g]._jsPlumbProxies}}}}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumbUtil,Y=function(g){if(g._jsPlumb.paintStyle&&g._jsPlumb.hoverPaintStyle){var e={};P.extend(e,g._jsPlumb.paintStyle),P.extend(e,g._jsPlumb.hoverPaintStyle),delete g._jsPlumb.hoverPaintStyle,e.gradient&&g._jsPlumb.paintStyle.fill&&delete e.gradient,g._jsPlumb.hoverPaintStyle=e}},nt=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],K=function(g,e,M,L){var U=g.getAttachedElements();if(U)for(var G=0,C=U.length;G<C;G++)(!L||L!==U[G])&&U[G].setHover(e,!0,M)},et=function(g){return g==null?null:g.split(" ")},h=function(g,e,M){for(var L in e)g[L]=M},O=function(g,e,M){if(g.getDefaultType){var L=g.getTypeDescriptor(),U={},G=g.getDefaultType(),C=c.merge({},G);h(U,G,"__default");for(var A=0,r=g._jsPlumb.types.length;A<r;A++){var f=g._jsPlumb.types[A];if(f!=="__default"){var l=g._jsPlumb.instance.getType(f,L);if(l!=null){var _=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],x=[];l.mergeStrategy==="override"?Array.prototype.push.apply(_,["events","overlays","cssClass"]):x.push("cssClass"),C=c.merge(C,l,x,_),h(U,l,f)}}}e&&(C=c.populate(C,e,"_")),g.applyType(C,M,U),M||g.repaint()}},a=J.jsPlumbUIComponent=function(g){c.EventGenerator.apply(this,arguments);var e=this,M=arguments,L=e.idPrefix,U=L+new Date().getTime();this._jsPlumb={instance:g._jsPlumb,parameters:g.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:g.beforeDetach,beforeDrop:g.beforeDrop,overlayPlacements:[],hoverClass:g.hoverClass||g._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(x,u,j){this._jsPlumb.typeCache[j]=this._jsPlumb.typeCache[j]||{},this._jsPlumb.typeCache[j][x]=u},this.getCachedTypeItem=function(x,u){return this._jsPlumb.typeCache[u]?this._jsPlumb.typeCache[u][x]:null},this.getId=function(){return U};var G=g.overlays||[],C={};if(this.defaultOverlayKeys){for(var A=0;A<this.defaultOverlayKeys.length;A++)Array.prototype.push.apply(G,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[A]]||[]);for(A=0;A<G.length;A++){var r=P.convertToFullOverlaySpec(G[A]);C[r[1].id]=r}}var f={overlays:C,parameters:g.parameters||{},scope:g.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return f},this.appendToDefaultType=function(x){for(var u in x)f[u]=x[u]},g.events)for(var l in g.events)e.bind(l,g.events[l]);this.clone=function(){var x=Object.create(this.constructor.prototype);return this.constructor.apply(x,M),x}.bind(this),this.isDetachAllowed=function(x){var u=!0;if(this._jsPlumb.beforeDetach)try{u=this._jsPlumb.beforeDetach(x)}catch(j){c.log("jsPlumb: beforeDetach callback failed",j)}return u},this.isDropAllowed=function(x,u,j,b,w,d,E){var N=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:x,targetId:u,scope:j,connection:b,dropEndpoint:w,source:d,target:E});if(this._jsPlumb.beforeDrop)try{N=this._jsPlumb.beforeDrop({sourceId:x,targetId:u,scope:j,connection:b,dropEndpoint:w,source:d,target:E})}catch(B){c.log("jsPlumb: beforeDrop callback failed",B)}return N};var _=[];this.setListenerComponent=function(x){for(var u=0;u<_.length;u++)_[u][3]=x}},i=function(g,e){var M=g._jsPlumb.types[e],L=g._jsPlumb.instance.getType(M,g.getTypeDescriptor());L!=null&&L.cssClass&&g.canvas&&g._jsPlumb.instance.removeClass(g.canvas,L.cssClass)};c.extend(J.jsPlumbUIComponent,c.EventGenerator,{getParameter:function(g){return this._jsPlumb.parameters[g]},setParameter:function(g,e){this._jsPlumb.parameters[g]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(g){this._jsPlumb.parameters=g},getClass:function(){return P.getClass(this.canvas)},hasClass:function(g){return P.hasClass(this.canvas,g)},addClass:function(g){P.addClass(this.canvas,g)},removeClass:function(g){P.removeClass(this.canvas,g)},updateClasses:function(g,e){P.updateClasses(this.canvas,g,e)},setType:function(g,e,M){this.clearTypes(),this._jsPlumb.types=et(g)||[],O(this,e,M)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(g,e){O(this,g,e)},hasType:function(g){return this._jsPlumb.types.indexOf(g)!==-1},addType:function(g,e,M){var L=et(g),U=!1;if(L!=null){for(var G=0,C=L.length;G<C;G++)this.hasType(L[G])||(this._jsPlumb.types.push(L[G]),U=!0);U&&O(this,e,M)}},removeType:function(g,e,M){var L=et(g),U=!1,G=function(r){var f=this._jsPlumb.types.indexOf(r);return f!==-1?(i(this,f),this._jsPlumb.types.splice(f,1),!0):!1}.bind(this);if(L!=null){for(var C=0,A=L.length;C<A;C++)U=G(L[C])||U;U&&O(this,e,M)}},clearTypes:function(g,e){for(var M=this._jsPlumb.types.length,L=0;L<M;L++)i(this,0),this._jsPlumb.types.splice(0,1);O(this,g,e)},toggleType:function(g,e,M){var L=et(g);if(L!=null){for(var U=0,G=L.length;U<G;U++){var C=this._jsPlumb.types.indexOf(L[U]);C!==-1?(i(this,C),this._jsPlumb.types.splice(C,1)):this._jsPlumb.types.push(L[U])}O(this,e,M)}},applyType:function(g,e){if(this.setPaintStyle(g.paintStyle,e),this.setHoverPaintStyle(g.hoverPaintStyle,e),g.parameters)for(var M in g.parameters)this.setParameter(M,g.parameters[M]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(g,e){this._jsPlumb.paintStyle=g,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,Y(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(g,e){this._jsPlumb.hoverPaintStyle=g,Y(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(g){(g||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(g,e,M){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=g;var L=g?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=g?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(M=M||jsPlumbUtil.uuid(),this.repaint({timestamp:M,recalc:!1}))),this.getAttachedElements&&!e&&K(this,g,jsPlumbUtil.uuid(),this)}}});var m=0,S=function(){var g=m+1;return m++,g},T=J.jsPlumbInstance=function(g){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},g&&P.extend(this.Defaults,g),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},c.EventGenerator.apply(this);var e=this,M=S(),L=e.bind,U={},G=1,C=function(s){if(s==null)return null;if(s.nodeType===3||s.nodeType===8)return{el:s,text:!0};var D=e.getElement(s);return{el:D,id:c.isString(s)&&D==null?s:lt(D)}};this.getInstanceIndex=function(){return M},this.setZoom=function(s,D){return G=s,e.fire("zoom",G),D&&e.repaintEverything(),!0},this.getZoom=function(){return G};for(var A in this.Defaults)U[A]=this.Defaults[A];var r,f=[];this.unbindContainer=function(){if(r!=null&&f.length>0)for(var s=0;s<f.length;s++)e.off(r,f[s][0],f[s][1])},this.setContainer=function(s){this.unbindContainer(),s=this.getElement(s),this.select().each(function(ct){ct.moveParent(s)}),this.selectEndpoints().each(function(ct){ct.moveParent(s)});var D=r;r=s,f.length=0;for(var y={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},k=function(ct,ht,Ct){var mt=ht.srcElement||ht.target,St=(mt&&mt.parentNode?mt.parentNode._jsPlumb:null)||(mt?mt._jsPlumb:null)||(mt&&mt.parentNode&&mt.parentNode.parentNode?mt.parentNode.parentNode._jsPlumb:null);if(St){St.fire(ct,St,ht);var wt=Ct&&y[Ct+ct]||ct;e.fire(wt,St.component||St,ht)}},H=function(ct,ht,Ct){f.push([ct,Ct]),e.on(r,ct,ht,Ct)},z=function(ct){H(ct,".jtk-connector",function(ht){k(ct,ht)}),H(ct,".jtk-endpoint",function(ht){k(ct,ht,"endpoint")}),H(ct,".jtk-overlay",function(ht){k(ct,ht)})},tt=0;tt<nt.length;tt++)z(nt[tt]);for(var ft in b){var ot=b[ft].el;ot.parentNode===D&&(D.removeChild(ot),r.appendChild(ot))}},this.getContainer=function(){return r},this.bind=function(s,D){s==="ready"&&_?D():L.apply(e,[s,D])},e.importDefaults=function(s){for(var D in s)e.Defaults[D]=s[D];return s.Container&&e.setContainer(s.Container),e},e.restoreDefaults=function(){return e.Defaults=P.extend({},U),e};var l=null,_=!1,x=[],u={},j={},b={},w={},d={},E=!1,N=[],B=!1,W=null,n=this.Defaults.Scope,o=1,t=function(){return""+o++},p=function(s,D){r?r.appendChild(s):D?this.getElement(D).appendChild(s):this.appendToRoot(s)}.bind(this),v=function(s,D,y,k){var H={c:[],e:[]};if(!B&&(s=e.getElement(s),s!=null)){var z=lt(s),tt=s.querySelectorAll(".jtk-managed");y==null&&(y=jsPlumbUtil.uuid()),jt({elId:z,offset:D,recalc:!1,timestamp:y});for(var ft=0;ft<tt.length;ft++)jt({elId:tt[ft].getAttribute("id"),recalc:!0,timestamp:y});var ot=e.router.redraw(z,D,y,null,k);if(Array.prototype.push.apply(H.c,ot.c),Array.prototype.push.apply(H.e,ot.e),tt)for(var ct=0;ct<tt.length;ct++)ot=e.router.redraw(tt[ct].getAttribute("id"),null,y,null,k,!0),Array.prototype.push.apply(H.c,ot.c),Array.prototype.push.apply(H.e,ot.e)}return H},F=function(s){return j[s]},I=function(s,D){for(var y=s.scope.split(/\s/),k=D.scope.split(/\s/),H=0;H<y.length;H++)for(var z=0;z<k.length;z++)if(k[z]===y[H])return!0;return!1},X=function(s,D){var y=P.extend({},s);for(var k in D)D[k]&&(y[k]=D[k]);return y},R=function(s,D){var y=P.extend({},s);if(D&&P.extend(y,D),y.source&&(y.source.endpoint?y.sourceEndpoint=y.source:y.source=e.getElement(y.source)),y.target&&(y.target.endpoint?y.targetEndpoint=y.target:y.target=e.getElement(y.target)),s.uuids&&(y.sourceEndpoint=F(s.uuids[0]),y.targetEndpoint=F(s.uuids[1])),y.sourceEndpoint&&y.sourceEndpoint.isFull()){c.log(e,"could not add connection; source endpoint is full");return}if(y.targetEndpoint&&y.targetEndpoint.isFull()){c.log(e,"could not add connection; target endpoint is full");return}if(!y.type&&y.sourceEndpoint&&(y.type=y.sourceEndpoint.connectionType),y.sourceEndpoint&&y.sourceEndpoint.connectorOverlays){y.overlays=y.overlays||[];for(var k=0,H=y.sourceEndpoint.connectorOverlays.length;k<H;k++)y.overlays.push(y.sourceEndpoint.connectorOverlays[k])}y.sourceEndpoint&&y.sourceEndpoint.scope&&(y.scope=y.sourceEndpoint.scope),!y["pointer-events"]&&y.sourceEndpoint&&y.sourceEndpoint.connectorPointerEvents&&(y["pointer-events"]=y.sourceEndpoint.connectorPointerEvents);var z=function(ft,ot,ct){var ht=X(ot,{anchor:y.anchors?y.anchors[ct]:y.anchor,endpoint:y.endpoints?y.endpoints[ct]:y.endpoint,paintStyle:y.endpointStyles?y.endpointStyles[ct]:y.endpointStyle,hoverPaintStyle:y.endpointHoverStyles?y.endpointHoverStyles[ct]:y.endpointHoverStyle});return e.addEndpoint(ft,ht)},tt=function(ft,ot,ct,ht){if(y[ft]&&!y[ft].endpoint&&!y[ft+"Endpoint"]&&!y.newConnection){var Ct=lt(y[ft]),mt=ct[Ct];if(mt=mt?mt[ht]:null,mt){if(!mt.enabled)return!1;var St=P.extend({},mt.def);delete St.label;var wt=mt.endpoint!=null&&mt.endpoint._jsPlumb?mt.endpoint:z(y[ft],St,ot);if(wt.isFull())return!1;y[ft+"Endpoint"]=wt,!y.scope&&St.scope&&(y.scope=St.scope),mt.uniqueEndpoint?mt.endpoint?wt.finalEndpoint=mt.endpoint:(mt.endpoint=wt,wt.setDeleteOnEmpty(!1)):wt.setDeleteOnEmpty(!0),ot===0&&mt.def.connectorOverlays&&(y.overlays=y.overlays||[],Array.prototype.push.apply(y.overlays,mt.def.connectorOverlays))}}};if(tt("source",0,this.sourceEndpointDefinitions,y.type||"default")!==!1&&tt("target",1,this.targetEndpointDefinitions,y.type||"default")!==!1)return y.sourceEndpoint&&y.targetEndpoint&&(I(y.sourceEndpoint,y.targetEndpoint)||(y=null)),y}.bind(e),V=function(s){var D=e.Defaults.ConnectionType||e.getDefaultConnectionType();s._jsPlumb=e,s.newConnection=V,s.newEndpoint=st,s.endpointsByUUID=j,s.endpointsByElement=u,s.finaliseConnection=at,s.id="con_"+t();var y=new D(s);return y.isDetachable()&&(y.endpoints[0].initDraggable("_jsPlumbSource"),y.endpoints[1].initDraggable("_jsPlumbTarget")),y},at=e.finaliseConnection=function(s,D,y,k){if(D=D||{},s.suspendedEndpoint||x.push(s),s.pending=null,s.endpoints[0].isTemporarySource=!1,k!==!1&&e.router.newConnection(s),v(s.source),!D.doNotFireConnectionEvent&&D.fireEvent!==!1){var H={connection:s,source:s.source,target:s.target,sourceId:s.sourceId,targetId:s.targetId,sourceEndpoint:s.endpoints[0],targetEndpoint:s.endpoints[1]};e.fire("connection",H,y)}},st=function(s,D){var y=e.Defaults.EndpointType||P.Endpoint,k=P.extend({},s);k._jsPlumb=e,k.newConnection=V,k.newEndpoint=st,k.endpointsByUUID=j,k.endpointsByElement=u,k.fireDetachEvent=Z,k.elementId=D||lt(k.source);var H=new y(k);return H.id="ep_"+t(),Qt(k.elementId,k.source),P.headless||e.getDragManager().endpointAdded(k.source,D),H},it=function(s,D,y){var k=u[s];if(k&&k.length)for(var H=0,z=k.length;H<z;H++){for(var tt=0,ft=k[H].connections.length;tt<ft;tt++){var ot=D(k[H].connections[tt]);if(ot)return}y&&y(k[H])}},rt=function(s,D,y){D=D==="block";var k=null;y&&(k=function(z){z.setVisible(D,!0,!0)});var H=C(s);it(H.id,function(z){if(D&&y){var tt=z.sourceId===H.id?1:0;z.endpoints[tt].isVisible()&&z.setVisible(!0)}else z.setVisible(D)},k)},gt=function(s,D){var y=null;D&&(y=function(k){var H=k.isVisible();k.setVisible(!H)}),it(s,function(k){var H=k.isVisible();k.setVisible(!H)},y)},dt=function(s){var D=w[s];return D?{o:D,s:N[s]}:jt({elId:s})},lt=function(s,D,y){if(c.isString(s))return s;if(s==null)return null;var k=e.getAttribute(s,"id");return(!k||k==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?k=D:(arguments.length===1||arguments.length===3&&!arguments[2])&&(k="jsPlumb_"+M+"_"+t()),y||e.setAttribute(s,"id",k)),k};this.setConnectionBeingDragged=function(s){E=s},this.isConnectionBeingDragged=function(){return E},this.getManagedElements=function(){return b},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(s,D,y){y=y||{};var k=P.extend({},y);P.extend(k,D),k.endpoint=k.endpoint||e.Defaults.Endpoint,k.paintStyle=k.paintStyle||e.Defaults.EndpointStyle;for(var H=[],z=c.isArray(s)||s.length!=null&&!c.isString(s)?s:[s],tt=0,ft=z.length;tt<ft;tt++){k.source=e.getElement(z[tt]),Jt(k.source);var ot=lt(k.source),ct=st(k,ot),ht=Qt(ot,k.source,null,!B).info.o;c.addToList(u,ot,ct),B||ct.paint({anchorLoc:ct.anchor.compute({xy:[ht.left,ht.top],wh:N[ot],element:ct,timestamp:W,rotation:this.getRotation(ot)}),timestamp:W}),H.push(ct)}return H.length===1?H[0]:H},this.addEndpoints=function(s,D,y){for(var k=[],H=0,z=D.length;H<z;H++){var tt=e.addEndpoint(s,D[H],y);c.isArray(tt)?Array.prototype.push.apply(k,tt):k.push(tt)}return k},this.animate=function(s,D,y){if(!this.animationSupported)return!1;y=y||{};var k=e.getElement(s),H=lt(k),z=P.animEvents.step,tt=P.animEvents.complete;y[z]=c.wrap(y[z],function(){e.revalidate(H)}),y[tt]=c.wrap(y[tt],function(){e.revalidate(H)}),e.doAnimate(k,D,y)},this.checkCondition=function(s,D){var y=e.getListener(s),k=!0;if(y&&y.length>0){var H=Array.prototype.slice.call(arguments,1);try{for(var z=0,tt=y.length;z<tt;z++)k=k&&y[z].apply(y[z],H)}catch(ft){c.log(e,"cannot check condition ["+s+"]"+ft)}}return k},this.connect=function(s,D){var y=R(s,D),k;if(y){if(y.source==null&&y.sourceEndpoint==null){c.log("Cannot establish connection - source does not exist");return}if(y.target==null&&y.targetEndpoint==null){c.log("Cannot establish connection - target does not exist");return}Jt(y.source),k=V(y),at(k,y)}return k};var yt=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],pt=function(s,D,y,k){var H,z=yt[y],tt=s[z.elId];s[z.el];var ft,ot,ct=s.endpoints[y],ht={index:y,originalSourceId:y===0?tt:s.sourceId,newSourceId:s.sourceId,originalTargetId:y===1?tt:s.targetId,newTargetId:s.targetId,connection:s};if(D.constructor===P.Endpoint)H=D,H.addConnection(s),D=H.element;else if(ft=lt(D),ot=this[z.epDefs][ft],ft===s[z.elId])H=null;else if(ot)for(var Ct in ot){if(!ot[Ct].enabled)return;H=ot[Ct].endpoint!=null&&ot[Ct].endpoint._jsPlumb?ot[Ct].endpoint:this.addEndpoint(D,ot[Ct].def),ot[Ct].uniqueEndpoint&&(ot[Ct].endpoint=H),H.addConnection(s)}else H=s.makeEndpoint(y===0,D,ft);return H!=null&&(ct.detachFromConnection(s),s.endpoints[y]=H,s[z.el]=H.element,s[z.elId]=H.elementId,ht[y===0?"newSourceId":"newTargetId"]=H.elementId,q(ht),k||s.repaint()),ht.element=D,ht}.bind(this);this.setSource=function(s,D,y){var k=pt(s,D,0,y);this.router.sourceOrTargetChanged(k.originalSourceId,k.newSourceId,s,k.el,0)},this.setTarget=function(s,D,y){var k=pt(s,D,1,y);this.router.sourceOrTargetChanged(k.originalTargetId,k.newTargetId,s,k.el,1)},this.deleteEndpoint=function(s,D,y){var k=typeof s=="string"?j[s]:s;return k&&e.deleteObject({endpoint:k,dontUpdateHover:D,deleteAttachedObjects:y}),e},this.deleteEveryEndpoint=function(){var s=e.setSuspendDrawing(!0);for(var D in u){var y=u[D];if(y&&y.length)for(var k=0,H=y.length;k<H;k++)e.deleteEndpoint(y[k],!0)}u={},b={},j={},w={},d={},e.router.reset();var z=e.getDragManager();return z&&z.reset(),s||e.setSuspendDrawing(!1),e};var Z=function(s,D,y){var k=e.Defaults.ConnectionType||e.getDefaultConnectionType(),H=s.constructor===k,z=H?{connection:s,source:s.source,target:s.target,sourceId:s.sourceId,targetId:s.targetId,sourceEndpoint:s.endpoints[0],targetEndpoint:s.endpoints[1]}:s;D&&e.fire("connectionDetached",z,y),e.fire("internal.connectionDetached",z,y),e.router.connectionDetached(z)},q=e.fireMoveEvent=function(s,D){e.fire("connectionMoved",s,D)};this.unregisterEndpoint=function(s){s._jsPlumb.uuid&&(j[s._jsPlumb.uuid]=null),e.router.deleteEndpoint(s);for(var D in u){var y=u[D];if(y){for(var k=[],H=0,z=y.length;H<z;H++)y[H]!==s&&k.push(y[H]);u[D]=k}u[D].length<1&&delete u[D]}};var $="isDetachAllowed",ut="beforeDetach",vt="checkCondition";this.deleteConnection=function(s,D){return s!=null&&(D=D||{},D.force||c.functionChain(!0,!1,[[s.endpoints[0],$,[s]],[s.endpoints[1],$,[s]],[s,$,[s]],[e,vt,[ut,s]]]))?(s.setHover(!1),Z(s,!s.pending&&D.fireEvent!==!1,D.originalEvent),s.endpoints[0].detachFromConnection(s),s.endpoints[1].detachFromConnection(s),c.removeWithFunction(x,function(y){return s.id===y.id}),s.cleanup(),s.destroy(),!0):!1},this.deleteEveryConnection=function(s){s=s||{};var D=x.length,y=0;return e.batch(function(){for(var k=0;k<D;k++)y+=e.deleteConnection(x[0],s)?1:0}),y},this.deleteConnectionsForElement=function(s,D){D=D||{},s=e.getElement(s);var y=lt(s),k=u[y];if(k&&k.length)for(var H=0,z=k.length;H<z;H++)k[H].deleteEveryConnection(D);return e},this.deleteObject=function(s){var D={endpoints:{},connections:{},endpointCount:0,connectionCount:0},y=s.deleteAttachedObjects!==!1,k=function(ht){ht!=null&&D.connections[ht.id]==null&&(!s.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),D.connections[ht.id]=ht,D.connectionCount++)},H=function(ht){if(ht!=null&&D.endpoints[ht.id]==null&&(!s.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),D.endpoints[ht.id]=ht,D.endpointCount++,y))for(var Ct=0;Ct<ht.connections.length;Ct++){var mt=ht.connections[Ct];k(mt)}};s.connection?k(s.connection):H(s.endpoint);for(var z in D.connections){var tt=D.connections[z];if(tt._jsPlumb){c.removeWithFunction(x,function(ht){return tt.id===ht.id}),Z(tt,s.fireEvent===!1?!1:!tt.pending,s.originalEvent);var ft=s.deleteAttachedObjects==null?null:!s.deleteAttachedObjects;tt.endpoints[0].detachFromConnection(tt,null,ft),tt.endpoints[1].detachFromConnection(tt,null,ft),tt.cleanup(!0),tt.destroy(!0)}}for(var ot in D.endpoints){var ct=D.endpoints[ot];ct._jsPlumb&&(e.unregisterEndpoint(ct),ct.cleanup(!0),ct.destroy(!0))}return D};var Dt=function(s,D,y,k){for(var H=0,z=s.length;H<z;H++)s[H][D].apply(s[H],y);return k(s)},Mt=function(s,D,y){for(var k=[],H=0,z=s.length;H<z;H++)k.push([s[H][D].apply(s[H],y),s[H]]);return k},Ft=function(s,D,y){return function(){return Dt(s,D,arguments,y)}},Gt=function(s,D){return function(){return Mt(s,D,arguments)}},Nt=function(s,D){var y=[];if(s)if(typeof s=="string"){if(s==="*")return s;y.push(s)}else if(D)y=s;else if(s.length)for(var k=0,H=s.length;k<H;k++)y.push(C(s[k]).id);else y.push(C(s).id);return y},Ut=function(s,D,y){return s==="*"?!0:s.length>0?s.indexOf(D)!==-1:!y};this.getConnections=function(s,D){s?s.constructor===String&&(s={scope:s}):s={};for(var y=s.scope||e.getDefaultScope(),k=Nt(y,!0),H=Nt(s.source),z=Nt(s.target),tt=!D&&k.length>1?{}:[],ft=function(St,wt){if(!D&&k.length>1){var Ot=tt[St];Ot==null&&(Ot=tt[St]=[]),Ot.push(wt)}else tt.push(wt)},ot=0,ct=x.length;ot<ct;ot++){var ht=x[ot],Ct=ht.proxies&&ht.proxies[0]?ht.proxies[0].originalEp.elementId:ht.sourceId,mt=ht.proxies&&ht.proxies[1]?ht.proxies[1].originalEp.elementId:ht.targetId;Ut(k,ht.scope)&&Ut(H,Ct)&&Ut(z,mt)&&ft(ht.scope,ht)}return tt};var ie=function(s,D){return function(y){for(var k=0,H=s.length;k<H;k++)y(s[k]);return D(s)}},se=function(s){return function(D){return s[D]}},re=function(s,D){var y={length:s.length,each:ie(s,D),get:se(s)},k=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],H=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],z,tt;for(z=0,tt=k.length;z<tt;z++)y[k[z]]=Ft(s,k[z],D);for(z=0,tt=H.length;z<tt;z++)y[H[z]]=Gt(s,H[z]);return y},Ht=function(s){var D=re(s,Ht);return P.extend(D,{setDetachable:Ft(s,"setDetachable",Ht),setReattach:Ft(s,"setReattach",Ht),setConnector:Ft(s,"setConnector",Ht),delete:function(){for(var y=0,k=s.length;y<k;y++)e.deleteConnection(s[y])},isDetachable:Gt(s,"isDetachable"),isReattach:Gt(s,"isReattach")})},Zt=function(s){var D=re(s,Zt);return P.extend(D,{setEnabled:Ft(s,"setEnabled",Zt),setAnchor:Ft(s,"setAnchor",Zt),isEnabled:Gt(s,"isEnabled"),deleteEveryConnection:function(){for(var y=0,k=s.length;y<k;y++)s[y].deleteEveryConnection()},delete:function(){for(var y=0,k=s.length;y<k;y++)e.deleteEndpoint(s[y])}})};this.select=function(s){return s=s||{},s.scope=s.scope||"*",Ht(s.connections||e.getConnections(s,!0))},this.selectEndpoints=function(s){s=s||{},s.scope=s.scope||"*";var D=!s.element&&!s.source&&!s.target,y=D?"*":Nt(s.element),k=D?"*":Nt(s.source),H=D?"*":Nt(s.target),z=Nt(s.scope,!0),tt=[];for(var ft in u){var ot=Ut(y,ft,!0),ct=Ut(k,ft,!0),ht=k!=="*",Ct=Ut(H,ft,!0),mt=H!=="*";if(ot||ct||Ct){t:for(var St=0,wt=u[ft].length;St<wt;St++){var Ot=u[ft][St];if(Ut(z,Ot.scope,!0)){var oe=ht&&k.length>0&&!Ot.isSource,ae=mt&&H.length>0&&!Ot.isTarget;if(oe||ae)continue t;tt.push(Ot)}}}}return Zt(tt)},this.getAllConnections=function(){return x},this.getDefaultScope=function(){return n},this.getEndpoint=F,this.getEndpoints=function(s){return u[C(s).id]||[]},this.getDefaultEndpointType=function(){return P.Endpoint},this.getDefaultConnectionType=function(){return P.Connection},this.getId=lt,this.draw=v,this.info=C,this.appendElement=p;var Bt=!1;this.isHoverSuspended=function(){return Bt},this.setHoverSuspended=function(s){Bt=s},this.hide=function(s,D){return rt(s,"none",D),e},this.idstamp=t;var Jt=function(s){if(!r&&s){var D=e.getElement(s);D.offsetParent&&e.setContainer(D.offsetParent)}},$t=function(){e.Defaults.Container&&e.setContainer(e.Defaults.Container)},Qt=e.manage=function(s,D,y,k){return b[s]?k&&(b[s].info=jt({elId:s,timestamp:W,recalc:!0})):(b[s]={el:D,endpoints:[],connections:[],rotation:0},b[s].info=jt({elId:s,timestamp:W}),e.addClass(D,"jtk-managed"),y||e.fire("manageElement",{id:s,info:b[s].info,el:D})),b[s]};this.unmanage=function(s){if(b[s]){var D=b[s].el;e.removeClass(D,"jtk-managed"),delete b[s],e.fire("unmanageElement",{id:s,el:D})}},this.rotate=function(s,D,y){return b[s]&&(b[s].rotation=D,b[s].el.style.transform="rotate("+D+"deg)",b[s].el.style.transformOrigin="center center",y!==!0)?this.revalidate(s):{c:[],e:[]}},this.getRotation=function(s){return b[s]&&b[s].rotation||0};var jt=function(s){var D=s.timestamp,y=s.recalc,k=s.offset,H=s.elId,z;return B&&!D&&(D=W),!y&&D&&D===d[H]?{o:s.offset||w[H],s:N[H]}:(y||!k&&w[H]==null?(z=b[H]?b[H].el:null,z!=null&&(N[H]=e.getSize(z),w[H]=e.getOffset(z),d[H]=D)):(w[H]=k||w[H],N[H]==null&&(z=b[H].el,z!=null&&(N[H]=e.getSize(z))),d[H]=D),w[H]&&!w[H].right&&(w[H].right=w[H].left+N[H][0],w[H].bottom=w[H].top+N[H][1],w[H].width=N[H][0],w[H].height=N[H][1],w[H].centerx=w[H].left+w[H].width/2,w[H].centery=w[H].top+w[H].height/2),{o:w[H],s:N[H]})};this.updateOffset=jt,this.init=function(){_||($t(),e.router=new J.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,_=!0,e.fire("ready",e))}.bind(this),this.log=l,this.jsPlumbUIComponent=a,this.makeAnchor=function(){var s,D=function(tt,ft){if(J.jsPlumb.Anchors[tt])return new J.jsPlumb.Anchors[tt](ft);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+tt+"'"}};if(arguments.length===0)return null;var y=arguments[0],k=arguments[1],H=null;if(y.compute&&y.getOrientation)return y;if(typeof y=="string")H=D(arguments[0],{elementId:k,jsPlumbInstance:e});else if(c.isArray(y))if(c.isArray(y[0])||c.isString(y[0]))y.length===2&&c.isObject(y[1])?c.isString(y[0])?(s=J.jsPlumb.extend({elementId:k,jsPlumbInstance:e},y[1]),H=D(y[0],s)):(s=J.jsPlumb.extend({elementId:k,jsPlumbInstance:e,anchors:y[0]},y[1]),H=new J.jsPlumb.DynamicAnchor(s)):H=new P.DynamicAnchor({anchors:y,selector:null,elementId:k,jsPlumbInstance:e});else{var z={x:y[0],y:y[1],orientation:y.length>=4?[y[2],y[3]]:[0,0],offsets:y.length>=6?[y[4],y[5]]:[0,0],elementId:k,jsPlumbInstance:e,cssClass:y.length===7?y[6]:null};H=new J.jsPlumb.Anchor(z),H.clone=function(){return new J.jsPlumb.Anchor(z)}}return H.id||(H.id="anchor_"+t()),H},this.makeAnchors=function(s,D,y){for(var k=[],H=0,z=s.length;H<z;H++)typeof s[H]=="string"?k.push(J.jsPlumb.Anchors[s[H]]({elementId:D,jsPlumbInstance:y})):c.isArray(s[H])&&k.push(e.makeAnchor(s[H],D,y));return k},this.makeDynamicAnchor=function(s,D){return new J.jsPlumb.DynamicAnchor({anchors:s,selector:D,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Wt=function(s,D,y,k,H){for(var z=s.target||s.srcElement,tt=!1,ft=k.getSelector(D,y),ot=0;ot<ft.length;ot++)if(ft[ot]===z){tt=!0;break}return H?!tt:tt},Tt=function(s,D,y,k,H){var z=new a(D),tt=D._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return s.def.enabled},isFull:function(){var ot=e.select({target:s.id}).length;return s.def.maxConnections>0&&ot>=s.def.maxConnections},element:s.el,elementId:s.id,isSource:k,isTarget:H,addClass:function(ot){e.addClass(s.el,ot)},removeClass:function(ot){e.removeClass(s.el,ot)},onDrop:function(ot){var ct=ot.endpoints[0];ct.anchor.locked=!1},isDropAllowed:function(){return z.isDropAllowed.apply(z,arguments)},isRedrop:function(ot){return ot.suspendedElement!=null&&ot.suspendedEndpoint!=null&&ot.suspendedEndpoint.element===s.el},getEndpoint:function(ot){var ct=s.def.endpoint;if(ct==null||ct._jsPlumb==null){var ht=e.deriveEndpointAndAnchorSpec(ot.getType().join(" "),!0),Ct=ht.endpoints?J.jsPlumb.extend(D,{endpoint:s.def.def.endpoint||ht.endpoints[1]}):D;ht.anchors&&(Ct=J.jsPlumb.extend(Ct,{anchor:s.def.def.anchor||ht.anchors[1]})),ct=e.addEndpoint(s.el,Ct),ct._mtNew=!0}if(D.uniqueEndpoint&&(s.def.endpoint=ct),ct.setDeleteOnEmpty(!0),ot.isDetachable()&&ct.initDraggable(),ct.anchor.positionFinder!=null){var mt=e.getUIPosition(arguments,e.getZoom()),St=e.getOffset(s.el),wt=e.getSize(s.el),Ot=mt==null?[0,0]:ct.anchor.positionFinder(mt,St,wt,ct.anchor.constructorParams);ct.anchor.x=Ot[0],ct.anchor.y=Ot[1]}return ct},maybeCleanup:function(ot){ot._mtNew&&ot.connections.length===0?e.deleteObject({endpoint:ot}):delete ot._mtNew}}),ft=J.jsPlumb.dragEvents.drop;return y.scope=y.scope||D.scope||e.Defaults.Scope,y[ft]=c.wrap(y[ft],tt,!0),y.rank=D.rank||0,H&&(y[J.jsPlumb.dragEvents.over]=function(){return!0}),D.allowLoopback===!1&&(y.canDrop=function(ot){var ct=ot.getDragElement()._jsPlumbRelatedElement;return ct!==s.el}),e.initDroppable(s.el,y,"internal"),tt};this.makeTarget=function(s,D,y){var k=J.jsPlumb.extend({_jsPlumb:this},y);J.jsPlumb.extend(k,D);for(var H=k.maxConnections||-1,z=function(ct){var ht=C(ct),Ct=ht.id,mt=J.jsPlumb.extend({},k.dropOptions||{}),St=k.connectionType||"default";this.targetEndpointDefinitions[Ct]=this.targetEndpointDefinitions[Ct]||{},Jt(Ct),ht.el._isJsPlumbGroup&&mt.rank==null&&(mt.rank=-1);var wt={def:J.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:H,enabled:!0};k.createEndpoint&&(wt.uniqueEndpoint=!0,wt.endpoint=e.addEndpoint(ct,wt.def),wt.endpoint.setDeleteOnEmpty(!1)),ht.def=wt,this.targetEndpointDefinitions[Ct][St]=wt,Tt(ht,k,mt,k.isSource===!0,!0),ht.el._katavorioDrop[ht.el._katavorioDrop.length-1].targetDef=wt}.bind(this),tt=s.length&&s.constructor!==String?s:[s],ft=0,ot=tt.length;ft<ot;ft++)z(tt[ft]);return this},this.unmakeTarget=function(s,D){var y=C(s);return e.destroyDroppable(y.el,"internal"),D||delete this.targetEndpointDefinitions[y.id],this},this.makeSource=function(s,D,y){var k=J.jsPlumb.extend({_jsPlumb:this},y);J.jsPlumb.extend(k,D);var H=k.connectionType||"default",z=e.deriveEndpointAndAnchorSpec(H);k.endpoint=k.endpoint||z.endpoints[0],k.anchor=k.anchor||z.anchors[0];for(var tt=k.maxConnections||-1,ft=k.onMaxConnections,ot=function(mt){var St=mt.id,wt=this.getElement(mt.el);this.sourceEndpointDefinitions[St]=this.sourceEndpointDefinitions[St]||{},Jt(St);var Ot={def:J.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:tt,enabled:!0};k.createEndpoint&&(Ot.uniqueEndpoint=!0,Ot.endpoint=e.addEndpoint(s,Ot.def),Ot.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[St][H]=Ot,mt.def=Ot;var oe=J.jsPlumb.dragEvents.stop,ae=J.jsPlumb.dragEvents.drag,Vt=J.jsPlumb.extend({},k.dragOptions||{}),fe=Vt.drag,de=Vt.stop,Lt=null,le=!1;Vt.scope=Vt.scope||k.scope,Vt[ae]=c.wrap(Vt[ae],function(){fe&&fe.apply(this,arguments),le=!1}),Vt[oe]=c.wrap(Vt[oe],function(){if(de&&de.apply(this,arguments),this.currentlyDragging=!1,Lt._jsPlumb!=null){var Rt=k.anchor||this.Defaults.Anchor,It=Lt.anchor,ue=Lt.connections[0],qt=this.makeAnchor(Rt,St,this),te=Lt.element;if(qt.positionFinder!=null){var Xt=e.getOffset(te),Kt=this.getSize(te),he={left:Xt.left+It.x*Kt[0],top:Xt.top+It.y*Kt[1]},ee=qt.positionFinder(he,Xt,Kt,qt.constructorParams);qt.x=ee[0],qt.y=ee[1]}Lt.setAnchor(qt,!0),Lt.repaint(),this.repaint(Lt.elementId),ue!=null&&this.repaint(ue.targetId)}}.bind(this));var ge=function(Rt){if(!(Rt.which===3||Rt.button===2)){St=this.getId(this.getElement(mt.el));var It=this.sourceEndpointDefinitions[St][H];if(!!It.enabled){if(k.filter){var ue=c.isString(k.filter)?Wt(Rt,mt.el,k.filter,this,k.filterExclude):k.filter(Rt,mt.el);if(ue===!1)return}var qt=this.select({source:St}).length;if(It.maxConnections>=0&&qt>=It.maxConnections)return ft&&ft({element:mt.el,maxConnections:tt},Rt),!1;var te=J.jsPlumb.getPositionOnElement(Rt,wt,G),Xt={};J.jsPlumb.extend(Xt,It.def),Xt.isTemporarySource=!0,Xt.anchor=[te[0],te[1],0,0],Xt.dragOptions=Vt,It.def.scope&&(Xt.scope=It.def.scope),Lt=this.addEndpoint(St,Xt),le=!0,Lt.setDeleteOnEmpty(!0),It.uniqueEndpoint&&(It.endpoint?Lt.finalEndpoint=It.endpoint:(It.endpoint=Lt,Lt.setDeleteOnEmpty(!1)));var Kt=function(){e.off(Lt.canvas,"mouseup",Kt),e.off(mt.el,"mouseup",Kt),le&&(le=!1,e.deleteEndpoint(Lt))};e.on(Lt.canvas,"mouseup",Kt),e.on(mt.el,"mouseup",Kt);var he={};if(It.def.extract)for(var ee in It.def.extract){var pe=(Rt.srcElement||Rt.target).getAttribute(ee);pe&&(he[It.def.extract[ee]]=pe)}e.trigger(Lt.canvas,"mousedown",Rt,he),c.consume(Rt)}}}.bind(this);this.on(mt.el,"mousedown",ge),Ot.trigger=ge,k.filter&&(c.isString(k.filter)||c.isFunction(k.filter))&&e.setDragFilter(mt.el,k.filter);var ve=J.jsPlumb.extend({},k.dropOptions||{});Tt(mt,k,ve,!0,k.isTarget===!0)}.bind(this),ct=s.length&&s.constructor!==String?s:[s],ht=0,Ct=ct.length;ht<Ct;ht++)ot(C(ct[ht]));return this},this.unmakeSource=function(s,D,y){var k=C(s);e.destroyDroppable(k.el,"internal");var H=this.sourceEndpointDefinitions[k.id];if(H){for(var z in H)if(D==null||D===z){var tt=H[z].trigger;tt&&e.off(k.el,"mousedown",tt),y||delete this.sourceEndpointDefinitions[k.id][z]}}return this},this.unmakeEverySource=function(){for(var s in this.sourceEndpointDefinitions)e.unmakeSource(s,null,!0);return this.sourceEndpointDefinitions={},this};var Yt=function(s,D,y){D=c.isArray(D)?D:[D];var k=lt(s);y=y||"default";for(var H=0;H<D.length;H++){var z=this[D[H]][k];if(z&&z[y])return z[y].def.scope||this.Defaults.Scope}}.bind(this),zt=function(s,D,y,k){y=c.isArray(y)?y:[y];var H=lt(s);k=k||"default";for(var z=0;z<y.length;z++){var tt=this[y[z]][H];tt&&tt[k]&&(tt[k].def.scope=D)}}.bind(this);this.getScope=function(s,D){return Yt(s,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(s){return Yt(s,"sourceEndpointDefinitions")},this.getTargetScope=function(s){return Yt(s,"targetEndpointDefinitions")},this.setScope=function(s,D,y){this.setSourceScope(s,D,y),this.setTargetScope(s,D,y)},this.setSourceScope=function(s,D,y){zt(s,D,"sourceEndpointDefinitions",y),this.setDragScope(s,D)},this.setTargetScope=function(s,D,y){zt(s,D,"targetEndpointDefinitions",y),this.setDropScope(s,D)},this.unmakeEveryTarget=function(){for(var s in this.targetEndpointDefinitions)e.unmakeTarget(s,!0);return this.targetEndpointDefinitions={},this};var Q=function(s,D,y,k,H){var z=s==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,tt,ft,ot;if(H=H||"default",D.length&&!c.isString(D)){tt=[];for(var ct=0,ht=D.length;ct<ht;ct++)ft=C(D[ct]),z[ft.id]&&z[ft.id][H]&&(tt[ct]=z[ft.id][H].enabled,ot=k?!tt[ct]:y,z[ft.id][H].enabled=ot,e[ot?"removeClass":"addClass"](ft.el,"jtk-"+s+"-disabled"))}else{ft=C(D);var Ct=ft.id;z[Ct]&&z[Ct][H]&&(tt=z[Ct][H].enabled,ot=k?!tt:y,z[Ct][H].enabled=ot,e[ot?"removeClass":"addClass"](ft.el,"jtk-"+s+"-disabled"))}return tt}.bind(this),_t=function(s,D){if(s!=null){if(c.isString(s)||!s.length)return D.apply(this,[s]);if(s.length)return D.apply(this,[s[0]])}}.bind(this);this.toggleSourceEnabled=function(s,D){return Q("source",s,null,!0,D),this.isSourceEnabled(s,D)},this.setSourceEnabled=function(s,D,y){return Q("source",s,D,null,y)},this.isSource=function(s,D){return D=D||"default",_t(s,function(y){var k=this.sourceEndpointDefinitions[C(y).id];return k!=null&&k[D]!=null}.bind(this))},this.isSourceEnabled=function(s,D){return D=D||"default",_t(s,function(y){var k=this.sourceEndpointDefinitions[C(y).id];return k&&k[D]&&k[D].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(s,D){return Q("target",s,null,!0,D),this.isTargetEnabled(s,D)},this.isTarget=function(s,D){return D=D||"default",_t(s,function(y){var k=this.targetEndpointDefinitions[C(y).id];return k!=null&&k[D]!=null}.bind(this))},this.isTargetEnabled=function(s,D){return D=D||"default",_t(s,function(y){var k=this.targetEndpointDefinitions[C(y).id];return k&&k[D]&&k[D].enabled===!0}.bind(this))},this.setTargetEnabled=function(s,D,y){return Q("target",s,D,null,y)},this.ready=function(s){e.bind("ready",s)};var Pt=function(s,D){if(typeof s=="object"&&s.length)for(var y=0,k=s.length;y<k;y++)D(s[y]);else D(s);return e};this.repaint=function(s,D,y){return Pt(s,function(k){v(k,D,y)})},this.revalidate=function(s,D,y){var k=y?s:e.getId(s);e.updateOffset({elId:k,recalc:!0,timestamp:D});var H=e.getDragManager();return H&&H.updateOffsets(k),v(s,null,D)},this.repaintEverything=function(){var s=jsPlumbUtil.uuid(),D;for(D in u)e.updateOffset({elId:D,recalc:!0,timestamp:s});for(D in u)v(D,null,s);return this},this.removeAllEndpoints=function(s,D,y){y=y||[];var k=function(H){var z=C(H),tt=u[z.id],ft,ot;if(tt)for(y.push(z),ft=0,ot=tt.length;ft<ot;ft++)e.deleteEndpoint(tt[ft],!1);if(delete u[z.id],D&&z.el&&z.el.nodeType!==3&&z.el.nodeType!==8)for(ft=0,ot=z.el.childNodes.length;ft<ot;ft++)k(z.el.childNodes[ft])};return k(s),this};var bt=function(s,D){e.removeAllEndpoints(s.id,!0,D);for(var y=e.getDragManager(),k=function(z){y&&y.elementRemoved(z.id),e.router.elementRemoved(z.id),e.isSource(z.el)&&e.unmakeSource(z.el),e.isTarget(z.el)&&e.unmakeTarget(z.el),e.destroyDraggable(z.el),e.destroyDroppable(z.el),delete e.floatingConnections[z.id],delete b[z.id],delete w[z.id],z.el&&(e.removeElement(z.el),z.el._jsPlumb=null)},H=1;H<D.length;H++)k(D[H]);k(s)};this.remove=function(s,D){var y=C(s),k=[];return y.text&&y.el.parentNode?y.el.parentNode.removeChild(y.el):y.id&&e.batch(function(){bt(y,k)},D===!0),e},this.empty=function(s,D){var y=[],k=function(H,z){var tt=C(H);if(tt.text)tt.el.parentNode.removeChild(tt.el);else if(tt.el){for(;tt.el.childNodes.length>0;)k(tt.el.childNodes[0]);z||bt(tt,y)}};return e.batch(function(){k(s,!0)},D===!1),e},this.reset=function(s){e.silently(function(){Bt=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),s||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},x.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),r=null,f=null};var Et=function(s){s.canvas&&s.canvas.parentNode&&s.canvas.parentNode.removeChild(s.canvas),s.cleanup(),s.destroy()};this.clear=function(){e.select().each(Et),e.selectEndpoints().each(Et),u={},j={}},this.setDefaultScope=function(s){return n=s,e},this.deriveEndpointAndAnchorSpec=function(s,D){for(var y=((D?"":"default ")+s).split(/[\s]/),k=null,H=null,z=null,tt=null,ft=0;ft<y.length;ft++){var ot=e.getType(y[ft],"connection");ot&&(ot.endpoints&&(k=ot.endpoints),ot.endpoint&&(H=ot.endpoint),ot.anchors&&(tt=ot.anchors),ot.anchor&&(z=ot.anchor))}return{endpoints:k||[H,H],anchors:tt||[z,z]}},this.setId=function(s,D,y){var k;c.isString(s)?k=s:(s=this.getElement(s),k=this.getId(s));var H=this.getConnections({source:k,scope:"*"},!0),z=this.getConnections({target:k,scope:"*"},!0);D=""+D,y?s=this.getElement(D):(s=this.getElement(k),this.setAttribute(s,"id",D)),u[D]=u[k]||[];for(var tt=0,ft=u[D].length;tt<ft;tt++)u[D][tt].setElementId(D),u[D][tt].setReferenceElement(s);delete u[k],this.sourceEndpointDefinitions[D]=this.sourceEndpointDefinitions[k],delete this.sourceEndpointDefinitions[k],this.targetEndpointDefinitions[D]=this.targetEndpointDefinitions[k],delete this.targetEndpointDefinitions[k],this.router.changeId(k,D);var ot=this.getDragManager();ot&&ot.changeId(k,D),b[D]=b[k],delete b[k];var ct=function(ht,Ct,mt){for(var St=0,wt=ht.length;St<wt;St++)ht[St].endpoints[Ct].setElementId(D),ht[St].endpoints[Ct].setReferenceElement(s),ht[St][mt+"Id"]=D,ht[St][mt]=s};ct(H,0,"source"),ct(z,1,"target"),this.repaint(D)},this.setDebugLog=function(s){l=s},this.setSuspendDrawing=function(s,D){var y=B;return B=s,s?W=new Date().getTime():W=null,D&&this.repaintEverything(),y},this.isSuspendDrawing=function(){return B},this.getSuspendedAt=function(){return W},this.batch=function(s,D){var y=this.isSuspendDrawing();y||this.setSuspendDrawing(!0);try{s()}catch(k){c.log("Function run while suspended failed",k)}y||this.setSuspendDrawing(!1,!D)},this.doWhileSuspended=this.batch,this.getCachedData=dt,this.show=function(s,D){return rt(s,"block",D),e},this.toggleVisible=gt,this.addListener=this.bind;var xt=[];this.registerFloatingConnection=function(s,D,y){xt[s.id]=D,c.addToList(u,s.id,y)},this.getFloatingConnectionFor=function(s){return xt[s]},this.listManager=new J.jsPlumbListManager(this,this.Defaults.ListStyle)};c.extend(J.jsPlumbInstance,c.EventGenerator,{setAttribute:function(g,e,M){this.setAttribute(g,e,M)},getAttribute:function(g,e){return this.getAttribute(J.jsPlumb.getElement(g),e)},convertToFullOverlaySpec:function(g){return c.isString(g)&&(g=[g,{}]),g[1].id=g[1].id||c.uuid(),g},registerConnectionType:function(g,e){if(this._connectionTypes[g]=J.jsPlumb.extend({},e),e.overlays){for(var M={},L=0;L<e.overlays.length;L++){var U=this.convertToFullOverlaySpec(e.overlays[L]);M[U[1].id]=U}this._connectionTypes[g].overlays=M}},registerConnectionTypes:function(g){for(var e in g)this.registerConnectionType(e,g[e])},registerEndpointType:function(g,e){if(this._endpointTypes[g]=J.jsPlumb.extend({},e),e.overlays){for(var M={},L=0;L<e.overlays.length;L++){var U=this.convertToFullOverlaySpec(e.overlays[L]);M[U[1].id]=U}this._endpointTypes[g].overlays=M}},registerEndpointTypes:function(g){for(var e in g)this.registerEndpointType(e,g[e])},getType:function(g,e){return e==="connection"?this._connectionTypes[g]:this._endpointTypes[g]},setIdChanged:function(g,e){this.setId(g,e,!0)},setParent:function(g,e){var M=this.getElement(g),L=this.getId(M),U=this.getElement(e),G=this.getId(U),C=this.getDragManager();M.parentNode.removeChild(M),U.appendChild(M),C&&C.setParent(M,L,U,G)},extend:function(g,e,M){var L;if(M)for(L=0;L<M.length;L++)g[M[L]]=e[M[L]];else for(L in e)g[L]=e[L];return g},floatingConnections:{},getFloatingAnchorIndex:function(g){return g.endpoints[0].isFloating()?0:g.endpoints[1].isFloating()?1:-1},proxyConnection:function(g,e,M,L,U,G){var C,A=g.endpoints[e].elementId,r=g.endpoints[e];g.proxies=g.proxies||[],g.proxies[e]?C=g.proxies[e].ep:C=this.addEndpoint(M,{endpoint:U(g,e),anchor:G(g,e),parameters:{isProxyEndpoint:!0}}),C.setDeleteOnEmpty(!0),g.proxies[e]={ep:C,originalEp:r},e===0?this.router.sourceOrTargetChanged(A,L,g,M,0):this.router.sourceOrTargetChanged(A,L,g,M,1),r.detachFromConnection(g,null,!0),C.connections=[g],g.endpoints[e]=C,r.setVisible(!1),g.setVisible(!0),this.revalidate(M)},unproxyConnection:function(g,e,M){if(!(g._jsPlumb==null||g.proxies==null||g.proxies[e]==null)){var L=g.proxies[e].originalEp.element,U=g.proxies[e].originalEp.elementId;g.endpoints[e]=g.proxies[e].originalEp,e===0?this.router.sourceOrTargetChanged(M,U,g,L,0):this.router.sourceOrTargetChanged(M,U,g,L,1),g.proxies[e].ep.detachFromConnection(g,null),g.proxies[e].originalEp.addConnection(g),g.isVisible()&&g.proxies[e].originalEp.setVisible(!0),delete g.proxies[e]}}});var P=new T;J.jsPlumb=P,P.getInstance=function(g,e){var M=new T(g);if(e)for(var L in e)M[L]=e[L];return M.init(),M},P.each=function(g,e){if(g!=null)if(typeof g=="string")e(P.getElement(g));else if(g.length!=null)for(var M=0;M<g.length;M++)e(P.getElement(g[M]));else e(g)},At.jsPlumb=P}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt="__label",K=function(h,O){var a={cssClass:O.cssClass,labelStyle:h.labelStyle,id:nt,component:h,_jsPlumb:h._jsPlumb.instance},i=c.extend(a,O);return new c.Overlays[h._jsPlumb.instance.getRenderMode()].Label(i)},et=function(h,O){var a=null;if(Y.isArray(O)){var i=O[0],m=c.extend({component:h,_jsPlumb:h._jsPlumb.instance},O[1]);O.length===3&&c.extend(m,O[2]),a=new c.Overlays[h._jsPlumb.instance.getRenderMode()][i](m)}else O.constructor===String?a=new c.Overlays[h._jsPlumb.instance.getRenderMode()][O]({component:h,_jsPlumb:h._jsPlumb.instance}):a=O;return a.id=a.id||Y.uuid(),h.cacheTypeItem("overlay",a,a.id),h._jsPlumb.overlays[a.id]=a,a};c.OverlayCapableJsPlumbUIComponent=function(h){J.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},h.label&&(this.getDefaultType().overlays[nt]=["Label",{label:h.label,location:h.labelLocation||this.defaultLabelLocation||.5,labelStyle:h.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:nt}]),this.setListenerComponent=function(O){if(this._jsPlumb)for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a].setListenerComponent(O)}},c.OverlayCapableJsPlumbUIComponent.applyType=function(h,O){if(O.overlays){var a={},i;for(i in O.overlays){var m=h._jsPlumb.overlays[O.overlays[i][1].id];if(m)m.updateFrom(O.overlays[i][1]),a[O.overlays[i][1].id]=!0,m.reattach(h._jsPlumb.instance,h);else{var S=h.getCachedTypeItem("overlay",O.overlays[i][1].id);S!=null?(S.reattach(h._jsPlumb.instance,h),S.setVisible(!0),S.updateFrom(O.overlays[i][1]),h._jsPlumb.overlays[S.id]=S):S=h.addOverlay(O.overlays[i],!0),a[S.id]=!0}}for(i in h._jsPlumb.overlays)a[h._jsPlumb.overlays[i].id]==null&&h.removeOverlay(h._jsPlumb.overlays[i].id,!0)}},Y.extend(c.OverlayCapableJsPlumbUIComponent,J.jsPlumbUIComponent,{setHover:function(h,O){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a][h?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(h,O){var a=et(this,h);if(this.getData&&a.type==="Label"&&Y.isArray(h)){var i=this.getData(),m=h[1];if(i){var S=m.labelLocationAttribute||"labelLocation",T=i?i[S]:null;T&&(a.loc=T)}}return O||this.repaint(),a},getOverlay:function(h){return this._jsPlumb.overlays[h]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(h){var O=this.getOverlay(h);O&&O.hide()},hideOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].hide()},showOverlay:function(h){var O=this.getOverlay(h);O&&O.show()},showOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].show()},removeAllOverlays:function(h){for(var O in this._jsPlumb.overlays)this._jsPlumb.overlays[O].cleanup&&this._jsPlumb.overlays[O].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},h||this.repaint()},removeOverlay:function(h,O){var a=this._jsPlumb.overlays[h];a&&(a.setVisible(!1),!O&&a.cleanup&&a.cleanup(),delete this._jsPlumb.overlays[h],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[h],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[h])},removeOverlays:function(){for(var h=0,O=arguments.length;h<O;h++)this.removeOverlay(arguments[h])},moveParent:function(h){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),h.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),h.appendChild(this.canvas);for(var O in this._jsPlumb.overlays)if(this._jsPlumb.overlays[O].isAppendedAtTopLevel){var a=this._jsPlumb.overlays[O].getElement();a.parentNode.removeChild(a),h.appendChild(a)}}},getLabel:function(){var h=this.getOverlay(nt);return h!=null?h.getLabel():null},getLabelOverlay:function(){return this.getOverlay(nt)},setLabel:function(h){var O=this.getOverlay(nt);if(O)h.constructor===String||h.constructor===Function?O.setLabel(h):(h.label&&O.setLabel(h.label),h.location&&O.setLocation(h.location));else{var a=h.constructor===String||h.constructor===Function?{label:h}:h;O=K(this,a),this._jsPlumb.overlays[nt]=O}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(h){for(var O in this._jsPlumb.overlays)this._jsPlumb.overlays[O].cleanup(h),this._jsPlumb.overlays[O].destroy(h);h&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(h){this[h?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(h,O){this._jsPlumb.overlayPositions[h.id]=O},getAbsoluteOverlayPosition:function(h){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[h.id]:null},_clazzManip:function(h,O,a){if(!a)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][h+"Class"](O)},addClass:function(h,O){this._clazzManip("add",h,O)},removeClass:function(h,O){this._clazzManip("remove",h,O)}})}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt=function(a,i,m){var S=!1;return{drag:function(){if(S)return S=!1,!0;if(i.element){var T=m.getUIPosition(arguments,m.getZoom());T!=null&&m.setPosition(i.element,T),m.repaint(i.element,T),a.paint({anchorPoint:a.anchor.getCurrentLocation({element:a})})}},stopDrag:function(){S=!0}}},K=function(a,i,m,S){var T=i.createElement("div",{position:"absolute"});i.appendElement(T);var P=i.getId(T);i.setPosition(T,m),T.style.width=S[0]+"px",T.style.height=S[1]+"px",i.manage(P,T,!0),a.id=P,a.element=T},et=function(a,i,m,S,T,P,g,e){var M=new c.FloatingAnchor({reference:i,referenceCanvas:S,jsPlumbInstance:P});return g({paintStyle:a,endpoint:m,anchor:M,source:T,scope:e})},h=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],O=function(a,i){var m=0;if(i!=null){for(var S=0;S<a.connections.length;S++)if(a.connections[S].sourceId===i||a.connections[S].targetId===i){m=S;break}}return a.connections[m]};c.Endpoint=function(a){var i=a._jsPlumb,m=a.newConnection,S=a.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],c.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:a.connectionType,maxConnections:a.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:a.maxConnections,paintStyle:a.endpointStyle||a.paintStyle||a.style||this._jsPlumb.instance.Defaults.EndpointStyle||c.Defaults.EndpointStyle,hoverPaintStyle:a.endpointHoverStyle||a.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||c.Defaults.EndpointHoverStyle,connectorStyle:a.connectorStyle,connectorHoverStyle:a.connectorHoverStyle,connectorClass:a.connectorClass,connectorHoverClass:a.connectorHoverClass,connectorOverlays:a.connectorOverlays,connector:a.connector,connectorTooltip:a.connectorTooltip}),this._jsPlumb.enabled=a.enabled!==!1,this._jsPlumb.visible=!0,this.element=c.getElement(a.source),this._jsPlumb.uuid=a.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(a.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=a.elementId,this.dragProxy=a.dragProxy,this._jsPlumb.connectionCost=a.connectionCost,this._jsPlumb.connectionsDirected=a.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var T=a.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(C){T=C};var P=function(){var C=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var A=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(C),this.addClass(A),c.updateClasses(this.element,A,C)}.bind(this);this.prepareAnchor=function(C){var A=this._jsPlumb.instance.makeAnchor(C,this.elementId,i);return A.bind("anchorChanged",function(r){this.fire("anchorChanged",{endpoint:this,anchor:r}),P()}.bind(this)),A},this.setPreparedAnchor=function(C,A){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=C,P(),A||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(C,A){var r=this.prepareAnchor(C);return this.setPreparedAnchor(r,A),this};var g=function(C){if(this.connections.length>0)for(var A=0;A<this.connections.length;A++)this.connections[A].setHover(C,!1);else this.setHover(C)}.bind(this);this.bind("mouseover",function(){g(!0)}),this.bind("mouseout",function(){g(!1)}),a._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(C,A){var r=function(_,x){var u=i.getRenderMode();if(c.Endpoints[u][_])return new c.Endpoints[u][_](x);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+_+"'"}},f={_jsPlumb:this._jsPlumb.instance,cssClass:a.cssClass,container:a.container,tooltip:a.tooltip,connectorTooltip:a.connectorTooltip,endpoint:this},l;return Y.isString(C)?l=r(C,f):Y.isArray(C)?(f=Y.merge(C[1],f),l=r(C[0],f)):l=C.clone(),l.clone=function(){if(Y.isString(C))return r(C,f);if(Y.isArray(C))return f=Y.merge(C[1],f),r(C[0],f)}.bind(this),l.typeId=A,l},this.setEndpoint=function(C,A){var r=this.prepareEndpoint(C);this.setPreparedEndpoint(r,!0)},this.setPreparedEndpoint=function(C,A){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=C,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},c.extend(this,a,h),this.isSource=a.isSource||!1,this.isTemporarySource=a.isTemporarySource||!1,this.isTarget=a.isTarget||!1,this.connections=a.connections||[],this.connectorPointerEvents=a["connector-pointer-events"],this.scope=a.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=a.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,(a.connectionsDetachable===!1||a.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=a.dragAllowedWhenFull!==!1,a.onMaxConnections&&this.bind("maxConnections",a.onMaxConnections),this.addConnection=function(C){this.connections.push(C),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(C,A,r){A=A==null?this.connections.indexOf(C):A,A>=0&&(this.connections.splice(A,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!r&&T&&this.connections.length===0&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:r!==!0})},this.deleteEveryConnection=function(C){for(var A=this.connections.length,r=0;r<A;r++)i.deleteConnection(this.connections[0],C)},this.detachFrom=function(C,A,r){for(var f=[],l=0;l<this.connections.length;l++)(this.connections[l].endpoints[1]===C||this.connections[l].endpoints[0]===C)&&f.push(this.connections[l]);for(var _=0,x=f.length;_<x;_++)i.deleteConnection(f[0]);return this},this.getElement=function(){return this.element},this.setElement=function(C){var A=this._jsPlumb.instance.getId(C),r=this.elementId;return Y.removeWithFunction(a.endpointsByElement[this.elementId],function(f){return f.id===this.id}.bind(this)),this.element=c.getElement(C),this.elementId=i.getId(this.element),i.router.rehomeEndpoint(this,r,this.element),i.dragManager.endpointAdded(this.element),Y.addToList(a.endpointsByElement,A,this),this},this.makeInPlaceCopy=function(){var C=this.anchor.getCurrentLocation({element:this}),A=this.anchor.getOrientation(this),r=this.anchor.getCssClass(),f={bind:function(){},compute:function(){return[C[0],C[1]]},getCurrentLocation:function(){return[C[0],C[1]]},getOrientation:function(){return A},getCssClass:function(){return r}};return S({dropOptions:a.dropOptions,anchor:f,source:this.element,paintStyle:this.getPaintStyle(),endpoint:a.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(C){C=C||{};var A=C.timestamp,r=C.recalc!==!1;if(!A||this.timestamp!==A){var f=i.updateOffset({elId:this.elementId,timestamp:A}),l=C.offset?C.offset.o:f.o;if(l!=null){var _=C.anchorPoint,x=C.connectorPaintStyle;if(_==null){var u=C.dimensions||f.s,j={xy:[l.left,l.top],wh:u,element:this,timestamp:A};if(r&&this.anchor.isDynamic&&this.connections.length>0){var b=O(this,C.elementWithPrecedence),w=b.endpoints[0]===this?1:0,d=w===0?b.sourceId:b.targetId,E=i.getCachedData(d),N=E.o,B=E.s;j.index=w===0?1:0,j.connection=b,j.txy=[N.left,N.top],j.twh=B,j.tElement=b.endpoints[w],j.tRotation=i.getRotation(d)}else this.connections.length>0&&(j.connection=this.connections[0]);j.rotation=i.getRotation(this.elementId),_=this.anchor.compute(j)}this.endpoint.compute(_,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,x||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=A;for(var W in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(W)){var n=this._jsPlumb.overlays[W];n.isVisible()&&(this._jsPlumb.overlayPlacements[W]=n.draw(this.endpoint,this._jsPlumb.paintStyleInUse),n.paint(this._jsPlumb.overlayPlacements[W]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&c.isDragSupported(this.element)){var C={id:null,element:null},A=null,r=!1,f=null,l=nt(this,C,i),_=a.dragOptions||{},x={},u=c.dragEvents.start,j=c.dragEvents.stop,b=c.dragEvents.drag,w=c.dragEvents.beforeStart,d,E=function(W){d=W.e.payload||{}},N=function(W){A=this.connectorSelector();var n=!0;this.isEnabled()||(n=!1),A==null&&!this.isSource&&!this.isTemporarySource&&(n=!1),this.isSource&&this.isFull()&&!(A!=null&&this.dragAllowedWhenFull)&&(n=!1),A!=null&&!A.isDetachable(this)&&(this.isFull()?n=!1:A=null);var o=i.checkCondition(A==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:A});if(o===!1?n=!1:typeof o=="object"?c.extend(o,d||{}):o=d||{},n===!1)return i.stopDrag&&i.stopDrag(this.canvas),l.stopDrag(),!1;for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),A&&!this.isFull()&&this.isSource&&(A=null),i.updateOffset({elId:this.elementId});var p=this._jsPlumb.instance.getOffset(this.canvas),v=this.canvas,F=this._jsPlumb.instance.getSize(this.canvas);K(C,i,p,F),i.setAttributes(this.canvas,{dragId:C.id,elId:this.elementId});var I=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var X=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);X.endpoints[1]&&(I=X.endpoints[1])}var R=this._jsPlumb.instance.makeAnchor("Center");R.isFloating=!0,this._jsPlumb.floatingEndpoint=et(this.getPaintStyle(),R,I,this.canvas,C.element,i,S,this.scope);var V=this._jsPlumb.floatingEndpoint.anchor;if(A==null)this.setHover(!1,!1),A=m({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:C.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:a.connectorStyle,hoverPaintStyle:a.connectorHoverStyle,connector:a.connector,overlays:a.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:a.scope,data:o}),A.pending=!0,A.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=V,i.fire("connectionDrag",A),i.router.newConnection(A);else{r=!0,A.setHover(!1);var at=A.endpoints[0].id===this.id?0:1;this.detachFromConnection(A,null,!0);var st=i.getDragScope(v);i.setAttribute(this.canvas,"originalScope",st),i.fire("connectionDrag",A),at===0?(f=[A.source,A.sourceId,v,st],i.router.sourceOrTargetChanged(A.endpoints[at].elementId,C.id,A,C.element,0)):(f=[A.target,A.targetId,v,st],i.router.sourceOrTargetChanged(A.endpoints[at].elementId,C.id,A,C.element,1)),A.suspendedEndpoint=A.endpoints[at],A.suspendedElement=A.endpoints[at].getElement(),A.suspendedElementId=A.endpoints[at].elementId,A.suspendedElementType=at===0?"source":"target",A.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=A.suspendedEndpoint,A.endpoints[at]=this._jsPlumb.floatingEndpoint,A.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.registerFloatingConnection(C,A,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),B=function(){if(i.setConnectionBeingDragged(!1),A&&A.endpoints!=null){var W=i.getDropEvent(arguments),n=i.getFloatingAnchorIndex(A);if(A.endpoints[n===0?1:0].anchor.locked=!1,A.removeClass(i.draggingClass),this._jsPlumb&&(A.deleteConnectionNow||A.endpoints[n]===this._jsPlumb.floatingEndpoint)&&r&&A.suspendedEndpoint){n===0?(A.floatingElement=A.source,A.floatingId=A.sourceId,A.floatingEndpoint=A.endpoints[0],A.floatingIndex=0,A.source=f[0],A.sourceId=f[1]):(A.floatingElement=A.target,A.floatingId=A.targetId,A.floatingEndpoint=A.endpoints[1],A.floatingIndex=1,A.target=f[0],A.targetId=f[1]);var o=this._jsPlumb.floatingEndpoint;i.setDragScope(f[2],f[3]),A.endpoints[n]=A.suspendedEndpoint,A.isReattach()||A._forceReattach||A._forceDetach||!i.deleteConnection(A,{originalEvent:W})?(A.setHover(!1),A._forceDetach=null,A._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(A),A.suspendedEndpoint.addConnection(A),n===1?i.router.sourceOrTargetChanged(A.floatingId,A.targetId,A,A.target,n):i.router.sourceOrTargetChanged(A.floatingId,A.sourceId,A,A.source,n),i.repaint(f[1])):i.deleteObject({endpoint:o})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",A,W),A.pending&&i.fire("connectionAborted",A,W),i.currentlyDragging=!1,A.suspendedElement=null,A.suspendedEndpoint=null,A=null}C&&C.element&&i.remove(C.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);_=c.extend(x,_),_.scope=this.scope||_.scope,_[w]=Y.wrap(_[w],E,!1),_[u]=Y.wrap(_[u],N,!1),_[b]=Y.wrap(_[b],l.drag),_[j]=Y.wrap(_[j],B),_.multipleDrop=!1,_.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}.bind(this),i.initDraggable(this.canvas,_,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var M=a.endpoint||this._jsPlumb.instance.Defaults.Endpoint||c.Defaults.Endpoint;this.setEndpoint(M,!0);var L=a.anchor?a.anchor:a.anchors?a.anchors:i.Defaults.Anchor||"Top";this.setAnchor(L,!0);var U=["default",a.type||""].join(" ");this.addType(U,a.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var G=function(C,A,r,f){if(c.isDropSupported(this.element)){var l=a.dropOptions||i.Defaults.DropOptions||c.Defaults.DropOptions;l=c.extend({},l),l.scope=l.scope||this.scope;var _=c.dragEvents.drop,x=c.dragEvents.over,u=c.dragEvents.out,j=this,b=i.EndpointDropHandler({getEndpoint:function(){return j},jsPlumb:i,enabled:function(){return r!=null?r.isEnabled():!0},isFull:function(){return r.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(w){j.addClass(w)},removeClass:function(w){j.removeClass(w)},isDropAllowed:function(){return j.isDropAllowed.apply(j,arguments)},reference:f,isRedrop:function(w,d){return w.suspendedEndpoint&&d.reference&&w.suspendedEndpoint.id===d.reference.id}});l[_]=Y.wrap(l[_],b,!0),l[x]=Y.wrap(l[x],function(){var w=c.getDragObject(arguments),d=i.getAttribute(c.getElement(w),"dragId"),E=i.getFloatingConnectionFor(d);if(E!=null){var N=i.getFloatingAnchorIndex(E),B=this.isTarget&&N!==0||E.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===E.suspendedEndpoint.id;if(B){var W=i.checkCondition("checkDropAllowed",{sourceEndpoint:E.endpoints[N],targetEndpoint:this,connection:E});this[(W?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(W?"remove":"add")+"Class"](i.endpointDropForbiddenClass),E.endpoints[N].anchor.over(this.anchor,this)}}}.bind(this)),l[u]=Y.wrap(l[u],function(){var w=c.getDragObject(arguments),d=w==null?null:i.getAttribute(c.getElement(w),"dragId"),E=d?i.getFloatingConnectionFor(d):null;if(E!=null){var N=i.getFloatingAnchorIndex(E),B=this.isTarget&&N!==0||E.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===E.suspendedEndpoint.id;B&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),E.endpoints[N].anchor.out())}}.bind(this)),i.initDroppable(C,l,"internal",A)}}.bind(this);return this.anchor.isFloating||G(this.canvas,!(a._transient||this.anchor.isFloating),this,a.reference),this},Y.extend(c.Endpoint,c.OverlayCapableJsPlumbUIComponent,{setVisible:function(a,i,m){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!i){for(var S=0;S<this.connections.length;S++)if(this.connections[S].setVisible(a),!m){var T=this===this.connections[S].endpoints[0]?1:0;this.connections[S].endpoints[T].connections.length===1&&this.connections[S].endpoints[T].setVisible(a,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(a,i){this.setPaintStyle(a.endpointStyle||a.paintStyle,i),this.setHoverPaintStyle(a.endpointHoverStyle||a.hoverPaintStyle,i),a.maxConnections!=null&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),c.extend(this,a,h),a.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),c.OverlayCapableJsPlumbUIComponent.applyType(this,a)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){var a=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");c.removeClass(this.element,a),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(a){var i=!1;if(a){for(var m=0;m<this.connections.length;m++)if(this.connections[m].endpoints[1]===a||this.connections[m].endpoints[0]===a){i=!0;break}}return i},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=c.getElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}}),J.jsPlumbInstance.prototype.EndpointDropHandler=function(a){return function(i){var m=a.jsPlumb;a.removeClass(m.endpointDropAllowedClass),a.removeClass(m.endpointDropForbiddenClass);var S=m.getDropEvent(arguments),T=m.getDragObject(arguments),P=m.getAttribute(T,"dragId");m.getAttribute(T,"elId");var g=m.getAttribute(T,"originalScope"),e=m.getFloatingConnectionFor(P);if(e!=null){var M=e.suspendedEndpoint!=null;if(!(M&&e.suspendedEndpoint._jsPlumb==null)){var L=a.getEndpoint(e);if(L!=null){if(a.isRedrop(e,a)){e._forceReattach=!0,e.setHover(!1),a.maybeCleanup&&a.maybeCleanup(L);return}var U=m.getFloatingAnchorIndex(e);if(U===0&&!a.isSource||U===1&&!a.isTarget){a.maybeCleanup&&a.maybeCleanup(L);return}a.onDrop&&a.onDrop(e),g&&m.setDragScope(T,g);var G=a.isFull(i);if(G&&L.fire("maxConnections",{endpoint:this,connection:e,maxConnections:L._jsPlumb.maxConnections},S),!G&&a.enabled()){var C=!0;U===0?(e.floatingElement=e.source,e.floatingId=e.sourceId,e.floatingEndpoint=e.endpoints[0],e.floatingIndex=0,e.source=a.element,e.sourceId=m.getId(a.element)):(e.floatingElement=e.target,e.floatingId=e.targetId,e.floatingEndpoint=e.endpoints[1],e.floatingIndex=1,e.target=a.element,e.targetId=m.getId(a.element)),M&&e.suspendedEndpoint.id!==L.id&&(!e.isDetachAllowed(e)||!e.endpoints[U].isDetachAllowed(e)||!e.suspendedEndpoint.isDetachAllowed(e)||!m.checkCondition("beforeDetach",e))&&(C=!1);var A=function(f){e.endpoints[U].detachFromConnection(e),e.suspendedEndpoint&&e.suspendedEndpoint.detachFromConnection(e),e.endpoints[U]=L,L.addConnection(e);var l=L.getParameters();for(var _ in l)e.setParameter(_,l[_]);if(!M)l.draggable&&m.initDraggable(this.element,a.dragOptions,"internal",m);else{var x=e.suspendedEndpoint.elementId;m.fireMoveEvent({index:U,originalSourceId:U===0?x:e.sourceId,newSourceId:U===0?L.elementId:e.sourceId,originalTargetId:U===1?x:e.targetId,newTargetId:U===1?L.elementId:e.targetId,originalSourceEndpoint:U===0?e.suspendedEndpoint:e.endpoints[0],newSourceEndpoint:U===0?L:e.endpoints[0],originalTargetEndpoint:U===1?e.suspendedEndpoint:e.endpoints[1],newTargetEndpoint:U===1?L:e.endpoints[1],connection:e},S)}if(U===1?m.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):m.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),e.endpoints[0].finalEndpoint){var u=e.endpoints[0];u.detachFromConnection(e),e.endpoints[0]=e.endpoints[0].finalEndpoint,e.endpoints[0].addConnection(e)}Y.isObject(f)&&e.mergeData(f),m.finaliseConnection(e,null,S,!1),e.setHover(!1),m.revalidate(e.endpoints[0].element)}.bind(this),r=function(){e.suspendedEndpoint&&(e.endpoints[U]=e.suspendedEndpoint,e.setHover(!1),e._forceDetach=!0,U===0?(e.source=e.suspendedEndpoint.element,e.sourceId=e.suspendedEndpoint.elementId):(e.target=e.suspendedEndpoint.element,e.targetId=e.suspendedEndpoint.elementId),e.suspendedEndpoint.addConnection(e),U===1?m.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):m.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),m.repaint(e.sourceId),e._forceDetach=!1)};if(C=C&&a.isDropAllowed(e.sourceId,e.targetId,e.scope,e,L),C)return A(C),!0;r()}a.maybeCleanup&&a.maybeCleanup(L),m.currentlyDragging=!1}}}}}}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt=function(h,O,a,i,m){if(c.Connectors[O]=c.Connectors[O]||{},c.Connectors[O][a]==null){if(c.Connectors[a]==null){if(h.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+a+"'")}c.Connectors[O][a]=function(){c.Connectors[a].apply(this,arguments),c.ConnectorRenderers[O].apply(this,arguments)},Y.extend(c.Connectors[O][a],[c.Connectors[a],c.ConnectorRenderers[O]])}return new c.Connectors[O][a](i,m)},K=function(h,O,a){return h?a.makeAnchor(h,O,a):null},et=function(h,O,a,i){O!=null&&(O._jsPlumbConnections=O._jsPlumbConnections||{},i?delete O._jsPlumbConnections[h.id]:O._jsPlumbConnections[h.id]=!0,Y.isEmpty(O._jsPlumbConnections)?a.removeClass(O,a.connectedClass):a.addClass(O,a.connectedClass))};c.Connection=function(h){var O=h.newEndpoint;this.id=h.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=h.previousConnection,this.source=c.getElement(h.source),this.target=c.getElement(h.target),c.OverlayCapableJsPlumbUIComponent.apply(this,arguments),h.sourceEndpoint?(this.source=h.sourceEndpoint.getElement(),this.sourceId=h.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),h.targetEndpoint?(this.target=h.targetEndpoint.getElement(),this.targetId=h.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=h.scope,this.endpoints=[],this.endpointStyles=[];var a=this._jsPlumb.instance;a.manage(this.sourceId,this.source),a.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:h.cssClass,container:h.container,"pointer-events":h["pointer-events"],editorParams:h.editorParams,overlays:h.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(_,x,u,j,b){return u=u||this._jsPlumb.instance.getId(x),this.prepareEndpoint(a,O,this,j,_?0:1,h,x,u,b)},h.type&&(h.endpoints=h.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(h.type).endpoints);var i=this.makeEndpoint(!0,this.source,this.sourceId,h.sourceEndpoint),m=this.makeEndpoint(!1,this.target,this.targetId,h.targetEndpoint);i&&Y.addToList(h.endpointsByElement,this.sourceId,i),m&&Y.addToList(h.endpointsByElement,this.targetId,m),this.scope||(this.scope=this.endpoints[0].scope),h.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(h.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(h.deleteEndpointsOnEmpty));var S=a.Defaults.ConnectionsDetachable;h.detachable===!1&&(S=!1),this.endpoints[0].connectionsDetachable===!1&&(S=!1),this.endpoints[1].connectionsDetachable===!1&&(S=!1);var T=h.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||a.Defaults.ReattachConnections;this.appendToDefaultType({detachable:S,reattach:T,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||h.paintStyle||a.Defaults.PaintStyle||c.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||h.hoverPaintStyle||a.Defaults.HoverPaintStyle||c.Defaults.HoverPaintStyle});var P=a.getSuspendedAt();if(!a.isSuspendDrawing()){var g=a.getCachedData(this.sourceId),e=g.o,M=g.s,L=a.getCachedData(this.targetId),U=L.o,G=L.s,C=P||jsPlumbUtil.uuid(),A=this.endpoints[0].anchor.compute({xy:[e.left,e.top],wh:M,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[U.left,U.top],twh:G,tElement:this.endpoints[1],timestamp:C,rotation:a.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:A,timestamp:C}),A=this.endpoints[1].anchor.compute({xy:[U.left,U.top],wh:G,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[e.left,e.top],twh:M,tElement:this.endpoints[0],timestamp:C,rotation:a.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:A,timestamp:C})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(_){return this._jsPlumb.detachable===!1?!1:_!=null?_.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(_){this._jsPlumb.detachable=_===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(_){this._jsPlumb.reattach=_===!0},this._jsPlumb.cost=h.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=h.directed,h.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var r=c.extend({},this.endpoints[1].getParameters());c.extend(r,this.endpoints[0].getParameters()),c.extend(r,this.getParameters()),this.setParameters(r),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||h.connector||a.Defaults.Connector||c.Defaults.Connector,!0);var f=h.data==null||!Y.isObject(h.data)?{}:h.data;this.getData=function(){return f},this.setData=function(_){f=_||{}},this.mergeData=function(_){f=c.extend(f,_)};var l=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,h.type].join(" ");/[^\s]/.test(l)&&this.addType(l,h.data,!0),this.updateConnectedClass()},Y.extend(c.Connection,c.OverlayCapableJsPlumbUIComponent,{applyType:function(h,O,a){var i=null;h.connector!=null&&(i=this.getCachedTypeItem("connector",a.connector),i==null&&(i=this.prepareConnector(h.connector,a.connector),this.cacheTypeItem("connector",i,a.connector)),this.setPreparedConnector(i)),h.detachable!=null&&this.setDetachable(h.detachable),h.reattach!=null&&this.setReattach(h.reattach),h.scope&&(this.scope=h.scope),h.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,h.cssClass);var m=null;h.anchor?(m=this.getCachedTypeItem("anchors",a.anchor),m==null&&(m=[this._jsPlumb.instance.makeAnchor(h.anchor),this._jsPlumb.instance.makeAnchor(h.anchor)],this.cacheTypeItem("anchors",m,a.anchor))):h.anchors&&(m=this.getCachedTypeItem("anchors",a.anchors),m==null&&(m=[this._jsPlumb.instance.makeAnchor(h.anchors[0]),this._jsPlumb.instance.makeAnchor(h.anchors[1])],this.cacheTypeItem("anchors",m,a.anchors))),m!=null&&(this.endpoints[0].anchor=m[0],this.endpoints[1].anchor=m[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),c.OverlayCapableJsPlumbUIComponent.applyType(this,h)},addClass:function(h,O){O&&(this.endpoints[0].addClass(h),this.endpoints[1].addClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(h)),this.connector&&this.connector.addClass(h)},removeClass:function(h,O){O&&(this.endpoints[0].removeClass(h),this.endpoints[1].removeClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(h)),this.connector&&this.connector.removeClass(h)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(h){this._jsPlumb.visible=h,this.connector&&this.connector.setVisible(h),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(h){this._jsPlumb&&(et(this,this.source,this._jsPlumb.instance,h),et(this,this.target,this._jsPlumb.instance,h))},setHover:function(h){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(h),J.jsPlumb[h?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),J.jsPlumb[h?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(h){this._jsPlumb.cost=h},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(h,O){var a={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},i=this._jsPlumb.instance.getRenderMode(),m;return Y.isString(h)?m=nt(this._jsPlumb.instance,i,h,a,this):Y.isArray(h)&&(h.length===1?m=nt(this._jsPlumb.instance,i,h[0],a,this):m=nt(this._jsPlumb.instance,i,h[0],Y.merge(h[1],a),this)),O!=null&&(m.typeId=O),m},setPreparedConnector:function(h,O,a,i){if(this.connector!==h){var m,S="";if(this.connector!=null&&(m=this.connector,S=m.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=h,i&&this.cacheTypeItem("connector",h,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(S),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),m!=null)for(var T=this.getOverlays(),P=0;P<T.length;P++)T[P].transfer&&T[P].transfer(this.connector);a||this.setListenerComponent(this.connector),O||this.repaint()}},setConnector:function(h,O,a,i){var m=this.prepareConnector(h,i);this.setPreparedConnector(m,O,a,i)},paint:function(h){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){h=h||{};var O=h.timestamp,a=!1,i=a?this.sourceId:this.targetId,m=a?this.targetId:this.sourceId,S=a?0:1,T=a?1:0;if(O==null||O!==this._jsPlumb.lastPaintedAt){var P=this._jsPlumb.instance.updateOffset({elId:m}).o,g=this._jsPlumb.instance.updateOffset({elId:i}).o,e=this.endpoints[T],M=this.endpoints[S],L=e.anchor.getCurrentLocation({xy:[P.left,P.top],wh:[P.width,P.height],element:e,timestamp:O,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),U=M.anchor.getCurrentLocation({xy:[g.left,g.top],wh:[g.width,g.height],element:M,timestamp:O,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:L,targetPos:U,sourceOrientation:e.anchor.getOrientation(e),targetOrientation:M.anchor.getOrientation(M),sourceEndpoint:this.endpoints[T],targetEndpoint:this.endpoints[S],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:P,targetInfo:g});var G={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var C in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(C)){var A=this._jsPlumb.overlays[C];A.isVisible()&&(this._jsPlumb.overlayPlacements[C]=A.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(A)),G.minX=Math.min(G.minX,this._jsPlumb.overlayPlacements[C].minX),G.maxX=Math.max(G.maxX,this._jsPlumb.overlayPlacements[C].maxX),G.minY=Math.min(G.minY,this._jsPlumb.overlayPlacements[C].minY),G.maxY=Math.max(G.maxY,this._jsPlumb.overlayPlacements[C].maxY))}var r=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,f=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),l={xmin:Math.min(this.connector.bounds.minX-(r+f),G.minX),ymin:Math.min(this.connector.bounds.minY-(r+f),G.minY),xmax:Math.max(this.connector.bounds.maxX+(r+f),G.maxX),ymax:Math.max(this.connector.bounds.maxY+(r+f),G.maxY)};this.connector.paintExtents=l,this.connector.paint(this._jsPlumb.paintStyleInUse,null,l);for(var _ in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(_)){var x=this._jsPlumb.overlays[_];x.isVisible()&&x.paint(this._jsPlumb.overlayPlacements[_],l)}}this._jsPlumb.lastPaintedAt=O}},repaint:function(h){var O=jsPlumb.extend(h||{},{});O.elId=this.sourceId,this.paint(O)},prepareEndpoint:function(h,O,a,i,m,S,T,P,g){var e;if(i)a.endpoints[m]=i,i.addConnection(a);else{S.endpoints||(S.endpoints=[null,null]);var M=g||S.endpoints[m]||S.endpoint||h.Defaults.Endpoints[m]||c.Defaults.Endpoints[m]||h.Defaults.Endpoint||c.Defaults.Endpoint;S.endpointStyles||(S.endpointStyles=[null,null]),S.endpointHoverStyles||(S.endpointHoverStyles=[null,null]);var L=S.endpointStyles[m]||S.endpointStyle||h.Defaults.EndpointStyles[m]||c.Defaults.EndpointStyles[m]||h.Defaults.EndpointStyle||c.Defaults.EndpointStyle;L.fill==null&&S.paintStyle!=null&&(L.fill=S.paintStyle.stroke),L.outlineStroke==null&&S.paintStyle!=null&&(L.outlineStroke=S.paintStyle.outlineStroke),L.outlineWidth==null&&S.paintStyle!=null&&(L.outlineWidth=S.paintStyle.outlineWidth);var U=S.endpointHoverStyles[m]||S.endpointHoverStyle||h.Defaults.EndpointHoverStyles[m]||c.Defaults.EndpointHoverStyles[m]||h.Defaults.EndpointHoverStyle||c.Defaults.EndpointHoverStyle;S.hoverPaintStyle!=null&&(U==null&&(U={}),U.fill==null&&(U.fill=S.hoverPaintStyle.stroke));var G=S.anchors?S.anchors[m]:S.anchor?S.anchor:K(h.Defaults.Anchors[m],P,h)||K(c.Defaults.Anchors[m],P,h)||K(h.Defaults.Anchor,P,h)||K(c.Defaults.Anchor,P,h),C=S.uuids?S.uuids[m]:null;e=O({paintStyle:L,hoverPaintStyle:U,endpoint:M,connections:[a],uuid:C,anchor:G,source:T,scope:S.scope,reattach:S.reattach||h.Defaults.ReattachConnections,detachable:S.detachable||h.Defaults.ConnectionsDetachable}),i==null&&e.setDeleteOnEmpty(!0),a.endpoints[m]=e,S.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e},replaceEndpoint:function(h,O){var a=this.endpoints[h],i=a.elementId,m=this._jsPlumb.instance.getEndpoints(i),S=m.indexOf(a),T=this.makeEndpoint(h===0,a.element,i,null,O);this.endpoints[h]=T,m.splice(S,1,T),this._jsPlumb.instance.deleteObject({endpoint:a,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:a,current:T}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumbUtil,Y=J.jsPlumb;Y.AnchorManager=function(h){var O={},a={},i={},m={},S=this,T={},P=h.jsPlumbInstance,g={},e=function(l,_,x,u,j,b,w,d){for(var E=[],N=_[j?0:1]/(u.length+1),B=0;B<u.length;B++){var W=(B+1)*N,n=b*_[j?1:0];w&&(W=_[j?0:1]-W);var o=j?W:n,t=x.left+o,p=o/_[0],v=j?n:W,F=x.top+v,I=v/_[1];if(d!==0){var X=jsPlumbUtil.rotatePoint([t,F],[x.centerx,x.centery],d);t=X[0],F=X[1]}E.push([t,F,p,I,u[B][1],u[B][2]])}return E},M=function(l,_){return _[0][0]-l[0][0]},L=function(l,_){var x=l[0][0]<0?-Math.PI-l[0][0]:Math.PI-l[0][0],u=_[0][0]<0?-Math.PI-_[0][0]:Math.PI-_[0][0];return x-u},U={top:L,right:M,bottom:M,left:L},G=function(l,_){return l.sort(_)},C=function(l,_){var x=P.getCachedData(l),u=x.s,j=x.o,b=function(w,d,E,N,B,W,n){if(N.length>0)for(var o=G(N,U[w]),t=w==="right"||w==="top",p=P.getRotation(l),v=e(w,d,E,o,B,W,t,p),F=function(at,st){a[at.id]=[st[0],st[1],st[2],st[3]],i[at.id]=n},I=0;I<v.length;I++){var X=v[I][4],R=X.endpoints[0].elementId===l,V=X.endpoints[1].elementId===l;R&&F(X.endpoints[0],v[I]),V&&F(X.endpoints[1],v[I])}};b("bottom",u,j,_.bottom,!0,1,[0,1]),b("top",u,j,_.top,!0,0,[0,-1]),b("left",u,j,_.left,!1,0,[-1,0]),b("right",u,j,_.right,!1,1,[1,0])};this.reset=function(){O={},m={},T={}},this.addFloatingConnection=function(l,_){g[l]=_},this.newConnection=function(l){var _=l.sourceId,x=l.targetId,u=l.endpoints,j=!0,b=function(w,d,E,N,B){_===x&&E.isContinuous&&(l._jsPlumb.instance.removeElement(u[1].canvas),j=!1),c.addToList(m,N,[B,d,E.constructor===Y.DynamicAnchor])};b(0,u[0],u[0].anchor,x,l),j&&b(1,u[1],u[1].anchor,_,l)};var A=function(l){(function(_,x){if(_){var u=function(j){return j[4]===x};c.removeWithFunction(_.top,u),c.removeWithFunction(_.left,u),c.removeWithFunction(_.bottom,u),c.removeWithFunction(_.right,u)}})(T[l.elementId],l.id)};this.connectionDetached=function(l,_){var x=l.connection||l,u=l.sourceId,j=l.targetId,b=x.endpoints,w=function(d,E,N,B,W){c.removeWithFunction(m[B],function(n){return n[0].id===W.id})};w(1,b[1],b[1].anchor,u,x),w(0,b[0],b[0].anchor,j,x),x.floatingId&&(w(x.floatingIndex,x.floatingEndpoint,x.floatingEndpoint.anchor,x.floatingId,x),A(x.floatingEndpoint)),A(x.endpoints[0]),A(x.endpoints[1]),_||(S.redraw(x.sourceId),x.targetId!==x.sourceId&&S.redraw(x.targetId))},this.addEndpoint=function(l,_){c.addToList(O,_,l)},this.changeId=function(l,_){m[_]=m[l],O[_]=O[l],delete m[l],delete O[l]},this.getConnectionsFor=function(l){return m[l]||[]},this.getEndpointsFor=function(l){return O[l]||[]},this.deleteEndpoint=function(l){c.removeWithFunction(O[l.elementId],function(_){return _.id===l.id}),A(l)},this.elementRemoved=function(l){delete g[l],delete O[l],O[l]=[]};var r=function(l,_,x,u,j,b,w,d,E,N,B,W){var n=-1,o=u.endpoints[w],t=o.id,p=[1,0][w],v=[[_,x],u,j,b,t],F=l[E],I=o._continuousAnchorEdge?l[o._continuousAnchorEdge]:null,X,R;if(I){var V=c.findWithFunction(I,function(st){return st[4]===t});if(V!==-1)for(I.splice(V,1),X=0;X<I.length;X++)R=I[X][1],c.addWithFunction(B,R,function(st){return st.id===R.id}),c.addWithFunction(W,I[X][1].endpoints[w],function(st){return st.id===R.endpoints[w].id}),c.addWithFunction(W,I[X][1].endpoints[p],function(st){return st.id===R.endpoints[p].id})}for(X=0;X<F.length;X++)R=F[X][1],h.idx===1&&F[X][3]===b&&n===-1&&(n=X),c.addWithFunction(B,R,function(st){return st.id===R.id}),c.addWithFunction(W,F[X][1].endpoints[w],function(st){return st.id===R.endpoints[w].id}),c.addWithFunction(W,F[X][1].endpoints[p],function(st){return st.id===R.endpoints[p].id});{var at=d?n!==-1?n:0:F.length;F.splice(at,0,v)}o._continuousAnchorEdge=E};this.sourceOrTargetChanged=function(l,_,x,u,j){if(j===0){if(l!==_){x.sourceId=_,x.source=u,c.removeWithFunction(m[l],function(N){return N[0].id===x.id});var b=c.findWithFunction(m[x.targetId],function(N){return N[0].id===x.id});b>-1&&(m[x.targetId][b][0]=x,m[x.targetId][b][1]=x.endpoints[0],m[x.targetId][b][2]=x.endpoints[0].anchor.constructor===Y.DynamicAnchor),c.addToList(m,_,[x,x.endpoints[1],x.endpoints[1].anchor.constructor===Y.DynamicAnchor]),x.endpoints[1].anchor.isContinuous&&(x.source===x.target?x._jsPlumb.instance.removeElement(x.endpoints[1].canvas):x.endpoints[1].canvas.parentNode==null&&x._jsPlumb.instance.appendElement(x.endpoints[1].canvas)),x.updateConnectedClass()}}else if(j===1){var w=x.endpoints[0].elementId;x.target=u,x.targetId=_;var d=c.findWithFunction(m[w],function(N){return N[0].id===x.id}),E=c.findWithFunction(m[l],function(N){return N[0].id===x.id});d!==-1&&(m[w][d][0]=x,m[w][d][1]=x.endpoints[1],m[w][d][2]=x.endpoints[1].anchor.constructor===Y.DynamicAnchor),E>-1&&(m[l].splice(E,1),c.addToList(m,_,[x,x.endpoints[0],x.endpoints[0].anchor.constructor===Y.DynamicAnchor])),x.updateConnectedClass()}},this.rehomeEndpoint=function(l,_,x){var u=O[_]||[],j=P.getId(x);if(j!==_){var b=u.indexOf(l);if(b>-1){var w=u.splice(b,1)[0];S.add(w,j)}}for(var d=0;d<l.connections.length;d++)l.connections[d].sourceId===_?S.sourceOrTargetChanged(_,l.elementId,l.connections[d],l.element,0):l.connections[d].targetId===_&&S.sourceOrTargetChanged(_,l.elementId,l.connections[d],l.element,1)},this.redraw=function(l,_,x,u,j,b){var w=[],d=[],E=[];if(!P.isSuspendDrawing()){var N=O[l]||[],B=m[l]||[];x=x||jsPlumbUtil.uuid(),u=u||{left:0,top:0},_&&(_={left:_.left+u.left,top:_.top+u.top});for(var W=P.updateOffset({elId:l,offset:_,recalc:!1,timestamp:x}),n={},o=0;o<B.length;o++){var t=B[o][0],p=t.sourceId,v=t.targetId,F=t.endpoints[0].anchor.isContinuous,I=t.endpoints[1].anchor.isContinuous;if(F||I){var X=p+"_"+v,R=n[X],V=t.sourceId===l?1:0,at=P.getRotation(v),st=P.getRotation(p);F&&!T[p]&&(T[p]={top:[],right:[],bottom:[],left:[]}),I&&!T[v]&&(T[v]={top:[],right:[],bottom:[],left:[]}),l!==v&&P.updateOffset({elId:v,timestamp:x}),l!==p&&P.updateOffset({elId:p,timestamp:x});var it=P.getCachedData(v),rt=P.getCachedData(p);v===p&&(F||I)?(r(T[p],-Math.PI/2,0,t,!1,v,0,!1,"top",p,w,d),r(T[v],-Math.PI/2,0,t,!1,p,1,!1,"top",v,w,d)):(R||(R=this.calculateOrientation(p,v,rt.o,it.o,t.endpoints[0].anchor,t.endpoints[1].anchor,t,st,at),n[X]=R),F&&r(T[p],R.theta,0,t,!1,v,0,!1,R.a[0],p,w,d),I&&r(T[v],R.theta2,-1,t,!0,p,1,!0,R.a[1],v,w,d)),F&&c.addWithFunction(E,p,function(pt){return pt===p}),I&&c.addWithFunction(E,v,function(pt){return pt===v}),c.addWithFunction(w,t,function(pt){return pt.id===t.id}),(F&&V===0||I&&V===1)&&c.addWithFunction(d,t.endpoints[V],function(pt){return pt.id===t.endpoints[V].id})}}for(o=0;o<N.length;o++)N[o].connections.length===0&&N[o].anchor.isContinuous&&(T[l]||(T[l]={top:[],right:[],bottom:[],left:[]}),r(T[l],-Math.PI/2,0,{endpoints:[N[o],N[o]],paint:function(){}},!1,l,0,!1,N[o].anchor.getDefaultFace(),l,w,d),c.addWithFunction(E,l,function(pt){return pt===l}));for(o=0;o<E.length;o++)C(E[o],T[E[o]]);for(o=0;o<N.length;o++)N[o].paint({timestamp:x,offset:W,dimensions:W.s,recalc:b!==!0});for(o=0;o<d.length;o++){var gt=P.getCachedData(d[o].elementId);d[o].paint({timestamp:null,offset:gt,dimensions:gt.s})}for(o=0;o<B.length;o++){var dt=B[o][1];if(dt.anchor.constructor===Y.DynamicAnchor){dt.paint({elementWithPrecedence:l,timestamp:x}),c.addWithFunction(w,B[o][0],function(pt){return pt.id===B[o][0].id});for(var lt=0;lt<dt.connections.length;lt++)dt.connections[lt]!==B[o][0]&&c.addWithFunction(w,dt.connections[lt],function(pt){return pt.id===dt.connections[lt].id})}else c.addWithFunction(w,B[o][0],function(pt){return pt.id===B[o][0].id})}var yt=g[l];for(yt&&yt.paint({timestamp:x,recalc:!1,elId:l}),o=0;o<w.length;o++)w[o].paint({elId:l,timestamp:null,recalc:!1,clearEdits:j})}return{c:w,e:d}};var f=function(l){c.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var _=l.faces||["top","right","bottom","left"],x=l.clockwise!==!1,u={},j={top:"bottom",right:"left",left:"right",bottom:"top"},b={top:"right",right:"bottom",left:"top",bottom:"left"},w={top:"left",right:"top",left:"bottom",bottom:"right"},d=x?b:w,E=x?w:b,N=l.cssClass||"",B=null,W=null,n=["left","right"],o=["top","bottom"],t=null,p=0;p<_.length;p++)u[_[p]]=!0;this.getDefaultFace=function(){return _.length===0?"top":_[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(v){return u[v]?v:u[j[v]]?j[v]:u[d[v]]?d[v]:u[E[v]]?E[v]:v},this.isEdgeSupported=function(v){return t==null?W==null?u[v]===!0:W===v:t.indexOf(v)!==-1},this.setCurrentFace=function(v,F){B=v,F&&W!=null&&(W=B)},this.getCurrentFace=function(){return B},this.getSupportedFaces=function(){var v=[];for(var F in u)u[F]&&v.push(F);return v},this.lock=function(){W=B},this.unlock=function(){W=null},this.isLocked=function(){return W!=null},this.lockCurrentAxis=function(){B!=null&&(t=B==="left"||B==="right"?n:o)},this.unlockCurrentAxis=function(){t=null},this.compute=function(v){return a[v.element.id]||[0,0]},this.getCurrentLocation=function(v){return a[v.element.id]||[0,0]},this.getOrientation=function(v){return i[v.id]||[0,0]},this.getCssClass=function(){return N}};P.continuousAnchorFactory={get:function(l){return new f(l)},clear:function(l){delete a[l]}}},Y.AnchorManager.prototype.calculateOrientation=function(h,O,a,i,m,S,T,P,g){var e={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},M=["left","top","right","bottom"];if(h===O)return{orientation:e.IDENTITY,a:["top","top"]};var L=Math.atan2(i.centery-a.centery,i.centerx-a.centerx),U=Math.atan2(a.centery-i.centery,a.centerx-i.centerx),G=[],C={};(function(x,u){for(var j=0;j<x.length;j++)if(C[x[j]]={left:[u[j][0].left,u[j][0].centery],right:[u[j][0].right,u[j][0].centery],top:[u[j][0].centerx,u[j][0].top],bottom:[u[j][0].centerx,u[j][0].bottom]},u[j][1]!==0)for(var b in C[x[j]])C[x[j]][b]=jsPlumbUtil.rotatePoint(C[x[j]][b],[u[j][0].centerx,u[j][0].centery],u[j][1])})(["source","target"],[[a,P],[i,g]]);for(var A=0;A<M.length;A++)for(var r=0;r<M.length;r++)G.push({source:M[A],target:M[r],dist:Biltong.lineLength(C.source[M[A]],C.target[M[r]])});G.sort(function(x,u){return x.dist<u.dist?-1:x.dist>u.dist?1:0});for(var f=G[0].source,l=G[0].target,_=0;_<G.length&&(m.isContinuous&&m.locked?f=m.getCurrentFace():!m.isContinuous||m.isEdgeSupported(G[_].source)?f=G[_].source:f=null,S.isContinuous&&S.locked?l=S.getCurrentFace():!S.isContinuous||S.isEdgeSupported(G[_].target)?l=G[_].target:l=null,!(f!=null&&l!=null));_++);return m.isContinuous&&m.setCurrentFace(f),S.isContinuous&&S.setCurrentFace(l),{a:[f,l],theta:L,theta2:U}},Y.Anchor=function(h){this.x=h.x||0,this.y=h.y||0,this.elementId=h.elementId,this.cssClass=h.cssClass||"",this.orientation=h.orientation||[0,0],this.lastReturnValue=null,this.offsets=h.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=h.relocatable!==!1,this.snapOnRelocate=h.snapOnRelocate!==!1,this.locked=!1,c.EventGenerator.apply(this),this.compute=function(O){var a=O.xy,i=O.wh,m=O.timestamp;if(m&&m===this.timestamp)return this.lastReturnValue;var S=[a[0]+this.x*i[0]+this.offsets[0],a[1]+this.y*i[1]+this.offsets[1],this.x,this.y],T=O.rotation;if(T!=null&&T!==0){var P=jsPlumbUtil.rotatePoint(S,[a[0]+i[0]/2,a[1]+i[1]/2],T);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*P[2]-this._unrotatedOrientation[1]*P[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*P[2]+this._unrotatedOrientation[0]*P[3]),this.lastReturnValue=[P[0],P[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=S;return this.timestamp=m,this.lastReturnValue},this.getCurrentLocation=function(O){return O=O||{},this.lastReturnValue==null||O.timestamp!=null&&this.timestamp!==O.timestamp?this.compute(O):this.lastReturnValue},this.setPosition=function(O,a,i,m,S){(!this.locked||S)&&(this.x=O,this.y=a,this.orientation=[i,m],this.lastReturnValue=null)}},c.extend(Y.Anchor,c.EventGenerator,{equals:function(h){if(!h)return!1;var O=h.getOrientation(),a=this.getOrientation();return this.x===h.x&&this.y===h.y&&this.offsets[0]===h.offsets[0]&&this.offsets[1]===h.offsets[1]&&a[0]===O[0]&&a[1]===O[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),Y.FloatingAnchor=function(h){Y.Anchor.apply(this,arguments);var O=h.reference,a=h.referenceCanvas,i=Y.getSize(a),m=0,S=0,T=null,P=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(g){var e=g.xy,M=[e[0]+i[0]/2,e[1]+i[1]/2];return P=M,M},this.getOrientation=function(g){if(T)return T;var e=O.getOrientation(g);return[Math.abs(e[0])*m*-1,Math.abs(e[1])*S*-1]},this.over=function(g,e){T=g.getOrientation(e)},this.out=function(){T=null},this.getCurrentLocation=function(g){return P==null?this.compute(g):P}},c.extend(Y.FloatingAnchor,Y.Anchor);var nt=function(h,O,a){return h.constructor===Y.Anchor?h:O.makeAnchor(h,a,O)};Y.DynamicAnchor=function(h){Y.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=h.elementId,this.jsPlumbInstance=h.jsPlumbInstance;for(var O=0;O<h.anchors.length;O++)this.anchors[O]=nt(h.anchors[O],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var a=this.anchors.length>0?this.anchors[0]:null,i=a,m=function(T,P,g,e,M,L,U){var G=e[0]+T.x*M[0],C=e[1]+T.y*M[1],A=e[0]+M[0]/2,r=e[1]+M[1]/2;if(L!=null&&L!==0){var f=jsPlumbUtil.rotatePoint([G,C],[A,r],L);G=f[0],C=f[1]}return Math.sqrt(Math.pow(P-G,2)+Math.pow(g-C,2))+Math.sqrt(Math.pow(A-G,2)+Math.pow(r-C,2))},S=h.selector||function(T,P,g,e,M,L,U){for(var G=g[0]+e[0]/2,C=g[1]+e[1]/2,A=-1,r=1/0,f=0;f<U.length;f++){var l=m(U[f],G,C,T,P,M);l<r&&(A=f+0,r=l)}return U[A]};this.compute=function(T){var P=T.xy,g=T.wh,e=T.txy,M=T.twh,L=T.rotation,U=T.tRotation;return this.timestamp=T.timestamp,this.locked||e==null||M==null?(this.lastReturnValue=a.compute(T),this.lastReturnValue):(T.timestamp=null,a=S(P,g,e,M,L,U,this.anchors),this.x=a.x,this.y=a.y,a!==i&&this.fire("anchorChanged",a),i=a,this.lastReturnValue=a.compute(T),this.lastReturnValue)},this.getCurrentLocation=function(T){return a!=null?a.getCurrentLocation(T):null},this.getOrientation=function(T){return a!=null?a.getOrientation(T):[0,0]},this.over=function(T,P){a!=null&&a.over(T,P)},this.out=function(){a!=null&&a.out()},this.setAnchor=function(T){a=T},this.getCssClass=function(){return a&&a.getCssClass()||""},this.setAnchorCoordinates=function(T){var P=jsPlumbUtil.findWithFunction(this.anchors,function(g){return g.x===T[0]&&g.y===T[1]});return P!==-1?(this.setAnchor(this.anchors[P]),!0):!1}},c.extend(Y.DynamicAnchor,Y.Anchor);var K=function(h,O,a,i,m,S){Y.Anchors[m]=function(T){var P=T.jsPlumbInstance.makeAnchor([h,O,a,i,0,0],T.elementId,T.jsPlumbInstance);return P.type=m,S&&S(P,T),P}};K(.5,0,0,-1,"TopCenter"),K(.5,1,0,1,"BottomCenter"),K(0,.5,-1,0,"LeftMiddle"),K(1,.5,1,0,"RightMiddle"),K(.5,0,0,-1,"Top"),K(.5,1,0,1,"Bottom"),K(0,.5,-1,0,"Left"),K(1,.5,1,0,"Right"),K(.5,.5,0,0,"Center"),K(1,0,0,-1,"TopRight"),K(1,1,0,1,"BottomRight"),K(0,0,0,-1,"TopLeft"),K(0,1,0,1,"BottomLeft"),Y.Defaults.DynamicAnchors=function(h){return h.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],h.elementId,h.jsPlumbInstance)},Y.Anchors.AutoDefault=function(h){var O=h.jsPlumbInstance.makeDynamicAnchor(Y.Defaults.DynamicAnchors(h));return O.type="AutoDefault",O};var et=function(h,O){Y.Anchors[h]=function(a){var i=a.jsPlumbInstance.makeAnchor(["Continuous",{faces:O}],a.elementId,a.jsPlumbInstance);return i.type=h,i}};Y.Anchors.Continuous=function(h){return h.jsPlumbInstance.continuousAnchorFactory.get(h)},et("ContinuousLeft",["left"]),et("ContinuousTop",["top"]),et("ContinuousBottom",["bottom"]),et("ContinuousRight",["right"]),K(0,0,0,0,"Assign",function(h,O){var a=O.position||"Fixed";h.positionFinder=a.constructor===String?O.jsPlumbInstance.AnchorPositionFinders[a]:a,h.constructorParams=O}),J.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(h,O,a){return[(h.left-O.left)/a[0],(h.top-O.top)/a[1]]},Grid:function(h,O,a,i){var m=h.left-O.left,S=h.top-O.top,T=a[0]/i.grid[0],P=a[1]/i.grid[1],g=Math.floor(m/T),e=Math.floor(S/P);return[(g*T+T/2)/a[0],(e*P+P/2)/a[1]]}},Y.Anchors.Perimeter=function(h){h=h||{};var O=h.anchorCount||60,a=h.shape;if(!a)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var L=.5,U=Math.PI*2/O,G=0,C=[],A=0;A<O;A++){var r=L+L*Math.sin(G),f=L+L*Math.cos(G);C.push([r,f,0,0]),G+=U}return C},m=function(L){for(var U=O/L.length,G=[],C=function(r,f,l,_,x,u,j){U=O*x;for(var b=(l-r)/U,w=(_-f)/U,d=0;d<U;d++)G.push([r+b*d,f+w*d,u==null?0:u,j==null?0:j])},A=0;A<L.length;A++)C.apply(null,L[A]);return G},S=function(L){for(var U=[],G=0;G<L.length;G++)U.push([L[G][0],L[G][1],L[G][2],L[G][3],1/L.length,L[G][4],L[G][5]]);return m(U)},T=function(){return S([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},P={Circle:i,Ellipse:i,Diamond:function(){return S([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:T,Square:T,Triangle:function(){return S([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(L){for(var U=L.points,G=[],C=0,A=0;A<U.length-1;A++){var r=Math.sqrt(Math.pow(U[A][2]-U[A][0])+Math.pow(U[A][3]-U[A][1]));C+=r,G.push([U[A][0],U[A][1],U[A+1][0],U[A+1][1],r])}for(var f=0;f<G.length;f++)G[f][4]=G[f][4]/C;return m(G)}},g=function(L,U){for(var G=[],C=U/180*Math.PI,A=0;A<L.length;A++){var r=L[A][0]-.5,f=L[A][1]-.5;G.push([.5+(r*Math.cos(C)-f*Math.sin(C)),.5+(r*Math.sin(C)+f*Math.cos(C)),L[A][2],L[A][3]])}return G};if(!P[a])throw new Error("Shape ["+a+"] is unknown by Perimeter Anchor type");var e=P[a](h);h.rotation&&(e=g(e,h.rotation));var M=h.jsPlumbInstance.makeDynamicAnchor(e);return M.type="Perimeter",M}}.call(typeof window<"u"?window:kt),function(){var J=this;J.jsPlumbUtil;var c=J.jsPlumb;c.DefaultRouter=function(Y){this.jsPlumbInstance=Y,this.anchorManager=new c.AnchorManager({jsPlumbInstance:Y}),this.sourceOrTargetChanged=function(nt,K,et,h,O){this.anchorManager.sourceOrTargetChanged(nt,K,et,h,O)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(nt,K){this.anchorManager.changeId(nt,K)},this.elementRemoved=function(nt){this.anchorManager.elementRemoved(nt)},this.newConnection=function(nt){this.anchorManager.newConnection(nt)},this.connectionDetached=function(nt,K){this.anchorManager.connectionDetached(nt,K)},this.redraw=function(nt,K,et,h,O,a){return this.anchorManager.redraw(nt,K,et,h,O,a)},this.deleteEndpoint=function(nt){this.anchorManager.deleteEndpoint(nt)},this.rehomeEndpoint=function(nt,K,et){this.anchorManager.rehomeEndpoint(nt,K,et)},this.addEndpoint=function(nt,K){this.anchorManager.addEndpoint(nt,K)}}}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt=J.Biltong;c.Segments={AbstractSegment:function(i){this.params=i,this.findClosestPointOnPath=function(m,S){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(i.x1,i.x2),minY:Math.min(i.y1,i.y2),maxX:Math.max(i.x1,i.x2),maxY:Math.max(i.y1,i.y2)}},this.lineIntersection=function(m,S,T,P){return[]},this.boxIntersection=function(m,S,T,P){var g=[];return g.push.apply(g,this.lineIntersection(m,S,m+T,S)),g.push.apply(g,this.lineIntersection(m+T,S,m+T,S+P)),g.push.apply(g,this.lineIntersection(m+T,S+P,m,S+P)),g.push.apply(g,this.lineIntersection(m,S+P,m,S)),g},this.boundingBoxIntersection=function(m){return this.boxIntersection(m.x,m.y,m.w,m.y)}},Straight:function(i){c.Segments.AbstractSegment.apply(this,arguments);var m,S,T,P,g,e,M,L=function(){m=Math.sqrt(Math.pow(g-P,2)+Math.pow(M-e,2)),S=nt.gradient({x:P,y:e},{x:g,y:M}),T=-1/S};this.type="Straight",this.getLength=function(){return m},this.getGradient=function(){return S},this.getCoordinates=function(){return{x1:P,y1:e,x2:g,y2:M}},this.setCoordinates=function(r){P=r.x1,e=r.y1,g=r.x2,M=r.y2,L()},this.setCoordinates({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),this.getBounds=function(){return{minX:Math.min(P,g),minY:Math.min(e,M),maxX:Math.max(P,g),maxY:Math.max(e,M)}},this.pointOnPath=function(r,f){if(r===0&&!f)return{x:P,y:e};if(r===1&&!f)return{x:g,y:M};var l=f?r>0?r:m+r:r*m;return nt.pointOnLine({x:P,y:e},{x:g,y:M},l)},this.gradientAtPoint=function(r){return S},this.pointAlongPathFrom=function(r,f,l){var _=this.pointOnPath(r,l),x=f<=0?{x:P,y:e}:{x:g,y:M};return f<=0&&Math.abs(f)>1&&(f*=-1),nt.pointOnLine(_,x,f)};var U=function(r,f,l){return l>=Math.min(r,f)&&l<=Math.max(r,f)},G=function(r,f,l){return Math.abs(l-r)<Math.abs(l-f)?r:f};this.findClosestPointOnPath=function(r,f){var l={d:1/0,x:null,y:null,l:null,x1:P,x2:g,y1:e,y2:M};if(S===0)l.y=e,l.x=U(P,g,r)?r:G(P,g,r);else if(S===1/0||S===-1/0)l.x=P,l.y=U(e,M,f)?f:G(e,M,f);else{var _=e-S*P,x=f-T*r,u=(x-_)/(S-T),j=S*u+_;l.x=U(P,g,u)?u:G(P,g,u),l.y=U(e,M,j)?j:G(e,M,j)}var b=nt.lineLength([l.x,l.y],[P,e]);return l.d=nt.lineLength([r,f],[l.x,l.y]),l.l=b/m,l};var C=function(r,f,l){return l>f?f<=r&&r<=l:f>=r&&r>=l},A=C;this.lineIntersection=function(r,f,l,_){var x=Math.abs(nt.gradient({x:r,y:f},{x:l,y:_})),u=Math.abs(S),j=u===1/0?P:e-u*P,b=[],w=x===1/0?r:f-x*r;if(x!==u)if(x===1/0&&u===0)A(r,P,g)&&A(e,f,_)&&(b=[r,e]);else if(x===0&&u===1/0)A(f,e,M)&&A(P,r,l)&&(b=[P,f]);else{var d,E;x===1/0?(d=r,A(d,P,g)&&(E=u*r+j,A(E,f,_)&&(b=[d,E]))):x===0?(E=f,A(E,e,M)&&(d=(f-j)/u,A(d,r,l)&&(b=[d,E]))):(d=(w-j)/(u-x),E=u*d+j,A(d,P,g)&&A(E,e,M)&&(b=[d,E]))}return b},this.boxIntersection=function(r,f,l,_){var x=[];return x.push.apply(x,this.lineIntersection(r,f,r+l,f)),x.push.apply(x,this.lineIntersection(r+l,f,r+l,f+_)),x.push.apply(x,this.lineIntersection(r+l,f+_,r,f+_)),x.push.apply(x,this.lineIntersection(r,f+_,r,f)),x},this.boundingBoxIntersection=function(r){return this.boxIntersection(r.x,r.y,r.w,r.h)}},Arc:function(i){c.Segments.AbstractSegment.apply(this,arguments);var m=function(G,C){return nt.theta([i.cx,i.cy],[G,C])},S=function(G,C){if(G.anticlockwise){var A=G.startAngle<G.endAngle?G.startAngle+T:G.startAngle,r=Math.abs(A-G.endAngle);return A-r*C}else{var f=G.endAngle<G.startAngle?G.endAngle+T:G.endAngle,l=Math.abs(f-G.startAngle);return G.startAngle+l*C}},T=2*Math.PI;this.radius=i.r,this.anticlockwise=i.ac,this.type="Arc",i.startAngle&&i.endAngle?(this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.x1=i.cx+this.radius*Math.cos(i.startAngle),this.y1=i.cy+this.radius*Math.sin(i.startAngle),this.x2=i.cx+this.radius*Math.cos(i.endAngle),this.y2=i.cy+this.radius*Math.sin(i.endAngle)):(this.startAngle=m(i.x1,i.y1),this.endAngle=m(i.x2,i.y2),this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2),this.endAngle<0&&(this.endAngle+=T),this.startAngle<0&&(this.startAngle+=T);var P=this.endAngle<this.startAngle?this.endAngle+T:this.endAngle;this.sweep=Math.abs(P-this.startAngle),this.anticlockwise&&(this.sweep=T-this.sweep);var g=2*Math.PI*this.radius,e=this.sweep/T,M=g*e;this.getLength=function(){return M},this.getBounds=function(){return{minX:i.cx-i.r,maxX:i.cx+i.r,minY:i.cy-i.r,maxY:i.cy+i.r}};var L=1e-10,U=function(G){var C=Math.floor(G),A=Math.ceil(G);return G-C<L?C:A-G<L?A:G};this.pointOnPath=function(G,C){if(G===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(G===1)return{x:this.x2,y:this.y2,theta:this.endAngle};C&&(G=G/M);var A=S(this,G),r=i.cx+i.r*Math.cos(A),f=i.cy+i.r*Math.sin(A);return{x:U(r),y:U(f),theta:A}},this.gradientAtPoint=function(G,C){var A=this.pointOnPath(G,C),r=nt.normal([i.cx,i.cy],[A.x,A.y]);return!this.anticlockwise&&(r===1/0||r===-1/0)&&(r*=-1),r},this.pointAlongPathFrom=function(G,C,A){var r=this.pointOnPath(G,A),f=C/g*2*Math.PI,l=this.anticlockwise?-1:1,_=r.theta+l*f,x=i.cx+this.radius*Math.cos(_),u=i.cy+this.radius*Math.sin(_);return{x,y:u}}},Bezier:function(i){this.curve=[{x:i.x1,y:i.y1},{x:i.cp1x,y:i.cp1y},{x:i.cp2x,y:i.cp2y},{x:i.x2,y:i.y2}];var m=function(M){return M[0].x===M[1].x&&M[0].y===M[1].y},S=function(M,L){return Math.sqrt(Math.pow(M.x-L.x,2)+Math.pow(M.y-L.y,2))},T=function(M){var L={x:0,y:0};if(M===0)return this.curve[0];var U=this.curve.length-1;if(M===1)return this.curve[U];var G=this.curve,C=1-M;if(U===0)return this.curve[0];if(U===1)return{x:C*G[0].x+M*G[1].x,y:C*G[0].y+M*G[1].y};if(U<4){var A=C*C,r=M*M,f=0,l,_,x;return U===2?(G=[G[0],G[1],G[2],L],l=A,_=2*(C*M),x=r):U===3&&(l=A*C,_=3*(A*M),x=3*(C*r),f=M*r),{x:l*G[0].x+_*G[1].x+x*G[2].x+f*G[3].x,y:l*G[0].y+_*G[1].y+x*G[2].y+f*G[3].y}}else return L}.bind(this),P=function(M){var L=[];M--;for(var U=0;U<=M;U++)L.push(T(U/M));return L},g=function(){m(this.curve)&&(this.length=0);var M=16,L=P(M);this.length=0;for(var U=0;U<M-1;U++){var G=L[U],C=L[U+1];this.length+=S(G,C)}}.bind(this);c.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(i.x1,i.x2,i.cp1x,i.cp2x),minY:Math.min(i.y1,i.y2,i.cp1y,i.cp2y),maxX:Math.max(i.x1,i.x2,i.cp1x,i.cp2x),maxY:Math.max(i.y1,i.y2,i.cp1y,i.cp2y)},this.type="Bezier",g();var e=function(M,L,U){return U&&(L=J.jsBezier.locationAlongCurveFrom(M,L>0?0:1,L)),L};this.pointOnPath=function(M,L){return M=e(this.curve,M,L),J.jsBezier.pointOnCurve(this.curve,M)},this.gradientAtPoint=function(M,L){return M=e(this.curve,M,L),J.jsBezier.gradientAtPoint(this.curve,M)},this.pointAlongPathFrom=function(M,L,U){return M=e(this.curve,M,U),J.jsBezier.pointAlongCurveFrom(this.curve,M,L)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(M,L){var U=J.jsBezier.nearestPointOnCurve({x:M,y:L},this.curve);return{d:Math.sqrt(Math.pow(U.point.x-M,2)+Math.pow(U.point.y-L,2)),x:U.point.x,y:U.point.y,l:1-U.location,s:this}},this.lineIntersection=function(M,L,U,G){return J.jsBezier.lineIntersection(M,L,U,G,this.curve)}}},c.SegmentRenderer={getPath:function(i,m){return{Straight:function(S){var T=i.getCoordinates();return(S?"M "+T.x1+" "+T.y1+" ":"")+"L "+T.x2+" "+T.y2},Bezier:function(S){var T=i.params;return(S?"M "+T.x2+" "+T.y2+" ":"")+"C "+T.cp2x+" "+T.cp2y+" "+T.cp1x+" "+T.cp1y+" "+T.x1+" "+T.y1},Arc:function(S){var T=i.params,P=i.sweep>Math.PI?1:0,g=i.anticlockwise?0:1;return(S?"M"+i.x1+" "+i.y1+" ":"")+"A "+i.radius+" "+T.r+" 0 "+P+","+g+" "+i.x2+" "+i.y2}}[i.type](m)}};var K=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};c.Connectors.AbstractConnector=function(i){K.apply(this,arguments);var m=[],S=0,T=[],P=[],g=i.stub||0,e=Y.isArray(g)?g[0]:g,M=Y.isArray(g)?g[1]:g,L=i.gap||0,U=Y.isArray(L)?L[0]:L,G=Y.isArray(L)?L[1]:L,C=null,A=null;this.getPathData=function(){for(var u="",j=0;j<m.length;j++)u+=c.SegmentRenderer.getPath(m[j],j===0),u+=" ";return u},this.findSegmentForPoint=function(u,j){for(var b={d:1/0,s:null,x:null,y:null,l:null},w=0;w<m.length;w++){var d=m[w].findClosestPointOnPath(u,j);d.d<b.d&&(b.d=d.d,b.l=d.l,b.x=d.x,b.y=d.y,b.s=m[w],b.x1=d.x1,b.x2=d.x2,b.y1=d.y1,b.y2=d.y2,b.index=w,b.connectorLocation=T[w][0]+d.l*(T[w][1]-T[w][0]))}return b},this.lineIntersection=function(u,j,b,w){for(var d=[],E=0;E<m.length;E++)d.push.apply(d,m[E].lineIntersection(u,j,b,w));return d},this.boxIntersection=function(u,j,b,w){for(var d=[],E=0;E<m.length;E++)d.push.apply(d,m[E].boxIntersection(u,j,b,w));return d},this.boundingBoxIntersection=function(u){for(var j=[],b=0;b<m.length;b++)j.push.apply(j,m[b].boundingBoxIntersection(u));return j};var r=function(){for(var u=0,j=0;j<m.length;j++){var b=m[j].getLength();P[j]=b/S,T[j]=[u,u+=b/S]}},f=function(u,j){var b,w,d;if(j&&(u=u>0?u/S:(S+u)/S),u===1)b=m.length-1,d=1;else if(u===0)d=0,b=0;else if(u>=.5){for(b=0,d=0,w=T.length-1;w>-1;w--)if(T[w][1]>=u&&T[w][0]<=u){b=w,d=(u-T[w][0])/P[w];break}}else for(b=T.length-1,d=1,w=0;w<T.length;w++)if(T[w][1]>=u){b=w,d=(u-T[w][0])/P[w];break}return{segment:m[b],proportion:d,index:b}},l=function(u,j,b){if(!(b.x1===b.x2&&b.y1===b.y2)){var w=new c.Segments[j](b);m.push(w),S+=w.getLength(),u.updateBounds(w)}},_=function(){S=m.length=T.length=P.length=0};this.setSegments=function(u){C=[],S=0;for(var j=0;j<u.length;j++)C.push(u[j]),S+=u[j].getLength()},this.getLength=function(){return S};var x=function(u){this.strokeWidth=u.strokeWidth;var j=nt.quadrant(u.sourcePos,u.targetPos),b=u.targetPos[0]<u.sourcePos[0],w=u.targetPos[1]<u.sourcePos[1],d=u.strokeWidth||1,E=u.sourceEndpoint.anchor.getOrientation(u.sourceEndpoint),N=u.targetEndpoint.anchor.getOrientation(u.targetEndpoint),B=b?u.targetPos[0]:u.sourcePos[0],W=w?u.targetPos[1]:u.sourcePos[1],n=Math.abs(u.targetPos[0]-u.sourcePos[0]),o=Math.abs(u.targetPos[1]-u.sourcePos[1]);if(E[0]===0&&E[1]===0||N[0]===0&&N[1]===0){var t=n>o?0:1,p=[1,0][t];E=[],N=[],E[t]=u.sourcePos[t]>u.targetPos[t]?-1:1,N[t]=u.sourcePos[t]>u.targetPos[t]?1:-1,E[p]=0,N[p]=0}var v=b?n+U*E[0]:U*E[0],F=w?o+U*E[1]:U*E[1],I=b?G*N[0]:n+G*N[0],X=w?G*N[1]:o+G*N[1],R=E[0]*N[0]+E[1]*N[1],V={sx:v,sy:F,tx:I,ty:X,lw:d,xSpan:Math.abs(I-v),ySpan:Math.abs(X-F),mx:(v+I)/2,my:(F+X)/2,so:E,to:N,x:B,y:W,w:n,h:o,segment:j,startStubX:v+E[0]*e,startStubY:F+E[1]*e,endStubX:I+N[0]*M,endStubY:X+N[1]*M,isXGreaterThanStubTimes2:Math.abs(v-I)>e+M,isYGreaterThanStubTimes2:Math.abs(F-X)>e+M,opposite:R===-1,perpendicular:R===0,orthogonal:R===1,sourceAxis:E[0]===0?"y":"x",points:[B,W,n,o,v,F,I,X],stubs:[e,M]};return V.anchorOrientation=V.opposite?"opposite":V.orthogonal?"orthogonal":"perpendicular",V};return this.getSegments=function(){return m},this.updateBounds=function(u){var j=u.getBounds();this.bounds.minX=Math.min(this.bounds.minX,j.minX),this.bounds.maxX=Math.max(this.bounds.maxX,j.maxX),this.bounds.minY=Math.min(this.bounds.minY,j.minY),this.bounds.maxY=Math.max(this.bounds.maxY,j.maxY)},this.pointOnPath=function(u,j){var b=f(u,j);return b.segment&&b.segment.pointOnPath(b.proportion,!1)||[0,0]},this.gradientAtPoint=function(u,j){var b=f(u,j);return b.segment&&b.segment.gradientAtPoint(b.proportion,!1)||0},this.pointAlongPathFrom=function(u,j,b){var w=f(u,b);return w.segment&&w.segment.pointAlongPathFrom(w.proportion,j,!1)||[0,0]},this.compute=function(u){A=x.call(this,u),_(),this._compute(A,u),this.x=A.points[0],this.y=A.points[1],this.w=A.points[2],this.h=A.points[3],this.segment=A.segment,r()},{addSegment:l,prepareCompute:x,sourceStub:e,targetStub:M,maxStub:Math.max(e,M),sourceGap:U,targetGap:G,maxGap:Math.max(U,G)}},Y.extend(c.Connectors.AbstractConnector,K),c.Endpoints.AbstractEndpoint=function(i){K.apply(this,arguments);var m=this.compute=function(S,T,P,g){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:m,cssClass:i.cssClass}},Y.extend(c.Endpoints.AbstractEndpoint,K),c.Endpoints.Dot=function(i){this.type="Dot",c.Endpoints.AbstractEndpoint.apply(this,arguments),i=i||{},this.radius=i.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(m,S,T,P){this.radius=T.radius||this.radius;var g=m[0]-this.radius,e=m[1]-this.radius,M=this.radius*2,L=this.radius*2;if(T.stroke){var U=T.strokeWidth||1;g-=U,e-=U,M+=U*2,L+=U*2}return[g,e,M,L,this.radius]}},Y.extend(c.Endpoints.Dot,c.Endpoints.AbstractEndpoint),c.Endpoints.Rectangle=function(i){this.type="Rectangle",c.Endpoints.AbstractEndpoint.apply(this,arguments),i=i||{},this.width=i.width||20,this.height=i.height||20,this._compute=function(m,S,T,P){var g=T.width||this.width,e=T.height||this.height,M=m[0]-g/2,L=m[1]-e/2;return[M,L,g,e]}},Y.extend(c.Endpoints.Rectangle,c.Endpoints.AbstractEndpoint);var et=function(i){c.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};Y.extend(et,c.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(i){this._jsPlumb.displayElements.push(i)}}),c.Endpoints.Image=function(i){this.type="Image",et.apply(this,arguments),c.Endpoints.AbstractEndpoint.apply(this,arguments);var m=i.onload,S=i.src||i.url,T=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,m&&m(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(P,g){var e=P.constructor===String?P:P.src;m=g,this._jsPlumb.img.src=e,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(S,m),this._compute=function(P,g,e,M){return this.anchorPoint=P,this._jsPlumb.ready?[P[0]-this._jsPlumb.widthToUse/2,P[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=c.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+T),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(P,g,e){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var M=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,L=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;Y.sizeElement(this.canvas,M,L,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(P,g){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(P,g):J.setTimeout(function(){this.paint(P,g)}.bind(this),200))}},Y.extend(c.Endpoints.Image,[et,c.Endpoints.AbstractEndpoint],{cleanup:function(i){i&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),c.Endpoints.Blank=function(i){c.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",et.apply(this,arguments),this._compute=function(S,T,P,g){return[S[0],S[1],10,0]};var m=i.cssClass?" "+i.cssClass:"";this.canvas=c.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+m),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(S,T){Y.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},Y.extend(c.Endpoints.Blank,[c.Endpoints.AbstractEndpoint,et],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),c.Endpoints.Triangle=function(i){this.type="Triangle",c.Endpoints.AbstractEndpoint.apply(this,arguments);var m=this;i=i||{},i.width=i.width||55,i.height=i.height||55,this.width=i.width,this.height=i.height,this._compute=function(S,T,P,g){var e=P.width||m.width,M=P.height||m.height,L=S[0]-e/2,U=S[1]-M/2;return[L,U,e,M]}};var h=c.Overlays.AbstractOverlay=function(i){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=i.component,this.loc=i.location==null?.5:i.location,this.endpointLoc=i.endpointLocation==null?[.5,.5]:i.endpointLocation,this.visible=i.visible!==!1};h.prototype={cleanup:function(i){i&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(i,m){},setVisible:function(i){this.visible=i,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(i){this.loc+=i,this.component.repaint()},setLocation:function(i){this.loc=i,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},c.Overlays.Arrow=function(i){this.type="Arrow",h.apply(this,arguments),this.isAppendedAtTopLevel=!1,i=i||{};var m=this;this.length=i.length||20,this.width=i.width||20,this.id=i.id,this.direction=(i.direction||1)<0?-1:1;var S=i.paintStyle||{"stroke-width":1},T=i.foldback||.623;this.computeMaxSize=function(){return m.width*1.5},this.elementCreated=function(P,g){if(this.path=P,i.events)for(var e in i.events)c.on(P,e,i.events[e])},this.draw=function(P,g){var e,M,L,U,G;if(P.pointAlongPathFrom){if(Y.isString(this.loc)||this.loc>1||this.loc<0){var C=parseInt(this.loc,10),A=this.loc<0?1:0;e=P.pointAlongPathFrom(A,C,!1),M=P.pointAlongPathFrom(A,C-this.direction*this.length/2,!1),L=nt.pointOnLine(e,M,this.length)}else if(this.loc===1){if(e=P.pointOnPath(this.loc),M=P.pointAlongPathFrom(this.loc,-this.length),L=nt.pointOnLine(e,M,this.length),this.direction===-1){var r=L;L=e,e=r}}else if(this.loc===0){if(L=P.pointOnPath(this.loc),M=P.pointAlongPathFrom(this.loc,this.length),e=nt.pointOnLine(L,M,this.length),this.direction===-1){var f=L;L=e,e=f}}else e=P.pointAlongPathFrom(this.loc,this.direction*this.length/2),M=P.pointOnPath(this.loc),L=nt.pointOnLine(e,M,this.length);U=nt.perpendicularLineTo(e,L,this.width),G=nt.pointOnLine(e,L,T*this.length);var l={hxy:e,tail:U,cxy:G},_=S.stroke||g.stroke,x=S.fill||g.stroke,u=S.strokeWidth||g.strokeWidth;return{component:P,d:l,"stroke-width":u,stroke:_,fill:x,minX:Math.min(e.x,U[0].x,U[1].x),maxX:Math.max(e.x,U[0].x,U[1].x),minY:Math.min(e.y,U[0].y,U[1].y),maxY:Math.max(e.y,U[0].y,U[1].y)}}else return{component:P,minX:0,maxX:0,minY:0,maxY:0}}},Y.extend(c.Overlays.Arrow,h,{updateFrom:function(i){this.length=i.length||this.length,this.width=i.width||this.width,this.direction=i.direction!=null?i.direction:this.direction,this.foldback=i.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),c.Overlays.PlainArrow=function(i){i=i||{};var m=c.extend(i,{foldback:1});c.Overlays.Arrow.call(this,m),this.type="PlainArrow"},Y.extend(c.Overlays.PlainArrow,c.Overlays.Arrow),c.Overlays.Diamond=function(i){i=i||{};var m=i.length||40,S=c.extend(i,{length:m/2,foldback:2});c.Overlays.Arrow.call(this,S),this.type="Diamond"},Y.extend(c.Overlays.Diamond,c.Overlays.Arrow);var O=function(i,m){return(i._jsPlumb.cachedDimensions==null||m)&&(i._jsPlumb.cachedDimensions=i.getDimensions()),i._jsPlumb.cachedDimensions},a=function(i){c.jsPlumbUIComponent.apply(this,arguments),h.apply(this,arguments);var m=this.fire;this.fire=function(){m.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=i.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=i.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=i.create,this._jsPlumb.initiallyInvisible=i.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var S=this._jsPlumb.div=c.getElement(this._jsPlumb.create(this._jsPlumb.component));S.style.position="absolute",jsPlumb.addClass(S,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:i.cssClass?i.cssClass:"")),this._jsPlumb.instance.appendElement(S),this._jsPlumb.instance.getId(S),this.canvas=S;var T="translate(-50%, -50%)";S.style.webkitTransform=T,S.style.mozTransform=T,S.style.msTransform=T,S.style.oTransform=T,S.style.transform=T,S._jsPlumb=this,i.visible===!1&&(S.style.display="none")}return this._jsPlumb.div},this.draw=function(S,T,P){var g=O(this);if(g!=null&&g.length===2){var e={x:0,y:0};if(P)e={x:P[0],y:P[1]};else if(S.pointOnPath){var M=this.loc,L=!1;(Y.isString(this.loc)||this.loc<0||this.loc>1)&&(M=parseInt(this.loc,10),L=!0),e=S.pointOnPath(M,L)}else{var U=this.loc.constructor===Array?this.loc:this.endpointLoc;e={x:U[0]*S.w,y:U[1]*S.h}}var G=e.x-g[0]/2,C=e.y-g[1]/2;return{component:S,d:{minx:G,miny:C,td:g,cxy:e},minX:G,maxX:G+g[0],minY:C,maxY:C+g[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}};Y.extend(a,[c.jsPlumbUIComponent,h],{getDimensions:function(){return[1,1]},setVisible:function(i){this._jsPlumb.div&&(this._jsPlumb.div.style.display=i?"block":"none",i&&this._jsPlumb.initiallyInvisible&&(O(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(i){i?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(i,m){this._jsPlumb.div!=null&&i.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var i=O(this);return Math.max(i[0],i[1])},paint:function(i,m){this._jsPlumb.initialised||(this.getElement(),i.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=i.component.x+i.d.minx+"px",this._jsPlumb.div.style.top=i.component.y+i.d.miny+"px"}}),c.Overlays.Custom=function(i){this.type="Custom",a.apply(this,arguments)},Y.extend(c.Overlays.Custom,a),c.Overlays.GuideLines=function(){var i=this;i.length=50,i.strokeWidth=5,this.type="GuideLines",h.apply(this,arguments),c.jsPlumbUIComponent.apply(this,arguments),this.draw=function(m,S){var T=m.pointAlongPathFrom(i.loc,i.length/2),P=m.pointOnPath(i.loc),g=nt.pointOnLine(T,P,i.length),e=nt.perpendicularLineTo(T,g,40),M=nt.perpendicularLineTo(g,T,20);return{connector:m,head:T,tail:g,headLine:M,tailLine:e,minX:Math.min(T.x,g.x,M[0].x,M[1].x),minY:Math.min(T.y,g.y,M[0].y,M[1].y),maxX:Math.max(T.x,g.x,M[0].x,M[1].x),maxY:Math.max(T.y,g.y,M[0].y,M[1].y)}}},c.Overlays.Label=function(i){this.labelStyle=i.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var m=c.extend({create:function(){return c.createElement("div")}},i);if(c.Overlays.Custom.call(this,m),this.type="Label",this.label=i.label||"",this.labelText=null,this.labelStyle){var S=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",S.style.font=this.labelStyle.font,S.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(S.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var T=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";S.style.border=this.labelStyle.borderWidth+"px solid "+T}this.labelStyle.padding&&(S.style.padding=this.labelStyle.padding)}},Y.extend(c.Overlays.Label,c.Overlays.Custom,{cleanup:function(i){i&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(i){this.label=i,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),a.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var i=this.label(this);this.getElement().innerHTML=i.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(i){i.label!=null&&this.setLabel(i.label)}})}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumbUtil,Y=J.jsPlumbInstance,nt="jtk-group-collapsed",K="jtk-group-expanded",et="[jtk-group-content]",h="elementDraggable",O="stop",a="revert",i="_groupManager",m="_jsPlumbGroup",S="_jsPlumbGroupDrag",T="group:addMember",P="group:removeMember",g="group:add",e="group:remove",M="group:expand",L="group:collapse",U="groupDragStop",G="connectionMoved",C="internal.connectionDetached",A="removeAll",r="orphanAll",f="show",l="hide",_=function(u){var j={},b={},w={},d=this;function E(t,p){for(var v=u.getContainer(),F=!1;!F;){if(t==null||t===v)return!1;if(t===p)return!0;t=t.parentNode}}u.bind("connection",function(t){var p=u.getGroupFor(t.source),v=u.getGroupFor(t.target);p!=null&&v!=null&&p===v?(b[t.connection.id]=p,w[t.connection.id]=p):(p!=null&&(c.suggest(p.connections.source,t.connection),b[t.connection.id]=p),v!=null&&(c.suggest(v.connections.target,t.connection),w[t.connection.id]=v))});function N(t){delete t.proxies;var p=b[t.id],v;p!=null&&(v=function(F){return F.id===t.id},c.removeWithFunction(p.connections.source,v),c.removeWithFunction(p.connections.target,v),delete b[t.id]),p=w[t.id],p!=null&&(v=function(F){return F.id===t.id},c.removeWithFunction(p.connections.source,v),c.removeWithFunction(p.connections.target,v),delete w[t.id])}u.bind(C,function(t){N(t.connection)}),u.bind(G,function(t){var p=t.index===0?b:w,v=p[t.connection.id];if(v){var F=v.connections[t.index===0?"source":"target"],I=F.indexOf(t.connection);I!==-1&&F.splice(I,1)}}),this.addGroup=function(t){u.addClass(t.getEl(),K),j[t.id]=t,t.manager=this,o(t),u.fire(g,{group:t})},this.addToGroup=function(t,p,v){if(t=this.getGroup(t),t){var F=t.getEl();if(p._isJsPlumbGroup)return;var I=p._jsPlumbGroup;if(I!==t){u.removeFromDragSelection(p);var X=u.getOffset(p,!0),R=t.collapsed?u.getOffset(F,!0):u.getOffset(t.getDragArea(),!0);I!=null&&(I.remove(p,!1,v,!1,t),d.updateConnectionsForGroup(I)),t.add(p,v);var V=function(rt,gt){var dt=gt===0?1:0;rt.each(function(lt){lt.setVisible(!1),lt.endpoints[dt].element._jsPlumbGroup===t?(lt.endpoints[dt].setVisible(!1),n(lt,dt,t)):(lt.endpoints[gt].setVisible(!1),W(lt,gt,t))})};t.collapsed&&(V(u.select({source:p}),0),V(u.select({target:p}),1));var at=u.getId(p);u.dragManager.setParent(p,at,F,u.getId(F),X);var st={left:X.left-R.left,top:X.top-R.top};if(u.setPosition(p,st),u.dragManager.revalidateParent(p,at,X),d.updateConnectionsForGroup(t),u.revalidate(at),!v){var it={group:t,el:p,pos:st};I&&(it.sourceGroup=I),u.fire(T,it)}}}},this.removeFromGroup=function(t,p,v){if(t=this.getGroup(t),t){if(t.collapsed){var F=function(I,X){for(var R=0;R<I.length;R++){var V=I[R];if(V.proxies){for(var at=0;at<V.proxies.length;at++)if(V.proxies[at]!=null){var st=V.proxies[at].originalEp.element;(st===p||E(st,p))&&n(V,X,t)}}}};F(t.connections.source.slice(),0),F(t.connections.target.slice(),1)}t.remove(p,null,v)}},this.getGroup=function(t){var p=t;if(c.isString(t)&&(p=j[t],p==null))throw new TypeError("No such group ["+t+"]");return p},this.getGroups=function(){var t=[];for(var p in j)t.push(j[p]);return t},this.removeGroup=function(t,p,v,F){t=this.getGroup(t),this.expandGroup(t,!0);var I=t[p?A:r](v,F);return u.remove(t.getEl()),delete j[t.id],delete u._groups[t.id],u.fire(e,{group:t}),I},this.removeAllGroups=function(t,p,v){for(var F in j)this.removeGroup(j[F],t,p,v)};function B(t,p){for(var v=t.getEl().querySelectorAll(".jtk-managed"),F=0;F<v.length;F++)u[p?f:l](v[F],!0)}var W=function(t,p,v){var F=t.endpoints[p===0?1:0].element;if(!(F[m]&&!F[m].shouldProxy()&&F[m].collapsed)){var I=v.getEl(),X=u.getId(I);u.proxyConnection(t,p,I,X,function(R,V){return v.getEndpoint(R,V)},function(R,V){return v.getAnchor(R,V)})}};this.collapseGroup=function(t){if(t=this.getGroup(t),!(t==null||t.collapsed)){var p=t.getEl();if(B(t,!1),t.shouldProxy()){var v=function(F,I){for(var X=0;X<F.length;X++){var R=F[X];W(R,I,t)}};v(t.connections.source,0),v(t.connections.target,1)}t.collapsed=!0,u.removeClass(p,K),u.addClass(p,nt),u.revalidate(p),u.fire(L,{group:t})}};var n=function(t,p,v){u.unproxyConnection(t,p,u.getId(v.getEl()))};this.expandGroup=function(t,p){if(t=this.getGroup(t),!(t==null||!t.collapsed)){var v=t.getEl();if(B(t,!0),t.shouldProxy()){var F=function(I,X){for(var R=0;R<I.length;R++){var V=I[R];n(V,X,t)}};F(t.connections.source,0),F(t.connections.target,1)}t.collapsed=!1,u.addClass(v,K),u.removeClass(v,nt),u.revalidate(v),this.repaintGroup(t),p||u.fire(M,{group:t})}},this.repaintGroup=function(t){t=this.getGroup(t);for(var p=t.getMembers(),v=0;v<p.length;v++)u.revalidate(p[v])};function o(t){for(var p=t.getMembers().slice(),v=[],F=0;F<p.length;F++)Array.prototype.push.apply(v,p[F].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(p,v);var I=u.getConnections({source:p,scope:"*"},!0),X=u.getConnections({target:p,scope:"*"},!0),R={};t.connections.source.length=0,t.connections.target.length=0;var V=function(at){for(var st=0;st<at.length;st++)if(!R[at[st].id]){R[at[st].id]=!0;var it=u.getGroupFor(at[st].source),rt=u.getGroupFor(at[st].target);it===t?(rt!==t&&t.connections.source.push(at[st]),b[at[st].id]=t):rt===t&&(t.connections.target.push(at[st]),w[at[st].id]=t)}};V(I),V(X)}this.updateConnectionsForGroup=o,this.refreshAllGroups=function(){for(var t in j)o(j[t]),u.dragManager.updateOffsets(u.getId(j[t].getEl()))}},x=function(u,j){var b=this,w=j.el;this.getEl=function(){return w},this.id=j.id||c.uuid(),w._isJsPlumbGroup=!0;var d=this.getDragArea=function(){var rt=u.getSelector(w,et);return rt&&rt.length>0?rt[0]:w},E=j.ghost===!0,N=E||j.constrain===!0,B=j.revert!==!1,W=j.orphan===!0,n=j.prune===!0,o=j.dropOverride===!0,t=j.proxied!==!1,p=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(rt,gt){return j.anchor||"Continuous"},this.getEndpoint=function(rt,gt){return j.endpoint||["Dot",{radius:10}]},this.collapsed=!1,j.draggable!==!1){var v={drag:function(){for(var rt=0;rt<p.length;rt++)u.draw(p[rt])},stop:function(rt){u.fire(U,jsPlumb.extend(rt,{group:b}))},scope:S};j.dragOptions&&J.jsPlumb.extend(v,j.dragOptions),u.draggable(j.el,v)}j.droppable!==!1&&u.droppable(j.el,{drop:function(rt){var gt=rt.drag.el;if(!gt._isJsPlumbGroup){var dt=gt._jsPlumbGroup;if(dt!==b){if(dt!=null&&dt.overrideDrop(gt,b))return;u.getGroupManager().addToGroup(b,gt,!1)}}}});var F=function(rt,gt){for(var dt=rt.nodeType==null?rt:[rt],lt=0;lt<dt.length;lt++)gt(dt[lt])};this.overrideDrop=function(rt,gt){return o&&(B||n||W)},this.add=function(rt,gt){var dt=d();F(rt,function(lt){if(lt._jsPlumbGroup!=null){if(lt._jsPlumbGroup===b)return;lt._jsPlumbGroup.remove(lt,!0,gt,!1)}lt._jsPlumbGroup=b,p.push(lt),u.isAlreadyDraggable(lt)&&it(lt),lt.parentNode!==dt&&dt.appendChild(lt)}),u.getGroupManager().updateConnectionsForGroup(b)},this.remove=function(rt,gt,dt,lt,yt){F(rt,function(pt){if(pt._jsPlumbGroup===b){if(delete pt._jsPlumbGroup,c.removeWithFunction(p,function(q){return q===pt}),gt)try{b.getDragArea().removeChild(pt)}catch(q){jsPlumbUtil.log("Could not remove element from Group "+q)}if(st(pt),!dt){var Z={group:b,el:pt};yt&&(Z.targetGroup=yt),u.fire(P,Z)}}}),lt||u.getGroupManager().updateConnectionsForGroup(b)},this.removeAll=function(rt,gt){for(var dt=0,lt=p.length;dt<lt;dt++){var yt=p[0];b.remove(yt,rt,gt,!0),u.remove(yt,!0)}p.length=0,u.getGroupManager().updateConnectionsForGroup(b)},this.orphanAll=function(){for(var rt={},gt=0;gt<p.length;gt++){var dt=R(p[gt]);rt[dt[0]]=dt[1]}return p.length=0,rt},this.getMembers=function(){return p},w[m]=this,u.bind(h,function(rt){rt.el._jsPlumbGroup===this&&it(rt.el)}.bind(this));function I(rt){return rt.offsetParent}function X(rt,gt){var dt=I(rt),lt=u.getSize(dt),yt=u.getSize(rt),pt=gt[0],Z=pt+yt[0],q=gt[1],$=q+yt[1];return Z>0&&pt<lt[0]&&$>0&&q<lt[1]}function R(rt){var gt=u.getId(rt),dt=u.getOffset(rt);return rt.parentNode.removeChild(rt),u.getContainer().appendChild(rt),u.setPosition(rt,dt),st(rt),u.dragManager.clearParent(rt,gt),[gt,dt]}function V(rt){var gt=[];function dt(yt,pt,Z){var q=null;if(!X(yt,[pt,Z])){var $=yt._jsPlumbGroup;n?u.remove(yt):q=R(yt),$.remove(yt)}return q}for(var lt=0;lt<rt.selection.length;lt++)gt.push(dt(rt.selection[lt][0],rt.selection[lt][1].left,rt.selection[lt][1].top));return gt.length===1?gt[0]:gt}function at(rt){var gt=u.getId(rt);u.revalidate(rt),u.dragManager.revalidateParent(rt,gt)}function st(rt){!rt._katavorioDrag||((n||W)&&rt._katavorioDrag.off(O,V),!n&&!W&&B&&(rt._katavorioDrag.off(a,at),rt._katavorioDrag.setRevert(null)))}function it(rt){!rt._katavorioDrag||((n||W)&&rt._katavorioDrag.on(O,V),N&&rt._katavorioDrag.setConstrain(!0),E&&rt._katavorioDrag.setUseGhostProxy(!0),!n&&!W&&B&&(rt._katavorioDrag.on(a,at),rt._katavorioDrag.setRevert(function(gt,dt){return!X(gt,dt)})))}this.shouldProxy=function(){return t},u.getGroupManager().addGroup(this)};Y.prototype.addGroup=function(u){var j=this;if(j._groups=j._groups||{},j._groups[u.id]!=null)throw new TypeError("cannot create Group ["+u.id+"]; a Group with that ID exists");if(u.el[m]!=null)throw new TypeError("cannot create Group ["+u.id+"]; the given element is already a Group");var b=new x(j,u);return j._groups[b.id]=b,u.collapsed&&this.collapseGroup(b),b},Y.prototype.addToGroup=function(u,j,b){var w=function(E){var N=this.getId(E);this.manage(N,E),this.getGroupManager().addToGroup(u,E,b)}.bind(this);if(Array.isArray(j))for(var d=0;d<j.length;d++)w(j[d]);else w(j)},Y.prototype.removeFromGroup=function(u,j,b){this.getGroupManager().removeFromGroup(u,j,b),this.getContainer().appendChild(j)},Y.prototype.removeGroup=function(u,j,b,w){return this.getGroupManager().removeGroup(u,j,b,w)},Y.prototype.removeAllGroups=function(u,j,b){this.getGroupManager().removeAllGroups(u,j,b)},Y.prototype.getGroup=function(u){return this.getGroupManager().getGroup(u)},Y.prototype.getGroups=function(){return this.getGroupManager().getGroups()},Y.prototype.expandGroup=function(u){this.getGroupManager().expandGroup(u)},Y.prototype.collapseGroup=function(u){this.getGroupManager().collapseGroup(u)},Y.prototype.repaintGroup=function(u){this.getGroupManager().repaintGroup(u)},Y.prototype.toggleGroup=function(u){u=this.getGroupManager().getGroup(u),u!=null&&this.getGroupManager()[u.collapsed?"expandGroup":"collapseGroup"](u)},Y.prototype.getGroupManager=function(){var u=this[i];return u==null&&(u=this[i]=new _(this)),u},Y.prototype.removeGroupManager=function(){delete this[i]},Y.prototype.getGroupFor=function(u){if(u=this.getElement(u),u){for(var j=this.getContainer(),b=!1,w=null;!b;)u==null||u===j?b=!0:u[m]?(w=u[m],b=!0):u=u.parentNode;return w}}}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt="Straight",K="Arc",et=function(h){this.type="Flowchart",h=h||{},h.stub=h.stub==null?30:h.stub;var O,a=c.Connectors.AbstractConnector.apply(this,arguments),i=h.midpoint==null||isNaN(h.midpoint)?.5:h.midpoint,m=h.alwaysRespectStubs===!0,S=null,T=null,P=h.cornerRadius!=null?h.cornerRadius:0;h.loopbackRadius;var g=function(C){return C<0?-1:C===0?0:1},e=function(C){return[g(C[2]-C[0]),g(C[3]-C[1])]},M=function(C,A,r,f){if(!(S===A&&T===r)){var l=S==null?f.sx:S,_=T==null?f.sy:T,x=l===A?"v":"h";S=A,T=r,C.push([l,_,A,r,x])}},L=function(C){return Math.sqrt(Math.pow(C[0]-C[2],2)+Math.pow(C[1]-C[3],2))},U=function(C){var A=[];return A.push.apply(A,C),A},G=function(C,A,r){for(var f=null,l,_,x,u=0;u<A.length-1;u++){if(f=f||U(A[u]),l=U(A[u+1]),_=e(f),x=e(l),P>0&&f[4]!==l[4]){var j=Math.min(L(f),L(l)),b=Math.min(P,j/2);f[2]-=_[0]*b,f[3]-=_[1]*b,l[0]+=x[0]*b,l[1]+=x[1]*b;var w=_[1]===x[0]&&x[0]===1||_[1]===x[0]&&x[0]===0&&_[0]!==x[1]||_[1]===x[0]&&x[0]===-1,d=l[1]>f[3]?1:-1,E=l[0]>f[2]?1:-1,N=d===E,B=N&&w||!N&&!w?l[0]:f[2],W=N&&w||!N&&!w?f[3]:l[1];a.addSegment(C,nt,{x1:f[0],y1:f[1],x2:f[2],y2:f[3]}),a.addSegment(C,K,{r:b,x1:f[2],y1:f[3],x2:l[0],y2:l[1],cx:B,cy:W,ac:w})}else{var n=f[2]===f[0]?0:f[2]>f[0]?r.lw/2:-(r.lw/2),o=f[3]===f[1]?0:f[3]>f[1]?r.lw/2:-(r.lw/2);a.addSegment(C,nt,{x1:f[0]-n,y1:f[1]-o,x2:f[2]+n,y2:f[3]+o})}f=l}l!=null&&a.addSegment(C,nt,{x1:l[0],y1:l[1],x2:l[2],y2:l[3]})};this.midpoint=i,this._compute=function(C,A){O=[],S=null,T=null;var r=function(){return[C.startStubX,C.startStubY,C.endStubX,C.endStubY]},f={perpendicular:r,orthogonal:r,opposite:function(o){var t=C,p=o==="x"?0:1,v={x:function(){return t.so[p]===1&&(t.startStubX>t.endStubX&&t.tx>t.startStubX||t.sx>t.endStubX&&t.tx>t.sx)||t.so[p]===-1&&(t.startStubX<t.endStubX&&t.tx<t.startStubX||t.sx<t.endStubX&&t.tx<t.sx)},y:function(){return t.so[p]===1&&(t.startStubY>t.endStubY&&t.ty>t.startStubY||t.sy>t.endStubY&&t.ty>t.sy)||t.so[p]===-1&&(t.startStubY<t.endStubY&&t.ty<t.startStubY||t.sy<t.endStubY&&t.ty<t.sy)}};return!m&&v[o]()?{x:[(C.sx+C.tx)/2,C.startStubY,(C.sx+C.tx)/2,C.endStubY],y:[C.startStubX,(C.sy+C.ty)/2,C.endStubX,(C.sy+C.ty)/2]}[o]:[C.startStubX,C.startStubY,C.endStubX,C.endStubY]}},l=f[C.anchorOrientation](C.sourceAxis),_=C.sourceAxis==="x"?0:1,x=C.sourceAxis==="x"?1:0,u=l[_],j=l[x],b=l[_+2],w=l[x+2];M(O,l[0],l[1],C);var d=C.startStubX+(C.endStubX-C.startStubX)*i,E=C.startStubY+(C.endStubY-C.startStubY)*i,N={x:[0,1],y:[1,0]},B={perpendicular:function(o){var t=C,p={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},v={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},F={x:[[d,t.startStubY],[d,t.endStubY]],y:[[t.startStubX,E],[t.endStubX,E]]},I={x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]},X={x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]},R={x:[[t.startStubX,E],[t.endStubX,E],[t.endStubX,t.endStubY]],y:[[d,t.startStubY],[d,t.endStubY],[t.endStubX,t.endStubY]]},V={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},at=N[o][0],st=N[o][1],it=t.so[at]+1,rt=t.to[st]+1,gt=t.to[st]===-1&&V[o][1]<V[o][0]||t.to[st]===1&&V[o][1]>V[o][0],dt=v[o][it][0],lt=v[o][it][1],yt=p[o][it][rt];if(t.segment===yt[3]||t.segment===yt[2]&&gt)return F[o];if(t.segment===yt[2]&&lt<dt)return I[o];if(t.segment===yt[2]&&lt>=dt||t.segment===yt[1]&&!gt)return R[o];if(t.segment===yt[0]||t.segment===yt[1]&&gt)return X[o]},orthogonal:function(o,t,p,v,F){var I=C,X={x:I.so[0]===-1?Math.min(t,v):Math.max(t,v),y:I.so[1]===-1?Math.min(t,v):Math.max(t,v)}[o];return{x:[[X,p],[X,F],[v,F]],y:[[p,X],[F,X],[F,v]]}[o]},opposite:function(o,t,p,v){var F=C,I={x:"y",y:"x"}[o],X={x:"height",y:"width"}[o],R=F["is"+o.toUpperCase()+"GreaterThanStubTimes2"];if(A.sourceEndpoint.elementId===A.targetEndpoint.elementId){var V=p+(1-A.sourceEndpoint.anchor[I])*A.sourceInfo[X]+a.maxStub;return{x:[[t,V],[v,V]],y:[[V,t],[V,v]]}[o]}else{if(!R||F.so[_]===1&&t>v||F.so[_]===-1&&t<v)return{x:[[t,E],[v,E]],y:[[d,t],[d,v]]}[o];if(F.so[_]===1&&t<v||F.so[_]===-1&&t>v)return{x:[[d,F.sy],[d,F.ty]],y:[[F.sx,E],[F.tx,E]]}[o]}}},W=B[C.anchorOrientation](C.sourceAxis,u,j,b,w);if(W)for(var n=0;n<W.length;n++)M(O,W[n][0],W[n][1],C);M(O,l[2],l[3],C),M(O,C.tx,C.ty,C),G(this,O,C)}};c.Connectors.Flowchart=et,Y.extend(c.Connectors.Flowchart,c.Connectors.AbstractConnector)}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil;c.Connectors.AbstractBezierConnector=function(K){K=K||{};var et=K.showLoopback!==!1;K.curviness;var h=K.margin||5;K.proximityLimit;var O=K.orientation&&K.orientation==="clockwise",a=K.loopbackRadius||25,i;return this._compute=function(m,S){var T=S.sourcePos,P=S.targetPos,g=Math.abs(T[0]-P[0]),e=Math.abs(T[1]-P[1]);if(!et||S.sourceEndpoint.elementId!==S.targetEndpoint.elementId)this._computeBezier(m,S,T,P,g,e);else{var M=S.sourcePos[0],L=S.sourcePos[1]-h,U=M,G=L-a,C=U-a,A=G-a;g=2*a,e=2*a,m.points[0]=C,m.points[1]=A,m.points[2]=g,m.points[3]=e,i.addSegment(this,"Arc",{loopback:!0,x1:M-C+4,y1:L-A,startAngle:0,endAngle:2*Math.PI,r:a,ac:!O,x2:M-C-4,y2:L-A,cx:U-C,cy:G-A})}},i=c.Connectors.AbstractConnector.apply(this,arguments),i},Y.extend(c.Connectors.AbstractBezierConnector,c.Connectors.AbstractConnector);var nt=function(K){K=K||{},this.type="Bezier";var et=c.Connectors.AbstractBezierConnector.apply(this,arguments),h=K.curviness||150,O=10;this.getCurviness=function(){return h},this._findControlPoint=function(a,i,m,S,T,P,g){var e=P[0]!==g[0]||P[1]===g[1],M=[];return e?(g[0]===0?M.push(m[0]<i[0]?a[0]+O:a[0]-O):M.push(a[0]+h*g[0]),g[1]===0?M.push(m[1]<i[1]?a[1]+O:a[1]-O):M.push(a[1]+h*P[1])):(P[0]===0?M.push(i[0]<m[0]?a[0]+O:a[0]-O):M.push(a[0]-h*P[0]),P[1]===0?M.push(i[1]<m[1]?a[1]+O:a[1]-O):M.push(a[1]+h*g[1])),M},this._computeBezier=function(a,i,m,S,T,P){var g,e,M=m[0]<S[0]?T:0,L=m[1]<S[1]?P:0,U=m[0]<S[0]?0:T,G=m[1]<S[1]?0:P;g=this._findControlPoint([M,L],m,S,i.sourceEndpoint,i.targetEndpoint,a.so,a.to),e=this._findControlPoint([U,G],S,m,i.targetEndpoint,i.sourceEndpoint,a.to,a.so),et.addSegment(this,"Bezier",{x1:M,y1:L,x2:U,y2:G,cp1x:g[0],cp1y:g[1],cp2x:e[0],cp2y:e[1]})}};c.Connectors.Bezier=nt,Y.extend(nt,c.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt=function(h,O,a,i){return h<=a&&i<=O?1:h<=a&&O<=i?2:a<=h&&i>=O?3:4},K=function(h,O,a,i,m,S,T,P,g){if(P<=g)return[h,O];if(a===1)return i[3]<=0&&m[3]>=1?[h+(i[2]<.5?-1*S:S),O]:i[2]>=1&&m[2]<=0?[h,O+(i[3]<.5?-1*T:T)]:[h+-1*S,O+-1*T];if(a===2)return i[3]>=1&&m[3]<=0?[h+(i[2]<.5?-1*S:S),O]:i[2]>=1&&m[2]<=0?[h,O+(i[3]<.5?-1*T:T)]:[h+S,O+-1*T];if(a===3)return i[3]>=1&&m[3]<=0?[h+(i[2]<.5?-1*S:S),O]:i[2]<=0&&m[2]>=1?[h,O+(i[3]<.5?-1*T:T)]:[h+-1*S,O+-1*T];if(a===4)return i[3]<=0&&m[3]>=1?[h+(i[2]<.5?-1*S:S),O]:i[2]<=0&&m[2]>=1?[h,O+(i[3]<.5?-1*T:T)]:[h+S,O+-1*T]},et=function(h){h=h||{},this.type="StateMachine";var O=c.Connectors.AbstractBezierConnector.apply(this,arguments),a=h.curviness||10,i=h.margin||5,m=h.proximityLimit||80;h.orientation&&h.orientation;var S;this._computeBezier=function(T,P,g,e,M,L){var U=P.sourcePos[0]<P.targetPos[0]?0:M,G=P.sourcePos[1]<P.targetPos[1]?0:L,C=P.sourcePos[0]<P.targetPos[0]?M:0,A=P.sourcePos[1]<P.targetPos[1]?L:0;P.sourcePos[2]===0&&(U-=i),P.sourcePos[2]===1&&(U+=i),P.sourcePos[3]===0&&(G-=i),P.sourcePos[3]===1&&(G+=i),P.targetPos[2]===0&&(C-=i),P.targetPos[2]===1&&(C+=i),P.targetPos[3]===0&&(A-=i),P.targetPos[3]===1&&(A+=i);var r=(U+C)/2,f=(G+A)/2,l=nt(U,G,C,A),_=Math.sqrt(Math.pow(C-U,2)+Math.pow(A-G,2)),x,u,j,b;S=K(r,f,l,P.sourcePos,P.targetPos,a,a,_,m),x=S[0],u=S[0],j=S[1],b=S[1],O.addSegment(this,"Bezier",{x1:C,y1:A,x2:U,y2:G,cp1x:x,cp1y:j,cp2x:u,cp2y:b})}};c.Connectors.StateMachine=et,Y.extend(et,c.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt="Straight",K=function(et){this.type=nt;var h=c.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(O,a){h.addSegment(this,nt,{x1:O.sx,y1:O.sy,x2:O.startStubX,y2:O.startStubY}),h.addSegment(this,nt,{x1:O.startStubX,y1:O.startStubY,x2:O.endStubX,y2:O.endStubY}),h.addSegment(this,nt,{x1:O.endStubX,y1:O.endStubY,x2:O.tx,y2:O.ty})}};c.Connectors.Straight=K,Y.extend(K,c.Connectors.AbstractConnector)}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},K="stroke-dasharray",et="dashstyle",h="linearGradient",O="radialGradient",a="defs",i="fill",m="stop",S="stroke",T="stroke-width",P="style",g="none",e="jsplumb_gradient_",M="strokeWidth",L={svg:"http://www.w3.org/2000/svg"},U=function(b,w){for(var d in w)b.setAttribute(d,""+w[d])},G=function(b,w){return w=w||{},w.version="1.1",w.xmlns=L.svg,c.createElementNS(L.svg,b,null,null,w)},C=function(b){return"position:absolute;left:"+b[0]+"px;top:"+b[1]+"px"},A=function(b){for(var w=b.querySelectorAll(" defs,linearGradient,radialGradient"),d=0;d<w.length;d++)w[d].parentNode.removeChild(w[d])},r=function(b,w,d,E,N){var B=e+N._jsPlumb.instance.idstamp();A(b);var W;d.gradient.offset?W=G(O,{id:B}):W=G(h,{id:B,gradientUnits:"userSpaceOnUse"});var n=G(a);b.appendChild(n),n.appendChild(W);for(var o=0;o<d.gradient.stops.length;o++){var t=N.segment===1||N.segment===2?o:d.gradient.stops.length-1-o,p=d.gradient.stops[t][1],v=G(m,{offset:Math.floor(d.gradient.stops[o][0]*100)+"%","stop-color":p});W.appendChild(v)}var F=d.stroke?S:i;w.setAttribute(F,"url(#"+B+")")},f=function(b,w,d,E,N){if(w.setAttribute(i,d.fill?d.fill:g),w.setAttribute(S,d.stroke?d.stroke:g),d.gradient?r(b,w,d,E,N):(A(b),w.setAttribute(P,"")),d.strokeWidth&&w.setAttribute(T,d.strokeWidth),d[et]&&d[M]&&!d[K]){var B=d[et].indexOf(",")===-1?" ":",",W=d[et].split(B),n="";W.forEach(function(t){n+=Math.floor(t*d.strokeWidth)+B}),w.setAttribute(K,n)}else d[K]&&w.setAttribute(K,d[K]);for(var o in nt)d[o]&&w.setAttribute(nt[o],d[o])},l=function(b,w,d){b.childNodes.length>d?b.insertBefore(w,b.childNodes[d]):b.appendChild(w)};Y.svg={node:G,attr:U,pos:C};var _=function(b){var w=b.pointerEventsSpec||"all",d={};c.jsPlumbUIComponent.apply(this,b.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var E=b.cssClass+" "+(b.originalArgs[0].cssClass||""),N={style:"",width:0,height:0,"pointer-events":w,position:"absolute"};this.svg=G("svg",N),b.useDivWrapper?(this.canvas=c.createElement("div",{position:"absolute"}),Y.sizeElement(this.canvas,0,0,1,1),this.canvas.className=E):(U(this.svg,{class:E}),this.canvas=this.svg),b._jsPlumb.appendElement(this.canvas,b.originalArgs[0].parent),b.useDivWrapper&&this.canvas.appendChild(this.svg);var B=[this.canvas];return this.getDisplayElements=function(){return B},this.appendDisplayElement=function(W){B.push(W)},this.paint=function(W,n,o){if(W!=null){var t=[this.x,this.y],p=[this.w,this.h],v;o!=null&&(o.xmin<0&&(t[0]+=o.xmin),o.ymin<0&&(t[1]+=o.ymin),p[0]=o.xmax+(o.xmin<0?-o.xmin:0),p[1]=o.ymax+(o.ymin<0?-o.ymin:0)),b.useDivWrapper?(Y.sizeElement(this.canvas,t[0],t[1],p[0]>0?p[0]:1,p[1]>0?p[1]:1),t[0]=0,t[1]=0,v=C([0,0])):v=C([t[0],t[1]]),d.paint.apply(this,arguments),U(this.svg,{style:v,width:p[0]||1,height:p[1]||1})}},{renderer:d}};Y.extend(_,c.jsPlumbUIComponent,{cleanup:function(b){b||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(b){var w=b.getContainer();this.canvas&&this.canvas.parentNode==null&&w.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&w.appendChild(this.bgCanvas)},setVisible:function(b){this.canvas&&(this.canvas.style.display=b?"block":"none")}}),c.ConnectorRenderers.svg=function(b){var w=this,d=_.apply(this,[{cssClass:b._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:b._jsPlumb}]);d.renderer.paint=function(E,N,B){var W=w.getSegments(),n="",o=[0,0];if(B.xmin<0&&(o[0]=-B.xmin),B.ymin<0&&(o[1]=-B.ymin),W.length>0){n=w.getPathData();var t={d:n,transform:"translate("+o[0]+","+o[1]+")","pointer-events":b["pointer-events"]||"visibleStroke"},p=null,v=[w.x,w.y,w.w,w.h];if(E.outlineStroke){var F=E.outlineWidth||1,I=E.strokeWidth+2*F;p=c.extend({},E),delete p.gradient,p.stroke=E.outlineStroke,p.strokeWidth=I,w.bgPath==null?(w.bgPath=G("path",t),c.addClass(w.bgPath,c.connectorOutlineClass),l(w.svg,w.bgPath,0)):U(w.bgPath,t),f(w.svg,w.bgPath,p,v,w)}w.path==null?(w.path=G("path",t),l(w.svg,w.path,E.outlineStroke?1:0)):U(w.path,t),f(w.svg,w.path,E,v,w)}}},Y.extend(c.ConnectorRenderers.svg,_);var x=c.SvgEndpoint=function(b){var w=_.apply(this,[{cssClass:b._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:b._jsPlumb}]);w.renderer.paint=function(d){var E=c.extend({},d);E.outlineStroke&&(E.stroke=E.outlineStroke),this.node==null?(this.node=this.makeNode(E),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),f(this.svg,this.node,E,[this.x,this.y,this.w,this.h],this),C(this.node,[this.x,this.y])}.bind(this)};Y.extend(x,_),c.Endpoints.svg.Dot=function(){c.Endpoints.Dot.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(b){return G("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(b){U(b,{cx:this.w/2,cy:this.h/2,r:this.radius})}},Y.extend(c.Endpoints.svg.Dot,[c.Endpoints.Dot,x]),c.Endpoints.svg.Rectangle=function(){c.Endpoints.Rectangle.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(b){return G("rect",{width:this.w,height:this.h})},this.updateNode=function(b){U(b,{width:this.w,height:this.h})}},Y.extend(c.Endpoints.svg.Rectangle,[c.Endpoints.Rectangle,x]),c.Endpoints.svg.Image=c.Endpoints.Image,c.Endpoints.svg.Blank=c.Endpoints.Blank,c.Overlays.svg.Label=c.Overlays.Label,c.Overlays.svg.Custom=c.Overlays.Custom;var u=function(b,w){b.apply(this,w),c.jsPlumbUIComponent.apply(this,w),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(E,N){if(E.component.svg&&N){this.path==null&&(this.path=G("path",{"pointer-events":"all"}),E.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,E.component),this.canvas=E.component.svg);var B=w&&w.length===1&&w[0].cssClass||"",W=[0,0];N.xmin<0&&(W[0]=-N.xmin),N.ymin<0&&(W[1]=-N.ymin),U(this.path,{d:d(E.d),class:B,stroke:E.stroke?E.stroke:null,fill:E.fill?E.fill:null,transform:"translate("+W[0]+","+W[1]+")"})}};var d=function(E){return isNaN(E.cxy.x)||isNaN(E.cxy.y)?"":"M"+E.hxy.x+","+E.hxy.y+" L"+E.tail[0].x+","+E.tail[0].y+" L"+E.cxy.x+","+E.cxy.y+" L"+E.tail[1].x+","+E.tail[1].y+" L"+E.hxy.x+","+E.hxy.y};this.transfer=function(E){E.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),E.canvas.appendChild(this.path))}},j={cleanup:function(b){this.path!=null&&(b?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(b,w){this.path&&w.canvas&&w.canvas.appendChild(this.path)},setVisible:function(b){this.path!=null&&(this.path.style.display=b?"block":"none")}};Y.extend(u,[c.jsPlumbUIComponent,c.Overlays.AbstractOverlay]),c.Overlays.svg.Arrow=function(){u.apply(this,[c.Overlays.Arrow,arguments])},Y.extend(c.Overlays.svg.Arrow,[c.Overlays.Arrow,u],j),c.Overlays.svg.PlainArrow=function(){u.apply(this,[c.Overlays.PlainArrow,arguments])},Y.extend(c.Overlays.svg.PlainArrow,[c.Overlays.PlainArrow,u],j),c.Overlays.svg.Diamond=function(){u.apply(this,[c.Overlays.Diamond,arguments])},Y.extend(c.Overlays.svg.Diamond,[c.Overlays.Diamond,u],j),c.Overlays.svg.GuideLines=function(){var b=null,w=this,d,E;c.Overlays.GuideLines.apply(this,arguments),this.paint=function(B,W){b==null&&(b=G("path"),B.connector.svg.appendChild(b),w.attachListeners(b,B.connector),w.attachListeners(b,w),d=G("path"),B.connector.svg.appendChild(d),w.attachListeners(d,B.connector),w.attachListeners(d,w),E=G("path"),B.connector.svg.appendChild(E),w.attachListeners(E,B.connector),w.attachListeners(E,w));var n=[0,0];W.xmin<0&&(n[0]=-W.xmin),W.ymin<0&&(n[1]=-W.ymin),U(b,{d:N(B.head,B.tail),stroke:"red",fill:null,transform:"translate("+n[0]+","+n[1]+")"}),U(d,{d:N(B.tailLine[0],B.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+n[0]+","+n[1]+")"}),U(E,{d:N(B.headLine[0],B.headLine[1]),stroke:"green",fill:null,transform:"translate("+n[0]+","+n[1]+")"})};var N=function(B,W){return"M "+B.x+","+B.y+" L"+W.x+","+W.y}},Y.extend(c.Overlays.svg.GuideLines,c.Overlays.GuideLines)}.call(typeof window<"u"?window:kt),function(){var J=this,c=J.jsPlumb,Y=J.jsPlumbUtil,nt=J.Katavorio,K=J.Biltong,et=function(r){var f=r._mottle;return f||(f=r._mottle=new J.Mottle),f},h=function(r,f){f=f||"main";var l="_katavorio_"+f,_=r[l],x=r.getEventManager();return _||(_=new nt({bind:x.on,unbind:x.off,getSize:c.getSize,getConstrainingRectangle:function(u){return[u.parentNode.scrollWidth,u.parentNode.scrollHeight]},getPosition:function(u,j){var b=r.getOffset(u,j,u._katavorioDrag?u.offsetParent:null);return[b.left,b.top]},setPosition:function(u,j){u.style.left=j[0]+"px",u.style.top=j[1]+"px"},addClass:c.addClass,removeClass:c.removeClass,intersects:K.intersects,indexOf:function(u,j){return u.indexOf(j)},scope:r.getDefaultScope(),css:{noSelect:r.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),_.setZoom(r.getZoom()),r[l]=_,r.bind("zoom",_.setZoom)),_},O=function(r){var f=r.el._jsPlumbDragOptions,l=!0;return f.canDrag&&(l=f.canDrag()),l&&(this.setHoverSuspended(!0),this.select({source:r.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:r.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),l},a=function(r){var f=this.getUIPosition(arguments,this.getZoom());if(f!=null){var l=r.el._jsPlumbDragOptions;this.draw(r.el,f,null,!0),l._dragging&&this.addClass(r.el,"jtk-dragged"),l._dragging=!0}},i=function(r){for(var f=r.selection,l,_=function(u){var j;u[1]!=null&&(l=this.getUIPosition([{el:u[2].el,pos:[u[1].left,u[1].top]}]),j=this.draw(u[2].el,l)),u[0]._jsPlumbDragOptions!=null&&delete u[0]._jsPlumbDragOptions._dragging,this.removeClass(u[0],"jtk-dragged"),this.select({source:u[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:u[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),r.e._drawResult=r.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(r.e._drawResult.c,j.c),Array.prototype.push.apply(r.e._drawResult.e,j.e),Array.prototype.push.apply(r.e._drawResult.a,j.a),this.getDragManager().dragEnded(u[2].el)}.bind(this),x=0;x<f.length;x++)_(f[x]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},m=function(r,f){var l=function(_){if(f[_]!=null)if(Y.isString(f[_])){var x=f[_].match(/-=/)?-1:1,u=f[_].substring(2);return r[_]+x*u}else return f[_];else return r[_]};return[l("left"),l("top")]},S=function(r,f){if(f==null)return[0,0];var l=M(f),_=e(l,0);return[_[r+"X"],_[r+"Y"]]},T=S.bind(this,"page"),P=S.bind(this,"screen"),g=S.bind(this,"client"),e=function(r,f){return r.item?r.item(f):r[f]},M=function(r){return r.touches&&r.touches.length>0?r.touches:r.changedTouches&&r.changedTouches.length>0?r.changedTouches:r.targetTouches&&r.targetTouches.length>0?r.targetTouches:[r]},L=function(r){var f={},l=[],_={},x={},u={};this.register=function(j){var b=r.getId(j),w;f[b]||(f[b]=j,l.push(j),_[b]={});var d=function(E){if(E){for(var N=0;N<E.childNodes.length;N++)if(E.childNodes[N].nodeType!==3&&E.childNodes[N].nodeType!==8){var B=jsPlumb.getElement(E.childNodes[N]),W=r.getId(E.childNodes[N],null,!0);if(W&&x[W]&&x[W]>0){w||(w=r.getOffset(j));var n=r.getOffset(B);_[b][W]={id:W,offset:{left:n.left-w.left,top:n.top-w.top}},u[W]=b}d(E.childNodes[N])}}};d(j)},this.updateOffsets=function(j,b){if(j!=null){b=b||{};var w=jsPlumb.getElement(j),d=r.getId(w),E=_[d],N;if(E){for(var B in E)if(E.hasOwnProperty(B)){var W=jsPlumb.getElement(B),n=b[B]||r.getOffset(W);if(W.offsetParent==null&&_[d][B]!=null)continue;N||(N=r.getOffset(w)),_[d][B]={id:B,offset:{left:n.left-N.left,top:n.top-N.top}},u[B]=d}}}},this.endpointAdded=function(j,b){b=b||r.getId(j);var w=document.body,d=j.parentNode;for(x[b]=x[b]?x[b]+1:1;d!=null&&d!==w;){var E=r.getId(d,null,!0);if(E&&f[E]){var N=r.getOffset(d);if(_[E][b]==null){var B=r.getOffset(j);_[E][b]={id:b,offset:{left:B.left-N.left,top:B.top-N.top}},u[b]=E}break}d=d.parentNode}},this.endpointDeleted=function(j){if(x[j.elementId]&&(x[j.elementId]--,x[j.elementId]<=0))for(var b in _)_.hasOwnProperty(b)&&_[b]&&(delete _[b][j.elementId],delete u[j.elementId])},this.changeId=function(j,b){_[b]=_[j],_[j]={},u[b]=u[j],u[j]=null},this.getElementsForDraggable=function(j){return _[j]},this.elementRemoved=function(j){var b=u[j];b&&(_[b]&&delete _[b][j],delete u[j])},this.reset=function(){f={},l=[],_={},x={}},this.dragEnded=function(j){if(j.offsetParent!=null){var b=r.getId(j),w=u[b];w&&this.updateOffsets(w)}},this.setParent=function(j,b,w,d,E){var N=u[b];_[d]||(_[d]={});var B=r.getOffset(w),W=E||r.getOffset(j);N&&_[N]&&delete _[N][b],_[d][b]={id:b,offset:{left:W.left-B.left,top:W.top-B.top}},u[b]=d},this.clearParent=function(j,b){var w=u[b];w&&(delete _[w][b],delete u[b])},this.revalidateParent=function(j,b,w){var d=u[b];if(d){var E={};E[b]=w,this.updateOffsets(d,E),r.revalidate(d)}},this.getDragAncestor=function(j){var b=jsPlumb.getElement(j),w=r.getId(b),d=u[w];return d?jsPlumb.getElement(d):null}},U=function(r,f,l){f=Y.fastTrim(f),typeof r.className.baseVal<"u"?r.className.baseVal=f:r.className=f;try{var _=r.classList;if(_!=null){for(;_.length>0;)_.remove(_.item(0));for(var x=0;x<l.length;x++)l[x]&&_.add(l[x])}}catch(u){Y.log("JSPLUMB: cannot set class list",u)}},G=function(r){return typeof r.className.baseVal>"u"?r.className:r.className.baseVal},C=function(r,f,l){f=f==null?[]:Y.isArray(f)?f:f.split(/\s+/),l=l==null?[]:Y.isArray(l)?l:l.split(/\s+/);var _=G(r),x=_.split(/\s+/),u=function(j,b){for(var w=0;w<b.length;w++)if(j)x.indexOf(b[w])===-1&&x.push(b[w]);else{var d=x.indexOf(b[w]);d!==-1&&x.splice(d,1)}};u(!0,f),u(!1,l),U(r,x.join(" "),x)};J.jsPlumb.extend(J.jsPlumbInstance.prototype,{headless:!1,pageLocation:T,screenLocation:P,clientLocation:g,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new L(this)),this.dragManager},recalculateOffsets:function(r){this.getDragManager().updateOffsets(r)},createElement:function(r,f,l,_){return this.createElementNS(null,r,f,l,_)},createElementNS:function(r,f,l,_,x){var u=r==null?document.createElement(f):document.createElementNS(r,f),j;l=l||{};for(j in l)u.style[j]=l[j];_&&(u.className=_),x=x||{};for(j in x)u.setAttribute(j,""+x[j]);return u},getAttribute:function(r,f){return r.getAttribute!=null?r.getAttribute(f):null},setAttribute:function(r,f,l){r.setAttribute!=null&&r.setAttribute(f,l)},setAttributes:function(r,f){for(var l in f)f.hasOwnProperty(l)&&r.setAttribute(l,f[l])},appendToRoot:function(r){document.body.appendChild(r)},getRenderModes:function(){return["svg"]},getClass:G,addClass:function(r,f){jsPlumb.each(r,function(l){C(l,f)})},hasClass:function(r,f){return r=jsPlumb.getElement(r),r.classList?r.classList.contains(f):G(r).indexOf(f)!==-1},removeClass:function(r,f){jsPlumb.each(r,function(l){C(l,null,f)})},toggleClass:function(r,f){jsPlumb.hasClass(r,f)?jsPlumb.removeClass(r,f):jsPlumb.addClass(r,f)},updateClasses:function(r,f,l){jsPlumb.each(r,function(_){C(_,f,l)})},setClass:function(r,f){f!=null&&jsPlumb.each(r,function(l){U(l,f,f.split(/\s+/))})},setPosition:function(r,f){r.style.left=f.left+"px",r.style.top=f.top+"px"},getPosition:function(r){var f=function(l){var _=r.style[l];return _?_.substring(0,_.length-2):0};return{left:f("left"),top:f("top")}},getStyle:function(r,f){return typeof window.getComputedStyle<"u"?getComputedStyle(r,null).getPropertyValue(f):r.currentStyle[f]},getSelector:function(r,f){var l=null;return arguments.length===1?l=r.nodeType!=null?r:document.querySelectorAll(r):l=r.querySelectorAll(f),l},getOffset:function(r,f,l){r=jsPlumb.getElement(r),l=l||this.getContainer();for(var _={left:r.offsetLeft,top:r.offsetTop},x=f||l!=null&&r!==l&&r.offsetParent!==l?r.offsetParent:null,u=function(w){w!=null&&w!==document.body&&(w.scrollTop>0||w.scrollLeft>0)&&(_.left-=w.scrollLeft,_.top-=w.scrollTop)}.bind(this);x!=null;)_.left+=x.offsetLeft,_.top+=x.offsetTop,u(x),x=f?x.offsetParent:x.offsetParent===l?null:x.offsetParent;if(l!=null&&!f&&(l.scrollTop>0||l.scrollLeft>0)){var j=r.offsetParent!=null?this.getStyle(r.offsetParent,"position"):"static",b=this.getStyle(r,"position");b!=="absolute"&&b!=="fixed"&&j!=="absolute"&&j!=="fixed"&&(_.left-=l.scrollLeft,_.top-=l.scrollTop)}return _},getPositionOnElement:function(r,f,l){var _=typeof f.getBoundingClientRect<"u"?f.getBoundingClientRect():{left:0,top:0,width:0,height:0},x=document.body,u=document.documentElement,j=window.pageYOffset||u.scrollTop||x.scrollTop,b=window.pageXOffset||u.scrollLeft||x.scrollLeft,w=u.clientTop||x.clientTop||0,d=u.clientLeft||x.clientLeft||0,E=0,N=0,B=_.top+j-w+E*l,W=_.left+b-d+N*l,n=jsPlumb.pageLocation(r),o=_.width||f.offsetWidth*l,t=_.height||f.offsetHeight*l,p=(n[0]-W)/o,v=(n[1]-B)/t;return[p,v]},getAbsolutePosition:function(r){var f=function(l){var _=r.style[l];if(_)return parseFloat(_.substring(0,_.length-2))};return[f("left"),f("top")]},setAbsolutePosition:function(r,f,l,_){l?this.animate(r,{left:"+="+(f[0]-l[0]),top:"+="+(f[1]-l[1])},_):(r.style.left=f[0]+"px",r.style.top=f[1]+"px")},getSize:function(r){return[r.offsetWidth,r.offsetHeight]},getWidth:function(r){return r.offsetWidth},getHeight:function(r){return r.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(r,f){var l;return r=Y.isArray(r)||r.length!=null&&!Y.isString(r)?r:[r],Array.prototype.slice.call(r).forEach(function(_){l=this.info(_),l.el&&this._initDraggableIfNecessary(l.el,!0,f,l.id,!0)}.bind(this)),this},snapToGrid:function(r,f,l){var _=[],x=function(b){var w=this.info(b);if(w.el!=null&&w.el._katavorioDrag){var d=w.el._katavorioDrag.snap(f,l);this.revalidate(w.el),_.push([w.el,d])}}.bind(this);if(arguments.length===1||arguments.length===3)x(r,f,l);else{var u=this.getManagedElements();for(var j in u)x(j,arguments[0],arguments[1])}return _},initDraggable:function(r,f,l){h(this,l).draggable(r,f),r._jsPlumbDragOptions=f},destroyDraggable:function(r,f){h(this,f).destroyDraggable(r),r._jsPlumbDragOptions=null,r._jsPlumbRelatedElement=null},unbindDraggable:function(r,f,l,_){h(this,_).destroyDraggable(r,f,l)},setDraggable:function(r,f){return jsPlumb.each(r,function(l){this.isDragSupported(l)&&(this._draggableStates[this.getAttribute(l,"id")]=f,this.setElementDraggable(l,f))}.bind(this))},_draggableStates:{},toggleDraggable:function(r){var f;return jsPlumb.each(r,function(l){var _=this.getAttribute(l,"id");return f=this._draggableStates[_]==null?!1:this._draggableStates[_],f=!f,this._draggableStates[_]=f,this.setDraggable(l,f),f}.bind(this)),f},_initDraggableIfNecessary:function(r,f,l,_,x){if(!jsPlumb.headless){var u=f==null?!1:f;if(u&&jsPlumb.isDragSupported(r,this)){var j=l||this.Defaults.DragOptions;if(j=jsPlumb.extend({},j),jsPlumb.isAlreadyDraggable(r,this))l.force&&this.initDraggable(r,j);else{var b=jsPlumb.dragEvents.drag,w=jsPlumb.dragEvents.stop,d=jsPlumb.dragEvents.start;this.manage(_,r),j[d]=Y.wrap(j[d],O.bind(this)),j[b]=Y.wrap(j[b],a.bind(this)),j[w]=Y.wrap(j[w],i.bind(this));var E=this.getId(r);this._draggableStates[E]=!0;var N=this._draggableStates[E];j.disabled=N==null?!1:!N,this.initDraggable(r,j),this.getDragManager().register(r),x&&this.fire("elementDraggable",{el:r,options:j})}}}},animationSupported:!0,getElement:function(r){return r==null?null:(r=typeof r=="string"?r:r.tagName==null&&r.length!=null&&r.enctype==null?r[0]:r,typeof r=="string"?document.getElementById(r):r)},removeElement:function(r){h(this).elementRemoved(r),this.getEventManager().remove(r)},doAnimate:function(r,f,l){l=l||{};var _=this.getOffset(r),x=m(_,f),u=x[0]-_.left,j=x[1]-_.top,b=l.duration||250,w=15,d=b/w,E=w/b*u,N=w/b*j,B=0,W=setInterval(function(){c.setPosition(r,{left:_.left+E*(B+1),top:_.top+N*(B+1)}),l.step!=null&&l.step(B,Math.ceil(d)),B++,B>=d&&(window.clearInterval(W),l.complete!=null&&l.complete())},w)},destroyDroppable:function(r,f){h(this,f).destroyDroppable(r)},unbindDroppable:function(r,f,l,_){h(this,_).destroyDroppable(r,f,l)},droppable:function(r,f){r=Y.isArray(r)||r.length!=null&&!Y.isString(r)?r:[r];var l;return f=f||{},f.allowLoopback=!1,Array.prototype.slice.call(r).forEach(function(_){l=this.info(_),l.el&&this.initDroppable(l.el,f)}.bind(this)),this},initDroppable:function(r,f,l){h(this,l).droppable(r,f)},isAlreadyDraggable:function(r){return r._katavorioDrag!=null},isDragSupported:function(r,f){return!0},isDropSupported:function(r,f){return!0},isElementDraggable:function(r){return r=c.getElement(r),r._katavorioDrag&&r._katavorioDrag.isEnabled()},getDragObject:function(r){return r[0].drag.getDragElement()},getDragScope:function(r){return r._katavorioDrag&&r._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(r){return r[0].e},getUIPosition:function(r,f){var l=r[0].el;if(l.offsetParent==null)return null;var _=r[0].finalPos||r[0].pos,x={left:_[0],top:_[1]};if(l._katavorioDrag&&l.offsetParent!==this.getContainer()){var u=this.getOffset(l.offsetParent);x.left+=u.left,x.top+=u.top}return x},setDragFilter:function(r,f,l){r._katavorioDrag&&r._katavorioDrag.setFilter(f,l)},setElementDraggable:function(r,f){r=c.getElement(r),r._katavorioDrag&&r._katavorioDrag.setEnabled(f)},setDragScope:function(r,f){r._katavorioDrag&&r._katavorioDrag.k.setDragScope(r,f)},setDropScope:function(r,f){r._katavorioDrop&&r._katavorioDrop.length>0&&r._katavorioDrop[0].k.setDropScope(r,f)},addToPosse:function(r,f){var l=Array.prototype.slice.call(arguments,1),_=h(this);c.each(r,function(x){x=[c.getElement(x)],x.push.apply(x,l),_.addToPosse.apply(_,x)})},setPosse:function(r,f){var l=Array.prototype.slice.call(arguments,1),_=h(this);c.each(r,function(x){x=[c.getElement(x)],x.push.apply(x,l),_.setPosse.apply(_,x)})},removeFromPosse:function(r,f){var l=Array.prototype.slice.call(arguments,1),_=h(this);c.each(r,function(x){x=[c.getElement(x)],x.push.apply(x,l),_.removeFromPosse.apply(_,x)})},removeFromAllPosses:function(r){var f=h(this);c.each(r,function(l){f.removeFromAllPosses(c.getElement(l))})},setPosseState:function(r,f,l){var _=h(this);c.each(r,function(x){_.setPosseState(c.getElement(x),f,l)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(r){r._katavorioDrag&&r._katavorioDrag.abort()},addToDragSelection:function(r){var f=this.getElement(r);f!=null&&(f._isJsPlumbGroup||f._jsPlumbGroup==null)&&h(this).select(r)},removeFromDragSelection:function(r){h(this).deselect(r)},getDragSelection:function(){return h(this).getSelection()},clearDragSelection:function(){h(this).deselectAll()},trigger:function(r,f,l,_){this.getEventManager().trigger(r,f,l,_)},doReset:function(){for(var r in this)r.indexOf("_katavorio_")===0&&this[r].reset()},getEventManager:function(){return et(this)},on:function(r,f,l){return this.getEventManager().on.apply(this,arguments),this},off:function(r,f,l){return this.getEventManager().off.apply(this,arguments),this}});var A=function(r){var f=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&document.body!=null?r():setTimeout(f,9)};f()};A(c.init)}.call(typeof window<"u"?window:kt)})(ne);const _e={name:"JsPlumb",data(){return{}},mounted(){ne.jsPlumb.ready(function(){let At=window.jsp=ne.jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11,id:"ARROW",events:{click:function(){alert("you clicked on the arrow overlay")}}}],["Label",{location:.1,id:"label",cssClass:"aLabel",events:{tap:function(){alert("hey")}}}]],Container:"canvas"}),J={connector:"StateMachine",paintStyle:{stroke:"red",strokeWidth:4},hoverPaintStyle:{stroke:"blue"},overlays:["Arrow"]};At.registerConnectionType("basic",J);let c={strokeWidth:2,stroke:"#61B7CF",joinstyle:"round",outlineStroke:"white",outlineWidth:2},Y={strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},nt={fill:"#216477",stroke:"#216477"},K={endpoint:"Dot",paintStyle:{stroke:"#7AB02C",fill:"transparent",radius:7,strokeWidth:2},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:c,hoverPaintStyle:nt,connectorHoverStyle:Y,dragOptions:{},overlays:[["Label",{location:[.5,1.5],label:"Drag",cssClass:"endpointSourceLabel",visible:!1}]]},et={endpoint:"Dot",paintStyle:{fill:"#7AB02C",radius:7},hoverPaintStyle:nt,maxConnections:-1,dropOptions:{hoverClass:"hover",activeClass:"active"},isTarget:!0,overlays:[["Label",{location:[.5,-.5],label:"Drop",cssClass:"endpointTargetLabel",visible:!1}]]},h=function(a){a.getOverlay("label").setLabel(a.sourceId.substring(15)+"-"+a.targetId.substring(15))},O=function(a,i,m){for(var S=0;S<i.length;S++){var T=a+i[S];At.addEndpoint("flowchart"+a,K,{anchor:i[S],uuid:T})}for(var P=0;P<m.length;P++){var g=a+m[P];At.addEndpoint("flowchart"+a,et,{anchor:m[P],uuid:g})}};At.batch(function(){O("Window4",["TopCenter","BottomCenter"],["LeftMiddle","RightMiddle"]),O("Window2",["LeftMiddle","BottomCenter"],["TopCenter","RightMiddle"]),O("Window3",["RightMiddle","BottomCenter"],["LeftMiddle","TopCenter"]),O("Window1",["LeftMiddle","RightMiddle"],["TopCenter","BottomCenter"]),At.bind("connection",function(a,i){h(a.connection)}),At.draggable(ne.jsPlumb.getSelector(".flowchart-demo .window"),{grid:[20,20]}),At.connect({uuids:["Window2BottomCenter","Window3TopCenter"]}),At.connect({uuids:["Window2LeftMiddle","Window4LeftMiddle"]}),At.connect({uuids:["Window4TopCenter","Window4RightMiddle"]}),At.connect({uuids:["Window3RightMiddle","Window2RightMiddle"]}),At.connect({uuids:["Window4BottomCenter","Window1TopCenter"]}),At.connect({uuids:["Window3BottomCenter","Window1BottomCenter"]}),At.bind("click",function(a,i){a.toggleType("basic")}),At.bind("connectionDrag",function(a){console.log("connection "+a.id+" is being dragged. suspendedElement is ",a.suspendedElement," of type ",a.suspendedElementType)}),At.bind("connectionDragStop",function(a){console.log("connection "+a.id+" was dragged")}),At.bind("connectionMoved",function(a){console.log("connection "+a.connection.id+" was moved")})}),ne.jsPlumb.fire("jsPlumbDemoLoaded",At)})}},Pe={id:"canvas",class:"jtk-demo-canvas canvas-wide flowchart-demo jtk-surface jtk-surface-nopan"},Ce=ce("div",{id:"flowchartWindow1",class:"window jtk-node"},"1",-1),Ee=ce("div",{id:"flowchartWindow2",class:"window jtk-node"},"2",-1),Se=ce("div",{id:"flowchartWindow3",class:"window jtk-node"},"3",-1),De=ce("div",{id:"flowchartWindow4",class:"window jtk-node"},"4",-1),xe=[Ce,Ee,Se,De];function we(At,J,c,Y,nt,K){return me(),ye("div",Pe,xe)}const ke=be(_e,[["render",we]]);export{ke as default};
