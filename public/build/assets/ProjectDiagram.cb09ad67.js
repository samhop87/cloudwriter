import{z as jt,o as ne,g as ie,F as ye,l as be,n as _e,e as Ce,t as de,d as Ee}from"./app.93f84dd5.js";import{_ as Se}from"./_plugin-vue_export-helper.cdc0426e.js";var se={};(function(It){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(g){return g==0?0:g>0?1:-1});var K={subtract:function(g,S){return{x:g.x-S.x,y:g.y-S.y}},dotProduct:function(g,S){return g.x*S.x+g.y*S.y},square:function(g){return Math.sqrt(g.x*g.x+g.y*g.y)},scale:function(g,S){return{x:g.x*S,y:g.y*S}}},c=64,X=Math.pow(2,-c-1),nt=function(g,S){for(var N=[],B=$(g,S),Y=S.length-1,i=2*Y-1,o=u(B,i,N,0),t=K.subtract(g,S[0]),p=K.square(t),m=0,I=0;I<o;I++){t=K.subtract(g,v(S,Y,N[I],null,null));var F=K.square(t);F<p&&(p=F,m=N[I])}return t=K.subtract(g,S[Y]),F=K.square(t),F<p&&(p=F,m=1),{location:m,distance:p}},q=function(g,S){var N=nt(g,S);return{point:v(S,S.length-1,N.location,null,null),location:N.location}},$=function(g,S){for(var N=S.length-1,B=2*N-1,Y=[],i=[],o=[],t=[],p=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],m=0;m<=N;m++)Y[m]=K.subtract(S[m],g);for(var m=0;m<=N-1;m++)i[m]=K.subtract(S[m+1],S[m]),i[m]=K.scale(i[m],3);for(var I=0;I<=N-1;I++)for(var F=0;F<=N;F++)o[I]||(o[I]=[]),o[I][F]=K.dotProduct(i[I],Y[F]);for(m=0;m<=B;m++)t[m]||(t[m]=[]),t[m].y=0,t[m].x=parseFloat(m)/B;for(var W=N,R=N-1,V=0;V<=W+R;V++){var at=Math.max(0,V-R),st=Math.min(V,W);for(m=at;m<=st;m++){var it=V-m;t[m+it].y+=o[it][m]*p[it][m]}}return t},u=function(g,S,N,B){var Y=[],i=[],o,t,p=[],m=[];switch(T(g,S)){case 0:return 0;case 1:{if(B>=c)return N[0]=(g[0].x+g[S].x)/2,1;if(a(g,S))return N[0]=n(g,S),1;break}}v(g,S,.5,Y,i),o=u(Y,S,p,B+1),t=u(i,S,m,B+1);for(var I=0;I<o;I++)N[I]=p[I];for(var I=0;I<t;I++)N[I+o]=m[I];return o+t},T=function(g,S){var N=0,B,Y;B=Y=Math.sgn(g[0].y);for(var i=1;i<=S;i++)B=Math.sgn(g[i].y),B!=Y&&N++,Y=B;return N},a=function(g,S){var N,B,Y,i,o,t,p,m,I,F,W,R,V,at,st,it;t=g[0].y-g[S].y,p=g[S].x-g[0].x,m=g[0].x*g[S].y-g[S].x*g[0].y;var rt,gt;rt=gt=0;for(var dt=1;dt<S;dt++){var lt=t*g[dt].x+p*g[dt].y+m;lt>rt?rt=lt:lt<gt&&(gt=lt)}return W=0,R=1,V=0,at=t,st=p,it=m-rt,I=W*st-at*R,F=1/I,B=(R*it-st*V)*F,at=t,st=p,it=m-gt,I=W*st-at*R,F=1/I,Y=(R*it-st*V)*F,i=Math.min(B,Y),o=Math.max(B,Y),N=o-i,N<X?1:0},n=function(g,S){var N=1,B=0,Y=g[S].x-g[0].x,i=g[S].y-g[0].y,o=g[0].x-0,t=g[0].y-0,p=Y*B-i*N,m=1/p,I=(Y*t-i*o)*m;return 0+N*I},v=function(g,S,N,B,Y){for(var i=[[]],o=0;o<=S;o++)i[0][o]=g[o];for(var t=1;t<=S;t++)for(var o=0;o<=S-t;o++)i[t]||(i[t]=[]),i[t][o]||(i[t][o]={}),i[t][o].x=(1-N)*i[t-1][o].x+N*i[t-1][o+1].x,i[t][o].y=(1-N)*i[t-1][o].y+N*i[t-1][o+1].y;if(B!=null)for(o=0;o<=S;o++)B[o]=i[o][0];if(Y!=null)for(o=0;o<=S;o++)Y[o]=i[S-o][o];return i[S][0]},E={},O=function(g){var S=E[g];if(!S){S=[];var N=function(){return function(F){return Math.pow(F,g)}},B=function(){return function(F){return Math.pow(1-F,g)}},Y=function(F){return function(W){return F}},i=function(){return function(F){return F}},o=function(){return function(F){return 1-F}},t=function(F){return function(W){for(var R=1,V=0;V<F.length;V++)R=R*F[V](W);return R}};S.push(new N);for(var p=1;p<g;p++){for(var m=[new Y(g)],I=0;I<g-p;I++)m.push(new i);for(var I=0;I<p;I++)m.push(new o);S.push(new t(m))}S.push(new B),E[g]=S}return S},C=function(g,S){for(var N=O(g.length-1),B=0,Y=0,i=0;i<g.length;i++)B=B+g[i].x*N[i](S),Y=Y+g[i].y*N[i](S);return{x:B,y:Y}},f=function(g,S){return Math.sqrt(Math.pow(g.x-S.x,2)+Math.pow(g.y-S.y,2))},e=function(g){return g[0].x===g[1].x&&g[0].y===g[1].y},M=function(g,S,N){if(e(g))return{point:g[0],location:S};for(var B=C(g,S),Y=0,i=S,o=N>0?1:-1,t=null;Y<Math.abs(N);)i+=.005*o,t=C(g,i),Y+=f(t,B),B=t;return{point:t,location:i}},L=function(g){var S=new Date().getTime();if(e(g))return 0;for(var N=C(g,0),B=0,Y=0,i=1,o=null;Y<1;)Y+=.005*i,o=C(g,Y),B+=f(o,N),N=o;return console.log("length",new Date().getTime()-S),B},U=function(g,S,N){return M(g,S,N).point},G=function(g,S,N){return M(g,S,N).location},P=function(g,S){var N=C(g,S),B=C(g.slice(0,g.length-1),S),Y=B.y-N.y,i=B.x-N.x;return Y===0?1/0:Math.atan(Y/i)},w=function(g,S,N){var B=M(g,S,N);return B.location>1&&(B.location=1),B.location<0&&(B.location=0),P(g,B.location)},r=function(g,S,N,B){B=B==null?0:B;var Y=M(g,S,B),i=P(g,Y.location),o=Math.atan(-1/i),t=N/2*Math.sin(o),p=N/2*Math.cos(o);return[{x:Y.point.x+p,y:Y.point.y+t},{x:Y.point.x-p,y:Y.point.y-t}]},d=function(g,S,N,B,Y){var i=B-S,o=g-N,t=g*(S-B)+S*(N-g),p=h(Y),m=[i*p[0][0]+o*p[1][0],i*p[0][1]+o*p[1][1],i*p[0][2]+o*p[1][2],i*p[0][3]+o*p[1][3]+t],I=b.apply(null,m),F=[];if(I!=null)for(var W=0;W<3;W++){var R=I[W],V=Math.pow(R,2),at=Math.pow(R,3),st=[p[0][0]*at+p[0][1]*V+p[0][2]*R+p[0][3],p[1][0]*at+p[1][1]*V+p[1][2]*R+p[1][3]],it;N-g!==0?it=(st[0]-g)/(N-g):it=(st[1]-S)/(B-S),R>=0&&R<=1&&it>=0&&it<=1&&F.push(st)}return F},l=function(g,S,N,B,Y){var i=[];return i.push.apply(i,d(g,S,g+N,S,Y)),i.push.apply(i,d(g+N,S,g+N,S+B,Y)),i.push.apply(i,d(g+N,S+B,g,S+B,Y)),i.push.apply(i,d(g,S+B,g,S,Y)),i},_=function(g,S){var N=[];return N.push.apply(N,d(g.x,g.y,g.x+g.w,g.y,S)),N.push.apply(N,d(g.x+g.w,g.y,g.x+g.w,g.y+g.h,S)),N.push.apply(N,d(g.x+g.w,g.y+g.h,g.x,g.y+g.h,S)),N.push.apply(N,d(g.x,g.y+g.h,g.x,g.y,S)),N};function x(g,S){return[-g[0][S]+3*g[1][S]+-3*g[2][S]+g[3][S],3*g[0][S]-6*g[1][S]+3*g[2][S],-3*g[0][S]+3*g[1][S],g[0][S]]}function h(g){return[x(g,"x"),x(g,"y")]}function j(g){return g<0?-1:g>0?1:0}function b(g,S,N,B){var Y=S/g,i=N/g,o=B/g,t=(3*i-Math.pow(Y,2))/9,p=(9*Y*i-27*o-2*Math.pow(Y,3))/54,m=Math.pow(t,3)+Math.pow(p,2),I,F,W=[];if(m>=0)I=j(p+Math.sqrt(m))*Math.pow(Math.abs(p+Math.sqrt(m)),1/3),F=j(p-Math.sqrt(m))*Math.pow(Math.abs(p-Math.sqrt(m)),1/3),W[0]=-Y/3+(I+F),W[1]=-Y/3-(I+F)/2,W[2]=-Y/3-(I+F)/2,Math.abs(Math.sqrt(3)*(I-F)/2)!==0&&(W[1]=-1,W[2]=-1);else{var R=Math.acos(p/Math.sqrt(-Math.pow(t,3)));W[0]=2*Math.sqrt(-t)*Math.cos(R/3)-Y/3,W[1]=2*Math.sqrt(-t)*Math.cos((R+2*Math.PI)/3)-Y/3,W[2]=2*Math.sqrt(-t)*Math.cos((R+4*Math.PI)/3)-Y/3}for(var V=0;V<3;V++)(W[V]<0||W[V]>1)&&(W[V]=-1);return W}var A=this.jsBezier={distanceFromCurve:nt,gradientAtPoint:P,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:q,pointOnCurve:C,pointAlongCurveFrom:U,perpendicularToCurveAt:r,locationAlongCurveFrom:G,getLength:L,lineIntersection:d,boxIntersection:l,boundingBoxIntersection:_,version:"0.9.0"};It.jsBezier=A}).call(typeof window<"u"?window:jt),function(){var K=this,c=K.Biltong={version:"0.4.0"};It.Biltong=c;var X=function(a){return Object.prototype.toString.call(a)==="[object Array]"},nt=function(a,n,v){return a=X(a)?a:[a.x,a.y],n=X(n)?n:[n.x,n.y],v(a,n)},q=c.gradient=function(a,n){return nt(a,n,function(v,E){return E[0]==v[0]?E[1]>v[1]?1/0:-1/0:E[1]==v[1]?E[0]>v[0]?0:-0:(E[1]-v[1])/(E[0]-v[0])})};c.normal=function(a,n){return-1/q(a,n)},c.lineLength=function(a,n){return nt(a,n,function(v,E){return Math.sqrt(Math.pow(E[1]-v[1],2)+Math.pow(E[0]-v[0],2))})};var $=c.quadrant=function(a,n){return nt(a,n,function(v,E){return E[0]>v[0]||E[0]==v[0]?E[1]>v[1]?2:1:E[1]>v[1]?3:4})};c.theta=function(a,n){return nt(a,n,function(v,E){var O=q(v,E),C=Math.atan(O),f=$(v,E);return(f==4||f==3)&&(C+=Math.PI),C<0&&(C+=2*Math.PI),C})},c.intersects=function(a,n){var v=a.x,E=a.x+a.w,O=a.y,C=a.y+a.h,f=n.x,e=n.x+n.w,M=n.y,L=n.y+n.h;return v<=f&&f<=E&&O<=M&&M<=C||v<=e&&e<=E&&O<=M&&M<=C||v<=f&&f<=E&&O<=L&&L<=C||v<=e&&f<=E&&O<=L&&L<=C||f<=v&&v<=e&&M<=O&&O<=L||f<=E&&E<=e&&M<=O&&O<=L||f<=v&&v<=e&&M<=C&&C<=L||f<=E&&v<=e&&M<=C&&C<=L},c.encloses=function(a,n,v){var E=a.x,O=a.x+a.w,C=a.y,f=a.y+a.h,e=n.x,M=n.x+n.w,L=n.y,U=n.y+n.h,G=function(P,w,r,d){return v?P<=w&&r>=d:P<w&&r>d};return G(E,e,O,M)&&G(C,L,f,U)};var u=[null,[1,-1],[1,1],[-1,1],[-1,-1]],T=[null,[-1,-1],[-1,1],[1,1],[1,-1]];c.pointOnLine=function(a,n,v){var E=q(a,n),O=$(a,n),C=v>0?u[O]:T[O],f=Math.atan(E),e=Math.abs(v*Math.sin(f))*C[1],M=Math.abs(v*Math.cos(f))*C[0];return{x:a.x+M,y:a.y+e}},c.perpendicularLineTo=function(a,n,v){var E=q(a,n),O=Math.atan(-1/E),C=v/2*Math.sin(O),f=v/2*Math.cos(O);return[{x:n.x+f,y:n.y+C},{x:n.x-f,y:n.y-C}]}}.call(typeof window<"u"?window:jt),function(){function K(i,o,t,p,m,I,F,W){return new Touch({target:o,identifier:Y(),pageX:t,pageY:p,screenX:m,screenY:I,clientX:F||m,clientY:W||I})}function c(){var i=[];return Array.prototype.push.apply(i,arguments),i.item=function(o){return this[o]},i}function X(i,o,t,p,m,I,F,W){return c(K.apply(null,arguments))}var nt=this,q=function(i,o,t){t=t||i.parentNode;for(var p=t.querySelectorAll(o),m=0;m<p.length;m++)if(p[m]===i)return!0;return!1},$=function(i){return typeof i=="string"||i.constructor===String?document.getElementById(i):i},u=function(i){return i.srcElement||i.target},T=function(i,o,t,p){if(p){if(typeof i.path<"u"&&i.path.indexOf)return{path:i.path,end:i.path.indexOf(t)};var m={path:[],end:-1},I=function(F){m.path.push(F),F===t?m.end=m.path.length-1:F.parentNode!=null&&I(F.parentNode)};return I(o),m}else return{path:[o],end:1}},a=function(i,o){for(var t=0,p=i.length;t<p&&i[t]!=o;t++);t<i.length&&i.splice(t,1)},n=1,v=function(i,o,t){var p=n++;return i.__ta=i.__ta||{},i.__ta[o]=i.__ta[o]||{},i.__ta[o][p]=t,t.__tauid=p,p},E=function(i,o,t){if(i.__ta&&i.__ta[o]&&delete i.__ta[o][t.__tauid],t.__taExtra){for(var p=0;p<t.__taExtra.length;p++)N(i,t.__taExtra[p][0],t.__taExtra[p][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()},O=function(i,o,t,p){if(i==null)return t;var m=i.split(","),I=function(F){I.__tauid=t.__tauid;var W=u(F),R=W,V=T(F,W,o,i!=null);if(V.end!=-1)for(var at=0;at<V.end;at++){R=V.path[at];for(var st=0;st<m.length;st++)q(R,m[st],o)&&t.apply(R,arguments)}};return C(t,p,I),I},C=function(i,o,t){i.__taExtra=i.__taExtra||[],i.__taExtra.push([o,t])},f=function(i,o,t,p){if(P&&r[o]){var m=O(p,i,t,r[o]);S(i,r[o],m,t)}o==="focus"&&i.getAttribute("tabindex")==null&&i.setAttribute("tabindex","1"),S(i,o,O(p,i,t,o),t)},e=function(i,o,t,p){if(i.__taSmartClicks==null){var m=function(W){i.__tad=x(W)},I=function(W){i.__tau=x(W)},F=function(W){if(i.__tad&&i.__tau&&i.__tad[0]===i.__tau[0]&&i.__tad[1]===i.__tau[1])for(var R=0;R<i.__taSmartClicks.length;R++)i.__taSmartClicks[R].apply(u(W),[W])};f(i,"mousedown",m,p),f(i,"mouseup",I,p),f(i,"click",F,p),i.__taSmartClicks=[]}i.__taSmartClicks.push(t),t.__taUnstore=function(){a(i.__taSmartClicks,t)}},M={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},L=function(i,o){return function(t,p,m,I){if(p=="contextmenu"&&w)f(t,p,m,I);else{if(t.__taTapHandler==null){var F=t.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},W=function(st){for(var it=u(st),rt=T(st,it,t,I!=null),gt=!1,dt=0;dt<rt.end;dt++){if(gt)return;it=rt.path[dt];for(var lt=0;lt<F.downSelectors.length;lt++)if(F.downSelectors[lt]==null||q(it,F.downSelectors[lt],t)){F.down=!0,setTimeout(V,i),setTimeout(at,o),gt=!0;break}}},R=function(st){if(F.down){var it=u(st),rt,gt;F.taps++;var dt=g(st);for(var lt in M)if(M.hasOwnProperty(lt)){var yt=M[lt];if(yt.touches===dt&&(yt.taps===1||yt.taps===F.taps))for(var pt=0;pt<F[lt].length;pt++){gt=T(st,it,t,F[lt][pt][1]!=null);for(var J=0;J<gt.end;J++)if(rt=gt.path[J],F[lt][pt][1]==null||q(rt,F[lt][pt][1],t)){F[lt][pt][0].apply(rt,[st]);break}}}}},V=function(){F.down=!1},at=function(){F.taps=0};f(t,"mousedown",W),f(t,"mouseup",R)}t.__taTapHandler.downSelectors.push(I),t.__taTapHandler[p].push([m,I]),m.__taUnstore=function(){a(t.__taTapHandler[p],m)}}}},U=function(i,o,t,p){for(var m in t.__tamee[i])t.__tamee[i].hasOwnProperty(m)&&t.__tamee[i][m].apply(p,[o])},G=function(){var i=[];return function(o,t,p,m){if(!o.__tamee){o.__tamee={over:!1,mouseenter:[],mouseexit:[]};var I=function(W){var R=u(W);(m==null&&R==o&&!o.__tamee.over||q(R,m,o)&&(R.__tamee==null||!R.__tamee.over))&&(U("mouseenter",W,o,R),R.__tamee=R.__tamee||{},R.__tamee.over=!0,i.push(R))},F=function(W){for(var R=u(W),V=0;V<i.length;V++)R==i[V]&&!q(W.relatedTarget||W.toElement,"*",R)&&(R.__tamee.over=!1,i.splice(V,1),U("mouseexit",W,o,R))};S(o,"mouseover",O(m,o,I,"mouseover"),I),S(o,"mouseout",O(m,o,F,"mouseout"),F)}p.__taUnstore=function(){delete o.__tamee[t][p.__tauid]},v(o,t,p),o.__tamee[t][p.__tauid]=p}},P="ontouchstart"in document.documentElement||navigator.maxTouchPoints,w="onmousedown"in document.documentElement,r={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},d=function(){var i=-1;if(navigator.appName=="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(i=parseFloat(RegExp.$1))}return i}(),l=d>-1&&d<9,_=function(i,o){if(i==null)return[0,0];var t=A(i),p=b(t,0);return[p[o+"X"],p[o+"Y"]]},x=function(i){return i==null?[0,0]:l?[i.clientX+document.documentElement.scrollLeft,i.clientY+document.documentElement.scrollTop]:_(i,"page")},h=function(i){return _(i,"screen")},j=function(i){return _(i,"client")},b=function(i,o){return i.item?i.item(o):i[o]},A=function(i){return i.touches&&i.touches.length>0?i.touches:i.changedTouches&&i.changedTouches.length>0?i.changedTouches:i.targetTouches&&i.targetTouches.length>0?i.targetTouches:[i]},g=function(i){return A(i).length},S=function(i,o,t,p){if(v(i,o,t),p.__tauid=t.__tauid,i.addEventListener)i.addEventListener(o,t,!1);else if(i.attachEvent){var m=o+t.__tauid;i["e"+m]=t,i[m]=function(){i["e"+m]&&i["e"+m](window.event)},i.attachEvent("on"+o,i[m])}},N=function(i,o,t){t!=null&&B(i,function(){var p=$(this);if(E(p,o,t),t.__tauid!=null){if(p.removeEventListener)p.removeEventListener(o,t,!1),P&&r[o]&&p.removeEventListener(r[o],t,!1);else if(this.detachEvent){var m=o+t.__tauid;p[m]&&p.detachEvent("on"+o,p[m]),p[m]=null,p["e"+m]=null}}t.__taTouchProxy&&N(i,t.__taTouchProxy[1],t.__taTouchProxy[0])})},B=function(i,o){if(i!=null){i=typeof Window<"u"&&typeof i.top!="unknown"&&i==i.top?[i]:typeof i!="string"&&i.tagName==null&&i.length!=null?i:typeof i=="string"?document.querySelectorAll(i):[i];for(var t=0;t<i.length;t++)o.apply(i[t])}},Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,t=i=="x"?o:o&3|8;return t.toString(16)})};nt.Mottle=function(i){i=i||{};var o=i.clickThreshold||250,t=i.dblClickThreshold||450,p=new G,m=new L(o,t),I=i.smartClicks,F=function(W,R,V,at){V!=null&&B(W,function(){var st=$(this);I&&R==="click"?e(st,R,V,at):R==="tap"||R==="dbltap"||R==="contextmenu"?m(st,R,V,at):R==="mouseenter"||R=="mouseexit"?p(st,R,V,at):f(st,R,V,at)})};this.remove=function(W){return B(W,function(){var R=$(this);if(R.__ta){for(var V in R.__ta)if(R.__ta.hasOwnProperty(V))for(var at in R.__ta[V])R.__ta[V].hasOwnProperty(at)&&N(R,V,R.__ta[V][at])}R.parentNode&&R.parentNode.removeChild(R)}),this},this.on=function(W,R,V,at){var st=arguments[0],it=arguments.length==4?arguments[2]:null,rt=arguments[1],gt=arguments[arguments.length-1];return F(st,rt,gt,it),this},this.off=function(W,R,V){return N(W,R,V),this},this.trigger=function(W,R,V,at){var st=w&&(typeof MouseEvent>"u"||V==null||V.constructor===MouseEvent),it=P&&!w&&r[R]?r[R]:R,rt=!(P&&!w&&r[R]),gt=x(V),dt=h(V),lt=j(V);return B(W,function(){var yt=$(this),pt;V=V||{screenX:dt[0],screenY:dt[1],clientX:lt[0],clientY:lt[1]};var J=function(vt){at&&(vt.payload=at)},Z={TouchEvent:function(vt){var Dt=X(window,yt,0,gt[0],gt[1],dt[0],dt[1],lt[0],lt[1]),kt=vt.initTouchEvent||vt.initEvent;kt(it,!0,!0,window,null,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,Dt,Dt,Dt,1,0)},MouseEvents:function(vt){vt.initMouseEvent(it,!0,!0,window,0,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,1,yt)}};if(document.createEvent){var Q=!rt&&!st&&P&&r[R],ut=Q?"TouchEvent":"MouseEvents";pt=document.createEvent(ut),Z[ut](pt),J(pt),yt.dispatchEvent(pt)}else document.createEventObject&&(pt=document.createEventObject(),pt.eventType=pt.eventName=it,pt.screenX=dt[0],pt.screenY=dt[1],pt.clientX=lt[0],pt.clientY=lt[1],J(pt),yt.fireEvent("on"+it,pt))}),this}},nt.Mottle.consume=function(i,o){i.stopPropagation?i.stopPropagation():i.returnValue=!1,!o&&i.preventDefault&&i.preventDefault()},nt.Mottle.pageLocation=x,nt.Mottle.setForceTouchEvents=function(i){P=i},nt.Mottle.setForceMouseEvents=function(i){w=i},nt.Mottle.version="0.8.0",It.Mottle=nt.Mottle}.call(typeof window>"u"?jt:window),function(){var K=this,c=function(i,o,t){return i.indexOf(o)===-1?(t?i.unshift(o):i.push(o),!0):!1},X=function(i,o){var t=i.indexOf(o);t!==-1&&i.splice(t,1)},nt=function(i,o){for(var t=[],p=0;p<i.length;p++)o.indexOf(i[p])===-1&&t.push(i[p]);return t},q=function(i){return i==null?!1:typeof i=="string"||i.constructor===String},$=function(i){var o=i.getBoundingClientRect(),t=document.body,p=document.documentElement,m=window.pageYOffset||p.scrollTop||t.scrollTop,I=window.pageXOffset||p.scrollLeft||t.scrollLeft,F=p.clientTop||t.clientTop||0,W=p.clientLeft||t.clientLeft||0,R=o.top+m-F,V=o.left+I-W;return{top:Math.round(R),left:Math.round(V)}},u=function(i,o,t){t=t||i.parentNode;for(var p=t.querySelectorAll(o),m=0;m<p.length;m++)if(p[m]===i)return!0;return!1},T=function(i,o,t){if(u(o,t,i))return o;for(var p=o.parentNode;p!=null&&p!==i;){if(u(p,t,i))return p;p=p.parentNode}},a=function(i,o,t){for(var p=null,m=o.getAttribute("katavorio-draggable"),I=m!=null?"[katavorio-draggable='"+m+"'] ":"",F=0;F<i.length;F++)if(p=T(o,t,I+i[F].selector),p!=null){if(i[F].filter){var W=u(t,i[F].filter,p),R=i[F].filterExclude===!0;if(R&&!W||W)return null}return[i[F],p]}return null},n=function(){var i=-1;if(navigator.appName==="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(i=parseFloat(RegExp.$1))}return i}(),v=10,E=10,O=n>-1&&n<9,C=n===9,f=function(i){if(O)return[i.clientX+document.documentElement.scrollLeft,i.clientY+document.documentElement.scrollTop];var o=M(i),t=e(o,0);return C?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},e=function(i,o){return i.item?i.item(o):i[o]},M=function(i){return i.touches&&i.touches.length>0?i.touches:i.changedTouches&&i.changedTouches.length>0?i.changedTouches:i.targetTouches&&i.targetTouches.length>0?i.targetTouches:[i]},L={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},U="katavorio-drag-scope",G=["stop","start","drag","drop","over","out","beforeStart"],P=function(){},w=function(){return!0},r=function(i,o,t){for(var p=0;p<i.length;p++)i[p]!=t&&o(i[p])},d=function(i,o,t,p){r(i,function(m){m.setActive(o),o&&m.updatePosition(),t&&m.setHover(p,o)})},l=function(i,o){if(i!=null){i=!q(i)&&i.tagName==null&&i.length!=null?i:[i];for(var t=0;t<i.length;t++)o.apply(i[t],[i[t]])}},_=function(i){i.stopPropagation?(i.stopPropagation(),i.preventDefault()):i.returnValue=!1},x="input,textarea,select,button,option",h=function(i,o,t){var p=i.srcElement||i.target;return!u(p,t.getInputFilterSelector(),o)},j=function(i,o,t,p){this.params=o||{},this.el=i,this.params.addClass(this.el,this._class),this.uuid=N();var m=!0;return this.setEnabled=function(I){m=I},this.isEnabled=function(){return m},this.toggleEnabled=function(){m=!m},this.setScope=function(I){this.scopes=I?I.split(/\s+/):[p]},this.addScope=function(I){var F={};l(this.scopes,function(R){F[R]=!0}),l(I?I.split(/\s+/):[],function(R){F[R]=!0}),this.scopes=[];for(var W in F)this.scopes.push(W)},this.removeScope=function(I){var F={};l(this.scopes,function(R){F[R]=!0}),l(I?I.split(/\s+/):[],function(R){delete F[R]}),this.scopes=[];for(var W in F)this.scopes.push(W)},this.toggleScope=function(I){var F={};l(this.scopes,function(R){F[R]=!0}),l(I?I.split(/\s+/):[],function(R){F[R]?delete F[R]:F[R]=!0}),this.scopes=[];for(var W in F)this.scopes.push(W)},this.setScope(o.scope),this.k=o.katavorio,o.katavorio},b=function(){return!0},A=function(){return!1},g=function(i,o,t,p){this._class=t.draggable;var m=j.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var I=[0,0],F=null,W=null,R=[0,0],V=!1,at=[0,0],st=this.params.consumeStartEvent!==!1,it=this.el,rt=this.params.clone;this.params.scroll;var gt=o.multipleDrop!==!1,dt=!1,lt,yt,pt=null,J=[],Z=null,Q=o.ghostProxyParent,ut,vt,Dt,kt;if(o.ghostProxy===!0?lt=b:o.ghostProxy&&typeof o.ghostProxy=="function"?lt=o.ghostProxy:lt=function(tt,_t){return Z&&Z.useGhostProxy?Z.useGhostProxy(tt,_t):!1},o.makeGhostProxy?yt=o.makeGhostProxy:yt=function(tt){return Z&&Z.makeGhostProxy?Z.makeGhostProxy(tt):tt.cloneNode(!0)},o.selector){var Ft=i.getAttribute("katavorio-draggable");Ft==null&&(Ft=""+new Date().getTime(),i.setAttribute("katavorio-draggable",Ft)),J.push(o)}var Gt=o.snapThreshold,Nt=function(tt,_t,Pt,bt,Et){var xt=Math.floor(tt[0]/_t),s=_t*xt,D=s+_t,y=Math.abs(tt[0]-s)<=bt?s:Math.abs(D-tt[0])<=bt?D:tt[0],k=Math.floor(tt[1]/Pt),H=Pt*k,z=H+Pt,et=Math.abs(tt[1]-H)<=Et?H:Math.abs(z-tt[1])<=Et?z:tt[1];return[y,et]};this.posses=[],this.posseRoles={},this.toGrid=function(tt){if(this.params.grid==null)return tt;var _t=this.params.grid?this.params.grid[0]/2:Gt||v/2,Pt=this.params.grid?this.params.grid[1]/2:Gt||E/2;return Nt(tt,this.params.grid[0],this.params.grid[1],_t,Pt)},this.snap=function(tt,_t){if(it!=null){tt=tt||(this.params.grid?this.params.grid[0]:v),_t=_t||(this.params.grid?this.params.grid[1]:E);var Pt=this.params.getPosition(it),bt=this.params.grid?this.params.grid[0]/2:Gt,Et=this.params.grid?this.params.grid[1]/2:Gt,xt=Nt(Pt,tt,_t,bt,Et);return this.params.setPosition(it,xt),xt}},this.setUseGhostProxy=function(tt){lt=tt?b:A};var Ut,re=function(tt){return o.allowNegative===!1?[Math.max(0,tt[0]),Math.max(0,tt[1])]:tt},oe=function(tt){Ut=typeof tt=="function"?tt:tt?function(_t,Pt,bt,Et){return re([Math.max(0,Math.min(bt.w-Et[0],_t[0])),Math.max(0,Math.min(bt.h-Et[1],_t[1]))])}.bind(this):function(_t){return re(_t)}}.bind(this);oe(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(tt){oe(tt)};var ae=function(tt,_t,Pt,bt){return Z!=null&&Z.constrain&&typeof Z.constrain=="function"?Z.constrain(tt,_t,Pt,bt):Ut(tt,_t,Pt,bt)},Ht;this.setRevert=function(tt){Ht=tt},this.params.revert&&(Ht=this.params.revert);var Zt=function(tt){return typeof tt=="function"?(tt._katavorioId=N(),tt._katavorioId):tt},Bt={},Jt=function(tt){for(var _t in Bt){var Pt=Bt[_t],bt=Pt[0](tt);if(Pt[1]&&(bt=!bt),!bt)return!1}return!0},Qt=this.setFilter=function(tt,_t){if(tt){var Pt=Zt(tt);Bt[Pt]=[function(bt){var Et=bt.srcElement||bt.target,xt;return q(tt)?xt=u(Et,tt,i):typeof tt=="function"&&(xt=tt(bt,i)),xt},_t!==!1]}};this.addFilter=Qt,this.removeFilter=function(tt){var _t=typeof tt=="function"?tt._katavorioId:tt;delete Bt[_t]},this.clearAllFilters=function(){Bt={}},this.canDrag=this.params.canDrag||w;var $t,wt=[],Yt=[];this.addSelector=function(tt){tt.selector&&J.push(tt)},this.downListener=function(tt){if(!tt.defaultPrevented){var _t=this.rightButtonCanDrag||tt.which!==3&&tt.button!==2;if(_t&&this.isEnabled()&&this.canDrag()){var Pt=Jt(tt)&&h(tt,this.el,this.k);if(Pt){if(Z=null,pt=null,J.length>0){var bt=a(J,this.el,tt.target||tt.srcElement);if(bt!=null&&(Z=bt[0],pt=bt[1]),pt==null)return}else pt=this.el;if(rt)if(it=pt.cloneNode(!0),this.params.addClass(it,L.clonedDrag),it.setAttribute("id",null),it.style.position="absolute",this.params.parent!=null){var Et=this.params.getPosition(this.el);it.style.left=Et[0]+"px",it.style.top=Et[1]+"px",this.params.parent.appendChild(it)}else{var xt=$(pt);it.style.left=xt.left+"px",it.style.top=xt.top+"px",document.body.appendChild(it)}else it=pt;st&&_(tt),I=f(tt),it&&it.parentNode&&(at=[it.parentNode.scrollLeft,it.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),m.markSelection(this),m.markPosses(this),this.params.addClass(document.body,t.noSelect),Xt("beforeStart",{el:this.el,pos:F,e:tt,drag:this})}else this.params.consumeFilteredEvents&&_(tt)}}}.bind(this),this.moveListener=function(tt){if(I){if(!V){var _t=Xt("start",{el:this.el,pos:F,e:tt,drag:this});if(_t!==!1){if(!I)return;this.mark(!0),V=!0}else this.abort()}if(I){Yt.length=0;var Pt=f(tt),bt=Pt[0]-I[0],Et=Pt[1]-I[1],xt=this.params.ignoreZoom?1:m.getZoom();it&&it.parentNode&&(bt+=it.parentNode.scrollLeft-at[0],Et+=it.parentNode.scrollTop-at[1]),bt/=xt,Et/=xt,this.moveBy(bt,Et,tt),m.updateSelection(bt,Et,this),m.updatePosses(bt,Et,this)}}}.bind(this),this.upListener=function(tt){I&&(I=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,t.noSelect),this.unmark(tt),m.unmarkSelection(this,tt),m.unmarkPosses(this,tt),this.stop(tt),m.notifyPosseDragStop(this,tt),V=!1,Yt.length=0,rt?(it&&it.parentNode&&it.parentNode.removeChild(it),it=null):Ht&&Ht(it,this.params.getPosition(it))===!0&&(this.params.setPosition(it,F),Xt("revert",it)))}.bind(this),this.getFilters=function(){return Bt},this.abort=function(){I!=null&&this.upListener()},this.getDragElement=function(tt){return tt?pt||this.el:it||this.el};var Mt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};o.events.start&&Mt.start.push(o.events.start),o.events.beforeStart&&Mt.beforeStart.push(o.events.beforeStart),o.events.stop&&Mt.stop.push(o.events.stop),o.events.drag&&Mt.drag.push(o.events.drag),o.events.revert&&Mt.revert.push(o.events.revert),this.on=function(tt,_t){Mt[tt]&&Mt[tt].push(_t)},this.off=function(tt,_t){if(Mt[tt]){for(var Pt=[],bt=0;bt<Mt[tt].length;bt++)Mt[tt][bt]!==_t&&Pt.push(Mt[tt][bt]);Mt[tt]=Pt}};var Xt=function(tt,_t){var Pt=null;if(Z&&Z[tt])Pt=Z[tt](_t);else if(Mt[tt])for(var bt=0;bt<Mt[tt].length;bt++)try{var Et=Mt[tt][bt](_t);Et!=null&&(Pt=Et)}catch{}return Pt};this.notifyStart=function(tt){Xt("start",{el:this.el,pos:this.params.getPosition(it),e:tt,drag:this})},this.stop=function(tt,_t){if(_t||V){var Pt=[],bt=m.getSelection(),Et=this.params.getPosition(it);if(bt.length>0)for(var xt=0;xt<bt.length;xt++){var s=this.params.getPosition(bt[xt].el);Pt.push([bt[xt].el,{left:s[0],top:s[1]},bt[xt]])}else Pt.push([it,{left:Et[0],top:Et[1]},this]);Xt("stop",{el:it,pos:zt||Et,finalPos:Et,e:tt,drag:this,selection:Pt})}},this.mark=function(tt){F=this.params.getPosition(it),W=this.params.getPosition(it,!0),R=[W[0]-F[0],W[1]-F[1]],this.size=this.params.getSize(it),wt=m.getMatchingDroppables(this),d(wt,!0,!1,this),this.params.addClass(it,this.params.dragClass||t.drag);var _t;this.params.getConstrainingRectangle?_t=this.params.getConstrainingRectangle(it):_t=this.params.getSize(it.parentNode),$t={w:_t[0],h:_t[1]},Dt=0,kt=0,tt&&m.notifySelectionDragStart(this)};var zt;this.unmark=function(tt,_t){if(d(wt,!1,!0,this),dt&&lt(pt,it)?(zt=[it.offsetLeft-Dt,it.offsetTop-kt],it.parentNode.removeChild(it),it=pt):zt=null,this.params.removeClass(it,this.params.dragClass||t.drag),wt.length=0,dt=!1,!_t){Yt.length>0&&zt&&o.setPosition(pt,zt),Yt.sort(B);for(var Pt=0;Pt<Yt.length;Pt++){var bt=Yt[Pt].drop(this,tt);if(bt===!0)break}}},this.moveBy=function(tt,_t,Pt){Yt.length=0;var bt=this.toGrid([F[0]+tt,F[1]+_t]),Et=ae(bt,it,$t,this.size);if(lt(this.el,it))if(bt[0]!==Et[0]||bt[1]!==Et[1]){if(!dt){var xt=yt(pt);o.addClass(xt,L.ghostProxy),Q?(Q.appendChild(xt),ut=o.getPosition(pt.parentNode,!0),vt=o.getPosition(o.ghostProxyParent,!0),Dt=ut[0]-vt[0],kt=ut[1]-vt[1]):pt.parentNode.appendChild(xt),it=xt,dt=!0}Et=bt}else dt&&(it.parentNode.removeChild(it),it=pt,dt=!1,ut=null,vt=null,Dt=0,kt=0);var s={x:Et[0],y:Et[1],w:this.size[0],h:this.size[1]},D={x:s.x+R[0],y:s.y+R[1],w:s.w,h:s.h},y=null;this.params.setPosition(it,[Et[0]+Dt,Et[1]+kt]);for(var k=0;k<wt.length;k++){var H={x:wt[k].pagePosition[0],y:wt[k].pagePosition[1],w:wt[k].size[0],h:wt[k].size[1]};this.params.intersects(D,H)&&(gt||y==null||y===wt[k].el)&&wt[k].canDrop(this)?(y||(y=wt[k].el),Yt.push(wt[k]),wt[k].setHover(this,!0,Pt)):wt[k].isHover()&&wt[k].setHover(this,!1,Pt)}Xt("drag",{el:this.el,pos:Et,e:Pt,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?Qt(this.params.handle,!1):Qt(this.params.filter,this.params.filterExclude)},S=function(i,o,t,p){this._class=t.droppable,this.params=o||{},this.rank=o.rank||0,this._activeClass=this.params.activeClass||t.active,this._hoverClass=this.params.hoverClass||t.hover,j.apply(this,arguments);var m=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(I){this.params[I?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(I){return!0},this.isHover=function(){return m},this.setHover=function(I,F,W){(F||this.el._katavorioDragHover==null||this.el._katavorioDragHover===I.el._katavorio)&&(this.params[F?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=F?I.el._katavorio:null,m!==F&&this.params.events[F?"over":"out"]({el:this.el,e:W,drag:I,drop:this}),m=F)},this.drop=function(I,F){return this.params.events.drop({drag:I,e:F,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,m=null}},N=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,t=i==="x"?o:o&3|8;return t.toString(16)})},B=function(i,o){return i.rank<o.rank?1:i.rank>o.rank?-1:0},Y=function(i){return i==null||(i=typeof i=="string"||i.constructor===String?document.getElementById(i):i,i==null)?null:(i._katavorio=i._katavorio||N(),i)};K.Katavorio=function(i){var o=[],t={};this._dragsByScope={},this._dropsByScope={};var p=1,m=function(J,Z){l(J,function(Q){for(var ut=0;ut<Q.scopes.length;ut++)Z[Q.scopes[ut]]=Z[Q.scopes[ut]]||[],Z[Q.scopes[ut]].push(Q)})},I=function(J,Z){var Q=0;return l(J,function(ut){for(var vt=0;vt<ut.scopes.length;vt++)if(Z[ut.scopes[vt]]){var Dt=i.indexOf(Z[ut.scopes[vt]],ut);Dt!==-1&&(Z[ut.scopes[vt]].splice(Dt,1),Q++)}}),Q>0};this.getMatchingDroppables=function(J){for(var Z=[],Q={},ut=0;ut<J.scopes.length;ut++){var vt=this._dropsByScope[J.scopes[ut]];if(vt)for(var Dt=0;Dt<vt.length;Dt++)vt[Dt].canDrop(J)&&!Q[vt[Dt].uuid]&&(vt[Dt].allowLoopback||vt[Dt].el!==J.el)&&(Q[vt[Dt].uuid]=!0,Z.push(vt[Dt]))}return Z.sort(B),Z};var F=function(J){J=J||{};var Z={events:{}},Q;for(Q in i)Z[Q]=i[Q];for(Q in J)Z[Q]=J[Q];for(Q=0;Q<G.length;Q++)Z.events[G[Q]]=J[G[Q]]||P;return Z.katavorio=this,Z}.bind(this),W=function(J,Z){for(var Q=0;Q<G.length;Q++)Z[G[Q]]&&J.on(G[Q],Z[G[Q]])}.bind(this),R={},V=i.css||{},at=i.scope||U;for(var st in L)R[st]=L[st];for(var st in V)R[st]=V[st];var it=i.inputFilterSelector||x;this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(J){return it=J,this},this.draggable=function(J,Z){var Q=[];return l(J,function(ut){if(ut=Y(ut),ut!=null)if(ut._katavorioDrag==null){var vt=F(Z);ut._katavorioDrag=new g(ut,vt,R,at),m(ut._katavorioDrag,this._dragsByScope),Q.push(ut._katavorioDrag),i.addClass(ut,vt.selector?R.delegatedDraggable:R.draggable)}else W(ut._katavorioDrag,Z)}.bind(this)),Q},this.droppable=function(J,Z){var Q=[];return l(J,function(ut){if(ut=Y(ut),ut!=null){var vt=new S(ut,F(Z),R,at);ut._katavorioDrop=ut._katavorioDrop||[],ut._katavorioDrop.push(vt),m(vt,this._dropsByScope),Q.push(vt),i.addClass(ut,R.droppable)}}.bind(this)),Q},this.select=function(J){return l(J,function(){var Z=Y(this);Z&&Z._katavorioDrag&&(t[Z._katavorio]||(o.push(Z._katavorioDrag),t[Z._katavorio]=[Z,o.length-1],i.addClass(Z,R.selected)))}),this},this.deselect=function(J){return l(J,function(){var Z=Y(this);if(Z&&Z._katavorio){var Q=t[Z._katavorio];if(Q){for(var ut=[],vt=0;vt<o.length;vt++)o[vt].el!==Z&&ut.push(o[vt]);o=ut,delete t[Z._katavorio],i.removeClass(Z,R.selected)}}}),this},this.deselectAll=function(){for(var J in t){var Z=t[J];i.removeClass(Z[0],R.selected)}o.length=0,t={}},this.markSelection=function(J){r(o,function(Z){Z.mark()},J)},this.markPosses=function(J){J.posses&&l(J.posses,function(Z){J.posseRoles[Z]&&yt[Z]&&r(yt[Z].members,function(Q){Q.mark()},J)})},this.unmarkSelection=function(J,Z){r(o,function(Q){Q.unmark(Z)},J)},this.unmarkPosses=function(J,Z){J.posses&&l(J.posses,function(Q){J.posseRoles[Q]&&yt[Q]&&r(yt[Q].members,function(ut){ut.unmark(Z,!0)},J)})},this.getSelection=function(){return o.slice(0)},this.updateSelection=function(J,Z,Q){r(o,function(ut){ut.moveBy(J,Z)},Q)};var rt=function(J,Z){Z.posses&&l(Z.posses,function(Q){Z.posseRoles[Q]&&yt[Q]&&r(yt[Q].members,function(ut){J(ut)},Z)})};this.updatePosses=function(J,Z,Q){rt(function(ut){ut.moveBy(J,Z)},Q)},this.notifyPosseDragStop=function(J,Z){rt(function(Q){Q.stop(Z,!0)},J)},this.notifySelectionDragStop=function(J,Z){r(o,function(Q){Q.stop(Z,!0)},J)},this.notifySelectionDragStart=function(J,Z){r(o,function(Q){Q.notifyStart(Z)},J)},this.setZoom=function(J){p=J},this.getZoom=function(){return p};var gt=function(J,Z,Q,ut){l(J,function(vt){I(vt,Q),vt[ut](Z),m(vt,Q)})};l(["set","add","remove","toggle"],function(J){this[J+"Scope"]=function(Z,Q){gt(Z._katavorioDrag,Q,this._dragsByScope,J+"Scope"),gt(Z._katavorioDrop,Q,this._dropsByScope,J+"Scope")}.bind(this),this[J+"DragScope"]=function(Z,Q){gt(Z.constructor===g?Z:Z._katavorioDrag,Q,this._dragsByScope,J+"Scope")}.bind(this),this[J+"DropScope"]=function(Z,Q){gt(Z.constructor===S?Z:Z._katavorioDrop,Q,this._dropsByScope,J+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(J,Z){for(var Q in this._dragsByScope)r(this._dragsByScope[Q],function(ut){ut.snap(J,Z)})},this.getDragsForScope=function(J){return this._dragsByScope[J]},this.getDropsForScope=function(J){return this._dropsByScope[J]};var dt=function(J,Z,Q){if(J=Y(J),J[Z]){var ut=o.indexOf(J[Z]);ut>=0&&o.splice(ut,1),I(J[Z],Q)&&l(J[Z],function(vt){vt.destroy()}),delete J[Z]}},lt=function(J,Z,Q,ut){J=Y(J),J[Z]&&J[Z].off(Q,ut)};this.elementRemoved=function(J){J._katavorioDrag&&this.destroyDraggable(J),J._katavorioDrop&&this.destroyDroppable(J)},this.destroyDraggable=function(J,Z,Q){arguments.length===1?dt(J,"_katavorioDrag",this._dragsByScope):lt(J,"_katavorioDrag",Z,Q)},this.destroyDroppable=function(J,Z,Q){arguments.length===1?dt(J,"_katavorioDrop",this._dropsByScope):lt(J,"_katavorioDrop",Z,Q)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},o=[],t={},yt={}};var yt={},pt=function(J,Z,Q){var ut=q(Z)?Z:Z.id,vt=q(Z)?!0:Z.active!==!1,Dt=yt[ut]||function(){var kt={name:ut,members:[]};return yt[ut]=kt,kt}();return l(J,function(kt){if(kt._katavorioDrag){if(Q&&kt._katavorioDrag.posseRoles[Dt.name]!=null)return;c(Dt.members,kt._katavorioDrag),c(kt._katavorioDrag.posses,Dt.name),kt._katavorioDrag.posseRoles[Dt.name]=vt}}),Dt};this.addToPosse=function(J,Z){for(var Q=[],ut=1;ut<arguments.length;ut++)Q.push(pt(J,arguments[ut]));return Q.length===1?Q[0]:Q},this.setPosse=function(J,Z){for(var Q=[],ut=1;ut<arguments.length;ut++)Q.push(pt(J,arguments[ut],!0).name);return l(J,function(vt){if(vt._katavorioDrag){var Dt=nt(vt._katavorioDrag.posses,Q),kt=[];Array.prototype.push.apply(kt,vt._katavorioDrag.posses);for(var Ft=0;Ft<Dt.length;Ft++)this.removeFromPosse(vt,Dt[Ft])}}.bind(this)),Q.length===1?Q[0]:Q},this.removeFromPosse=function(J,Z){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var Q=1;Q<arguments.length;Q++)Z=arguments[Q],l(J,function(ut){if(ut._katavorioDrag&&ut._katavorioDrag.posses){var vt=ut._katavorioDrag;l(Z,function(Dt){X(yt[Dt].members,vt),X(vt.posses,Dt),delete vt.posseRoles[Dt]})}})},this.removeFromAllPosses=function(J){l(J,function(Z){if(Z._katavorioDrag&&Z._katavorioDrag.posses){var Q=Z._katavorioDrag;l(Q.posses,function(ut){X(yt[ut].members,Q)}),Q.posses.length=0,Q.posseRoles={}}})},this.setPosseState=function(J,Z,Q){var ut=yt[Z];ut&&l(J,function(vt){vt._katavorioDrag&&vt._katavorioDrag.posses&&(vt._katavorioDrag.posseRoles[ut.name]=Q)})}},K.Katavorio.version="1.0.0",It.Katavorio=K.Katavorio}.call(typeof window<"u"?window:jt),function(){var K=this;K.jsPlumbUtil=K.jsPlumbUtil||{};var c=K.jsPlumbUtil;It.jsPlumbUtil=c;function X(i){return Object.prototype.toString.call(i)==="[object Array]"}c.isArray=X;function nt(i){return Object.prototype.toString.call(i)==="[object Number]"}c.isNumber=nt;function q(i){return typeof i=="string"}c.isString=q;function $(i){return typeof i=="boolean"}c.isBoolean=$;function u(i){return i==null}c.isNull=u;function T(i){return i==null?!1:Object.prototype.toString.call(i)==="[object Object]"}c.isObject=T;function a(i){return Object.prototype.toString.call(i)==="[object Date]"}c.isDate=a;function n(i){return Object.prototype.toString.call(i)==="[object Function]"}c.isFunction=n;function v(i){return n(i)&&i.name!=null&&i.name.length>0}c.isNamedFunction=v;function E(i){for(var o in i)if(i.hasOwnProperty(o))return!1;return!0}c.isEmpty=E;function O(i){if(q(i))return""+i;if($(i))return!!i;if(a(i))return new Date(i.getTime());if(n(i))return i;if(X(i)){for(var o=[],t=0;t<i.length;t++)o.push(O(i[t]));return o}else if(T(i)){var p={};for(var m in i)p[m]=O(i[m]);return p}else return i}c.clone=O;function C(i,o,t,p){var m={},I,F,W={};for(t=t||[],p=p||[],F=0;F<t.length;F++)m[t[F]]=!0;for(F=0;F<p.length;F++)W[p[F]]=!0;var R=O(i);for(F in o)if(R[F]==null||W[F])R[F]=o[F];else if(q(o[F])||$(o[F]))m[F]?(I=[],I.push.apply(I,X(R[F])?R[F]:[R[F]]),I.push.apply(I,$(o[F])?o[F]:[o[F]]),R[F]=I):R[F]=o[F];else if(X(o[F]))I=[],X(R[F])&&I.push.apply(I,R[F]),I.push.apply(I,o[F]),R[F]=I;else if(T(o[F])){T(R[F])||(R[F]={});for(var V in o[F])R[F][V]=o[F][V]}return R}c.merge=C;function f(i,o,t){if(i!=null){var p=i,m=p;return o.replace(/([^\.])+/g,function(I,F,W,R){var V=I.match(/([^\[0-9]+){1}(\[)([0-9+])/),at=W+I.length>=R.length,st=function(){return m[V[1]]||function(){return m[V[1]]=[],m[V[1]]}()};if(at)V?st()[V[3]]=t:m[I]=t;else if(V){var it=st();m=it[V[3]]||function(){return it[V[3]]={},it[V[3]]}()}else m=m[I]||function(){return m[I]={},m[I]}();return""}),i}}c.replace=f;function e(i,o,t){for(var p=0;p<t.length;p++){var m=t[p][0][t[p][1]].apply(t[p][0],t[p][2]);if(m===o)return m}return i}c.functionChain=e;function M(i,o,t,p){var m=function(F){var W=F.match(/(\${.*?})/g);if(W!=null)for(var R=0;R<W.length;R++){var V=o[W[R].substring(2,W[R].length-1)]||"";V!=null&&(F=F.replace(W[R],V))}return F},I=function(F){if(F!=null){if(q(F))return m(F);if(n(F)&&!p&&(t==null||(F.name||"").indexOf(t)===0))return F(o);if(X(F)){for(var W=[],R=0;R<F.length;R++)W.push(I(F[R]));return W}else if(T(F)){var V={};for(var at in F)V[at]=I(F[at]);return V}else return F}};return I(i)}c.populate=M;function L(i,o){if(i){for(var t=0;t<i.length;t++)if(o(i[t]))return t}return-1}c.findWithFunction=L;function U(i,o){var t=L(i,o);return t>-1&&i.splice(t,1),t!==-1}c.removeWithFunction=U;function G(i,o){var t=i.indexOf(o);return t>-1&&i.splice(t,1),t!==-1}c.remove=G;function P(i,o,t){L(i,t)===-1&&i.push(o)}c.addWithFunction=P;function w(i,o,t,p){var m=i[o];return m==null&&(m=[],i[o]=m),m[p?"unshift":"push"](t),m}c.addToList=w;function r(i,o,t){return i.indexOf(o)===-1?(t?i.unshift(o):i.push(o),!0):!1}c.suggest=r;function d(i,o,t){var p;o=X(o)?o:[o];var m=function(R){for(var V=R.__proto__;V!=null;)if(V.prototype!=null){for(var at in V.prototype)V.prototype.hasOwnProperty(at)&&!i.prototype.hasOwnProperty(at)&&(i.prototype[at]=V.prototype[at]);V=V.prototype.__proto__}else V=null};for(p=0;p<o.length;p++){for(var I in o[p].prototype)o[p].prototype.hasOwnProperty(I)&&!i.prototype.hasOwnProperty(I)&&(i.prototype[I]=o[p].prototype[I]);m(o[p])}var F=function(R,V){return function(){for(p=0;p<o.length;p++)o[p].prototype[R]&&o[p].prototype[R].apply(this,arguments);return V.apply(this,arguments)}},W=function(R){for(var V in R)i.prototype[V]=F(V,R[V])};if(arguments.length>2)for(p=2;p<arguments.length;p++)W(arguments[p]);return i}c.extend=d;for(var l=[],_=0;_<256;_++)l[_]=(_<16?"0":"")+_.toString(16);function x(){var i=Math.random()*4294967295|0,o=Math.random()*4294967295|0,t=Math.random()*4294967295|0,p=Math.random()*4294967295|0;return l[i&255]+l[i>>8&255]+l[i>>16&255]+l[i>>24&255]+"-"+l[o&255]+l[o>>8&255]+"-"+l[o>>16&15|64]+l[o>>24&255]+"-"+l[t&63|128]+l[t>>8&255]+"-"+l[t>>16&255]+l[t>>24&255]+l[p&255]+l[p>>8&255]+l[p>>16&255]+l[p>>24&255]}c.uuid=x;function h(i){if(i==null)return null;for(var o=i.replace(/^\s\s*/,""),t=/\s/,p=o.length;t.test(o.charAt(--p)););return o.slice(0,p+1)}c.fastTrim=h;function j(i,o){i=i.length==null||typeof i=="string"?[i]:i;for(var t=0;t<i.length;t++)o(i[t])}c.each=j;function b(i,o){for(var t=[],p=0;p<i.length;p++)t.push(o(i[p]));return t}c.map=b;function A(i,o,t){t=t||"parent";var p=function(R){return R?o[R]:null},m=function(R){return R?p(R[t]):null},I=function(R,V){if(R==null)return V;var at=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];V.mergeStrategy==="override"&&Array.prototype.push.apply(at,["events","overlays"]);var st=C(R,V,[],at);return I(m(R),st)},F=function(R){if(R==null)return{};if(typeof R=="string")return p(R);if(R.length){for(var V=!1,at=0,st=void 0;!V&&at<R.length;)st=F(R[at]),st?V=!0:at++;return st}},W=F(i);return W?I(m(W),W):{}}c.mergeWithParents=A,c.logEnabled=!0;function g(){if(c.logEnabled&&typeof console<"u")try{var i=arguments[arguments.length-1];console.log(i)}catch{}}c.log=g;function S(i,o,t){return function(){var p=null;try{o!=null&&(p=o.apply(this,arguments))}catch(m){g("jsPlumb function failed : "+m)}if(i!=null&&(t==null||p!==t))try{p=i.apply(this,arguments)}catch(m){g("wrapped function failed : "+m)}return p}}c.wrap=S;var N=function(){function i(){var o=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,p,m){var I=function(W){w(o._listeners,W,p,m),p.__jsPlumb=p.__jsPlumb||{},p.__jsPlumb[x()]=W};if(typeof t=="string")I(t);else if(t.length!=null)for(var F=0;F<t.length;F++)I(t[F]);return o},this.fire=function(t,p,m){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var I=this._listeners[t].length,F=0,W=!1,R=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,p,m))for(;!W&&F<I&&R!==!1;){if(this.eventsToDieOn[t])this._listeners[t][F].apply(this,[p,m]);else try{R=this._listeners[t][F].apply(this,[p,m])}catch(V){g("jsPlumb: fire failed for event "+t+" : "+V)}F++,(this._listeners==null||this._listeners[t]==null)&&(W=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=o.queue.pop();t&&o.fire.apply(o,t)},this.unbind=function(t,p){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var m=void 0;for(var I in t.__jsPlumb)m=t.__jsPlumb[I],G(this._listeners[m]||[],t)}}else arguments.length===2&&G(this._listeners[t]||[],p);return this},this.getListener=function(t){return o._listeners[t]},this.setSuspendEvents=function(t){o.eventsSuspended=t},this.isSuspendEvents=function(){return o.eventsSuspended},this.silently=function(t){o.setSuspendEvents(!0);try{t()}catch(p){g("Cannot execute silent function "+p)}o.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in o._listeners)o._listeners[t]=null}}return i}();c.EventGenerator=N;function B(i,o,t){var p=[i[0]-o[0],i[1]-o[1]],m=Math.cos(t/360*Math.PI*2),I=Math.sin(t/360*Math.PI*2);return[p[0]*m-p[1]*I+o[0],p[1]*m+p[0]*I+o[1],m,I]}c.rotatePoint=B;function Y(i,o){var t=B(i,[0,0],o);return[Math.round(t[0]),Math.round(t[1])]}c.rotateAnchorOrientation=Y}.call(typeof window<"u"?window:jt),function(){var K=this;K.jsPlumbUtil.matchesSelector=function(c,X,nt){nt=nt||c.parentNode;for(var q=nt.querySelectorAll(X),$=0;$<q.length;$++)if(q[$]===c)return!0;return!1},K.jsPlumbUtil.consume=function(c,X){c.stopPropagation?c.stopPropagation():c.returnValue=!1,!X&&c.preventDefault&&c.preventDefault()},K.jsPlumbUtil.sizeElement=function(c,X,nt,q,$){c&&(c.style.height=$+"px",c.height=$,c.style.width=q+"px",c.width=q,c.style.left=X+"px",c.style.top=nt+"px")}}.call(typeof window<"u"?window:jt),function(){var K={deriveAnchor:function(q,$,u,T){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[q][$]}},c=this,X=function(q,$){this.count=0,this.instance=q,this.lists={},this.options=$||{},this.instance.addList=function(u,T){return this.listManager.addList(u,T)},this.instance.removeList=function(u){this.listManager.removeList(u)},this.instance.bind("manageElement",function(u){for(var T=this.instance.getSelector(u.el,"[jtk-scrollable-list]"),a=0;a<T.length;a++)this.addList(T[a])}.bind(this)),this.instance.bind("unmanageElement",function(u){this.removeList(u.el)}),this.instance.bind("connection",function(u,T){T==null&&(this._maybeUpdateParentList(u.source),this._maybeUpdateParentList(u.target))}.bind(this))};c.jsPlumbListManager=X,X.prototype={addList:function(q,$){var u=this.instance.extend({},K);this.instance.extend(u,this.options),$=this.instance.extend(u,$||{});var T=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[T]=new nt(this.instance,q,$,T)},removeList:function(q){var $=this.lists[q._jsPlumbList];$&&($.destroy(),delete this.lists[q._jsPlumbList])},_maybeUpdateParentList:function(q){for(var $=q.parentNode,u=this.instance.getContainer();$!=null&&$!==u;){if($._jsPlumbList!=null&&this.lists[$._jsPlumbList]!=null){$._jsPlumbScrollHandler();return}$=$.parentNode}}};var nt=function(q,$,u,T){$._jsPlumbList=T;function a(O,C,f,e){return u.anchor?u.anchor:u.deriveAnchor(O,C,f,e)}function n(O,C,f,e){return u.deriveEndpoint?u.deriveEndpoint(O,C,f,e):u.endpoint?u.endpoint:f.type}function v(O){for(var C=O.parentNode,f=q.getContainer();C!=null&&C!==f;){if(q.hasClass(C,"jtk-managed")){q.recalculateOffsets(C);return}C=C.parentNode}}var E=function(O){for(var C=q.getSelector($,".jtk-managed"),f=q.getId($),e=0;e<C.length;e++){if(C[e].offsetTop<$.scrollTop)C[e]._jsPlumbProxies||(C[e]._jsPlumbProxies=C[e]._jsPlumbProxies||[],q.select({source:C[e]}).each(function(L){q.proxyConnection(L,0,$,f,function(){return n("top",0,L.endpoints[0],L)},function(){return a("top",0,L.endpoints[0],L)}),C[e]._jsPlumbProxies.push([L,0])}),q.select({target:C[e]}).each(function(L){q.proxyConnection(L,1,$,f,function(){return n("top",1,L.endpoints[1],L)},function(){return a("top",1,L.endpoints[1],L)}),C[e]._jsPlumbProxies.push([L,1])}));else if(C[e].offsetTop+C[e].offsetHeight>$.scrollTop+$.offsetHeight)C[e]._jsPlumbProxies||(C[e]._jsPlumbProxies=C[e]._jsPlumbProxies||[],q.select({source:C[e]}).each(function(L){q.proxyConnection(L,0,$,f,function(){return n("bottom",0,L.endpoints[0],L)},function(){return a("bottom",0,L.endpoints[0],L)}),C[e]._jsPlumbProxies.push([L,0])}),q.select({target:C[e]}).each(function(L){q.proxyConnection(L,1,$,f,function(){return n("bottom",1,L.endpoints[1],L)},function(){return a("bottom",1,L.endpoints[1],L)}),C[e]._jsPlumbProxies.push([L,1])}));else if(C[e]._jsPlumbProxies){for(var M=0;M<C[e]._jsPlumbProxies.length;M++)q.unproxyConnection(C[e]._jsPlumbProxies[M][0],C[e]._jsPlumbProxies[M][1],f);delete C[e]._jsPlumbProxies}q.revalidate(C[e])}v($)};q.setAttribute($,"jtk-scrollable-list","true"),$._jsPlumbScrollHandler=E,q.on($,"scroll",E),E(),this.destroy=function(){q.off($,"scroll",E),delete $._jsPlumbScrollHandler;for(var O=q.getSelector($,".jtk-managed"),C=q.getId($),f=0;f<O.length;f++)if(O[f]._jsPlumbProxies){for(var e=0;e<O[f]._jsPlumbProxies.length;e++)q.unproxyConnection(O[f]._jsPlumbProxies[e][0],O[f]._jsPlumbProxies[e][1],C);delete O[f]._jsPlumbProxies}}}}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumbUtil,X=function(f){if(f._jsPlumb.paintStyle&&f._jsPlumb.hoverPaintStyle){var e={};C.extend(e,f._jsPlumb.paintStyle),C.extend(e,f._jsPlumb.hoverPaintStyle),delete f._jsPlumb.hoverPaintStyle,e.gradient&&f._jsPlumb.paintStyle.fill&&delete e.gradient,f._jsPlumb.hoverPaintStyle=e}},nt=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],q=function(f,e,M,L){var U=f.getAttachedElements();if(U)for(var G=0,P=U.length;G<P;G++)(!L||L!==U[G])&&U[G].setHover(e,!0,M)},$=function(f){return f==null?null:f.split(" ")},u=function(f,e,M){for(var L in e)f[L]=M},T=function(f,e,M){if(f.getDefaultType){var L=f.getTypeDescriptor(),U={},G=f.getDefaultType(),P=c.merge({},G);u(U,G,"__default");for(var w=0,r=f._jsPlumb.types.length;w<r;w++){var d=f._jsPlumb.types[w];if(d!=="__default"){var l=f._jsPlumb.instance.getType(d,L);if(l!=null){var _=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],x=[];l.mergeStrategy==="override"?Array.prototype.push.apply(_,["events","overlays","cssClass"]):x.push("cssClass"),P=c.merge(P,l,x,_),u(U,l,d)}}}e&&(P=c.populate(P,e,"_")),f.applyType(P,M,U),M||f.repaint()}},a=K.jsPlumbUIComponent=function(f){c.EventGenerator.apply(this,arguments);var e=this,M=arguments,L=e.idPrefix,U=L+new Date().getTime();this._jsPlumb={instance:f._jsPlumb,parameters:f.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:f.beforeDetach,beforeDrop:f.beforeDrop,overlayPlacements:[],hoverClass:f.hoverClass||f._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(x,h,j){this._jsPlumb.typeCache[j]=this._jsPlumb.typeCache[j]||{},this._jsPlumb.typeCache[j][x]=h},this.getCachedTypeItem=function(x,h){return this._jsPlumb.typeCache[h]?this._jsPlumb.typeCache[h][x]:null},this.getId=function(){return U};var G=f.overlays||[],P={};if(this.defaultOverlayKeys){for(var w=0;w<this.defaultOverlayKeys.length;w++)Array.prototype.push.apply(G,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[w]]||[]);for(w=0;w<G.length;w++){var r=C.convertToFullOverlaySpec(G[w]);P[r[1].id]=r}}var d={overlays:P,parameters:f.parameters||{},scope:f.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return d},this.appendToDefaultType=function(x){for(var h in x)d[h]=x[h]},f.events)for(var l in f.events)e.bind(l,f.events[l]);this.clone=function(){var x=Object.create(this.constructor.prototype);return this.constructor.apply(x,M),x}.bind(this),this.isDetachAllowed=function(x){var h=!0;if(this._jsPlumb.beforeDetach)try{h=this._jsPlumb.beforeDetach(x)}catch(j){c.log("jsPlumb: beforeDetach callback failed",j)}return h},this.isDropAllowed=function(x,h,j,b,A,g,S){var N=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:x,targetId:h,scope:j,connection:b,dropEndpoint:A,source:g,target:S});if(this._jsPlumb.beforeDrop)try{N=this._jsPlumb.beforeDrop({sourceId:x,targetId:h,scope:j,connection:b,dropEndpoint:A,source:g,target:S})}catch(B){c.log("jsPlumb: beforeDrop callback failed",B)}return N};var _=[];this.setListenerComponent=function(x){for(var h=0;h<_.length;h++)_[h][3]=x}},n=function(f,e){var M=f._jsPlumb.types[e],L=f._jsPlumb.instance.getType(M,f.getTypeDescriptor());L!=null&&L.cssClass&&f.canvas&&f._jsPlumb.instance.removeClass(f.canvas,L.cssClass)};c.extend(K.jsPlumbUIComponent,c.EventGenerator,{getParameter:function(f){return this._jsPlumb.parameters[f]},setParameter:function(f,e){this._jsPlumb.parameters[f]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(f){this._jsPlumb.parameters=f},getClass:function(){return C.getClass(this.canvas)},hasClass:function(f){return C.hasClass(this.canvas,f)},addClass:function(f){C.addClass(this.canvas,f)},removeClass:function(f){C.removeClass(this.canvas,f)},updateClasses:function(f,e){C.updateClasses(this.canvas,f,e)},setType:function(f,e,M){this.clearTypes(),this._jsPlumb.types=$(f)||[],T(this,e,M)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(f,e){T(this,f,e)},hasType:function(f){return this._jsPlumb.types.indexOf(f)!==-1},addType:function(f,e,M){var L=$(f),U=!1;if(L!=null){for(var G=0,P=L.length;G<P;G++)this.hasType(L[G])||(this._jsPlumb.types.push(L[G]),U=!0);U&&T(this,e,M)}},removeType:function(f,e,M){var L=$(f),U=!1,G=function(r){var d=this._jsPlumb.types.indexOf(r);return d!==-1?(n(this,d),this._jsPlumb.types.splice(d,1),!0):!1}.bind(this);if(L!=null){for(var P=0,w=L.length;P<w;P++)U=G(L[P])||U;U&&T(this,e,M)}},clearTypes:function(f,e){for(var M=this._jsPlumb.types.length,L=0;L<M;L++)n(this,0),this._jsPlumb.types.splice(0,1);T(this,f,e)},toggleType:function(f,e,M){var L=$(f);if(L!=null){for(var U=0,G=L.length;U<G;U++){var P=this._jsPlumb.types.indexOf(L[U]);P!==-1?(n(this,P),this._jsPlumb.types.splice(P,1)):this._jsPlumb.types.push(L[U])}T(this,e,M)}},applyType:function(f,e){if(this.setPaintStyle(f.paintStyle,e),this.setHoverPaintStyle(f.hoverPaintStyle,e),f.parameters)for(var M in f.parameters)this.setParameter(M,f.parameters[M]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(f,e){this._jsPlumb.paintStyle=f,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,X(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(f,e){this._jsPlumb.hoverPaintStyle=f,X(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(f){(f||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(f,e,M){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=f;var L=f?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=f?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(M=M||jsPlumbUtil.uuid(),this.repaint({timestamp:M,recalc:!1}))),this.getAttachedElements&&!e&&q(this,f,jsPlumbUtil.uuid(),this)}}});var v=0,E=function(){var f=v+1;return v++,f},O=K.jsPlumbInstance=function(f){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},f&&C.extend(this.Defaults,f),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},c.EventGenerator.apply(this);var e=this,M=E(),L=e.bind,U={},G=1,P=function(s){if(s==null)return null;if(s.nodeType===3||s.nodeType===8)return{el:s,text:!0};var D=e.getElement(s);return{el:D,id:c.isString(s)&&D==null?s:lt(D)}};this.getInstanceIndex=function(){return M},this.setZoom=function(s,D){return G=s,e.fire("zoom",G),D&&e.repaintEverything(),!0},this.getZoom=function(){return G};for(var w in this.Defaults)U[w]=this.Defaults[w];var r,d=[];this.unbindContainer=function(){if(r!=null&&d.length>0)for(var s=0;s<d.length;s++)e.off(r,d[s][0],d[s][1])},this.setContainer=function(s){this.unbindContainer(),s=this.getElement(s),this.select().each(function(ct){ct.moveParent(s)}),this.selectEndpoints().each(function(ct){ct.moveParent(s)});var D=r;r=s,d.length=0;for(var y={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},k=function(ct,ht,Ct){var mt=ht.srcElement||ht.target,St=(mt&&mt.parentNode?mt.parentNode._jsPlumb:null)||(mt?mt._jsPlumb:null)||(mt&&mt.parentNode&&mt.parentNode.parentNode?mt.parentNode.parentNode._jsPlumb:null);if(St){St.fire(ct,St,ht);var At=Ct&&y[Ct+ct]||ct;e.fire(At,St.component||St,ht)}},H=function(ct,ht,Ct){d.push([ct,Ct]),e.on(r,ct,ht,Ct)},z=function(ct){H(ct,".jtk-connector",function(ht){k(ct,ht)}),H(ct,".jtk-endpoint",function(ht){k(ct,ht,"endpoint")}),H(ct,".jtk-overlay",function(ht){k(ct,ht)})},et=0;et<nt.length;et++)z(nt[et]);for(var ft in b){var ot=b[ft].el;ot.parentNode===D&&(D.removeChild(ot),r.appendChild(ot))}},this.getContainer=function(){return r},this.bind=function(s,D){s==="ready"&&_?D():L.apply(e,[s,D])},e.importDefaults=function(s){for(var D in s)e.Defaults[D]=s[D];return s.Container&&e.setContainer(s.Container),e},e.restoreDefaults=function(){return e.Defaults=C.extend({},U),e};var l=null,_=!1,x=[],h={},j={},b={},A={},g={},S=!1,N=[],B=!1,Y=null,i=this.Defaults.Scope,o=1,t=function(){return""+o++},p=function(s,D){r?r.appendChild(s):D?this.getElement(D).appendChild(s):this.appendToRoot(s)}.bind(this),m=function(s,D,y,k){var H={c:[],e:[]};if(!B&&(s=e.getElement(s),s!=null)){var z=lt(s),et=s.querySelectorAll(".jtk-managed");y==null&&(y=jsPlumbUtil.uuid()),wt({elId:z,offset:D,recalc:!1,timestamp:y});for(var ft=0;ft<et.length;ft++)wt({elId:et[ft].getAttribute("id"),recalc:!0,timestamp:y});var ot=e.router.redraw(z,D,y,null,k);if(Array.prototype.push.apply(H.c,ot.c),Array.prototype.push.apply(H.e,ot.e),et)for(var ct=0;ct<et.length;ct++)ot=e.router.redraw(et[ct].getAttribute("id"),null,y,null,k,!0),Array.prototype.push.apply(H.c,ot.c),Array.prototype.push.apply(H.e,ot.e)}return H},I=function(s){return j[s]},F=function(s,D){for(var y=s.scope.split(/\s/),k=D.scope.split(/\s/),H=0;H<y.length;H++)for(var z=0;z<k.length;z++)if(k[z]===y[H])return!0;return!1},W=function(s,D){var y=C.extend({},s);for(var k in D)D[k]&&(y[k]=D[k]);return y},R=function(s,D){var y=C.extend({},s);if(D&&C.extend(y,D),y.source&&(y.source.endpoint?y.sourceEndpoint=y.source:y.source=e.getElement(y.source)),y.target&&(y.target.endpoint?y.targetEndpoint=y.target:y.target=e.getElement(y.target)),s.uuids&&(y.sourceEndpoint=I(s.uuids[0]),y.targetEndpoint=I(s.uuids[1])),y.sourceEndpoint&&y.sourceEndpoint.isFull()){c.log(e,"could not add connection; source endpoint is full");return}if(y.targetEndpoint&&y.targetEndpoint.isFull()){c.log(e,"could not add connection; target endpoint is full");return}if(!y.type&&y.sourceEndpoint&&(y.type=y.sourceEndpoint.connectionType),y.sourceEndpoint&&y.sourceEndpoint.connectorOverlays){y.overlays=y.overlays||[];for(var k=0,H=y.sourceEndpoint.connectorOverlays.length;k<H;k++)y.overlays.push(y.sourceEndpoint.connectorOverlays[k])}y.sourceEndpoint&&y.sourceEndpoint.scope&&(y.scope=y.sourceEndpoint.scope),!y["pointer-events"]&&y.sourceEndpoint&&y.sourceEndpoint.connectorPointerEvents&&(y["pointer-events"]=y.sourceEndpoint.connectorPointerEvents);var z=function(ft,ot,ct){var ht=W(ot,{anchor:y.anchors?y.anchors[ct]:y.anchor,endpoint:y.endpoints?y.endpoints[ct]:y.endpoint,paintStyle:y.endpointStyles?y.endpointStyles[ct]:y.endpointStyle,hoverPaintStyle:y.endpointHoverStyles?y.endpointHoverStyles[ct]:y.endpointHoverStyle});return e.addEndpoint(ft,ht)},et=function(ft,ot,ct,ht){if(y[ft]&&!y[ft].endpoint&&!y[ft+"Endpoint"]&&!y.newConnection){var Ct=lt(y[ft]),mt=ct[Ct];if(mt=mt?mt[ht]:null,mt){if(!mt.enabled)return!1;var St=C.extend({},mt.def);delete St.label;var At=mt.endpoint!=null&&mt.endpoint._jsPlumb?mt.endpoint:z(y[ft],St,ot);if(At.isFull())return!1;y[ft+"Endpoint"]=At,!y.scope&&St.scope&&(y.scope=St.scope),mt.uniqueEndpoint?mt.endpoint?At.finalEndpoint=mt.endpoint:(mt.endpoint=At,At.setDeleteOnEmpty(!1)):At.setDeleteOnEmpty(!0),ot===0&&mt.def.connectorOverlays&&(y.overlays=y.overlays||[],Array.prototype.push.apply(y.overlays,mt.def.connectorOverlays))}}};if(et("source",0,this.sourceEndpointDefinitions,y.type||"default")!==!1&&et("target",1,this.targetEndpointDefinitions,y.type||"default")!==!1)return y.sourceEndpoint&&y.targetEndpoint&&(F(y.sourceEndpoint,y.targetEndpoint)||(y=null)),y}.bind(e),V=function(s){var D=e.Defaults.ConnectionType||e.getDefaultConnectionType();s._jsPlumb=e,s.newConnection=V,s.newEndpoint=st,s.endpointsByUUID=j,s.endpointsByElement=h,s.finaliseConnection=at,s.id="con_"+t();var y=new D(s);return y.isDetachable()&&(y.endpoints[0].initDraggable("_jsPlumbSource"),y.endpoints[1].initDraggable("_jsPlumbTarget")),y},at=e.finaliseConnection=function(s,D,y,k){if(D=D||{},s.suspendedEndpoint||x.push(s),s.pending=null,s.endpoints[0].isTemporarySource=!1,k!==!1&&e.router.newConnection(s),m(s.source),!D.doNotFireConnectionEvent&&D.fireEvent!==!1){var H={connection:s,source:s.source,target:s.target,sourceId:s.sourceId,targetId:s.targetId,sourceEndpoint:s.endpoints[0],targetEndpoint:s.endpoints[1]};e.fire("connection",H,y)}},st=function(s,D){var y=e.Defaults.EndpointType||C.Endpoint,k=C.extend({},s);k._jsPlumb=e,k.newConnection=V,k.newEndpoint=st,k.endpointsByUUID=j,k.endpointsByElement=h,k.fireDetachEvent=J,k.elementId=D||lt(k.source);var H=new y(k);return H.id="ep_"+t(),$t(k.elementId,k.source),C.headless||e.getDragManager().endpointAdded(k.source,D),H},it=function(s,D,y){var k=h[s];if(k&&k.length)for(var H=0,z=k.length;H<z;H++){for(var et=0,ft=k[H].connections.length;et<ft;et++){var ot=D(k[H].connections[et]);if(ot)return}y&&y(k[H])}},rt=function(s,D,y){D=D==="block";var k=null;y&&(k=function(z){z.setVisible(D,!0,!0)});var H=P(s);it(H.id,function(z){if(D&&y){var et=z.sourceId===H.id?1:0;z.endpoints[et].isVisible()&&z.setVisible(!0)}else z.setVisible(D)},k)},gt=function(s,D){var y=null;D&&(y=function(k){var H=k.isVisible();k.setVisible(!H)}),it(s,function(k){var H=k.isVisible();k.setVisible(!H)},y)},dt=function(s){var D=A[s];return D?{o:D,s:N[s]}:wt({elId:s})},lt=function(s,D,y){if(c.isString(s))return s;if(s==null)return null;var k=e.getAttribute(s,"id");return(!k||k==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?k=D:(arguments.length===1||arguments.length===3&&!arguments[2])&&(k="jsPlumb_"+M+"_"+t()),y||e.setAttribute(s,"id",k)),k};this.setConnectionBeingDragged=function(s){S=s},this.isConnectionBeingDragged=function(){return S},this.getManagedElements=function(){return b},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(s,D,y){y=y||{};var k=C.extend({},y);C.extend(k,D),k.endpoint=k.endpoint||e.Defaults.Endpoint,k.paintStyle=k.paintStyle||e.Defaults.EndpointStyle;for(var H=[],z=c.isArray(s)||s.length!=null&&!c.isString(s)?s:[s],et=0,ft=z.length;et<ft;et++){k.source=e.getElement(z[et]),Jt(k.source);var ot=lt(k.source),ct=st(k,ot),ht=$t(ot,k.source,null,!B).info.o;c.addToList(h,ot,ct),B||ct.paint({anchorLoc:ct.anchor.compute({xy:[ht.left,ht.top],wh:N[ot],element:ct,timestamp:Y,rotation:this.getRotation(ot)}),timestamp:Y}),H.push(ct)}return H.length===1?H[0]:H},this.addEndpoints=function(s,D,y){for(var k=[],H=0,z=D.length;H<z;H++){var et=e.addEndpoint(s,D[H],y);c.isArray(et)?Array.prototype.push.apply(k,et):k.push(et)}return k},this.animate=function(s,D,y){if(!this.animationSupported)return!1;y=y||{};var k=e.getElement(s),H=lt(k),z=C.animEvents.step,et=C.animEvents.complete;y[z]=c.wrap(y[z],function(){e.revalidate(H)}),y[et]=c.wrap(y[et],function(){e.revalidate(H)}),e.doAnimate(k,D,y)},this.checkCondition=function(s,D){var y=e.getListener(s),k=!0;if(y&&y.length>0){var H=Array.prototype.slice.call(arguments,1);try{for(var z=0,et=y.length;z<et;z++)k=k&&y[z].apply(y[z],H)}catch(ft){c.log(e,"cannot check condition ["+s+"]"+ft)}}return k},this.connect=function(s,D){var y=R(s,D),k;if(y){if(y.source==null&&y.sourceEndpoint==null){c.log("Cannot establish connection - source does not exist");return}if(y.target==null&&y.targetEndpoint==null){c.log("Cannot establish connection - target does not exist");return}Jt(y.source),k=V(y),at(k,y)}return k};var yt=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],pt=function(s,D,y,k){var H,z=yt[y],et=s[z.elId];s[z.el];var ft,ot,ct=s.endpoints[y],ht={index:y,originalSourceId:y===0?et:s.sourceId,newSourceId:s.sourceId,originalTargetId:y===1?et:s.targetId,newTargetId:s.targetId,connection:s};if(D.constructor===C.Endpoint)H=D,H.addConnection(s),D=H.element;else if(ft=lt(D),ot=this[z.epDefs][ft],ft===s[z.elId])H=null;else if(ot)for(var Ct in ot){if(!ot[Ct].enabled)return;H=ot[Ct].endpoint!=null&&ot[Ct].endpoint._jsPlumb?ot[Ct].endpoint:this.addEndpoint(D,ot[Ct].def),ot[Ct].uniqueEndpoint&&(ot[Ct].endpoint=H),H.addConnection(s)}else H=s.makeEndpoint(y===0,D,ft);return H!=null&&(ct.detachFromConnection(s),s.endpoints[y]=H,s[z.el]=H.element,s[z.elId]=H.elementId,ht[y===0?"newSourceId":"newTargetId"]=H.elementId,Z(ht),k||s.repaint()),ht.element=D,ht}.bind(this);this.setSource=function(s,D,y){var k=pt(s,D,0,y);this.router.sourceOrTargetChanged(k.originalSourceId,k.newSourceId,s,k.el,0)},this.setTarget=function(s,D,y){var k=pt(s,D,1,y);this.router.sourceOrTargetChanged(k.originalTargetId,k.newTargetId,s,k.el,1)},this.deleteEndpoint=function(s,D,y){var k=typeof s=="string"?j[s]:s;return k&&e.deleteObject({endpoint:k,dontUpdateHover:D,deleteAttachedObjects:y}),e},this.deleteEveryEndpoint=function(){var s=e.setSuspendDrawing(!0);for(var D in h){var y=h[D];if(y&&y.length)for(var k=0,H=y.length;k<H;k++)e.deleteEndpoint(y[k],!0)}h={},b={},j={},A={},g={},e.router.reset();var z=e.getDragManager();return z&&z.reset(),s||e.setSuspendDrawing(!1),e};var J=function(s,D,y){var k=e.Defaults.ConnectionType||e.getDefaultConnectionType(),H=s.constructor===k,z=H?{connection:s,source:s.source,target:s.target,sourceId:s.sourceId,targetId:s.targetId,sourceEndpoint:s.endpoints[0],targetEndpoint:s.endpoints[1]}:s;D&&e.fire("connectionDetached",z,y),e.fire("internal.connectionDetached",z,y),e.router.connectionDetached(z)},Z=e.fireMoveEvent=function(s,D){e.fire("connectionMoved",s,D)};this.unregisterEndpoint=function(s){s._jsPlumb.uuid&&(j[s._jsPlumb.uuid]=null),e.router.deleteEndpoint(s);for(var D in h){var y=h[D];if(y){for(var k=[],H=0,z=y.length;H<z;H++)y[H]!==s&&k.push(y[H]);h[D]=k}h[D].length<1&&delete h[D]}};var Q="isDetachAllowed",ut="beforeDetach",vt="checkCondition";this.deleteConnection=function(s,D){return s!=null&&(D=D||{},D.force||c.functionChain(!0,!1,[[s.endpoints[0],Q,[s]],[s.endpoints[1],Q,[s]],[s,Q,[s]],[e,vt,[ut,s]]]))?(s.setHover(!1),J(s,!s.pending&&D.fireEvent!==!1,D.originalEvent),s.endpoints[0].detachFromConnection(s),s.endpoints[1].detachFromConnection(s),c.removeWithFunction(x,function(y){return s.id===y.id}),s.cleanup(),s.destroy(),!0):!1},this.deleteEveryConnection=function(s){s=s||{};var D=x.length,y=0;return e.batch(function(){for(var k=0;k<D;k++)y+=e.deleteConnection(x[0],s)?1:0}),y},this.deleteConnectionsForElement=function(s,D){D=D||{},s=e.getElement(s);var y=lt(s),k=h[y];if(k&&k.length)for(var H=0,z=k.length;H<z;H++)k[H].deleteEveryConnection(D);return e},this.deleteObject=function(s){var D={endpoints:{},connections:{},endpointCount:0,connectionCount:0},y=s.deleteAttachedObjects!==!1,k=function(ht){ht!=null&&D.connections[ht.id]==null&&(!s.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),D.connections[ht.id]=ht,D.connectionCount++)},H=function(ht){if(ht!=null&&D.endpoints[ht.id]==null&&(!s.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),D.endpoints[ht.id]=ht,D.endpointCount++,y))for(var Ct=0;Ct<ht.connections.length;Ct++){var mt=ht.connections[Ct];k(mt)}};s.connection?k(s.connection):H(s.endpoint);for(var z in D.connections){var et=D.connections[z];if(et._jsPlumb){c.removeWithFunction(x,function(ht){return et.id===ht.id}),J(et,s.fireEvent===!1?!1:!et.pending,s.originalEvent);var ft=s.deleteAttachedObjects==null?null:!s.deleteAttachedObjects;et.endpoints[0].detachFromConnection(et,null,ft),et.endpoints[1].detachFromConnection(et,null,ft),et.cleanup(!0),et.destroy(!0)}}for(var ot in D.endpoints){var ct=D.endpoints[ot];ct._jsPlumb&&(e.unregisterEndpoint(ct),ct.cleanup(!0),ct.destroy(!0))}return D};var Dt=function(s,D,y,k){for(var H=0,z=s.length;H<z;H++)s[H][D].apply(s[H],y);return k(s)},kt=function(s,D,y){for(var k=[],H=0,z=s.length;H<z;H++)k.push([s[H][D].apply(s[H],y),s[H]]);return k},Ft=function(s,D,y){return function(){return Dt(s,D,arguments,y)}},Gt=function(s,D){return function(){return kt(s,D,arguments)}},Nt=function(s,D){var y=[];if(s)if(typeof s=="string"){if(s==="*")return s;y.push(s)}else if(D)y=s;else if(s.length)for(var k=0,H=s.length;k<H;k++)y.push(P(s[k]).id);else y.push(P(s).id);return y},Ut=function(s,D,y){return s==="*"?!0:s.length>0?s.indexOf(D)!==-1:!y};this.getConnections=function(s,D){s?s.constructor===String&&(s={scope:s}):s={};for(var y=s.scope||e.getDefaultScope(),k=Nt(y,!0),H=Nt(s.source),z=Nt(s.target),et=!D&&k.length>1?{}:[],ft=function(St,At){if(!D&&k.length>1){var Ot=et[St];Ot==null&&(Ot=et[St]=[]),Ot.push(At)}else et.push(At)},ot=0,ct=x.length;ot<ct;ot++){var ht=x[ot],Ct=ht.proxies&&ht.proxies[0]?ht.proxies[0].originalEp.elementId:ht.sourceId,mt=ht.proxies&&ht.proxies[1]?ht.proxies[1].originalEp.elementId:ht.targetId;Ut(k,ht.scope)&&Ut(H,Ct)&&Ut(z,mt)&&ft(ht.scope,ht)}return et};var re=function(s,D){return function(y){for(var k=0,H=s.length;k<H;k++)y(s[k]);return D(s)}},oe=function(s){return function(D){return s[D]}},ae=function(s,D){var y={length:s.length,each:re(s,D),get:oe(s)},k=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],H=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],z,et;for(z=0,et=k.length;z<et;z++)y[k[z]]=Ft(s,k[z],D);for(z=0,et=H.length;z<et;z++)y[H[z]]=Gt(s,H[z]);return y},Ht=function(s){var D=ae(s,Ht);return C.extend(D,{setDetachable:Ft(s,"setDetachable",Ht),setReattach:Ft(s,"setReattach",Ht),setConnector:Ft(s,"setConnector",Ht),delete:function(){for(var y=0,k=s.length;y<k;y++)e.deleteConnection(s[y])},isDetachable:Gt(s,"isDetachable"),isReattach:Gt(s,"isReattach")})},Zt=function(s){var D=ae(s,Zt);return C.extend(D,{setEnabled:Ft(s,"setEnabled",Zt),setAnchor:Ft(s,"setAnchor",Zt),isEnabled:Gt(s,"isEnabled"),deleteEveryConnection:function(){for(var y=0,k=s.length;y<k;y++)s[y].deleteEveryConnection()},delete:function(){for(var y=0,k=s.length;y<k;y++)e.deleteEndpoint(s[y])}})};this.select=function(s){return s=s||{},s.scope=s.scope||"*",Ht(s.connections||e.getConnections(s,!0))},this.selectEndpoints=function(s){s=s||{},s.scope=s.scope||"*";var D=!s.element&&!s.source&&!s.target,y=D?"*":Nt(s.element),k=D?"*":Nt(s.source),H=D?"*":Nt(s.target),z=Nt(s.scope,!0),et=[];for(var ft in h){var ot=Ut(y,ft,!0),ct=Ut(k,ft,!0),ht=k!=="*",Ct=Ut(H,ft,!0),mt=H!=="*";if(ot||ct||Ct){t:for(var St=0,At=h[ft].length;St<At;St++){var Ot=h[ft][St];if(Ut(z,Ot.scope,!0)){var le=ht&&k.length>0&&!Ot.isSource,ue=mt&&H.length>0&&!Ot.isTarget;if(le||ue)continue t;et.push(Ot)}}}}return Zt(et)},this.getAllConnections=function(){return x},this.getDefaultScope=function(){return i},this.getEndpoint=I,this.getEndpoints=function(s){return h[P(s).id]||[]},this.getDefaultEndpointType=function(){return C.Endpoint},this.getDefaultConnectionType=function(){return C.Connection},this.getId=lt,this.draw=m,this.info=P,this.appendElement=p;var Bt=!1;this.isHoverSuspended=function(){return Bt},this.setHoverSuspended=function(s){Bt=s},this.hide=function(s,D){return rt(s,"none",D),e},this.idstamp=t;var Jt=function(s){if(!r&&s){var D=e.getElement(s);D.offsetParent&&e.setContainer(D.offsetParent)}},Qt=function(){e.Defaults.Container&&e.setContainer(e.Defaults.Container)},$t=e.manage=function(s,D,y,k){return b[s]?k&&(b[s].info=wt({elId:s,timestamp:Y,recalc:!0})):(b[s]={el:D,endpoints:[],connections:[],rotation:0},b[s].info=wt({elId:s,timestamp:Y}),e.addClass(D,"jtk-managed"),y||e.fire("manageElement",{id:s,info:b[s].info,el:D})),b[s]};this.unmanage=function(s){if(b[s]){var D=b[s].el;e.removeClass(D,"jtk-managed"),delete b[s],e.fire("unmanageElement",{id:s,el:D})}},this.rotate=function(s,D,y){return b[s]&&(b[s].rotation=D,b[s].el.style.transform="rotate("+D+"deg)",b[s].el.style.transformOrigin="center center",y!==!0)?this.revalidate(s):{c:[],e:[]}},this.getRotation=function(s){return b[s]&&b[s].rotation||0};var wt=function(s){var D=s.timestamp,y=s.recalc,k=s.offset,H=s.elId,z;return B&&!D&&(D=Y),!y&&D&&D===g[H]?{o:s.offset||A[H],s:N[H]}:(y||!k&&A[H]==null?(z=b[H]?b[H].el:null,z!=null&&(N[H]=e.getSize(z),A[H]=e.getOffset(z),g[H]=D)):(A[H]=k||A[H],N[H]==null&&(z=b[H].el,z!=null&&(N[H]=e.getSize(z))),g[H]=D),A[H]&&!A[H].right&&(A[H].right=A[H].left+N[H][0],A[H].bottom=A[H].top+N[H][1],A[H].width=N[H][0],A[H].height=N[H][1],A[H].centerx=A[H].left+A[H].width/2,A[H].centery=A[H].top+A[H].height/2),{o:A[H],s:N[H]})};this.updateOffset=wt,this.init=function(){_||(Qt(),e.router=new K.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,_=!0,e.fire("ready",e))}.bind(this),this.log=l,this.jsPlumbUIComponent=a,this.makeAnchor=function(){var s,D=function(et,ft){if(K.jsPlumb.Anchors[et])return new K.jsPlumb.Anchors[et](ft);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+et+"'"}};if(arguments.length===0)return null;var y=arguments[0],k=arguments[1],H=null;if(y.compute&&y.getOrientation)return y;if(typeof y=="string")H=D(arguments[0],{elementId:k,jsPlumbInstance:e});else if(c.isArray(y))if(c.isArray(y[0])||c.isString(y[0]))y.length===2&&c.isObject(y[1])?c.isString(y[0])?(s=K.jsPlumb.extend({elementId:k,jsPlumbInstance:e},y[1]),H=D(y[0],s)):(s=K.jsPlumb.extend({elementId:k,jsPlumbInstance:e,anchors:y[0]},y[1]),H=new K.jsPlumb.DynamicAnchor(s)):H=new C.DynamicAnchor({anchors:y,selector:null,elementId:k,jsPlumbInstance:e});else{var z={x:y[0],y:y[1],orientation:y.length>=4?[y[2],y[3]]:[0,0],offsets:y.length>=6?[y[4],y[5]]:[0,0],elementId:k,jsPlumbInstance:e,cssClass:y.length===7?y[6]:null};H=new K.jsPlumb.Anchor(z),H.clone=function(){return new K.jsPlumb.Anchor(z)}}return H.id||(H.id="anchor_"+t()),H},this.makeAnchors=function(s,D,y){for(var k=[],H=0,z=s.length;H<z;H++)typeof s[H]=="string"?k.push(K.jsPlumb.Anchors[s[H]]({elementId:D,jsPlumbInstance:y})):c.isArray(s[H])&&k.push(e.makeAnchor(s[H],D,y));return k},this.makeDynamicAnchor=function(s,D){return new K.jsPlumb.DynamicAnchor({anchors:s,selector:D,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Yt=function(s,D,y,k,H){for(var z=s.target||s.srcElement,et=!1,ft=k.getSelector(D,y),ot=0;ot<ft.length;ot++)if(ft[ot]===z){et=!0;break}return H?!et:et},Mt=function(s,D,y,k,H){var z=new a(D),et=D._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return s.def.enabled},isFull:function(){var ot=e.select({target:s.id}).length;return s.def.maxConnections>0&&ot>=s.def.maxConnections},element:s.el,elementId:s.id,isSource:k,isTarget:H,addClass:function(ot){e.addClass(s.el,ot)},removeClass:function(ot){e.removeClass(s.el,ot)},onDrop:function(ot){var ct=ot.endpoints[0];ct.anchor.locked=!1},isDropAllowed:function(){return z.isDropAllowed.apply(z,arguments)},isRedrop:function(ot){return ot.suspendedElement!=null&&ot.suspendedEndpoint!=null&&ot.suspendedEndpoint.element===s.el},getEndpoint:function(ot){var ct=s.def.endpoint;if(ct==null||ct._jsPlumb==null){var ht=e.deriveEndpointAndAnchorSpec(ot.getType().join(" "),!0),Ct=ht.endpoints?K.jsPlumb.extend(D,{endpoint:s.def.def.endpoint||ht.endpoints[1]}):D;ht.anchors&&(Ct=K.jsPlumb.extend(Ct,{anchor:s.def.def.anchor||ht.anchors[1]})),ct=e.addEndpoint(s.el,Ct),ct._mtNew=!0}if(D.uniqueEndpoint&&(s.def.endpoint=ct),ct.setDeleteOnEmpty(!0),ot.isDetachable()&&ct.initDraggable(),ct.anchor.positionFinder!=null){var mt=e.getUIPosition(arguments,e.getZoom()),St=e.getOffset(s.el),At=e.getSize(s.el),Ot=mt==null?[0,0]:ct.anchor.positionFinder(mt,St,At,ct.anchor.constructorParams);ct.anchor.x=Ot[0],ct.anchor.y=Ot[1]}return ct},maybeCleanup:function(ot){ot._mtNew&&ot.connections.length===0?e.deleteObject({endpoint:ot}):delete ot._mtNew}}),ft=K.jsPlumb.dragEvents.drop;return y.scope=y.scope||D.scope||e.Defaults.Scope,y[ft]=c.wrap(y[ft],et,!0),y.rank=D.rank||0,H&&(y[K.jsPlumb.dragEvents.over]=function(){return!0}),D.allowLoopback===!1&&(y.canDrop=function(ot){var ct=ot.getDragElement()._jsPlumbRelatedElement;return ct!==s.el}),e.initDroppable(s.el,y,"internal"),et};this.makeTarget=function(s,D,y){var k=K.jsPlumb.extend({_jsPlumb:this},y);K.jsPlumb.extend(k,D);for(var H=k.maxConnections||-1,z=function(ct){var ht=P(ct),Ct=ht.id,mt=K.jsPlumb.extend({},k.dropOptions||{}),St=k.connectionType||"default";this.targetEndpointDefinitions[Ct]=this.targetEndpointDefinitions[Ct]||{},Jt(Ct),ht.el._isJsPlumbGroup&&mt.rank==null&&(mt.rank=-1);var At={def:K.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:H,enabled:!0};k.createEndpoint&&(At.uniqueEndpoint=!0,At.endpoint=e.addEndpoint(ct,At.def),At.endpoint.setDeleteOnEmpty(!1)),ht.def=At,this.targetEndpointDefinitions[Ct][St]=At,Mt(ht,k,mt,k.isSource===!0,!0),ht.el._katavorioDrop[ht.el._katavorioDrop.length-1].targetDef=At}.bind(this),et=s.length&&s.constructor!==String?s:[s],ft=0,ot=et.length;ft<ot;ft++)z(et[ft]);return this},this.unmakeTarget=function(s,D){var y=P(s);return e.destroyDroppable(y.el,"internal"),D||delete this.targetEndpointDefinitions[y.id],this},this.makeSource=function(s,D,y){var k=K.jsPlumb.extend({_jsPlumb:this},y);K.jsPlumb.extend(k,D);var H=k.connectionType||"default",z=e.deriveEndpointAndAnchorSpec(H);k.endpoint=k.endpoint||z.endpoints[0],k.anchor=k.anchor||z.anchors[0];for(var et=k.maxConnections||-1,ft=k.onMaxConnections,ot=function(mt){var St=mt.id,At=this.getElement(mt.el);this.sourceEndpointDefinitions[St]=this.sourceEndpointDefinitions[St]||{},Jt(St);var Ot={def:K.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:et,enabled:!0};k.createEndpoint&&(Ot.uniqueEndpoint=!0,Ot.endpoint=e.addEndpoint(s,Ot.def),Ot.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[St][H]=Ot,mt.def=Ot;var le=K.jsPlumb.dragEvents.stop,ue=K.jsPlumb.dragEvents.drag,Vt=K.jsPlumb.extend({},k.dragOptions||{}),ge=Vt.drag,pe=Vt.stop,Tt=null,he=!1;Vt.scope=Vt.scope||k.scope,Vt[ue]=c.wrap(Vt[ue],function(){ge&&ge.apply(this,arguments),he=!1}),Vt[le]=c.wrap(Vt[le],function(){if(pe&&pe.apply(this,arguments),this.currentlyDragging=!1,Tt._jsPlumb!=null){var Rt=k.anchor||this.Defaults.Anchor,Lt=Tt.anchor,ce=Tt.connections[0],qt=this.makeAnchor(Rt,St,this),te=Tt.element;if(qt.positionFinder!=null){var Wt=e.getOffset(te),Kt=this.getSize(te),fe={left:Wt.left+Lt.x*Kt[0],top:Wt.top+Lt.y*Kt[1]},ee=qt.positionFinder(fe,Wt,Kt,qt.constructorParams);qt.x=ee[0],qt.y=ee[1]}Tt.setAnchor(qt,!0),Tt.repaint(),this.repaint(Tt.elementId),ce!=null&&this.repaint(ce.targetId)}}.bind(this));var ve=function(Rt){if(!(Rt.which===3||Rt.button===2)){St=this.getId(this.getElement(mt.el));var Lt=this.sourceEndpointDefinitions[St][H];if(!!Lt.enabled){if(k.filter){var ce=c.isString(k.filter)?Yt(Rt,mt.el,k.filter,this,k.filterExclude):k.filter(Rt,mt.el);if(ce===!1)return}var qt=this.select({source:St}).length;if(Lt.maxConnections>=0&&qt>=Lt.maxConnections)return ft&&ft({element:mt.el,maxConnections:et},Rt),!1;var te=K.jsPlumb.getPositionOnElement(Rt,At,G),Wt={};K.jsPlumb.extend(Wt,Lt.def),Wt.isTemporarySource=!0,Wt.anchor=[te[0],te[1],0,0],Wt.dragOptions=Vt,Lt.def.scope&&(Wt.scope=Lt.def.scope),Tt=this.addEndpoint(St,Wt),he=!0,Tt.setDeleteOnEmpty(!0),Lt.uniqueEndpoint&&(Lt.endpoint?Tt.finalEndpoint=Lt.endpoint:(Lt.endpoint=Tt,Tt.setDeleteOnEmpty(!1)));var Kt=function(){e.off(Tt.canvas,"mouseup",Kt),e.off(mt.el,"mouseup",Kt),he&&(he=!1,e.deleteEndpoint(Tt))};e.on(Tt.canvas,"mouseup",Kt),e.on(mt.el,"mouseup",Kt);var fe={};if(Lt.def.extract)for(var ee in Lt.def.extract){var me=(Rt.srcElement||Rt.target).getAttribute(ee);me&&(fe[Lt.def.extract[ee]]=me)}e.trigger(Tt.canvas,"mousedown",Rt,fe),c.consume(Rt)}}}.bind(this);this.on(mt.el,"mousedown",ve),Ot.trigger=ve,k.filter&&(c.isString(k.filter)||c.isFunction(k.filter))&&e.setDragFilter(mt.el,k.filter);var Pe=K.jsPlumb.extend({},k.dropOptions||{});Mt(mt,k,Pe,!0,k.isTarget===!0)}.bind(this),ct=s.length&&s.constructor!==String?s:[s],ht=0,Ct=ct.length;ht<Ct;ht++)ot(P(ct[ht]));return this},this.unmakeSource=function(s,D,y){var k=P(s);e.destroyDroppable(k.el,"internal");var H=this.sourceEndpointDefinitions[k.id];if(H){for(var z in H)if(D==null||D===z){var et=H[z].trigger;et&&e.off(k.el,"mousedown",et),y||delete this.sourceEndpointDefinitions[k.id][z]}}return this},this.unmakeEverySource=function(){for(var s in this.sourceEndpointDefinitions)e.unmakeSource(s,null,!0);return this.sourceEndpointDefinitions={},this};var Xt=function(s,D,y){D=c.isArray(D)?D:[D];var k=lt(s);y=y||"default";for(var H=0;H<D.length;H++){var z=this[D[H]][k];if(z&&z[y])return z[y].def.scope||this.Defaults.Scope}}.bind(this),zt=function(s,D,y,k){y=c.isArray(y)?y:[y];var H=lt(s);k=k||"default";for(var z=0;z<y.length;z++){var et=this[y[z]][H];et&&et[k]&&(et[k].def.scope=D)}}.bind(this);this.getScope=function(s,D){return Xt(s,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(s){return Xt(s,"sourceEndpointDefinitions")},this.getTargetScope=function(s){return Xt(s,"targetEndpointDefinitions")},this.setScope=function(s,D,y){this.setSourceScope(s,D,y),this.setTargetScope(s,D,y)},this.setSourceScope=function(s,D,y){zt(s,D,"sourceEndpointDefinitions",y),this.setDragScope(s,D)},this.setTargetScope=function(s,D,y){zt(s,D,"targetEndpointDefinitions",y),this.setDropScope(s,D)},this.unmakeEveryTarget=function(){for(var s in this.targetEndpointDefinitions)e.unmakeTarget(s,!0);return this.targetEndpointDefinitions={},this};var tt=function(s,D,y,k,H){var z=s==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,et,ft,ot;if(H=H||"default",D.length&&!c.isString(D)){et=[];for(var ct=0,ht=D.length;ct<ht;ct++)ft=P(D[ct]),z[ft.id]&&z[ft.id][H]&&(et[ct]=z[ft.id][H].enabled,ot=k?!et[ct]:y,z[ft.id][H].enabled=ot,e[ot?"removeClass":"addClass"](ft.el,"jtk-"+s+"-disabled"))}else{ft=P(D);var Ct=ft.id;z[Ct]&&z[Ct][H]&&(et=z[Ct][H].enabled,ot=k?!et:y,z[Ct][H].enabled=ot,e[ot?"removeClass":"addClass"](ft.el,"jtk-"+s+"-disabled"))}return et}.bind(this),_t=function(s,D){if(s!=null){if(c.isString(s)||!s.length)return D.apply(this,[s]);if(s.length)return D.apply(this,[s[0]])}}.bind(this);this.toggleSourceEnabled=function(s,D){return tt("source",s,null,!0,D),this.isSourceEnabled(s,D)},this.setSourceEnabled=function(s,D,y){return tt("source",s,D,null,y)},this.isSource=function(s,D){return D=D||"default",_t(s,function(y){var k=this.sourceEndpointDefinitions[P(y).id];return k!=null&&k[D]!=null}.bind(this))},this.isSourceEnabled=function(s,D){return D=D||"default",_t(s,function(y){var k=this.sourceEndpointDefinitions[P(y).id];return k&&k[D]&&k[D].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(s,D){return tt("target",s,null,!0,D),this.isTargetEnabled(s,D)},this.isTarget=function(s,D){return D=D||"default",_t(s,function(y){var k=this.targetEndpointDefinitions[P(y).id];return k!=null&&k[D]!=null}.bind(this))},this.isTargetEnabled=function(s,D){return D=D||"default",_t(s,function(y){var k=this.targetEndpointDefinitions[P(y).id];return k&&k[D]&&k[D].enabled===!0}.bind(this))},this.setTargetEnabled=function(s,D,y){return tt("target",s,D,null,y)},this.ready=function(s){e.bind("ready",s)};var Pt=function(s,D){if(typeof s=="object"&&s.length)for(var y=0,k=s.length;y<k;y++)D(s[y]);else D(s);return e};this.repaint=function(s,D,y){return Pt(s,function(k){m(k,D,y)})},this.revalidate=function(s,D,y){var k=y?s:e.getId(s);e.updateOffset({elId:k,recalc:!0,timestamp:D});var H=e.getDragManager();return H&&H.updateOffsets(k),m(s,null,D)},this.repaintEverything=function(){var s=jsPlumbUtil.uuid(),D;for(D in h)e.updateOffset({elId:D,recalc:!0,timestamp:s});for(D in h)m(D,null,s);return this},this.removeAllEndpoints=function(s,D,y){y=y||[];var k=function(H){var z=P(H),et=h[z.id],ft,ot;if(et)for(y.push(z),ft=0,ot=et.length;ft<ot;ft++)e.deleteEndpoint(et[ft],!1);if(delete h[z.id],D&&z.el&&z.el.nodeType!==3&&z.el.nodeType!==8)for(ft=0,ot=z.el.childNodes.length;ft<ot;ft++)k(z.el.childNodes[ft])};return k(s),this};var bt=function(s,D){e.removeAllEndpoints(s.id,!0,D);for(var y=e.getDragManager(),k=function(z){y&&y.elementRemoved(z.id),e.router.elementRemoved(z.id),e.isSource(z.el)&&e.unmakeSource(z.el),e.isTarget(z.el)&&e.unmakeTarget(z.el),e.destroyDraggable(z.el),e.destroyDroppable(z.el),delete e.floatingConnections[z.id],delete b[z.id],delete A[z.id],z.el&&(e.removeElement(z.el),z.el._jsPlumb=null)},H=1;H<D.length;H++)k(D[H]);k(s)};this.remove=function(s,D){var y=P(s),k=[];return y.text&&y.el.parentNode?y.el.parentNode.removeChild(y.el):y.id&&e.batch(function(){bt(y,k)},D===!0),e},this.empty=function(s,D){var y=[],k=function(H,z){var et=P(H);if(et.text)et.el.parentNode.removeChild(et.el);else if(et.el){for(;et.el.childNodes.length>0;)k(et.el.childNodes[0]);z||bt(et,y)}};return e.batch(function(){k(s,!0)},D===!1),e},this.reset=function(s){e.silently(function(){Bt=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),s||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},x.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),r=null,d=null};var Et=function(s){s.canvas&&s.canvas.parentNode&&s.canvas.parentNode.removeChild(s.canvas),s.cleanup(),s.destroy()};this.clear=function(){e.select().each(Et),e.selectEndpoints().each(Et),h={},j={}},this.setDefaultScope=function(s){return i=s,e},this.deriveEndpointAndAnchorSpec=function(s,D){for(var y=((D?"":"default ")+s).split(/[\s]/),k=null,H=null,z=null,et=null,ft=0;ft<y.length;ft++){var ot=e.getType(y[ft],"connection");ot&&(ot.endpoints&&(k=ot.endpoints),ot.endpoint&&(H=ot.endpoint),ot.anchors&&(et=ot.anchors),ot.anchor&&(z=ot.anchor))}return{endpoints:k||[H,H],anchors:et||[z,z]}},this.setId=function(s,D,y){var k;c.isString(s)?k=s:(s=this.getElement(s),k=this.getId(s));var H=this.getConnections({source:k,scope:"*"},!0),z=this.getConnections({target:k,scope:"*"},!0);D=""+D,y?s=this.getElement(D):(s=this.getElement(k),this.setAttribute(s,"id",D)),h[D]=h[k]||[];for(var et=0,ft=h[D].length;et<ft;et++)h[D][et].setElementId(D),h[D][et].setReferenceElement(s);delete h[k],this.sourceEndpointDefinitions[D]=this.sourceEndpointDefinitions[k],delete this.sourceEndpointDefinitions[k],this.targetEndpointDefinitions[D]=this.targetEndpointDefinitions[k],delete this.targetEndpointDefinitions[k],this.router.changeId(k,D);var ot=this.getDragManager();ot&&ot.changeId(k,D),b[D]=b[k],delete b[k];var ct=function(ht,Ct,mt){for(var St=0,At=ht.length;St<At;St++)ht[St].endpoints[Ct].setElementId(D),ht[St].endpoints[Ct].setReferenceElement(s),ht[St][mt+"Id"]=D,ht[St][mt]=s};ct(H,0,"source"),ct(z,1,"target"),this.repaint(D)},this.setDebugLog=function(s){l=s},this.setSuspendDrawing=function(s,D){var y=B;return B=s,s?Y=new Date().getTime():Y=null,D&&this.repaintEverything(),y},this.isSuspendDrawing=function(){return B},this.getSuspendedAt=function(){return Y},this.batch=function(s,D){var y=this.isSuspendDrawing();y||this.setSuspendDrawing(!0);try{s()}catch(k){c.log("Function run while suspended failed",k)}y||this.setSuspendDrawing(!1,!D)},this.doWhileSuspended=this.batch,this.getCachedData=dt,this.show=function(s,D){return rt(s,"block",D),e},this.toggleVisible=gt,this.addListener=this.bind;var xt=[];this.registerFloatingConnection=function(s,D,y){xt[s.id]=D,c.addToList(h,s.id,y)},this.getFloatingConnectionFor=function(s){return xt[s]},this.listManager=new K.jsPlumbListManager(this,this.Defaults.ListStyle)};c.extend(K.jsPlumbInstance,c.EventGenerator,{setAttribute:function(f,e,M){this.setAttribute(f,e,M)},getAttribute:function(f,e){return this.getAttribute(K.jsPlumb.getElement(f),e)},convertToFullOverlaySpec:function(f){return c.isString(f)&&(f=[f,{}]),f[1].id=f[1].id||c.uuid(),f},registerConnectionType:function(f,e){if(this._connectionTypes[f]=K.jsPlumb.extend({},e),e.overlays){for(var M={},L=0;L<e.overlays.length;L++){var U=this.convertToFullOverlaySpec(e.overlays[L]);M[U[1].id]=U}this._connectionTypes[f].overlays=M}},registerConnectionTypes:function(f){for(var e in f)this.registerConnectionType(e,f[e])},registerEndpointType:function(f,e){if(this._endpointTypes[f]=K.jsPlumb.extend({},e),e.overlays){for(var M={},L=0;L<e.overlays.length;L++){var U=this.convertToFullOverlaySpec(e.overlays[L]);M[U[1].id]=U}this._endpointTypes[f].overlays=M}},registerEndpointTypes:function(f){for(var e in f)this.registerEndpointType(e,f[e])},getType:function(f,e){return e==="connection"?this._connectionTypes[f]:this._endpointTypes[f]},setIdChanged:function(f,e){this.setId(f,e,!0)},setParent:function(f,e){var M=this.getElement(f),L=this.getId(M),U=this.getElement(e),G=this.getId(U),P=this.getDragManager();M.parentNode.removeChild(M),U.appendChild(M),P&&P.setParent(M,L,U,G)},extend:function(f,e,M){var L;if(M)for(L=0;L<M.length;L++)f[M[L]]=e[M[L]];else for(L in e)f[L]=e[L];return f},floatingConnections:{},getFloatingAnchorIndex:function(f){return f.endpoints[0].isFloating()?0:f.endpoints[1].isFloating()?1:-1},proxyConnection:function(f,e,M,L,U,G){var P,w=f.endpoints[e].elementId,r=f.endpoints[e];f.proxies=f.proxies||[],f.proxies[e]?P=f.proxies[e].ep:P=this.addEndpoint(M,{endpoint:U(f,e),anchor:G(f,e),parameters:{isProxyEndpoint:!0}}),P.setDeleteOnEmpty(!0),f.proxies[e]={ep:P,originalEp:r},e===0?this.router.sourceOrTargetChanged(w,L,f,M,0):this.router.sourceOrTargetChanged(w,L,f,M,1),r.detachFromConnection(f,null,!0),P.connections=[f],f.endpoints[e]=P,r.setVisible(!1),f.setVisible(!0),this.revalidate(M)},unproxyConnection:function(f,e,M){if(!(f._jsPlumb==null||f.proxies==null||f.proxies[e]==null)){var L=f.proxies[e].originalEp.element,U=f.proxies[e].originalEp.elementId;f.endpoints[e]=f.proxies[e].originalEp,e===0?this.router.sourceOrTargetChanged(M,U,f,L,0):this.router.sourceOrTargetChanged(M,U,f,L,1),f.proxies[e].ep.detachFromConnection(f,null),f.proxies[e].originalEp.addConnection(f),f.isVisible()&&f.proxies[e].originalEp.setVisible(!0),delete f.proxies[e]}}});var C=new O;K.jsPlumb=C,C.getInstance=function(f,e){var M=new O(f);if(e)for(var L in e)M[L]=e[L];return M.init(),M},C.each=function(f,e){if(f!=null)if(typeof f=="string")e(C.getElement(f));else if(f.length!=null)for(var M=0;M<f.length;M++)e(C.getElement(f[M]));else e(f)},It.jsPlumb=C}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt="__label",q=function(u,T){var a={cssClass:T.cssClass,labelStyle:u.labelStyle,id:nt,component:u,_jsPlumb:u._jsPlumb.instance},n=c.extend(a,T);return new c.Overlays[u._jsPlumb.instance.getRenderMode()].Label(n)},$=function(u,T){var a=null;if(X.isArray(T)){var n=T[0],v=c.extend({component:u,_jsPlumb:u._jsPlumb.instance},T[1]);T.length===3&&c.extend(v,T[2]),a=new c.Overlays[u._jsPlumb.instance.getRenderMode()][n](v)}else T.constructor===String?a=new c.Overlays[u._jsPlumb.instance.getRenderMode()][T]({component:u,_jsPlumb:u._jsPlumb.instance}):a=T;return a.id=a.id||X.uuid(),u.cacheTypeItem("overlay",a,a.id),u._jsPlumb.overlays[a.id]=a,a};c.OverlayCapableJsPlumbUIComponent=function(u){K.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},u.label&&(this.getDefaultType().overlays[nt]=["Label",{label:u.label,location:u.labelLocation||this.defaultLabelLocation||.5,labelStyle:u.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:nt}]),this.setListenerComponent=function(T){if(this._jsPlumb)for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a].setListenerComponent(T)}},c.OverlayCapableJsPlumbUIComponent.applyType=function(u,T){if(T.overlays){var a={},n;for(n in T.overlays){var v=u._jsPlumb.overlays[T.overlays[n][1].id];if(v)v.updateFrom(T.overlays[n][1]),a[T.overlays[n][1].id]=!0,v.reattach(u._jsPlumb.instance,u);else{var E=u.getCachedTypeItem("overlay",T.overlays[n][1].id);E!=null?(E.reattach(u._jsPlumb.instance,u),E.setVisible(!0),E.updateFrom(T.overlays[n][1]),u._jsPlumb.overlays[E.id]=E):E=u.addOverlay(T.overlays[n],!0),a[E.id]=!0}}for(n in u._jsPlumb.overlays)a[u._jsPlumb.overlays[n].id]==null&&u.removeOverlay(u._jsPlumb.overlays[n].id,!0)}},X.extend(c.OverlayCapableJsPlumbUIComponent,K.jsPlumbUIComponent,{setHover:function(u,T){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a][u?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(u,T){var a=$(this,u);if(this.getData&&a.type==="Label"&&X.isArray(u)){var n=this.getData(),v=u[1];if(n){var E=v.labelLocationAttribute||"labelLocation",O=n?n[E]:null;O&&(a.loc=O)}}return T||this.repaint(),a},getOverlay:function(u){return this._jsPlumb.overlays[u]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(u){var T=this.getOverlay(u);T&&T.hide()},hideOverlays:function(){for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u].hide()},showOverlay:function(u){var T=this.getOverlay(u);T&&T.show()},showOverlays:function(){for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u].show()},removeAllOverlays:function(u){for(var T in this._jsPlumb.overlays)this._jsPlumb.overlays[T].cleanup&&this._jsPlumb.overlays[T].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},u||this.repaint()},removeOverlay:function(u,T){var a=this._jsPlumb.overlays[u];a&&(a.setVisible(!1),!T&&a.cleanup&&a.cleanup(),delete this._jsPlumb.overlays[u],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[u],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[u])},removeOverlays:function(){for(var u=0,T=arguments.length;u<T;u++)this.removeOverlay(arguments[u])},moveParent:function(u){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),u.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),u.appendChild(this.canvas);for(var T in this._jsPlumb.overlays)if(this._jsPlumb.overlays[T].isAppendedAtTopLevel){var a=this._jsPlumb.overlays[T].getElement();a.parentNode.removeChild(a),u.appendChild(a)}}},getLabel:function(){var u=this.getOverlay(nt);return u!=null?u.getLabel():null},getLabelOverlay:function(){return this.getOverlay(nt)},setLabel:function(u){var T=this.getOverlay(nt);if(T)u.constructor===String||u.constructor===Function?T.setLabel(u):(u.label&&T.setLabel(u.label),u.location&&T.setLocation(u.location));else{var a=u.constructor===String||u.constructor===Function?{label:u}:u;T=q(this,a),this._jsPlumb.overlays[nt]=T}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(u){for(var T in this._jsPlumb.overlays)this._jsPlumb.overlays[T].cleanup(u),this._jsPlumb.overlays[T].destroy(u);u&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(u){this[u?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(u,T){this._jsPlumb.overlayPositions[u.id]=T},getAbsoluteOverlayPosition:function(u){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[u.id]:null},_clazzManip:function(u,T,a){if(!a)for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][u+"Class"](T)},addClass:function(u,T){this._clazzManip("add",u,T)},removeClass:function(u,T){this._clazzManip("remove",u,T)}})}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt=function(a,n,v){var E=!1;return{drag:function(){if(E)return E=!1,!0;if(n.element){var O=v.getUIPosition(arguments,v.getZoom());O!=null&&v.setPosition(n.element,O),v.repaint(n.element,O),a.paint({anchorPoint:a.anchor.getCurrentLocation({element:a})})}},stopDrag:function(){E=!0}}},q=function(a,n,v,E){var O=n.createElement("div",{position:"absolute"});n.appendElement(O);var C=n.getId(O);n.setPosition(O,v),O.style.width=E[0]+"px",O.style.height=E[1]+"px",n.manage(C,O,!0),a.id=C,a.element=O},$=function(a,n,v,E,O,C,f,e){var M=new c.FloatingAnchor({reference:n,referenceCanvas:E,jsPlumbInstance:C});return f({paintStyle:a,endpoint:v,anchor:M,source:O,scope:e})},u=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],T=function(a,n){var v=0;if(n!=null){for(var E=0;E<a.connections.length;E++)if(a.connections[E].sourceId===n||a.connections[E].targetId===n){v=E;break}}return a.connections[v]};c.Endpoint=function(a){var n=a._jsPlumb,v=a.newConnection,E=a.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],c.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:a.connectionType,maxConnections:a.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:a.maxConnections,paintStyle:a.endpointStyle||a.paintStyle||a.style||this._jsPlumb.instance.Defaults.EndpointStyle||c.Defaults.EndpointStyle,hoverPaintStyle:a.endpointHoverStyle||a.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||c.Defaults.EndpointHoverStyle,connectorStyle:a.connectorStyle,connectorHoverStyle:a.connectorHoverStyle,connectorClass:a.connectorClass,connectorHoverClass:a.connectorHoverClass,connectorOverlays:a.connectorOverlays,connector:a.connector,connectorTooltip:a.connectorTooltip}),this._jsPlumb.enabled=a.enabled!==!1,this._jsPlumb.visible=!0,this.element=c.getElement(a.source),this._jsPlumb.uuid=a.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(a.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=a.elementId,this.dragProxy=a.dragProxy,this._jsPlumb.connectionCost=a.connectionCost,this._jsPlumb.connectionsDirected=a.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var O=a.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(P){O=P};var C=function(){var P=n.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var w=n.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(P),this.addClass(w),c.updateClasses(this.element,w,P)}.bind(this);this.prepareAnchor=function(P){var w=this._jsPlumb.instance.makeAnchor(P,this.elementId,n);return w.bind("anchorChanged",function(r){this.fire("anchorChanged",{endpoint:this,anchor:r}),C()}.bind(this)),w},this.setPreparedAnchor=function(P,w){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=P,C(),w||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(P,w){var r=this.prepareAnchor(P);return this.setPreparedAnchor(r,w),this};var f=function(P){if(this.connections.length>0)for(var w=0;w<this.connections.length;w++)this.connections[w].setHover(P,!1);else this.setHover(P)}.bind(this);this.bind("mouseover",function(){f(!0)}),this.bind("mouseout",function(){f(!1)}),a._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(P,w){var r=function(_,x){var h=n.getRenderMode();if(c.Endpoints[h][_])return new c.Endpoints[h][_](x);if(!n.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+_+"'"}},d={_jsPlumb:this._jsPlumb.instance,cssClass:a.cssClass,container:a.container,tooltip:a.tooltip,connectorTooltip:a.connectorTooltip,endpoint:this},l;return X.isString(P)?l=r(P,d):X.isArray(P)?(d=X.merge(P[1],d),l=r(P[0],d)):l=P.clone(),l.clone=function(){if(X.isString(P))return r(P,d);if(X.isArray(P))return d=X.merge(P[1],d),r(P[0],d)}.bind(this),l.typeId=w,l},this.setEndpoint=function(P,w){var r=this.prepareEndpoint(P);this.setPreparedEndpoint(r,!0)},this.setPreparedEndpoint=function(P,w){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=P,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},c.extend(this,a,u),this.isSource=a.isSource||!1,this.isTemporarySource=a.isTemporarySource||!1,this.isTarget=a.isTarget||!1,this.connections=a.connections||[],this.connectorPointerEvents=a["connector-pointer-events"],this.scope=a.scope||n.getDefaultScope(),this.timestamp=null,this.reattachConnections=a.reattach||n.Defaults.ReattachConnections,this.connectionsDetachable=n.Defaults.ConnectionsDetachable,(a.connectionsDetachable===!1||a.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=a.dragAllowedWhenFull!==!1,a.onMaxConnections&&this.bind("maxConnections",a.onMaxConnections),this.addConnection=function(P){this.connections.push(P),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)},this.detachFromConnection=function(P,w,r){w=w==null?this.connections.indexOf(P):w,w>=0&&(this.connections.splice(w,1),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)),!r&&O&&this.connections.length===0&&n.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:r!==!0})},this.deleteEveryConnection=function(P){for(var w=this.connections.length,r=0;r<w;r++)n.deleteConnection(this.connections[0],P)},this.detachFrom=function(P,w,r){for(var d=[],l=0;l<this.connections.length;l++)(this.connections[l].endpoints[1]===P||this.connections[l].endpoints[0]===P)&&d.push(this.connections[l]);for(var _=0,x=d.length;_<x;_++)n.deleteConnection(d[0]);return this},this.getElement=function(){return this.element},this.setElement=function(P){var w=this._jsPlumb.instance.getId(P),r=this.elementId;return X.removeWithFunction(a.endpointsByElement[this.elementId],function(d){return d.id===this.id}.bind(this)),this.element=c.getElement(P),this.elementId=n.getId(this.element),n.router.rehomeEndpoint(this,r,this.element),n.dragManager.endpointAdded(this.element),X.addToList(a.endpointsByElement,w,this),this},this.makeInPlaceCopy=function(){var P=this.anchor.getCurrentLocation({element:this}),w=this.anchor.getOrientation(this),r=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[P[0],P[1]]},getCurrentLocation:function(){return[P[0],P[1]]},getOrientation:function(){return w},getCssClass:function(){return r}};return E({dropOptions:a.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:a.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(P){P=P||{};var w=P.timestamp,r=P.recalc!==!1;if(!w||this.timestamp!==w){var d=n.updateOffset({elId:this.elementId,timestamp:w}),l=P.offset?P.offset.o:d.o;if(l!=null){var _=P.anchorPoint,x=P.connectorPaintStyle;if(_==null){var h=P.dimensions||d.s,j={xy:[l.left,l.top],wh:h,element:this,timestamp:w};if(r&&this.anchor.isDynamic&&this.connections.length>0){var b=T(this,P.elementWithPrecedence),A=b.endpoints[0]===this?1:0,g=A===0?b.sourceId:b.targetId,S=n.getCachedData(g),N=S.o,B=S.s;j.index=A===0?1:0,j.connection=b,j.txy=[N.left,N.top],j.twh=B,j.tElement=b.endpoints[A],j.tRotation=n.getRotation(g)}else this.connections.length>0&&(j.connection=this.connections[0]);j.rotation=n.getRotation(this.elementId),_=this.anchor.compute(j)}this.endpoint.compute(_,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,x||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=w;for(var Y in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(Y)){var i=this._jsPlumb.overlays[Y];i.isVisible()&&(this._jsPlumb.overlayPlacements[Y]=i.draw(this.endpoint,this._jsPlumb.paintStyleInUse),i.paint(this._jsPlumb.overlayPlacements[Y]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&c.isDragSupported(this.element)){var P={id:null,element:null},w=null,r=!1,d=null,l=nt(this,P,n),_=a.dragOptions||{},x={},h=c.dragEvents.start,j=c.dragEvents.stop,b=c.dragEvents.drag,A=c.dragEvents.beforeStart,g,S=function(Y){g=Y.e.payload||{}},N=function(Y){w=this.connectorSelector();var i=!0;this.isEnabled()||(i=!1),w==null&&!this.isSource&&!this.isTemporarySource&&(i=!1),this.isSource&&this.isFull()&&!(w!=null&&this.dragAllowedWhenFull)&&(i=!1),w!=null&&!w.isDetachable(this)&&(this.isFull()?i=!1:w=null);var o=n.checkCondition(w==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:w});if(o===!1?i=!1:typeof o=="object"?c.extend(o,g||{}):o=g||{},i===!1)return n.stopDrag&&n.stopDrag(this.canvas),l.stopDrag(),!1;for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(!1);this.addClass("endpointDrag"),n.setConnectionBeingDragged(!0),w&&!this.isFull()&&this.isSource&&(w=null),n.updateOffset({elId:this.elementId});var p=this._jsPlumb.instance.getOffset(this.canvas),m=this.canvas,I=this._jsPlumb.instance.getSize(this.canvas);q(P,n,p,I),n.setAttributes(this.canvas,{dragId:P.id,elId:this.elementId});var F=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var W=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);W.endpoints[1]&&(F=W.endpoints[1])}var R=this._jsPlumb.instance.makeAnchor("Center");R.isFloating=!0,this._jsPlumb.floatingEndpoint=$(this.getPaintStyle(),R,F,this.canvas,P.element,n,E,this.scope);var V=this._jsPlumb.floatingEndpoint.anchor;if(w==null)this.setHover(!1,!1),w=v({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:P.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:a.connectorStyle,hoverPaintStyle:a.connectorHoverStyle,connector:a.connector,overlays:a.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:a.scope,data:o}),w.pending=!0,w.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.anchor=V,n.fire("connectionDrag",w),n.router.newConnection(w);else{r=!0,w.setHover(!1);var at=w.endpoints[0].id===this.id?0:1;this.detachFromConnection(w,null,!0);var st=n.getDragScope(m);n.setAttribute(this.canvas,"originalScope",st),n.fire("connectionDrag",w),at===0?(d=[w.source,w.sourceId,m,st],n.router.sourceOrTargetChanged(w.endpoints[at].elementId,P.id,w,P.element,0)):(d=[w.target,w.targetId,m,st],n.router.sourceOrTargetChanged(w.endpoints[at].elementId,P.id,w,P.element,1)),w.suspendedEndpoint=w.endpoints[at],w.suspendedElement=w.endpoints[at].getElement(),w.suspendedElementId=w.endpoints[at].elementId,w.suspendedElementType=at===0?"source":"target",w.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=w.suspendedEndpoint,w.endpoints[at]=this._jsPlumb.floatingEndpoint,w.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass)}n.registerFloatingConnection(P,w,this._jsPlumb.floatingEndpoint),n.currentlyDragging=!0}.bind(this),B=function(){if(n.setConnectionBeingDragged(!1),w&&w.endpoints!=null){var Y=n.getDropEvent(arguments),i=n.getFloatingAnchorIndex(w);if(w.endpoints[i===0?1:0].anchor.locked=!1,w.removeClass(n.draggingClass),this._jsPlumb&&(w.deleteConnectionNow||w.endpoints[i]===this._jsPlumb.floatingEndpoint)&&r&&w.suspendedEndpoint){i===0?(w.floatingElement=w.source,w.floatingId=w.sourceId,w.floatingEndpoint=w.endpoints[0],w.floatingIndex=0,w.source=d[0],w.sourceId=d[1]):(w.floatingElement=w.target,w.floatingId=w.targetId,w.floatingEndpoint=w.endpoints[1],w.floatingIndex=1,w.target=d[0],w.targetId=d[1]);var o=this._jsPlumb.floatingEndpoint;n.setDragScope(d[2],d[3]),w.endpoints[i]=w.suspendedEndpoint,w.isReattach()||w._forceReattach||w._forceDetach||!n.deleteConnection(w,{originalEvent:Y})?(w.setHover(!1),w._forceDetach=null,w._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(w),w.suspendedEndpoint.addConnection(w),i===1?n.router.sourceOrTargetChanged(w.floatingId,w.targetId,w,w.target,i):n.router.sourceOrTargetChanged(w.floatingId,w.sourceId,w,w.source,i),n.repaint(d[1])):n.deleteObject({endpoint:o})}this.deleteAfterDragStop?n.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),n.fire("connectionDragStop",w,Y),w.pending&&n.fire("connectionAborted",w,Y),n.currentlyDragging=!1,w.suspendedElement=null,w.suspendedEndpoint=null,w=null}P&&P.element&&n.remove(P.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);_=c.extend(x,_),_.scope=this.scope||_.scope,_[A]=X.wrap(_[A],S,!1),_[h]=X.wrap(_[h],N,!1),_[b]=X.wrap(_[b],l.drag),_[j]=X.wrap(_[j],B),_.multipleDrop=!1,_.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}.bind(this),n.initDraggable(this.canvas,_,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var M=a.endpoint||this._jsPlumb.instance.Defaults.Endpoint||c.Defaults.Endpoint;this.setEndpoint(M,!0);var L=a.anchor?a.anchor:a.anchors?a.anchors:n.Defaults.Anchor||"Top";this.setAnchor(L,!0);var U=["default",a.type||""].join(" ");this.addType(U,a.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var G=function(P,w,r,d){if(c.isDropSupported(this.element)){var l=a.dropOptions||n.Defaults.DropOptions||c.Defaults.DropOptions;l=c.extend({},l),l.scope=l.scope||this.scope;var _=c.dragEvents.drop,x=c.dragEvents.over,h=c.dragEvents.out,j=this,b=n.EndpointDropHandler({getEndpoint:function(){return j},jsPlumb:n,enabled:function(){return r!=null?r.isEnabled():!0},isFull:function(){return r.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(A){j.addClass(A)},removeClass:function(A){j.removeClass(A)},isDropAllowed:function(){return j.isDropAllowed.apply(j,arguments)},reference:d,isRedrop:function(A,g){return A.suspendedEndpoint&&g.reference&&A.suspendedEndpoint.id===g.reference.id}});l[_]=X.wrap(l[_],b,!0),l[x]=X.wrap(l[x],function(){var A=c.getDragObject(arguments),g=n.getAttribute(c.getElement(A),"dragId"),S=n.getFloatingConnectionFor(g);if(S!=null){var N=n.getFloatingAnchorIndex(S),B=this.isTarget&&N!==0||S.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===S.suspendedEndpoint.id;if(B){var Y=n.checkCondition("checkDropAllowed",{sourceEndpoint:S.endpoints[N],targetEndpoint:this,connection:S});this[(Y?"add":"remove")+"Class"](n.endpointDropAllowedClass),this[(Y?"remove":"add")+"Class"](n.endpointDropForbiddenClass),S.endpoints[N].anchor.over(this.anchor,this)}}}.bind(this)),l[h]=X.wrap(l[h],function(){var A=c.getDragObject(arguments),g=A==null?null:n.getAttribute(c.getElement(A),"dragId"),S=g?n.getFloatingConnectionFor(g):null;if(S!=null){var N=n.getFloatingAnchorIndex(S),B=this.isTarget&&N!==0||S.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===S.suspendedEndpoint.id;B&&(this.removeClass(n.endpointDropAllowedClass),this.removeClass(n.endpointDropForbiddenClass),S.endpoints[N].anchor.out())}}.bind(this)),n.initDroppable(P,l,"internal",w)}}.bind(this);return this.anchor.isFloating||G(this.canvas,!(a._transient||this.anchor.isFloating),this,a.reference),this},X.extend(c.Endpoint,c.OverlayCapableJsPlumbUIComponent,{setVisible:function(a,n,v){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!n){for(var E=0;E<this.connections.length;E++)if(this.connections[E].setVisible(a),!v){var O=this===this.connections[E].endpoints[0]?1:0;this.connections[E].endpoints[O].connections.length===1&&this.connections[E].endpoints[O].setVisible(a,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(a,n){this.setPaintStyle(a.endpointStyle||a.paintStyle,n),this.setHoverPaintStyle(a.endpointHoverStyle||a.hoverPaintStyle,n),a.maxConnections!=null&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),c.extend(this,a,u),a.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),c.OverlayCapableJsPlumbUIComponent.applyType(this,a)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){var a=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");c.removeClass(this.element,a),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(a){var n=!1;if(a){for(var v=0;v<this.connections.length;v++)if(this.connections[v].endpoints[1]===a||this.connections[v].endpoints[0]===a){n=!0;break}}return n},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=c.getElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}}),K.jsPlumbInstance.prototype.EndpointDropHandler=function(a){return function(n){var v=a.jsPlumb;a.removeClass(v.endpointDropAllowedClass),a.removeClass(v.endpointDropForbiddenClass);var E=v.getDropEvent(arguments),O=v.getDragObject(arguments),C=v.getAttribute(O,"dragId");v.getAttribute(O,"elId");var f=v.getAttribute(O,"originalScope"),e=v.getFloatingConnectionFor(C);if(e!=null){var M=e.suspendedEndpoint!=null;if(!(M&&e.suspendedEndpoint._jsPlumb==null)){var L=a.getEndpoint(e);if(L!=null){if(a.isRedrop(e,a)){e._forceReattach=!0,e.setHover(!1),a.maybeCleanup&&a.maybeCleanup(L);return}var U=v.getFloatingAnchorIndex(e);if(U===0&&!a.isSource||U===1&&!a.isTarget){a.maybeCleanup&&a.maybeCleanup(L);return}a.onDrop&&a.onDrop(e),f&&v.setDragScope(O,f);var G=a.isFull(n);if(G&&L.fire("maxConnections",{endpoint:this,connection:e,maxConnections:L._jsPlumb.maxConnections},E),!G&&a.enabled()){var P=!0;U===0?(e.floatingElement=e.source,e.floatingId=e.sourceId,e.floatingEndpoint=e.endpoints[0],e.floatingIndex=0,e.source=a.element,e.sourceId=v.getId(a.element)):(e.floatingElement=e.target,e.floatingId=e.targetId,e.floatingEndpoint=e.endpoints[1],e.floatingIndex=1,e.target=a.element,e.targetId=v.getId(a.element)),M&&e.suspendedEndpoint.id!==L.id&&(!e.isDetachAllowed(e)||!e.endpoints[U].isDetachAllowed(e)||!e.suspendedEndpoint.isDetachAllowed(e)||!v.checkCondition("beforeDetach",e))&&(P=!1);var w=function(d){e.endpoints[U].detachFromConnection(e),e.suspendedEndpoint&&e.suspendedEndpoint.detachFromConnection(e),e.endpoints[U]=L,L.addConnection(e);var l=L.getParameters();for(var _ in l)e.setParameter(_,l[_]);if(!M)l.draggable&&v.initDraggable(this.element,a.dragOptions,"internal",v);else{var x=e.suspendedEndpoint.elementId;v.fireMoveEvent({index:U,originalSourceId:U===0?x:e.sourceId,newSourceId:U===0?L.elementId:e.sourceId,originalTargetId:U===1?x:e.targetId,newTargetId:U===1?L.elementId:e.targetId,originalSourceEndpoint:U===0?e.suspendedEndpoint:e.endpoints[0],newSourceEndpoint:U===0?L:e.endpoints[0],originalTargetEndpoint:U===1?e.suspendedEndpoint:e.endpoints[1],newTargetEndpoint:U===1?L:e.endpoints[1],connection:e},E)}if(U===1?v.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):v.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),e.endpoints[0].finalEndpoint){var h=e.endpoints[0];h.detachFromConnection(e),e.endpoints[0]=e.endpoints[0].finalEndpoint,e.endpoints[0].addConnection(e)}X.isObject(d)&&e.mergeData(d),v.finaliseConnection(e,null,E,!1),e.setHover(!1),v.revalidate(e.endpoints[0].element)}.bind(this),r=function(){e.suspendedEndpoint&&(e.endpoints[U]=e.suspendedEndpoint,e.setHover(!1),e._forceDetach=!0,U===0?(e.source=e.suspendedEndpoint.element,e.sourceId=e.suspendedEndpoint.elementId):(e.target=e.suspendedEndpoint.element,e.targetId=e.suspendedEndpoint.elementId),e.suspendedEndpoint.addConnection(e),U===1?v.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):v.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),v.repaint(e.sourceId),e._forceDetach=!1)};if(P=P&&a.isDropAllowed(e.sourceId,e.targetId,e.scope,e,L),P)return w(P),!0;r()}a.maybeCleanup&&a.maybeCleanup(L),v.currentlyDragging=!1}}}}}}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt=function(u,T,a,n,v){if(c.Connectors[T]=c.Connectors[T]||{},c.Connectors[T][a]==null){if(c.Connectors[a]==null){if(u.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+a+"'")}c.Connectors[T][a]=function(){c.Connectors[a].apply(this,arguments),c.ConnectorRenderers[T].apply(this,arguments)},X.extend(c.Connectors[T][a],[c.Connectors[a],c.ConnectorRenderers[T]])}return new c.Connectors[T][a](n,v)},q=function(u,T,a){return u?a.makeAnchor(u,T,a):null},$=function(u,T,a,n){T!=null&&(T._jsPlumbConnections=T._jsPlumbConnections||{},n?delete T._jsPlumbConnections[u.id]:T._jsPlumbConnections[u.id]=!0,X.isEmpty(T._jsPlumbConnections)?a.removeClass(T,a.connectedClass):a.addClass(T,a.connectedClass))};c.Connection=function(u){var T=u.newEndpoint;this.id=u.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=u.previousConnection,this.source=c.getElement(u.source),this.target=c.getElement(u.target),c.OverlayCapableJsPlumbUIComponent.apply(this,arguments),u.sourceEndpoint?(this.source=u.sourceEndpoint.getElement(),this.sourceId=u.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),u.targetEndpoint?(this.target=u.targetEndpoint.getElement(),this.targetId=u.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=u.scope,this.endpoints=[],this.endpointStyles=[];var a=this._jsPlumb.instance;a.manage(this.sourceId,this.source),a.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:u.cssClass,container:u.container,"pointer-events":u["pointer-events"],editorParams:u.editorParams,overlays:u.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(_,x,h,j,b){return h=h||this._jsPlumb.instance.getId(x),this.prepareEndpoint(a,T,this,j,_?0:1,u,x,h,b)},u.type&&(u.endpoints=u.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(u.type).endpoints);var n=this.makeEndpoint(!0,this.source,this.sourceId,u.sourceEndpoint),v=this.makeEndpoint(!1,this.target,this.targetId,u.targetEndpoint);n&&X.addToList(u.endpointsByElement,this.sourceId,n),v&&X.addToList(u.endpointsByElement,this.targetId,v),this.scope||(this.scope=this.endpoints[0].scope),u.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(u.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(u.deleteEndpointsOnEmpty));var E=a.Defaults.ConnectionsDetachable;u.detachable===!1&&(E=!1),this.endpoints[0].connectionsDetachable===!1&&(E=!1),this.endpoints[1].connectionsDetachable===!1&&(E=!1);var O=u.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||a.Defaults.ReattachConnections;this.appendToDefaultType({detachable:E,reattach:O,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||u.paintStyle||a.Defaults.PaintStyle||c.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||u.hoverPaintStyle||a.Defaults.HoverPaintStyle||c.Defaults.HoverPaintStyle});var C=a.getSuspendedAt();if(!a.isSuspendDrawing()){var f=a.getCachedData(this.sourceId),e=f.o,M=f.s,L=a.getCachedData(this.targetId),U=L.o,G=L.s,P=C||jsPlumbUtil.uuid(),w=this.endpoints[0].anchor.compute({xy:[e.left,e.top],wh:M,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[U.left,U.top],twh:G,tElement:this.endpoints[1],timestamp:P,rotation:a.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:w,timestamp:P}),w=this.endpoints[1].anchor.compute({xy:[U.left,U.top],wh:G,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[e.left,e.top],twh:M,tElement:this.endpoints[0],timestamp:P,rotation:a.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:w,timestamp:P})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(_){return this._jsPlumb.detachable===!1?!1:_!=null?_.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(_){this._jsPlumb.detachable=_===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(_){this._jsPlumb.reattach=_===!0},this._jsPlumb.cost=u.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=u.directed,u.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var r=c.extend({},this.endpoints[1].getParameters());c.extend(r,this.endpoints[0].getParameters()),c.extend(r,this.getParameters()),this.setParameters(r),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||u.connector||a.Defaults.Connector||c.Defaults.Connector,!0);var d=u.data==null||!X.isObject(u.data)?{}:u.data;this.getData=function(){return d},this.setData=function(_){d=_||{}},this.mergeData=function(_){d=c.extend(d,_)};var l=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,u.type].join(" ");/[^\s]/.test(l)&&this.addType(l,u.data,!0),this.updateConnectedClass()},X.extend(c.Connection,c.OverlayCapableJsPlumbUIComponent,{applyType:function(u,T,a){var n=null;u.connector!=null&&(n=this.getCachedTypeItem("connector",a.connector),n==null&&(n=this.prepareConnector(u.connector,a.connector),this.cacheTypeItem("connector",n,a.connector)),this.setPreparedConnector(n)),u.detachable!=null&&this.setDetachable(u.detachable),u.reattach!=null&&this.setReattach(u.reattach),u.scope&&(this.scope=u.scope),u.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,u.cssClass);var v=null;u.anchor?(v=this.getCachedTypeItem("anchors",a.anchor),v==null&&(v=[this._jsPlumb.instance.makeAnchor(u.anchor),this._jsPlumb.instance.makeAnchor(u.anchor)],this.cacheTypeItem("anchors",v,a.anchor))):u.anchors&&(v=this.getCachedTypeItem("anchors",a.anchors),v==null&&(v=[this._jsPlumb.instance.makeAnchor(u.anchors[0]),this._jsPlumb.instance.makeAnchor(u.anchors[1])],this.cacheTypeItem("anchors",v,a.anchors))),v!=null&&(this.endpoints[0].anchor=v[0],this.endpoints[1].anchor=v[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),c.OverlayCapableJsPlumbUIComponent.applyType(this,u)},addClass:function(u,T){T&&(this.endpoints[0].addClass(u),this.endpoints[1].addClass(u),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(u)),this.connector&&this.connector.addClass(u)},removeClass:function(u,T){T&&(this.endpoints[0].removeClass(u),this.endpoints[1].removeClass(u),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(u)),this.connector&&this.connector.removeClass(u)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(u){this._jsPlumb.visible=u,this.connector&&this.connector.setVisible(u),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(u){this._jsPlumb&&($(this,this.source,this._jsPlumb.instance,u),$(this,this.target,this._jsPlumb.instance,u))},setHover:function(u){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(u),K.jsPlumb[u?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),K.jsPlumb[u?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(u){this._jsPlumb.cost=u},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(u,T){var a={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},n=this._jsPlumb.instance.getRenderMode(),v;return X.isString(u)?v=nt(this._jsPlumb.instance,n,u,a,this):X.isArray(u)&&(u.length===1?v=nt(this._jsPlumb.instance,n,u[0],a,this):v=nt(this._jsPlumb.instance,n,u[0],X.merge(u[1],a),this)),T!=null&&(v.typeId=T),v},setPreparedConnector:function(u,T,a,n){if(this.connector!==u){var v,E="";if(this.connector!=null&&(v=this.connector,E=v.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=u,n&&this.cacheTypeItem("connector",u,n),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(E),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),v!=null)for(var O=this.getOverlays(),C=0;C<O.length;C++)O[C].transfer&&O[C].transfer(this.connector);a||this.setListenerComponent(this.connector),T||this.repaint()}},setConnector:function(u,T,a,n){var v=this.prepareConnector(u,n);this.setPreparedConnector(v,T,a,n)},paint:function(u){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){u=u||{};var T=u.timestamp,a=!1,n=a?this.sourceId:this.targetId,v=a?this.targetId:this.sourceId,E=a?0:1,O=a?1:0;if(T==null||T!==this._jsPlumb.lastPaintedAt){var C=this._jsPlumb.instance.updateOffset({elId:v}).o,f=this._jsPlumb.instance.updateOffset({elId:n}).o,e=this.endpoints[O],M=this.endpoints[E],L=e.anchor.getCurrentLocation({xy:[C.left,C.top],wh:[C.width,C.height],element:e,timestamp:T,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),U=M.anchor.getCurrentLocation({xy:[f.left,f.top],wh:[f.width,f.height],element:M,timestamp:T,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:L,targetPos:U,sourceOrientation:e.anchor.getOrientation(e),targetOrientation:M.anchor.getOrientation(M),sourceEndpoint:this.endpoints[O],targetEndpoint:this.endpoints[E],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:C,targetInfo:f});var G={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var P in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(P)){var w=this._jsPlumb.overlays[P];w.isVisible()&&(this._jsPlumb.overlayPlacements[P]=w.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(w)),G.minX=Math.min(G.minX,this._jsPlumb.overlayPlacements[P].minX),G.maxX=Math.max(G.maxX,this._jsPlumb.overlayPlacements[P].maxX),G.minY=Math.min(G.minY,this._jsPlumb.overlayPlacements[P].minY),G.maxY=Math.max(G.maxY,this._jsPlumb.overlayPlacements[P].maxY))}var r=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,d=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),l={xmin:Math.min(this.connector.bounds.minX-(r+d),G.minX),ymin:Math.min(this.connector.bounds.minY-(r+d),G.minY),xmax:Math.max(this.connector.bounds.maxX+(r+d),G.maxX),ymax:Math.max(this.connector.bounds.maxY+(r+d),G.maxY)};this.connector.paintExtents=l,this.connector.paint(this._jsPlumb.paintStyleInUse,null,l);for(var _ in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(_)){var x=this._jsPlumb.overlays[_];x.isVisible()&&x.paint(this._jsPlumb.overlayPlacements[_],l)}}this._jsPlumb.lastPaintedAt=T}},repaint:function(u){var T=jsPlumb.extend(u||{},{});T.elId=this.sourceId,this.paint(T)},prepareEndpoint:function(u,T,a,n,v,E,O,C,f){var e;if(n)a.endpoints[v]=n,n.addConnection(a);else{E.endpoints||(E.endpoints=[null,null]);var M=f||E.endpoints[v]||E.endpoint||u.Defaults.Endpoints[v]||c.Defaults.Endpoints[v]||u.Defaults.Endpoint||c.Defaults.Endpoint;E.endpointStyles||(E.endpointStyles=[null,null]),E.endpointHoverStyles||(E.endpointHoverStyles=[null,null]);var L=E.endpointStyles[v]||E.endpointStyle||u.Defaults.EndpointStyles[v]||c.Defaults.EndpointStyles[v]||u.Defaults.EndpointStyle||c.Defaults.EndpointStyle;L.fill==null&&E.paintStyle!=null&&(L.fill=E.paintStyle.stroke),L.outlineStroke==null&&E.paintStyle!=null&&(L.outlineStroke=E.paintStyle.outlineStroke),L.outlineWidth==null&&E.paintStyle!=null&&(L.outlineWidth=E.paintStyle.outlineWidth);var U=E.endpointHoverStyles[v]||E.endpointHoverStyle||u.Defaults.EndpointHoverStyles[v]||c.Defaults.EndpointHoverStyles[v]||u.Defaults.EndpointHoverStyle||c.Defaults.EndpointHoverStyle;E.hoverPaintStyle!=null&&(U==null&&(U={}),U.fill==null&&(U.fill=E.hoverPaintStyle.stroke));var G=E.anchors?E.anchors[v]:E.anchor?E.anchor:q(u.Defaults.Anchors[v],C,u)||q(c.Defaults.Anchors[v],C,u)||q(u.Defaults.Anchor,C,u)||q(c.Defaults.Anchor,C,u),P=E.uuids?E.uuids[v]:null;e=T({paintStyle:L,hoverPaintStyle:U,endpoint:M,connections:[a],uuid:P,anchor:G,source:O,scope:E.scope,reattach:E.reattach||u.Defaults.ReattachConnections,detachable:E.detachable||u.Defaults.ConnectionsDetachable}),n==null&&e.setDeleteOnEmpty(!0),a.endpoints[v]=e,E.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e},replaceEndpoint:function(u,T){var a=this.endpoints[u],n=a.elementId,v=this._jsPlumb.instance.getEndpoints(n),E=v.indexOf(a),O=this.makeEndpoint(u===0,a.element,n,null,T);this.endpoints[u]=O,v.splice(E,1,O),this._jsPlumb.instance.deleteObject({endpoint:a,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:a,current:O}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumbUtil,X=K.jsPlumb;X.AnchorManager=function(u){var T={},a={},n={},v={},E=this,O={},C=u.jsPlumbInstance,f={},e=function(l,_,x,h,j,b,A,g){for(var S=[],N=_[j?0:1]/(h.length+1),B=0;B<h.length;B++){var Y=(B+1)*N,i=b*_[j?1:0];A&&(Y=_[j?0:1]-Y);var o=j?Y:i,t=x.left+o,p=o/_[0],m=j?i:Y,I=x.top+m,F=m/_[1];if(g!==0){var W=jsPlumbUtil.rotatePoint([t,I],[x.centerx,x.centery],g);t=W[0],I=W[1]}S.push([t,I,p,F,h[B][1],h[B][2]])}return S},M=function(l,_){return _[0][0]-l[0][0]},L=function(l,_){var x=l[0][0]<0?-Math.PI-l[0][0]:Math.PI-l[0][0],h=_[0][0]<0?-Math.PI-_[0][0]:Math.PI-_[0][0];return x-h},U={top:L,right:M,bottom:M,left:L},G=function(l,_){return l.sort(_)},P=function(l,_){var x=C.getCachedData(l),h=x.s,j=x.o,b=function(A,g,S,N,B,Y,i){if(N.length>0)for(var o=G(N,U[A]),t=A==="right"||A==="top",p=C.getRotation(l),m=e(A,g,S,o,B,Y,t,p),I=function(at,st){a[at.id]=[st[0],st[1],st[2],st[3]],n[at.id]=i},F=0;F<m.length;F++){var W=m[F][4],R=W.endpoints[0].elementId===l,V=W.endpoints[1].elementId===l;R&&I(W.endpoints[0],m[F]),V&&I(W.endpoints[1],m[F])}};b("bottom",h,j,_.bottom,!0,1,[0,1]),b("top",h,j,_.top,!0,0,[0,-1]),b("left",h,j,_.left,!1,0,[-1,0]),b("right",h,j,_.right,!1,1,[1,0])};this.reset=function(){T={},v={},O={}},this.addFloatingConnection=function(l,_){f[l]=_},this.newConnection=function(l){var _=l.sourceId,x=l.targetId,h=l.endpoints,j=!0,b=function(A,g,S,N,B){_===x&&S.isContinuous&&(l._jsPlumb.instance.removeElement(h[1].canvas),j=!1),c.addToList(v,N,[B,g,S.constructor===X.DynamicAnchor])};b(0,h[0],h[0].anchor,x,l),j&&b(1,h[1],h[1].anchor,_,l)};var w=function(l){(function(_,x){if(_){var h=function(j){return j[4]===x};c.removeWithFunction(_.top,h),c.removeWithFunction(_.left,h),c.removeWithFunction(_.bottom,h),c.removeWithFunction(_.right,h)}})(O[l.elementId],l.id)};this.connectionDetached=function(l,_){var x=l.connection||l,h=l.sourceId,j=l.targetId,b=x.endpoints,A=function(g,S,N,B,Y){c.removeWithFunction(v[B],function(i){return i[0].id===Y.id})};A(1,b[1],b[1].anchor,h,x),A(0,b[0],b[0].anchor,j,x),x.floatingId&&(A(x.floatingIndex,x.floatingEndpoint,x.floatingEndpoint.anchor,x.floatingId,x),w(x.floatingEndpoint)),w(x.endpoints[0]),w(x.endpoints[1]),_||(E.redraw(x.sourceId),x.targetId!==x.sourceId&&E.redraw(x.targetId))},this.addEndpoint=function(l,_){c.addToList(T,_,l)},this.changeId=function(l,_){v[_]=v[l],T[_]=T[l],delete v[l],delete T[l]},this.getConnectionsFor=function(l){return v[l]||[]},this.getEndpointsFor=function(l){return T[l]||[]},this.deleteEndpoint=function(l){c.removeWithFunction(T[l.elementId],function(_){return _.id===l.id}),w(l)},this.elementRemoved=function(l){delete f[l],delete T[l],T[l]=[]};var r=function(l,_,x,h,j,b,A,g,S,N,B,Y){var i=-1,o=h.endpoints[A],t=o.id,p=[1,0][A],m=[[_,x],h,j,b,t],I=l[S],F=o._continuousAnchorEdge?l[o._continuousAnchorEdge]:null,W,R;if(F){var V=c.findWithFunction(F,function(st){return st[4]===t});if(V!==-1)for(F.splice(V,1),W=0;W<F.length;W++)R=F[W][1],c.addWithFunction(B,R,function(st){return st.id===R.id}),c.addWithFunction(Y,F[W][1].endpoints[A],function(st){return st.id===R.endpoints[A].id}),c.addWithFunction(Y,F[W][1].endpoints[p],function(st){return st.id===R.endpoints[p].id})}for(W=0;W<I.length;W++)R=I[W][1],u.idx===1&&I[W][3]===b&&i===-1&&(i=W),c.addWithFunction(B,R,function(st){return st.id===R.id}),c.addWithFunction(Y,I[W][1].endpoints[A],function(st){return st.id===R.endpoints[A].id}),c.addWithFunction(Y,I[W][1].endpoints[p],function(st){return st.id===R.endpoints[p].id});{var at=g?i!==-1?i:0:I.length;I.splice(at,0,m)}o._continuousAnchorEdge=S};this.sourceOrTargetChanged=function(l,_,x,h,j){if(j===0){if(l!==_){x.sourceId=_,x.source=h,c.removeWithFunction(v[l],function(N){return N[0].id===x.id});var b=c.findWithFunction(v[x.targetId],function(N){return N[0].id===x.id});b>-1&&(v[x.targetId][b][0]=x,v[x.targetId][b][1]=x.endpoints[0],v[x.targetId][b][2]=x.endpoints[0].anchor.constructor===X.DynamicAnchor),c.addToList(v,_,[x,x.endpoints[1],x.endpoints[1].anchor.constructor===X.DynamicAnchor]),x.endpoints[1].anchor.isContinuous&&(x.source===x.target?x._jsPlumb.instance.removeElement(x.endpoints[1].canvas):x.endpoints[1].canvas.parentNode==null&&x._jsPlumb.instance.appendElement(x.endpoints[1].canvas)),x.updateConnectedClass()}}else if(j===1){var A=x.endpoints[0].elementId;x.target=h,x.targetId=_;var g=c.findWithFunction(v[A],function(N){return N[0].id===x.id}),S=c.findWithFunction(v[l],function(N){return N[0].id===x.id});g!==-1&&(v[A][g][0]=x,v[A][g][1]=x.endpoints[1],v[A][g][2]=x.endpoints[1].anchor.constructor===X.DynamicAnchor),S>-1&&(v[l].splice(S,1),c.addToList(v,_,[x,x.endpoints[0],x.endpoints[0].anchor.constructor===X.DynamicAnchor])),x.updateConnectedClass()}},this.rehomeEndpoint=function(l,_,x){var h=T[_]||[],j=C.getId(x);if(j!==_){var b=h.indexOf(l);if(b>-1){var A=h.splice(b,1)[0];E.add(A,j)}}for(var g=0;g<l.connections.length;g++)l.connections[g].sourceId===_?E.sourceOrTargetChanged(_,l.elementId,l.connections[g],l.element,0):l.connections[g].targetId===_&&E.sourceOrTargetChanged(_,l.elementId,l.connections[g],l.element,1)},this.redraw=function(l,_,x,h,j,b){var A=[],g=[],S=[];if(!C.isSuspendDrawing()){var N=T[l]||[],B=v[l]||[];x=x||jsPlumbUtil.uuid(),h=h||{left:0,top:0},_&&(_={left:_.left+h.left,top:_.top+h.top});for(var Y=C.updateOffset({elId:l,offset:_,recalc:!1,timestamp:x}),i={},o=0;o<B.length;o++){var t=B[o][0],p=t.sourceId,m=t.targetId,I=t.endpoints[0].anchor.isContinuous,F=t.endpoints[1].anchor.isContinuous;if(I||F){var W=p+"_"+m,R=i[W],V=t.sourceId===l?1:0,at=C.getRotation(m),st=C.getRotation(p);I&&!O[p]&&(O[p]={top:[],right:[],bottom:[],left:[]}),F&&!O[m]&&(O[m]={top:[],right:[],bottom:[],left:[]}),l!==m&&C.updateOffset({elId:m,timestamp:x}),l!==p&&C.updateOffset({elId:p,timestamp:x});var it=C.getCachedData(m),rt=C.getCachedData(p);m===p&&(I||F)?(r(O[p],-Math.PI/2,0,t,!1,m,0,!1,"top",p,A,g),r(O[m],-Math.PI/2,0,t,!1,p,1,!1,"top",m,A,g)):(R||(R=this.calculateOrientation(p,m,rt.o,it.o,t.endpoints[0].anchor,t.endpoints[1].anchor,t,st,at),i[W]=R),I&&r(O[p],R.theta,0,t,!1,m,0,!1,R.a[0],p,A,g),F&&r(O[m],R.theta2,-1,t,!0,p,1,!0,R.a[1],m,A,g)),I&&c.addWithFunction(S,p,function(pt){return pt===p}),F&&c.addWithFunction(S,m,function(pt){return pt===m}),c.addWithFunction(A,t,function(pt){return pt.id===t.id}),(I&&V===0||F&&V===1)&&c.addWithFunction(g,t.endpoints[V],function(pt){return pt.id===t.endpoints[V].id})}}for(o=0;o<N.length;o++)N[o].connections.length===0&&N[o].anchor.isContinuous&&(O[l]||(O[l]={top:[],right:[],bottom:[],left:[]}),r(O[l],-Math.PI/2,0,{endpoints:[N[o],N[o]],paint:function(){}},!1,l,0,!1,N[o].anchor.getDefaultFace(),l,A,g),c.addWithFunction(S,l,function(pt){return pt===l}));for(o=0;o<S.length;o++)P(S[o],O[S[o]]);for(o=0;o<N.length;o++)N[o].paint({timestamp:x,offset:Y,dimensions:Y.s,recalc:b!==!0});for(o=0;o<g.length;o++){var gt=C.getCachedData(g[o].elementId);g[o].paint({timestamp:null,offset:gt,dimensions:gt.s})}for(o=0;o<B.length;o++){var dt=B[o][1];if(dt.anchor.constructor===X.DynamicAnchor){dt.paint({elementWithPrecedence:l,timestamp:x}),c.addWithFunction(A,B[o][0],function(pt){return pt.id===B[o][0].id});for(var lt=0;lt<dt.connections.length;lt++)dt.connections[lt]!==B[o][0]&&c.addWithFunction(A,dt.connections[lt],function(pt){return pt.id===dt.connections[lt].id})}else c.addWithFunction(A,B[o][0],function(pt){return pt.id===B[o][0].id})}var yt=f[l];for(yt&&yt.paint({timestamp:x,recalc:!1,elId:l}),o=0;o<A.length;o++)A[o].paint({elId:l,timestamp:null,recalc:!1,clearEdits:j})}return{c:A,e:g}};var d=function(l){c.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var _=l.faces||["top","right","bottom","left"],x=l.clockwise!==!1,h={},j={top:"bottom",right:"left",left:"right",bottom:"top"},b={top:"right",right:"bottom",left:"top",bottom:"left"},A={top:"left",right:"top",left:"bottom",bottom:"right"},g=x?b:A,S=x?A:b,N=l.cssClass||"",B=null,Y=null,i=["left","right"],o=["top","bottom"],t=null,p=0;p<_.length;p++)h[_[p]]=!0;this.getDefaultFace=function(){return _.length===0?"top":_[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(m){return h[m]?m:h[j[m]]?j[m]:h[g[m]]?g[m]:h[S[m]]?S[m]:m},this.isEdgeSupported=function(m){return t==null?Y==null?h[m]===!0:Y===m:t.indexOf(m)!==-1},this.setCurrentFace=function(m,I){B=m,I&&Y!=null&&(Y=B)},this.getCurrentFace=function(){return B},this.getSupportedFaces=function(){var m=[];for(var I in h)h[I]&&m.push(I);return m},this.lock=function(){Y=B},this.unlock=function(){Y=null},this.isLocked=function(){return Y!=null},this.lockCurrentAxis=function(){B!=null&&(t=B==="left"||B==="right"?i:o)},this.unlockCurrentAxis=function(){t=null},this.compute=function(m){return a[m.element.id]||[0,0]},this.getCurrentLocation=function(m){return a[m.element.id]||[0,0]},this.getOrientation=function(m){return n[m.id]||[0,0]},this.getCssClass=function(){return N}};C.continuousAnchorFactory={get:function(l){return new d(l)},clear:function(l){delete a[l]}}},X.AnchorManager.prototype.calculateOrientation=function(u,T,a,n,v,E,O,C,f){var e={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},M=["left","top","right","bottom"];if(u===T)return{orientation:e.IDENTITY,a:["top","top"]};var L=Math.atan2(n.centery-a.centery,n.centerx-a.centerx),U=Math.atan2(a.centery-n.centery,a.centerx-n.centerx),G=[],P={};(function(x,h){for(var j=0;j<x.length;j++)if(P[x[j]]={left:[h[j][0].left,h[j][0].centery],right:[h[j][0].right,h[j][0].centery],top:[h[j][0].centerx,h[j][0].top],bottom:[h[j][0].centerx,h[j][0].bottom]},h[j][1]!==0)for(var b in P[x[j]])P[x[j]][b]=jsPlumbUtil.rotatePoint(P[x[j]][b],[h[j][0].centerx,h[j][0].centery],h[j][1])})(["source","target"],[[a,C],[n,f]]);for(var w=0;w<M.length;w++)for(var r=0;r<M.length;r++)G.push({source:M[w],target:M[r],dist:Biltong.lineLength(P.source[M[w]],P.target[M[r]])});G.sort(function(x,h){return x.dist<h.dist?-1:x.dist>h.dist?1:0});for(var d=G[0].source,l=G[0].target,_=0;_<G.length&&(v.isContinuous&&v.locked?d=v.getCurrentFace():!v.isContinuous||v.isEdgeSupported(G[_].source)?d=G[_].source:d=null,E.isContinuous&&E.locked?l=E.getCurrentFace():!E.isContinuous||E.isEdgeSupported(G[_].target)?l=G[_].target:l=null,!(d!=null&&l!=null));_++);return v.isContinuous&&v.setCurrentFace(d),E.isContinuous&&E.setCurrentFace(l),{a:[d,l],theta:L,theta2:U}},X.Anchor=function(u){this.x=u.x||0,this.y=u.y||0,this.elementId=u.elementId,this.cssClass=u.cssClass||"",this.orientation=u.orientation||[0,0],this.lastReturnValue=null,this.offsets=u.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=u.relocatable!==!1,this.snapOnRelocate=u.snapOnRelocate!==!1,this.locked=!1,c.EventGenerator.apply(this),this.compute=function(T){var a=T.xy,n=T.wh,v=T.timestamp;if(v&&v===this.timestamp)return this.lastReturnValue;var E=[a[0]+this.x*n[0]+this.offsets[0],a[1]+this.y*n[1]+this.offsets[1],this.x,this.y],O=T.rotation;if(O!=null&&O!==0){var C=jsPlumbUtil.rotatePoint(E,[a[0]+n[0]/2,a[1]+n[1]/2],O);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*C[2]-this._unrotatedOrientation[1]*C[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*C[2]+this._unrotatedOrientation[0]*C[3]),this.lastReturnValue=[C[0],C[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=E;return this.timestamp=v,this.lastReturnValue},this.getCurrentLocation=function(T){return T=T||{},this.lastReturnValue==null||T.timestamp!=null&&this.timestamp!==T.timestamp?this.compute(T):this.lastReturnValue},this.setPosition=function(T,a,n,v,E){(!this.locked||E)&&(this.x=T,this.y=a,this.orientation=[n,v],this.lastReturnValue=null)}},c.extend(X.Anchor,c.EventGenerator,{equals:function(u){if(!u)return!1;var T=u.getOrientation(),a=this.getOrientation();return this.x===u.x&&this.y===u.y&&this.offsets[0]===u.offsets[0]&&this.offsets[1]===u.offsets[1]&&a[0]===T[0]&&a[1]===T[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),X.FloatingAnchor=function(u){X.Anchor.apply(this,arguments);var T=u.reference,a=u.referenceCanvas,n=X.getSize(a),v=0,E=0,O=null,C=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(f){var e=f.xy,M=[e[0]+n[0]/2,e[1]+n[1]/2];return C=M,M},this.getOrientation=function(f){if(O)return O;var e=T.getOrientation(f);return[Math.abs(e[0])*v*-1,Math.abs(e[1])*E*-1]},this.over=function(f,e){O=f.getOrientation(e)},this.out=function(){O=null},this.getCurrentLocation=function(f){return C==null?this.compute(f):C}},c.extend(X.FloatingAnchor,X.Anchor);var nt=function(u,T,a){return u.constructor===X.Anchor?u:T.makeAnchor(u,a,T)};X.DynamicAnchor=function(u){X.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=u.elementId,this.jsPlumbInstance=u.jsPlumbInstance;for(var T=0;T<u.anchors.length;T++)this.anchors[T]=nt(u.anchors[T],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var a=this.anchors.length>0?this.anchors[0]:null,n=a,v=function(O,C,f,e,M,L,U){var G=e[0]+O.x*M[0],P=e[1]+O.y*M[1],w=e[0]+M[0]/2,r=e[1]+M[1]/2;if(L!=null&&L!==0){var d=jsPlumbUtil.rotatePoint([G,P],[w,r],L);G=d[0],P=d[1]}return Math.sqrt(Math.pow(C-G,2)+Math.pow(f-P,2))+Math.sqrt(Math.pow(w-G,2)+Math.pow(r-P,2))},E=u.selector||function(O,C,f,e,M,L,U){for(var G=f[0]+e[0]/2,P=f[1]+e[1]/2,w=-1,r=1/0,d=0;d<U.length;d++){var l=v(U[d],G,P,O,C,M);l<r&&(w=d+0,r=l)}return U[w]};this.compute=function(O){var C=O.xy,f=O.wh,e=O.txy,M=O.twh,L=O.rotation,U=O.tRotation;return this.timestamp=O.timestamp,this.locked||e==null||M==null?(this.lastReturnValue=a.compute(O),this.lastReturnValue):(O.timestamp=null,a=E(C,f,e,M,L,U,this.anchors),this.x=a.x,this.y=a.y,a!==n&&this.fire("anchorChanged",a),n=a,this.lastReturnValue=a.compute(O),this.lastReturnValue)},this.getCurrentLocation=function(O){return a!=null?a.getCurrentLocation(O):null},this.getOrientation=function(O){return a!=null?a.getOrientation(O):[0,0]},this.over=function(O,C){a!=null&&a.over(O,C)},this.out=function(){a!=null&&a.out()},this.setAnchor=function(O){a=O},this.getCssClass=function(){return a&&a.getCssClass()||""},this.setAnchorCoordinates=function(O){var C=jsPlumbUtil.findWithFunction(this.anchors,function(f){return f.x===O[0]&&f.y===O[1]});return C!==-1?(this.setAnchor(this.anchors[C]),!0):!1}},c.extend(X.DynamicAnchor,X.Anchor);var q=function(u,T,a,n,v,E){X.Anchors[v]=function(O){var C=O.jsPlumbInstance.makeAnchor([u,T,a,n,0,0],O.elementId,O.jsPlumbInstance);return C.type=v,E&&E(C,O),C}};q(.5,0,0,-1,"TopCenter"),q(.5,1,0,1,"BottomCenter"),q(0,.5,-1,0,"LeftMiddle"),q(1,.5,1,0,"RightMiddle"),q(.5,0,0,-1,"Top"),q(.5,1,0,1,"Bottom"),q(0,.5,-1,0,"Left"),q(1,.5,1,0,"Right"),q(.5,.5,0,0,"Center"),q(1,0,0,-1,"TopRight"),q(1,1,0,1,"BottomRight"),q(0,0,0,-1,"TopLeft"),q(0,1,0,1,"BottomLeft"),X.Defaults.DynamicAnchors=function(u){return u.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],u.elementId,u.jsPlumbInstance)},X.Anchors.AutoDefault=function(u){var T=u.jsPlumbInstance.makeDynamicAnchor(X.Defaults.DynamicAnchors(u));return T.type="AutoDefault",T};var $=function(u,T){X.Anchors[u]=function(a){var n=a.jsPlumbInstance.makeAnchor(["Continuous",{faces:T}],a.elementId,a.jsPlumbInstance);return n.type=u,n}};X.Anchors.Continuous=function(u){return u.jsPlumbInstance.continuousAnchorFactory.get(u)},$("ContinuousLeft",["left"]),$("ContinuousTop",["top"]),$("ContinuousBottom",["bottom"]),$("ContinuousRight",["right"]),q(0,0,0,0,"Assign",function(u,T){var a=T.position||"Fixed";u.positionFinder=a.constructor===String?T.jsPlumbInstance.AnchorPositionFinders[a]:a,u.constructorParams=T}),K.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(u,T,a){return[(u.left-T.left)/a[0],(u.top-T.top)/a[1]]},Grid:function(u,T,a,n){var v=u.left-T.left,E=u.top-T.top,O=a[0]/n.grid[0],C=a[1]/n.grid[1],f=Math.floor(v/O),e=Math.floor(E/C);return[(f*O+O/2)/a[0],(e*C+C/2)/a[1]]}},X.Anchors.Perimeter=function(u){u=u||{};var T=u.anchorCount||60,a=u.shape;if(!a)throw new Error("no shape supplied to Perimeter Anchor type");var n=function(){for(var L=.5,U=Math.PI*2/T,G=0,P=[],w=0;w<T;w++){var r=L+L*Math.sin(G),d=L+L*Math.cos(G);P.push([r,d,0,0]),G+=U}return P},v=function(L){for(var U=T/L.length,G=[],P=function(r,d,l,_,x,h,j){U=T*x;for(var b=(l-r)/U,A=(_-d)/U,g=0;g<U;g++)G.push([r+b*g,d+A*g,h==null?0:h,j==null?0:j])},w=0;w<L.length;w++)P.apply(null,L[w]);return G},E=function(L){for(var U=[],G=0;G<L.length;G++)U.push([L[G][0],L[G][1],L[G][2],L[G][3],1/L.length,L[G][4],L[G][5]]);return v(U)},O=function(){return E([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},C={Circle:n,Ellipse:n,Diamond:function(){return E([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:O,Square:O,Triangle:function(){return E([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(L){for(var U=L.points,G=[],P=0,w=0;w<U.length-1;w++){var r=Math.sqrt(Math.pow(U[w][2]-U[w][0])+Math.pow(U[w][3]-U[w][1]));P+=r,G.push([U[w][0],U[w][1],U[w+1][0],U[w+1][1],r])}for(var d=0;d<G.length;d++)G[d][4]=G[d][4]/P;return v(G)}},f=function(L,U){for(var G=[],P=U/180*Math.PI,w=0;w<L.length;w++){var r=L[w][0]-.5,d=L[w][1]-.5;G.push([.5+(r*Math.cos(P)-d*Math.sin(P)),.5+(r*Math.sin(P)+d*Math.cos(P)),L[w][2],L[w][3]])}return G};if(!C[a])throw new Error("Shape ["+a+"] is unknown by Perimeter Anchor type");var e=C[a](u);u.rotation&&(e=f(e,u.rotation));var M=u.jsPlumbInstance.makeDynamicAnchor(e);return M.type="Perimeter",M}}.call(typeof window<"u"?window:jt),function(){var K=this;K.jsPlumbUtil;var c=K.jsPlumb;c.DefaultRouter=function(X){this.jsPlumbInstance=X,this.anchorManager=new c.AnchorManager({jsPlumbInstance:X}),this.sourceOrTargetChanged=function(nt,q,$,u,T){this.anchorManager.sourceOrTargetChanged(nt,q,$,u,T)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(nt,q){this.anchorManager.changeId(nt,q)},this.elementRemoved=function(nt){this.anchorManager.elementRemoved(nt)},this.newConnection=function(nt){this.anchorManager.newConnection(nt)},this.connectionDetached=function(nt,q){this.anchorManager.connectionDetached(nt,q)},this.redraw=function(nt,q,$,u,T,a){return this.anchorManager.redraw(nt,q,$,u,T,a)},this.deleteEndpoint=function(nt){this.anchorManager.deleteEndpoint(nt)},this.rehomeEndpoint=function(nt,q,$){this.anchorManager.rehomeEndpoint(nt,q,$)},this.addEndpoint=function(nt,q){this.anchorManager.addEndpoint(nt,q)}}}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt=K.Biltong;c.Segments={AbstractSegment:function(n){this.params=n,this.findClosestPointOnPath=function(v,E){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(n.x1,n.x2),minY:Math.min(n.y1,n.y2),maxX:Math.max(n.x1,n.x2),maxY:Math.max(n.y1,n.y2)}},this.lineIntersection=function(v,E,O,C){return[]},this.boxIntersection=function(v,E,O,C){var f=[];return f.push.apply(f,this.lineIntersection(v,E,v+O,E)),f.push.apply(f,this.lineIntersection(v+O,E,v+O,E+C)),f.push.apply(f,this.lineIntersection(v+O,E+C,v,E+C)),f.push.apply(f,this.lineIntersection(v,E+C,v,E)),f},this.boundingBoxIntersection=function(v){return this.boxIntersection(v.x,v.y,v.w,v.y)}},Straight:function(n){c.Segments.AbstractSegment.apply(this,arguments);var v,E,O,C,f,e,M,L=function(){v=Math.sqrt(Math.pow(f-C,2)+Math.pow(M-e,2)),E=nt.gradient({x:C,y:e},{x:f,y:M}),O=-1/E};this.type="Straight",this.getLength=function(){return v},this.getGradient=function(){return E},this.getCoordinates=function(){return{x1:C,y1:e,x2:f,y2:M}},this.setCoordinates=function(r){C=r.x1,e=r.y1,f=r.x2,M=r.y2,L()},this.setCoordinates({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}),this.getBounds=function(){return{minX:Math.min(C,f),minY:Math.min(e,M),maxX:Math.max(C,f),maxY:Math.max(e,M)}},this.pointOnPath=function(r,d){if(r===0&&!d)return{x:C,y:e};if(r===1&&!d)return{x:f,y:M};var l=d?r>0?r:v+r:r*v;return nt.pointOnLine({x:C,y:e},{x:f,y:M},l)},this.gradientAtPoint=function(r){return E},this.pointAlongPathFrom=function(r,d,l){var _=this.pointOnPath(r,l),x=d<=0?{x:C,y:e}:{x:f,y:M};return d<=0&&Math.abs(d)>1&&(d*=-1),nt.pointOnLine(_,x,d)};var U=function(r,d,l){return l>=Math.min(r,d)&&l<=Math.max(r,d)},G=function(r,d,l){return Math.abs(l-r)<Math.abs(l-d)?r:d};this.findClosestPointOnPath=function(r,d){var l={d:1/0,x:null,y:null,l:null,x1:C,x2:f,y1:e,y2:M};if(E===0)l.y=e,l.x=U(C,f,r)?r:G(C,f,r);else if(E===1/0||E===-1/0)l.x=C,l.y=U(e,M,d)?d:G(e,M,d);else{var _=e-E*C,x=d-O*r,h=(x-_)/(E-O),j=E*h+_;l.x=U(C,f,h)?h:G(C,f,h),l.y=U(e,M,j)?j:G(e,M,j)}var b=nt.lineLength([l.x,l.y],[C,e]);return l.d=nt.lineLength([r,d],[l.x,l.y]),l.l=b/v,l};var P=function(r,d,l){return l>d?d<=r&&r<=l:d>=r&&r>=l},w=P;this.lineIntersection=function(r,d,l,_){var x=Math.abs(nt.gradient({x:r,y:d},{x:l,y:_})),h=Math.abs(E),j=h===1/0?C:e-h*C,b=[],A=x===1/0?r:d-x*r;if(x!==h)if(x===1/0&&h===0)w(r,C,f)&&w(e,d,_)&&(b=[r,e]);else if(x===0&&h===1/0)w(d,e,M)&&w(C,r,l)&&(b=[C,d]);else{var g,S;x===1/0?(g=r,w(g,C,f)&&(S=h*r+j,w(S,d,_)&&(b=[g,S]))):x===0?(S=d,w(S,e,M)&&(g=(d-j)/h,w(g,r,l)&&(b=[g,S]))):(g=(A-j)/(h-x),S=h*g+j,w(g,C,f)&&w(S,e,M)&&(b=[g,S]))}return b},this.boxIntersection=function(r,d,l,_){var x=[];return x.push.apply(x,this.lineIntersection(r,d,r+l,d)),x.push.apply(x,this.lineIntersection(r+l,d,r+l,d+_)),x.push.apply(x,this.lineIntersection(r+l,d+_,r,d+_)),x.push.apply(x,this.lineIntersection(r,d+_,r,d)),x},this.boundingBoxIntersection=function(r){return this.boxIntersection(r.x,r.y,r.w,r.h)}},Arc:function(n){c.Segments.AbstractSegment.apply(this,arguments);var v=function(G,P){return nt.theta([n.cx,n.cy],[G,P])},E=function(G,P){if(G.anticlockwise){var w=G.startAngle<G.endAngle?G.startAngle+O:G.startAngle,r=Math.abs(w-G.endAngle);return w-r*P}else{var d=G.endAngle<G.startAngle?G.endAngle+O:G.endAngle,l=Math.abs(d-G.startAngle);return G.startAngle+l*P}},O=2*Math.PI;this.radius=n.r,this.anticlockwise=n.ac,this.type="Arc",n.startAngle&&n.endAngle?(this.startAngle=n.startAngle,this.endAngle=n.endAngle,this.x1=n.cx+this.radius*Math.cos(n.startAngle),this.y1=n.cy+this.radius*Math.sin(n.startAngle),this.x2=n.cx+this.radius*Math.cos(n.endAngle),this.y2=n.cy+this.radius*Math.sin(n.endAngle)):(this.startAngle=v(n.x1,n.y1),this.endAngle=v(n.x2,n.y2),this.x1=n.x1,this.y1=n.y1,this.x2=n.x2,this.y2=n.y2),this.endAngle<0&&(this.endAngle+=O),this.startAngle<0&&(this.startAngle+=O);var C=this.endAngle<this.startAngle?this.endAngle+O:this.endAngle;this.sweep=Math.abs(C-this.startAngle),this.anticlockwise&&(this.sweep=O-this.sweep);var f=2*Math.PI*this.radius,e=this.sweep/O,M=f*e;this.getLength=function(){return M},this.getBounds=function(){return{minX:n.cx-n.r,maxX:n.cx+n.r,minY:n.cy-n.r,maxY:n.cy+n.r}};var L=1e-10,U=function(G){var P=Math.floor(G),w=Math.ceil(G);return G-P<L?P:w-G<L?w:G};this.pointOnPath=function(G,P){if(G===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(G===1)return{x:this.x2,y:this.y2,theta:this.endAngle};P&&(G=G/M);var w=E(this,G),r=n.cx+n.r*Math.cos(w),d=n.cy+n.r*Math.sin(w);return{x:U(r),y:U(d),theta:w}},this.gradientAtPoint=function(G,P){var w=this.pointOnPath(G,P),r=nt.normal([n.cx,n.cy],[w.x,w.y]);return!this.anticlockwise&&(r===1/0||r===-1/0)&&(r*=-1),r},this.pointAlongPathFrom=function(G,P,w){var r=this.pointOnPath(G,w),d=P/f*2*Math.PI,l=this.anticlockwise?-1:1,_=r.theta+l*d,x=n.cx+this.radius*Math.cos(_),h=n.cy+this.radius*Math.sin(_);return{x,y:h}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];var v=function(M){return M[0].x===M[1].x&&M[0].y===M[1].y},E=function(M,L){return Math.sqrt(Math.pow(M.x-L.x,2)+Math.pow(M.y-L.y,2))},O=function(M){var L={x:0,y:0};if(M===0)return this.curve[0];var U=this.curve.length-1;if(M===1)return this.curve[U];var G=this.curve,P=1-M;if(U===0)return this.curve[0];if(U===1)return{x:P*G[0].x+M*G[1].x,y:P*G[0].y+M*G[1].y};if(U<4){var w=P*P,r=M*M,d=0,l,_,x;return U===2?(G=[G[0],G[1],G[2],L],l=w,_=2*(P*M),x=r):U===3&&(l=w*P,_=3*(w*M),x=3*(P*r),d=M*r),{x:l*G[0].x+_*G[1].x+x*G[2].x+d*G[3].x,y:l*G[0].y+_*G[1].y+x*G[2].y+d*G[3].y}}else return L}.bind(this),C=function(M){var L=[];M--;for(var U=0;U<=M;U++)L.push(O(U/M));return L},f=function(){v(this.curve)&&(this.length=0);var M=16,L=C(M);this.length=0;for(var U=0;U<M-1;U++){var G=L[U],P=L[U+1];this.length+=E(G,P)}}.bind(this);c.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier",f();var e=function(M,L,U){return U&&(L=K.jsBezier.locationAlongCurveFrom(M,L>0?0:1,L)),L};this.pointOnPath=function(M,L){return M=e(this.curve,M,L),K.jsBezier.pointOnCurve(this.curve,M)},this.gradientAtPoint=function(M,L){return M=e(this.curve,M,L),K.jsBezier.gradientAtPoint(this.curve,M)},this.pointAlongPathFrom=function(M,L,U){return M=e(this.curve,M,U),K.jsBezier.pointAlongCurveFrom(this.curve,M,L)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(M,L){var U=K.jsBezier.nearestPointOnCurve({x:M,y:L},this.curve);return{d:Math.sqrt(Math.pow(U.point.x-M,2)+Math.pow(U.point.y-L,2)),x:U.point.x,y:U.point.y,l:1-U.location,s:this}},this.lineIntersection=function(M,L,U,G){return K.jsBezier.lineIntersection(M,L,U,G,this.curve)}}},c.SegmentRenderer={getPath:function(n,v){return{Straight:function(E){var O=n.getCoordinates();return(E?"M "+O.x1+" "+O.y1+" ":"")+"L "+O.x2+" "+O.y2},Bezier:function(E){var O=n.params;return(E?"M "+O.x2+" "+O.y2+" ":"")+"C "+O.cp2x+" "+O.cp2y+" "+O.cp1x+" "+O.cp1y+" "+O.x1+" "+O.y1},Arc:function(E){var O=n.params,C=n.sweep>Math.PI?1:0,f=n.anticlockwise?0:1;return(E?"M"+n.x1+" "+n.y1+" ":"")+"A "+n.radius+" "+O.r+" 0 "+C+","+f+" "+n.x2+" "+n.y2}}[n.type](v)}};var q=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};c.Connectors.AbstractConnector=function(n){q.apply(this,arguments);var v=[],E=0,O=[],C=[],f=n.stub||0,e=X.isArray(f)?f[0]:f,M=X.isArray(f)?f[1]:f,L=n.gap||0,U=X.isArray(L)?L[0]:L,G=X.isArray(L)?L[1]:L,P=null,w=null;this.getPathData=function(){for(var h="",j=0;j<v.length;j++)h+=c.SegmentRenderer.getPath(v[j],j===0),h+=" ";return h},this.findSegmentForPoint=function(h,j){for(var b={d:1/0,s:null,x:null,y:null,l:null},A=0;A<v.length;A++){var g=v[A].findClosestPointOnPath(h,j);g.d<b.d&&(b.d=g.d,b.l=g.l,b.x=g.x,b.y=g.y,b.s=v[A],b.x1=g.x1,b.x2=g.x2,b.y1=g.y1,b.y2=g.y2,b.index=A,b.connectorLocation=O[A][0]+g.l*(O[A][1]-O[A][0]))}return b},this.lineIntersection=function(h,j,b,A){for(var g=[],S=0;S<v.length;S++)g.push.apply(g,v[S].lineIntersection(h,j,b,A));return g},this.boxIntersection=function(h,j,b,A){for(var g=[],S=0;S<v.length;S++)g.push.apply(g,v[S].boxIntersection(h,j,b,A));return g},this.boundingBoxIntersection=function(h){for(var j=[],b=0;b<v.length;b++)j.push.apply(j,v[b].boundingBoxIntersection(h));return j};var r=function(){for(var h=0,j=0;j<v.length;j++){var b=v[j].getLength();C[j]=b/E,O[j]=[h,h+=b/E]}},d=function(h,j){var b,A,g;if(j&&(h=h>0?h/E:(E+h)/E),h===1)b=v.length-1,g=1;else if(h===0)g=0,b=0;else if(h>=.5){for(b=0,g=0,A=O.length-1;A>-1;A--)if(O[A][1]>=h&&O[A][0]<=h){b=A,g=(h-O[A][0])/C[A];break}}else for(b=O.length-1,g=1,A=0;A<O.length;A++)if(O[A][1]>=h){b=A,g=(h-O[A][0])/C[A];break}return{segment:v[b],proportion:g,index:b}},l=function(h,j,b){if(!(b.x1===b.x2&&b.y1===b.y2)){var A=new c.Segments[j](b);v.push(A),E+=A.getLength(),h.updateBounds(A)}},_=function(){E=v.length=O.length=C.length=0};this.setSegments=function(h){P=[],E=0;for(var j=0;j<h.length;j++)P.push(h[j]),E+=h[j].getLength()},this.getLength=function(){return E};var x=function(h){this.strokeWidth=h.strokeWidth;var j=nt.quadrant(h.sourcePos,h.targetPos),b=h.targetPos[0]<h.sourcePos[0],A=h.targetPos[1]<h.sourcePos[1],g=h.strokeWidth||1,S=h.sourceEndpoint.anchor.getOrientation(h.sourceEndpoint),N=h.targetEndpoint.anchor.getOrientation(h.targetEndpoint),B=b?h.targetPos[0]:h.sourcePos[0],Y=A?h.targetPos[1]:h.sourcePos[1],i=Math.abs(h.targetPos[0]-h.sourcePos[0]),o=Math.abs(h.targetPos[1]-h.sourcePos[1]);if(S[0]===0&&S[1]===0||N[0]===0&&N[1]===0){var t=i>o?0:1,p=[1,0][t];S=[],N=[],S[t]=h.sourcePos[t]>h.targetPos[t]?-1:1,N[t]=h.sourcePos[t]>h.targetPos[t]?1:-1,S[p]=0,N[p]=0}var m=b?i+U*S[0]:U*S[0],I=A?o+U*S[1]:U*S[1],F=b?G*N[0]:i+G*N[0],W=A?G*N[1]:o+G*N[1],R=S[0]*N[0]+S[1]*N[1],V={sx:m,sy:I,tx:F,ty:W,lw:g,xSpan:Math.abs(F-m),ySpan:Math.abs(W-I),mx:(m+F)/2,my:(I+W)/2,so:S,to:N,x:B,y:Y,w:i,h:o,segment:j,startStubX:m+S[0]*e,startStubY:I+S[1]*e,endStubX:F+N[0]*M,endStubY:W+N[1]*M,isXGreaterThanStubTimes2:Math.abs(m-F)>e+M,isYGreaterThanStubTimes2:Math.abs(I-W)>e+M,opposite:R===-1,perpendicular:R===0,orthogonal:R===1,sourceAxis:S[0]===0?"y":"x",points:[B,Y,i,o,m,I,F,W],stubs:[e,M]};return V.anchorOrientation=V.opposite?"opposite":V.orthogonal?"orthogonal":"perpendicular",V};return this.getSegments=function(){return v},this.updateBounds=function(h){var j=h.getBounds();this.bounds.minX=Math.min(this.bounds.minX,j.minX),this.bounds.maxX=Math.max(this.bounds.maxX,j.maxX),this.bounds.minY=Math.min(this.bounds.minY,j.minY),this.bounds.maxY=Math.max(this.bounds.maxY,j.maxY)},this.pointOnPath=function(h,j){var b=d(h,j);return b.segment&&b.segment.pointOnPath(b.proportion,!1)||[0,0]},this.gradientAtPoint=function(h,j){var b=d(h,j);return b.segment&&b.segment.gradientAtPoint(b.proportion,!1)||0},this.pointAlongPathFrom=function(h,j,b){var A=d(h,b);return A.segment&&A.segment.pointAlongPathFrom(A.proportion,j,!1)||[0,0]},this.compute=function(h){w=x.call(this,h),_(),this._compute(w,h),this.x=w.points[0],this.y=w.points[1],this.w=w.points[2],this.h=w.points[3],this.segment=w.segment,r()},{addSegment:l,prepareCompute:x,sourceStub:e,targetStub:M,maxStub:Math.max(e,M),sourceGap:U,targetGap:G,maxGap:Math.max(U,G)}},X.extend(c.Connectors.AbstractConnector,q),c.Endpoints.AbstractEndpoint=function(n){q.apply(this,arguments);var v=this.compute=function(E,O,C,f){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:v,cssClass:n.cssClass}},X.extend(c.Endpoints.AbstractEndpoint,q),c.Endpoints.Dot=function(n){this.type="Dot",c.Endpoints.AbstractEndpoint.apply(this,arguments),n=n||{},this.radius=n.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(v,E,O,C){this.radius=O.radius||this.radius;var f=v[0]-this.radius,e=v[1]-this.radius,M=this.radius*2,L=this.radius*2;if(O.stroke){var U=O.strokeWidth||1;f-=U,e-=U,M+=U*2,L+=U*2}return[f,e,M,L,this.radius]}},X.extend(c.Endpoints.Dot,c.Endpoints.AbstractEndpoint),c.Endpoints.Rectangle=function(n){this.type="Rectangle",c.Endpoints.AbstractEndpoint.apply(this,arguments),n=n||{},this.width=n.width||20,this.height=n.height||20,this._compute=function(v,E,O,C){var f=O.width||this.width,e=O.height||this.height,M=v[0]-f/2,L=v[1]-e/2;return[M,L,f,e]}},X.extend(c.Endpoints.Rectangle,c.Endpoints.AbstractEndpoint);var $=function(n){c.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};X.extend($,c.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(n){this._jsPlumb.displayElements.push(n)}}),c.Endpoints.Image=function(n){this.type="Image",$.apply(this,arguments),c.Endpoints.AbstractEndpoint.apply(this,arguments);var v=n.onload,E=n.src||n.url,O=n.cssClass?" "+n.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=n.width,this._jsPlumb.heightToUse=n.height,this._jsPlumb.endpoint=n.endpoint,this._jsPlumb.img.onload=function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,v&&v(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(C,f){var e=C.constructor===String?C:C.src;v=f,this._jsPlumb.img.src=e,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(E,v),this._compute=function(C,f,e,M){return this.anchorPoint=C,this._jsPlumb.ready?[C[0]-this._jsPlumb.widthToUse/2,C[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=c.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+O),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(C,f,e){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var M=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,L=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;X.sizeElement(this.canvas,M,L,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(C,f){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(C,f):K.setTimeout(function(){this.paint(C,f)}.bind(this),200))}},X.extend(c.Endpoints.Image,[$,c.Endpoints.AbstractEndpoint],{cleanup:function(n){n&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),c.Endpoints.Blank=function(n){c.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",$.apply(this,arguments),this._compute=function(E,O,C,f){return[E[0],E[1],10,0]};var v=n.cssClass?" "+n.cssClass:"";this.canvas=c.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+v),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(E,O){X.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},X.extend(c.Endpoints.Blank,[c.Endpoints.AbstractEndpoint,$],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),c.Endpoints.Triangle=function(n){this.type="Triangle",c.Endpoints.AbstractEndpoint.apply(this,arguments);var v=this;n=n||{},n.width=n.width||55,n.height=n.height||55,this.width=n.width,this.height=n.height,this._compute=function(E,O,C,f){var e=C.width||v.width,M=C.height||v.height,L=E[0]-e/2,U=E[1]-M/2;return[L,U,e,M]}};var u=c.Overlays.AbstractOverlay=function(n){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=n.component,this.loc=n.location==null?.5:n.location,this.endpointLoc=n.endpointLocation==null?[.5,.5]:n.endpointLocation,this.visible=n.visible!==!1};u.prototype={cleanup:function(n){n&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(n,v){},setVisible:function(n){this.visible=n,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(n){this.loc+=n,this.component.repaint()},setLocation:function(n){this.loc=n,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},c.Overlays.Arrow=function(n){this.type="Arrow",u.apply(this,arguments),this.isAppendedAtTopLevel=!1,n=n||{};var v=this;this.length=n.length||20,this.width=n.width||20,this.id=n.id,this.direction=(n.direction||1)<0?-1:1;var E=n.paintStyle||{"stroke-width":1},O=n.foldback||.623;this.computeMaxSize=function(){return v.width*1.5},this.elementCreated=function(C,f){if(this.path=C,n.events)for(var e in n.events)c.on(C,e,n.events[e])},this.draw=function(C,f){var e,M,L,U,G;if(C.pointAlongPathFrom){if(X.isString(this.loc)||this.loc>1||this.loc<0){var P=parseInt(this.loc,10),w=this.loc<0?1:0;e=C.pointAlongPathFrom(w,P,!1),M=C.pointAlongPathFrom(w,P-this.direction*this.length/2,!1),L=nt.pointOnLine(e,M,this.length)}else if(this.loc===1){if(e=C.pointOnPath(this.loc),M=C.pointAlongPathFrom(this.loc,-this.length),L=nt.pointOnLine(e,M,this.length),this.direction===-1){var r=L;L=e,e=r}}else if(this.loc===0){if(L=C.pointOnPath(this.loc),M=C.pointAlongPathFrom(this.loc,this.length),e=nt.pointOnLine(L,M,this.length),this.direction===-1){var d=L;L=e,e=d}}else e=C.pointAlongPathFrom(this.loc,this.direction*this.length/2),M=C.pointOnPath(this.loc),L=nt.pointOnLine(e,M,this.length);U=nt.perpendicularLineTo(e,L,this.width),G=nt.pointOnLine(e,L,O*this.length);var l={hxy:e,tail:U,cxy:G},_=E.stroke||f.stroke,x=E.fill||f.stroke,h=E.strokeWidth||f.strokeWidth;return{component:C,d:l,"stroke-width":h,stroke:_,fill:x,minX:Math.min(e.x,U[0].x,U[1].x),maxX:Math.max(e.x,U[0].x,U[1].x),minY:Math.min(e.y,U[0].y,U[1].y),maxY:Math.max(e.y,U[0].y,U[1].y)}}else return{component:C,minX:0,maxX:0,minY:0,maxY:0}}},X.extend(c.Overlays.Arrow,u,{updateFrom:function(n){this.length=n.length||this.length,this.width=n.width||this.width,this.direction=n.direction!=null?n.direction:this.direction,this.foldback=n.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),c.Overlays.PlainArrow=function(n){n=n||{};var v=c.extend(n,{foldback:1});c.Overlays.Arrow.call(this,v),this.type="PlainArrow"},X.extend(c.Overlays.PlainArrow,c.Overlays.Arrow),c.Overlays.Diamond=function(n){n=n||{};var v=n.length||40,E=c.extend(n,{length:v/2,foldback:2});c.Overlays.Arrow.call(this,E),this.type="Diamond"},X.extend(c.Overlays.Diamond,c.Overlays.Arrow);var T=function(n,v){return(n._jsPlumb.cachedDimensions==null||v)&&(n._jsPlumb.cachedDimensions=n.getDimensions()),n._jsPlumb.cachedDimensions},a=function(n){c.jsPlumbUIComponent.apply(this,arguments),u.apply(this,arguments);var v=this.fire;this.fire=function(){v.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=n.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=n.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=n.create,this._jsPlumb.initiallyInvisible=n.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var E=this._jsPlumb.div=c.getElement(this._jsPlumb.create(this._jsPlumb.component));E.style.position="absolute",jsPlumb.addClass(E,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:n.cssClass?n.cssClass:"")),this._jsPlumb.instance.appendElement(E),this._jsPlumb.instance.getId(E),this.canvas=E;var O="translate(-50%, -50%)";E.style.webkitTransform=O,E.style.mozTransform=O,E.style.msTransform=O,E.style.oTransform=O,E.style.transform=O,E._jsPlumb=this,n.visible===!1&&(E.style.display="none")}return this._jsPlumb.div},this.draw=function(E,O,C){var f=T(this);if(f!=null&&f.length===2){var e={x:0,y:0};if(C)e={x:C[0],y:C[1]};else if(E.pointOnPath){var M=this.loc,L=!1;(X.isString(this.loc)||this.loc<0||this.loc>1)&&(M=parseInt(this.loc,10),L=!0),e=E.pointOnPath(M,L)}else{var U=this.loc.constructor===Array?this.loc:this.endpointLoc;e={x:U[0]*E.w,y:U[1]*E.h}}var G=e.x-f[0]/2,P=e.y-f[1]/2;return{component:E,d:{minx:G,miny:P,td:f,cxy:e},minX:G,maxX:G+f[0],minY:P,maxY:P+f[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}};X.extend(a,[c.jsPlumbUIComponent,u],{getDimensions:function(){return[1,1]},setVisible:function(n){this._jsPlumb.div&&(this._jsPlumb.div.style.display=n?"block":"none",n&&this._jsPlumb.initiallyInvisible&&(T(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(n){n?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(n,v){this._jsPlumb.div!=null&&n.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var n=T(this);return Math.max(n[0],n[1])},paint:function(n,v){this._jsPlumb.initialised||(this.getElement(),n.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=n.component.x+n.d.minx+"px",this._jsPlumb.div.style.top=n.component.y+n.d.miny+"px"}}),c.Overlays.Custom=function(n){this.type="Custom",a.apply(this,arguments)},X.extend(c.Overlays.Custom,a),c.Overlays.GuideLines=function(){var n=this;n.length=50,n.strokeWidth=5,this.type="GuideLines",u.apply(this,arguments),c.jsPlumbUIComponent.apply(this,arguments),this.draw=function(v,E){var O=v.pointAlongPathFrom(n.loc,n.length/2),C=v.pointOnPath(n.loc),f=nt.pointOnLine(O,C,n.length),e=nt.perpendicularLineTo(O,f,40),M=nt.perpendicularLineTo(f,O,20);return{connector:v,head:O,tail:f,headLine:M,tailLine:e,minX:Math.min(O.x,f.x,M[0].x,M[1].x),minY:Math.min(O.y,f.y,M[0].y,M[1].y),maxX:Math.max(O.x,f.x,M[0].x,M[1].x),maxY:Math.max(O.y,f.y,M[0].y,M[1].y)}}},c.Overlays.Label=function(n){this.labelStyle=n.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var v=c.extend({create:function(){return c.createElement("div")}},n);if(c.Overlays.Custom.call(this,v),this.type="Label",this.label=n.label||"",this.labelText=null,this.labelStyle){var E=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",E.style.font=this.labelStyle.font,E.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(E.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var O=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";E.style.border=this.labelStyle.borderWidth+"px solid "+O}this.labelStyle.padding&&(E.style.padding=this.labelStyle.padding)}},X.extend(c.Overlays.Label,c.Overlays.Custom,{cleanup:function(n){n&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(n){this.label=n,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),a.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var n=this.label(this);this.getElement().innerHTML=n.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(n){n.label!=null&&this.setLabel(n.label)}})}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumbUtil,X=K.jsPlumbInstance,nt="jtk-group-collapsed",q="jtk-group-expanded",$="[jtk-group-content]",u="elementDraggable",T="stop",a="revert",n="_groupManager",v="_jsPlumbGroup",E="_jsPlumbGroupDrag",O="group:addMember",C="group:removeMember",f="group:add",e="group:remove",M="group:expand",L="group:collapse",U="groupDragStop",G="connectionMoved",P="internal.connectionDetached",w="removeAll",r="orphanAll",d="show",l="hide",_=function(h){var j={},b={},A={},g=this;function S(t,p){for(var m=h.getContainer(),I=!1;!I;){if(t==null||t===m)return!1;if(t===p)return!0;t=t.parentNode}}h.bind("connection",function(t){var p=h.getGroupFor(t.source),m=h.getGroupFor(t.target);p!=null&&m!=null&&p===m?(b[t.connection.id]=p,A[t.connection.id]=p):(p!=null&&(c.suggest(p.connections.source,t.connection),b[t.connection.id]=p),m!=null&&(c.suggest(m.connections.target,t.connection),A[t.connection.id]=m))});function N(t){delete t.proxies;var p=b[t.id],m;p!=null&&(m=function(I){return I.id===t.id},c.removeWithFunction(p.connections.source,m),c.removeWithFunction(p.connections.target,m),delete b[t.id]),p=A[t.id],p!=null&&(m=function(I){return I.id===t.id},c.removeWithFunction(p.connections.source,m),c.removeWithFunction(p.connections.target,m),delete A[t.id])}h.bind(P,function(t){N(t.connection)}),h.bind(G,function(t){var p=t.index===0?b:A,m=p[t.connection.id];if(m){var I=m.connections[t.index===0?"source":"target"],F=I.indexOf(t.connection);F!==-1&&I.splice(F,1)}}),this.addGroup=function(t){h.addClass(t.getEl(),q),j[t.id]=t,t.manager=this,o(t),h.fire(f,{group:t})},this.addToGroup=function(t,p,m){if(t=this.getGroup(t),t){var I=t.getEl();if(p._isJsPlumbGroup)return;var F=p._jsPlumbGroup;if(F!==t){h.removeFromDragSelection(p);var W=h.getOffset(p,!0),R=t.collapsed?h.getOffset(I,!0):h.getOffset(t.getDragArea(),!0);F!=null&&(F.remove(p,!1,m,!1,t),g.updateConnectionsForGroup(F)),t.add(p,m);var V=function(rt,gt){var dt=gt===0?1:0;rt.each(function(lt){lt.setVisible(!1),lt.endpoints[dt].element._jsPlumbGroup===t?(lt.endpoints[dt].setVisible(!1),i(lt,dt,t)):(lt.endpoints[gt].setVisible(!1),Y(lt,gt,t))})};t.collapsed&&(V(h.select({source:p}),0),V(h.select({target:p}),1));var at=h.getId(p);h.dragManager.setParent(p,at,I,h.getId(I),W);var st={left:W.left-R.left,top:W.top-R.top};if(h.setPosition(p,st),h.dragManager.revalidateParent(p,at,W),g.updateConnectionsForGroup(t),h.revalidate(at),!m){var it={group:t,el:p,pos:st};F&&(it.sourceGroup=F),h.fire(O,it)}}}},this.removeFromGroup=function(t,p,m){if(t=this.getGroup(t),t){if(t.collapsed){var I=function(F,W){for(var R=0;R<F.length;R++){var V=F[R];if(V.proxies){for(var at=0;at<V.proxies.length;at++)if(V.proxies[at]!=null){var st=V.proxies[at].originalEp.element;(st===p||S(st,p))&&i(V,W,t)}}}};I(t.connections.source.slice(),0),I(t.connections.target.slice(),1)}t.remove(p,null,m)}},this.getGroup=function(t){var p=t;if(c.isString(t)&&(p=j[t],p==null))throw new TypeError("No such group ["+t+"]");return p},this.getGroups=function(){var t=[];for(var p in j)t.push(j[p]);return t},this.removeGroup=function(t,p,m,I){t=this.getGroup(t),this.expandGroup(t,!0);var F=t[p?w:r](m,I);return h.remove(t.getEl()),delete j[t.id],delete h._groups[t.id],h.fire(e,{group:t}),F},this.removeAllGroups=function(t,p,m){for(var I in j)this.removeGroup(j[I],t,p,m)};function B(t,p){for(var m=t.getEl().querySelectorAll(".jtk-managed"),I=0;I<m.length;I++)h[p?d:l](m[I],!0)}var Y=function(t,p,m){var I=t.endpoints[p===0?1:0].element;if(!(I[v]&&!I[v].shouldProxy()&&I[v].collapsed)){var F=m.getEl(),W=h.getId(F);h.proxyConnection(t,p,F,W,function(R,V){return m.getEndpoint(R,V)},function(R,V){return m.getAnchor(R,V)})}};this.collapseGroup=function(t){if(t=this.getGroup(t),!(t==null||t.collapsed)){var p=t.getEl();if(B(t,!1),t.shouldProxy()){var m=function(I,F){for(var W=0;W<I.length;W++){var R=I[W];Y(R,F,t)}};m(t.connections.source,0),m(t.connections.target,1)}t.collapsed=!0,h.removeClass(p,q),h.addClass(p,nt),h.revalidate(p),h.fire(L,{group:t})}};var i=function(t,p,m){h.unproxyConnection(t,p,h.getId(m.getEl()))};this.expandGroup=function(t,p){if(t=this.getGroup(t),!(t==null||!t.collapsed)){var m=t.getEl();if(B(t,!0),t.shouldProxy()){var I=function(F,W){for(var R=0;R<F.length;R++){var V=F[R];i(V,W,t)}};I(t.connections.source,0),I(t.connections.target,1)}t.collapsed=!1,h.addClass(m,q),h.removeClass(m,nt),h.revalidate(m),this.repaintGroup(t),p||h.fire(M,{group:t})}},this.repaintGroup=function(t){t=this.getGroup(t);for(var p=t.getMembers(),m=0;m<p.length;m++)h.revalidate(p[m])};function o(t){for(var p=t.getMembers().slice(),m=[],I=0;I<p.length;I++)Array.prototype.push.apply(m,p[I].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(p,m);var F=h.getConnections({source:p,scope:"*"},!0),W=h.getConnections({target:p,scope:"*"},!0),R={};t.connections.source.length=0,t.connections.target.length=0;var V=function(at){for(var st=0;st<at.length;st++)if(!R[at[st].id]){R[at[st].id]=!0;var it=h.getGroupFor(at[st].source),rt=h.getGroupFor(at[st].target);it===t?(rt!==t&&t.connections.source.push(at[st]),b[at[st].id]=t):rt===t&&(t.connections.target.push(at[st]),A[at[st].id]=t)}};V(F),V(W)}this.updateConnectionsForGroup=o,this.refreshAllGroups=function(){for(var t in j)o(j[t]),h.dragManager.updateOffsets(h.getId(j[t].getEl()))}},x=function(h,j){var b=this,A=j.el;this.getEl=function(){return A},this.id=j.id||c.uuid(),A._isJsPlumbGroup=!0;var g=this.getDragArea=function(){var rt=h.getSelector(A,$);return rt&&rt.length>0?rt[0]:A},S=j.ghost===!0,N=S||j.constrain===!0,B=j.revert!==!1,Y=j.orphan===!0,i=j.prune===!0,o=j.dropOverride===!0,t=j.proxied!==!1,p=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(rt,gt){return j.anchor||"Continuous"},this.getEndpoint=function(rt,gt){return j.endpoint||["Dot",{radius:10}]},this.collapsed=!1,j.draggable!==!1){var m={drag:function(){for(var rt=0;rt<p.length;rt++)h.draw(p[rt])},stop:function(rt){h.fire(U,jsPlumb.extend(rt,{group:b}))},scope:E};j.dragOptions&&K.jsPlumb.extend(m,j.dragOptions),h.draggable(j.el,m)}j.droppable!==!1&&h.droppable(j.el,{drop:function(rt){var gt=rt.drag.el;if(!gt._isJsPlumbGroup){var dt=gt._jsPlumbGroup;if(dt!==b){if(dt!=null&&dt.overrideDrop(gt,b))return;h.getGroupManager().addToGroup(b,gt,!1)}}}});var I=function(rt,gt){for(var dt=rt.nodeType==null?rt:[rt],lt=0;lt<dt.length;lt++)gt(dt[lt])};this.overrideDrop=function(rt,gt){return o&&(B||i||Y)},this.add=function(rt,gt){var dt=g();I(rt,function(lt){if(lt._jsPlumbGroup!=null){if(lt._jsPlumbGroup===b)return;lt._jsPlumbGroup.remove(lt,!0,gt,!1)}lt._jsPlumbGroup=b,p.push(lt),h.isAlreadyDraggable(lt)&&it(lt),lt.parentNode!==dt&&dt.appendChild(lt)}),h.getGroupManager().updateConnectionsForGroup(b)},this.remove=function(rt,gt,dt,lt,yt){I(rt,function(pt){if(pt._jsPlumbGroup===b){if(delete pt._jsPlumbGroup,c.removeWithFunction(p,function(Z){return Z===pt}),gt)try{b.getDragArea().removeChild(pt)}catch(Z){jsPlumbUtil.log("Could not remove element from Group "+Z)}if(st(pt),!dt){var J={group:b,el:pt};yt&&(J.targetGroup=yt),h.fire(C,J)}}}),lt||h.getGroupManager().updateConnectionsForGroup(b)},this.removeAll=function(rt,gt){for(var dt=0,lt=p.length;dt<lt;dt++){var yt=p[0];b.remove(yt,rt,gt,!0),h.remove(yt,!0)}p.length=0,h.getGroupManager().updateConnectionsForGroup(b)},this.orphanAll=function(){for(var rt={},gt=0;gt<p.length;gt++){var dt=R(p[gt]);rt[dt[0]]=dt[1]}return p.length=0,rt},this.getMembers=function(){return p},A[v]=this,h.bind(u,function(rt){rt.el._jsPlumbGroup===this&&it(rt.el)}.bind(this));function F(rt){return rt.offsetParent}function W(rt,gt){var dt=F(rt),lt=h.getSize(dt),yt=h.getSize(rt),pt=gt[0],J=pt+yt[0],Z=gt[1],Q=Z+yt[1];return J>0&&pt<lt[0]&&Q>0&&Z<lt[1]}function R(rt){var gt=h.getId(rt),dt=h.getOffset(rt);return rt.parentNode.removeChild(rt),h.getContainer().appendChild(rt),h.setPosition(rt,dt),st(rt),h.dragManager.clearParent(rt,gt),[gt,dt]}function V(rt){var gt=[];function dt(yt,pt,J){var Z=null;if(!W(yt,[pt,J])){var Q=yt._jsPlumbGroup;i?h.remove(yt):Z=R(yt),Q.remove(yt)}return Z}for(var lt=0;lt<rt.selection.length;lt++)gt.push(dt(rt.selection[lt][0],rt.selection[lt][1].left,rt.selection[lt][1].top));return gt.length===1?gt[0]:gt}function at(rt){var gt=h.getId(rt);h.revalidate(rt),h.dragManager.revalidateParent(rt,gt)}function st(rt){!rt._katavorioDrag||((i||Y)&&rt._katavorioDrag.off(T,V),!i&&!Y&&B&&(rt._katavorioDrag.off(a,at),rt._katavorioDrag.setRevert(null)))}function it(rt){!rt._katavorioDrag||((i||Y)&&rt._katavorioDrag.on(T,V),N&&rt._katavorioDrag.setConstrain(!0),S&&rt._katavorioDrag.setUseGhostProxy(!0),!i&&!Y&&B&&(rt._katavorioDrag.on(a,at),rt._katavorioDrag.setRevert(function(gt,dt){return!W(gt,dt)})))}this.shouldProxy=function(){return t},h.getGroupManager().addGroup(this)};X.prototype.addGroup=function(h){var j=this;if(j._groups=j._groups||{},j._groups[h.id]!=null)throw new TypeError("cannot create Group ["+h.id+"]; a Group with that ID exists");if(h.el[v]!=null)throw new TypeError("cannot create Group ["+h.id+"]; the given element is already a Group");var b=new x(j,h);return j._groups[b.id]=b,h.collapsed&&this.collapseGroup(b),b},X.prototype.addToGroup=function(h,j,b){var A=function(S){var N=this.getId(S);this.manage(N,S),this.getGroupManager().addToGroup(h,S,b)}.bind(this);if(Array.isArray(j))for(var g=0;g<j.length;g++)A(j[g]);else A(j)},X.prototype.removeFromGroup=function(h,j,b){this.getGroupManager().removeFromGroup(h,j,b),this.getContainer().appendChild(j)},X.prototype.removeGroup=function(h,j,b,A){return this.getGroupManager().removeGroup(h,j,b,A)},X.prototype.removeAllGroups=function(h,j,b){this.getGroupManager().removeAllGroups(h,j,b)},X.prototype.getGroup=function(h){return this.getGroupManager().getGroup(h)},X.prototype.getGroups=function(){return this.getGroupManager().getGroups()},X.prototype.expandGroup=function(h){this.getGroupManager().expandGroup(h)},X.prototype.collapseGroup=function(h){this.getGroupManager().collapseGroup(h)},X.prototype.repaintGroup=function(h){this.getGroupManager().repaintGroup(h)},X.prototype.toggleGroup=function(h){h=this.getGroupManager().getGroup(h),h!=null&&this.getGroupManager()[h.collapsed?"expandGroup":"collapseGroup"](h)},X.prototype.getGroupManager=function(){var h=this[n];return h==null&&(h=this[n]=new _(this)),h},X.prototype.removeGroupManager=function(){delete this[n]},X.prototype.getGroupFor=function(h){if(h=this.getElement(h),h){for(var j=this.getContainer(),b=!1,A=null;!b;)h==null||h===j?b=!0:h[v]?(A=h[v],b=!0):h=h.parentNode;return A}}}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt="Straight",q="Arc",$=function(u){this.type="Flowchart",u=u||{},u.stub=u.stub==null?30:u.stub;var T,a=c.Connectors.AbstractConnector.apply(this,arguments),n=u.midpoint==null||isNaN(u.midpoint)?.5:u.midpoint,v=u.alwaysRespectStubs===!0,E=null,O=null,C=u.cornerRadius!=null?u.cornerRadius:0;u.loopbackRadius;var f=function(P){return P<0?-1:P===0?0:1},e=function(P){return[f(P[2]-P[0]),f(P[3]-P[1])]},M=function(P,w,r,d){if(!(E===w&&O===r)){var l=E==null?d.sx:E,_=O==null?d.sy:O,x=l===w?"v":"h";E=w,O=r,P.push([l,_,w,r,x])}},L=function(P){return Math.sqrt(Math.pow(P[0]-P[2],2)+Math.pow(P[1]-P[3],2))},U=function(P){var w=[];return w.push.apply(w,P),w},G=function(P,w,r){for(var d=null,l,_,x,h=0;h<w.length-1;h++){if(d=d||U(w[h]),l=U(w[h+1]),_=e(d),x=e(l),C>0&&d[4]!==l[4]){var j=Math.min(L(d),L(l)),b=Math.min(C,j/2);d[2]-=_[0]*b,d[3]-=_[1]*b,l[0]+=x[0]*b,l[1]+=x[1]*b;var A=_[1]===x[0]&&x[0]===1||_[1]===x[0]&&x[0]===0&&_[0]!==x[1]||_[1]===x[0]&&x[0]===-1,g=l[1]>d[3]?1:-1,S=l[0]>d[2]?1:-1,N=g===S,B=N&&A||!N&&!A?l[0]:d[2],Y=N&&A||!N&&!A?d[3]:l[1];a.addSegment(P,nt,{x1:d[0],y1:d[1],x2:d[2],y2:d[3]}),a.addSegment(P,q,{r:b,x1:d[2],y1:d[3],x2:l[0],y2:l[1],cx:B,cy:Y,ac:A})}else{var i=d[2]===d[0]?0:d[2]>d[0]?r.lw/2:-(r.lw/2),o=d[3]===d[1]?0:d[3]>d[1]?r.lw/2:-(r.lw/2);a.addSegment(P,nt,{x1:d[0]-i,y1:d[1]-o,x2:d[2]+i,y2:d[3]+o})}d=l}l!=null&&a.addSegment(P,nt,{x1:l[0],y1:l[1],x2:l[2],y2:l[3]})};this.midpoint=n,this._compute=function(P,w){T=[],E=null,O=null;var r=function(){return[P.startStubX,P.startStubY,P.endStubX,P.endStubY]},d={perpendicular:r,orthogonal:r,opposite:function(o){var t=P,p=o==="x"?0:1,m={x:function(){return t.so[p]===1&&(t.startStubX>t.endStubX&&t.tx>t.startStubX||t.sx>t.endStubX&&t.tx>t.sx)||t.so[p]===-1&&(t.startStubX<t.endStubX&&t.tx<t.startStubX||t.sx<t.endStubX&&t.tx<t.sx)},y:function(){return t.so[p]===1&&(t.startStubY>t.endStubY&&t.ty>t.startStubY||t.sy>t.endStubY&&t.ty>t.sy)||t.so[p]===-1&&(t.startStubY<t.endStubY&&t.ty<t.startStubY||t.sy<t.endStubY&&t.ty<t.sy)}};return!v&&m[o]()?{x:[(P.sx+P.tx)/2,P.startStubY,(P.sx+P.tx)/2,P.endStubY],y:[P.startStubX,(P.sy+P.ty)/2,P.endStubX,(P.sy+P.ty)/2]}[o]:[P.startStubX,P.startStubY,P.endStubX,P.endStubY]}},l=d[P.anchorOrientation](P.sourceAxis),_=P.sourceAxis==="x"?0:1,x=P.sourceAxis==="x"?1:0,h=l[_],j=l[x],b=l[_+2],A=l[x+2];M(T,l[0],l[1],P);var g=P.startStubX+(P.endStubX-P.startStubX)*n,S=P.startStubY+(P.endStubY-P.startStubY)*n,N={x:[0,1],y:[1,0]},B={perpendicular:function(o){var t=P,p={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},m={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},I={x:[[g,t.startStubY],[g,t.endStubY]],y:[[t.startStubX,S],[t.endStubX,S]]},F={x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]},W={x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]},R={x:[[t.startStubX,S],[t.endStubX,S],[t.endStubX,t.endStubY]],y:[[g,t.startStubY],[g,t.endStubY],[t.endStubX,t.endStubY]]},V={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},at=N[o][0],st=N[o][1],it=t.so[at]+1,rt=t.to[st]+1,gt=t.to[st]===-1&&V[o][1]<V[o][0]||t.to[st]===1&&V[o][1]>V[o][0],dt=m[o][it][0],lt=m[o][it][1],yt=p[o][it][rt];if(t.segment===yt[3]||t.segment===yt[2]&&gt)return I[o];if(t.segment===yt[2]&&lt<dt)return F[o];if(t.segment===yt[2]&&lt>=dt||t.segment===yt[1]&&!gt)return R[o];if(t.segment===yt[0]||t.segment===yt[1]&&gt)return W[o]},orthogonal:function(o,t,p,m,I){var F=P,W={x:F.so[0]===-1?Math.min(t,m):Math.max(t,m),y:F.so[1]===-1?Math.min(t,m):Math.max(t,m)}[o];return{x:[[W,p],[W,I],[m,I]],y:[[p,W],[I,W],[I,m]]}[o]},opposite:function(o,t,p,m){var I=P,F={x:"y",y:"x"}[o],W={x:"height",y:"width"}[o],R=I["is"+o.toUpperCase()+"GreaterThanStubTimes2"];if(w.sourceEndpoint.elementId===w.targetEndpoint.elementId){var V=p+(1-w.sourceEndpoint.anchor[F])*w.sourceInfo[W]+a.maxStub;return{x:[[t,V],[m,V]],y:[[V,t],[V,m]]}[o]}else{if(!R||I.so[_]===1&&t>m||I.so[_]===-1&&t<m)return{x:[[t,S],[m,S]],y:[[g,t],[g,m]]}[o];if(I.so[_]===1&&t<m||I.so[_]===-1&&t>m)return{x:[[g,I.sy],[g,I.ty]],y:[[I.sx,S],[I.tx,S]]}[o]}}},Y=B[P.anchorOrientation](P.sourceAxis,h,j,b,A);if(Y)for(var i=0;i<Y.length;i++)M(T,Y[i][0],Y[i][1],P);M(T,l[2],l[3],P),M(T,P.tx,P.ty,P),G(this,T,P)}};c.Connectors.Flowchart=$,X.extend(c.Connectors.Flowchart,c.Connectors.AbstractConnector)}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil;c.Connectors.AbstractBezierConnector=function(q){q=q||{};var $=q.showLoopback!==!1;q.curviness;var u=q.margin||5;q.proximityLimit;var T=q.orientation&&q.orientation==="clockwise",a=q.loopbackRadius||25,n;return this._compute=function(v,E){var O=E.sourcePos,C=E.targetPos,f=Math.abs(O[0]-C[0]),e=Math.abs(O[1]-C[1]);if(!$||E.sourceEndpoint.elementId!==E.targetEndpoint.elementId)this._computeBezier(v,E,O,C,f,e);else{var M=E.sourcePos[0],L=E.sourcePos[1]-u,U=M,G=L-a,P=U-a,w=G-a;f=2*a,e=2*a,v.points[0]=P,v.points[1]=w,v.points[2]=f,v.points[3]=e,n.addSegment(this,"Arc",{loopback:!0,x1:M-P+4,y1:L-w,startAngle:0,endAngle:2*Math.PI,r:a,ac:!T,x2:M-P-4,y2:L-w,cx:U-P,cy:G-w})}},n=c.Connectors.AbstractConnector.apply(this,arguments),n},X.extend(c.Connectors.AbstractBezierConnector,c.Connectors.AbstractConnector);var nt=function(q){q=q||{},this.type="Bezier";var $=c.Connectors.AbstractBezierConnector.apply(this,arguments),u=q.curviness||150,T=10;this.getCurviness=function(){return u},this._findControlPoint=function(a,n,v,E,O,C,f){var e=C[0]!==f[0]||C[1]===f[1],M=[];return e?(f[0]===0?M.push(v[0]<n[0]?a[0]+T:a[0]-T):M.push(a[0]+u*f[0]),f[1]===0?M.push(v[1]<n[1]?a[1]+T:a[1]-T):M.push(a[1]+u*C[1])):(C[0]===0?M.push(n[0]<v[0]?a[0]+T:a[0]-T):M.push(a[0]-u*C[0]),C[1]===0?M.push(n[1]<v[1]?a[1]+T:a[1]-T):M.push(a[1]+u*f[1])),M},this._computeBezier=function(a,n,v,E,O,C){var f,e,M=v[0]<E[0]?O:0,L=v[1]<E[1]?C:0,U=v[0]<E[0]?0:O,G=v[1]<E[1]?0:C;f=this._findControlPoint([M,L],v,E,n.sourceEndpoint,n.targetEndpoint,a.so,a.to),e=this._findControlPoint([U,G],E,v,n.targetEndpoint,n.sourceEndpoint,a.to,a.so),$.addSegment(this,"Bezier",{x1:M,y1:L,x2:U,y2:G,cp1x:f[0],cp1y:f[1],cp2x:e[0],cp2y:e[1]})}};c.Connectors.Bezier=nt,X.extend(nt,c.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt=function(u,T,a,n){return u<=a&&n<=T?1:u<=a&&T<=n?2:a<=u&&n>=T?3:4},q=function(u,T,a,n,v,E,O,C,f){if(C<=f)return[u,T];if(a===1)return n[3]<=0&&v[3]>=1?[u+(n[2]<.5?-1*E:E),T]:n[2]>=1&&v[2]<=0?[u,T+(n[3]<.5?-1*O:O)]:[u+-1*E,T+-1*O];if(a===2)return n[3]>=1&&v[3]<=0?[u+(n[2]<.5?-1*E:E),T]:n[2]>=1&&v[2]<=0?[u,T+(n[3]<.5?-1*O:O)]:[u+E,T+-1*O];if(a===3)return n[3]>=1&&v[3]<=0?[u+(n[2]<.5?-1*E:E),T]:n[2]<=0&&v[2]>=1?[u,T+(n[3]<.5?-1*O:O)]:[u+-1*E,T+-1*O];if(a===4)return n[3]<=0&&v[3]>=1?[u+(n[2]<.5?-1*E:E),T]:n[2]<=0&&v[2]>=1?[u,T+(n[3]<.5?-1*O:O)]:[u+E,T+-1*O]},$=function(u){u=u||{},this.type="StateMachine";var T=c.Connectors.AbstractBezierConnector.apply(this,arguments),a=u.curviness||10,n=u.margin||5,v=u.proximityLimit||80;u.orientation&&u.orientation;var E;this._computeBezier=function(O,C,f,e,M,L){var U=C.sourcePos[0]<C.targetPos[0]?0:M,G=C.sourcePos[1]<C.targetPos[1]?0:L,P=C.sourcePos[0]<C.targetPos[0]?M:0,w=C.sourcePos[1]<C.targetPos[1]?L:0;C.sourcePos[2]===0&&(U-=n),C.sourcePos[2]===1&&(U+=n),C.sourcePos[3]===0&&(G-=n),C.sourcePos[3]===1&&(G+=n),C.targetPos[2]===0&&(P-=n),C.targetPos[2]===1&&(P+=n),C.targetPos[3]===0&&(w-=n),C.targetPos[3]===1&&(w+=n);var r=(U+P)/2,d=(G+w)/2,l=nt(U,G,P,w),_=Math.sqrt(Math.pow(P-U,2)+Math.pow(w-G,2)),x,h,j,b;E=q(r,d,l,C.sourcePos,C.targetPos,a,a,_,v),x=E[0],h=E[0],j=E[1],b=E[1],T.addSegment(this,"Bezier",{x1:P,y1:w,x2:U,y2:G,cp1x:x,cp1y:j,cp2x:h,cp2y:b})}};c.Connectors.StateMachine=$,X.extend($,c.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt="Straight",q=function($){this.type=nt;var u=c.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(T,a){u.addSegment(this,nt,{x1:T.sx,y1:T.sy,x2:T.startStubX,y2:T.startStubY}),u.addSegment(this,nt,{x1:T.startStubX,y1:T.startStubY,x2:T.endStubX,y2:T.endStubY}),u.addSegment(this,nt,{x1:T.endStubX,y1:T.endStubY,x2:T.tx,y2:T.ty})}};c.Connectors.Straight=q,X.extend(q,c.Connectors.AbstractConnector)}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},q="stroke-dasharray",$="dashstyle",u="linearGradient",T="radialGradient",a="defs",n="fill",v="stop",E="stroke",O="stroke-width",C="style",f="none",e="jsplumb_gradient_",M="strokeWidth",L={svg:"http://www.w3.org/2000/svg"},U=function(b,A){for(var g in A)b.setAttribute(g,""+A[g])},G=function(b,A){return A=A||{},A.version="1.1",A.xmlns=L.svg,c.createElementNS(L.svg,b,null,null,A)},P=function(b){return"position:absolute;left:"+b[0]+"px;top:"+b[1]+"px"},w=function(b){for(var A=b.querySelectorAll(" defs,linearGradient,radialGradient"),g=0;g<A.length;g++)A[g].parentNode.removeChild(A[g])},r=function(b,A,g,S,N){var B=e+N._jsPlumb.instance.idstamp();w(b);var Y;g.gradient.offset?Y=G(T,{id:B}):Y=G(u,{id:B,gradientUnits:"userSpaceOnUse"});var i=G(a);b.appendChild(i),i.appendChild(Y);for(var o=0;o<g.gradient.stops.length;o++){var t=N.segment===1||N.segment===2?o:g.gradient.stops.length-1-o,p=g.gradient.stops[t][1],m=G(v,{offset:Math.floor(g.gradient.stops[o][0]*100)+"%","stop-color":p});Y.appendChild(m)}var I=g.stroke?E:n;A.setAttribute(I,"url(#"+B+")")},d=function(b,A,g,S,N){if(A.setAttribute(n,g.fill?g.fill:f),A.setAttribute(E,g.stroke?g.stroke:f),g.gradient?r(b,A,g,S,N):(w(b),A.setAttribute(C,"")),g.strokeWidth&&A.setAttribute(O,g.strokeWidth),g[$]&&g[M]&&!g[q]){var B=g[$].indexOf(",")===-1?" ":",",Y=g[$].split(B),i="";Y.forEach(function(t){i+=Math.floor(t*g.strokeWidth)+B}),A.setAttribute(q,i)}else g[q]&&A.setAttribute(q,g[q]);for(var o in nt)g[o]&&A.setAttribute(nt[o],g[o])},l=function(b,A,g){b.childNodes.length>g?b.insertBefore(A,b.childNodes[g]):b.appendChild(A)};X.svg={node:G,attr:U,pos:P};var _=function(b){var A=b.pointerEventsSpec||"all",g={};c.jsPlumbUIComponent.apply(this,b.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var S=b.cssClass+" "+(b.originalArgs[0].cssClass||""),N={style:"",width:0,height:0,"pointer-events":A,position:"absolute"};this.svg=G("svg",N),b.useDivWrapper?(this.canvas=c.createElement("div",{position:"absolute"}),X.sizeElement(this.canvas,0,0,1,1),this.canvas.className=S):(U(this.svg,{class:S}),this.canvas=this.svg),b._jsPlumb.appendElement(this.canvas,b.originalArgs[0].parent),b.useDivWrapper&&this.canvas.appendChild(this.svg);var B=[this.canvas];return this.getDisplayElements=function(){return B},this.appendDisplayElement=function(Y){B.push(Y)},this.paint=function(Y,i,o){if(Y!=null){var t=[this.x,this.y],p=[this.w,this.h],m;o!=null&&(o.xmin<0&&(t[0]+=o.xmin),o.ymin<0&&(t[1]+=o.ymin),p[0]=o.xmax+(o.xmin<0?-o.xmin:0),p[1]=o.ymax+(o.ymin<0?-o.ymin:0)),b.useDivWrapper?(X.sizeElement(this.canvas,t[0],t[1],p[0]>0?p[0]:1,p[1]>0?p[1]:1),t[0]=0,t[1]=0,m=P([0,0])):m=P([t[0],t[1]]),g.paint.apply(this,arguments),U(this.svg,{style:m,width:p[0]||1,height:p[1]||1})}},{renderer:g}};X.extend(_,c.jsPlumbUIComponent,{cleanup:function(b){b||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(b){var A=b.getContainer();this.canvas&&this.canvas.parentNode==null&&A.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&A.appendChild(this.bgCanvas)},setVisible:function(b){this.canvas&&(this.canvas.style.display=b?"block":"none")}}),c.ConnectorRenderers.svg=function(b){var A=this,g=_.apply(this,[{cssClass:b._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:b._jsPlumb}]);g.renderer.paint=function(S,N,B){var Y=A.getSegments(),i="",o=[0,0];if(B.xmin<0&&(o[0]=-B.xmin),B.ymin<0&&(o[1]=-B.ymin),Y.length>0){i=A.getPathData();var t={d:i,transform:"translate("+o[0]+","+o[1]+")","pointer-events":b["pointer-events"]||"visibleStroke"},p=null,m=[A.x,A.y,A.w,A.h];if(S.outlineStroke){var I=S.outlineWidth||1,F=S.strokeWidth+2*I;p=c.extend({},S),delete p.gradient,p.stroke=S.outlineStroke,p.strokeWidth=F,A.bgPath==null?(A.bgPath=G("path",t),c.addClass(A.bgPath,c.connectorOutlineClass),l(A.svg,A.bgPath,0)):U(A.bgPath,t),d(A.svg,A.bgPath,p,m,A)}A.path==null?(A.path=G("path",t),l(A.svg,A.path,S.outlineStroke?1:0)):U(A.path,t),d(A.svg,A.path,S,m,A)}}},X.extend(c.ConnectorRenderers.svg,_);var x=c.SvgEndpoint=function(b){var A=_.apply(this,[{cssClass:b._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:b._jsPlumb}]);A.renderer.paint=function(g){var S=c.extend({},g);S.outlineStroke&&(S.stroke=S.outlineStroke),this.node==null?(this.node=this.makeNode(S),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),d(this.svg,this.node,S,[this.x,this.y,this.w,this.h],this),P(this.node,[this.x,this.y])}.bind(this)};X.extend(x,_),c.Endpoints.svg.Dot=function(){c.Endpoints.Dot.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(b){return G("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(b){U(b,{cx:this.w/2,cy:this.h/2,r:this.radius})}},X.extend(c.Endpoints.svg.Dot,[c.Endpoints.Dot,x]),c.Endpoints.svg.Rectangle=function(){c.Endpoints.Rectangle.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(b){return G("rect",{width:this.w,height:this.h})},this.updateNode=function(b){U(b,{width:this.w,height:this.h})}},X.extend(c.Endpoints.svg.Rectangle,[c.Endpoints.Rectangle,x]),c.Endpoints.svg.Image=c.Endpoints.Image,c.Endpoints.svg.Blank=c.Endpoints.Blank,c.Overlays.svg.Label=c.Overlays.Label,c.Overlays.svg.Custom=c.Overlays.Custom;var h=function(b,A){b.apply(this,A),c.jsPlumbUIComponent.apply(this,A),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(S,N){if(S.component.svg&&N){this.path==null&&(this.path=G("path",{"pointer-events":"all"}),S.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,S.component),this.canvas=S.component.svg);var B=A&&A.length===1&&A[0].cssClass||"",Y=[0,0];N.xmin<0&&(Y[0]=-N.xmin),N.ymin<0&&(Y[1]=-N.ymin),U(this.path,{d:g(S.d),class:B,stroke:S.stroke?S.stroke:null,fill:S.fill?S.fill:null,transform:"translate("+Y[0]+","+Y[1]+")"})}};var g=function(S){return isNaN(S.cxy.x)||isNaN(S.cxy.y)?"":"M"+S.hxy.x+","+S.hxy.y+" L"+S.tail[0].x+","+S.tail[0].y+" L"+S.cxy.x+","+S.cxy.y+" L"+S.tail[1].x+","+S.tail[1].y+" L"+S.hxy.x+","+S.hxy.y};this.transfer=function(S){S.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),S.canvas.appendChild(this.path))}},j={cleanup:function(b){this.path!=null&&(b?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(b,A){this.path&&A.canvas&&A.canvas.appendChild(this.path)},setVisible:function(b){this.path!=null&&(this.path.style.display=b?"block":"none")}};X.extend(h,[c.jsPlumbUIComponent,c.Overlays.AbstractOverlay]),c.Overlays.svg.Arrow=function(){h.apply(this,[c.Overlays.Arrow,arguments])},X.extend(c.Overlays.svg.Arrow,[c.Overlays.Arrow,h],j),c.Overlays.svg.PlainArrow=function(){h.apply(this,[c.Overlays.PlainArrow,arguments])},X.extend(c.Overlays.svg.PlainArrow,[c.Overlays.PlainArrow,h],j),c.Overlays.svg.Diamond=function(){h.apply(this,[c.Overlays.Diamond,arguments])},X.extend(c.Overlays.svg.Diamond,[c.Overlays.Diamond,h],j),c.Overlays.svg.GuideLines=function(){var b=null,A=this,g,S;c.Overlays.GuideLines.apply(this,arguments),this.paint=function(B,Y){b==null&&(b=G("path"),B.connector.svg.appendChild(b),A.attachListeners(b,B.connector),A.attachListeners(b,A),g=G("path"),B.connector.svg.appendChild(g),A.attachListeners(g,B.connector),A.attachListeners(g,A),S=G("path"),B.connector.svg.appendChild(S),A.attachListeners(S,B.connector),A.attachListeners(S,A));var i=[0,0];Y.xmin<0&&(i[0]=-Y.xmin),Y.ymin<0&&(i[1]=-Y.ymin),U(b,{d:N(B.head,B.tail),stroke:"red",fill:null,transform:"translate("+i[0]+","+i[1]+")"}),U(g,{d:N(B.tailLine[0],B.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+i[0]+","+i[1]+")"}),U(S,{d:N(B.headLine[0],B.headLine[1]),stroke:"green",fill:null,transform:"translate("+i[0]+","+i[1]+")"})};var N=function(B,Y){return"M "+B.x+","+B.y+" L"+Y.x+","+Y.y}},X.extend(c.Overlays.svg.GuideLines,c.Overlays.GuideLines)}.call(typeof window<"u"?window:jt),function(){var K=this,c=K.jsPlumb,X=K.jsPlumbUtil,nt=K.Katavorio,q=K.Biltong,$=function(r){var d=r._mottle;return d||(d=r._mottle=new K.Mottle),d},u=function(r,d){d=d||"main";var l="_katavorio_"+d,_=r[l],x=r.getEventManager();return _||(_=new nt({bind:x.on,unbind:x.off,getSize:c.getSize,getConstrainingRectangle:function(h){return[h.parentNode.scrollWidth,h.parentNode.scrollHeight]},getPosition:function(h,j){var b=r.getOffset(h,j,h._katavorioDrag?h.offsetParent:null);return[b.left,b.top]},setPosition:function(h,j){h.style.left=j[0]+"px",h.style.top=j[1]+"px"},addClass:c.addClass,removeClass:c.removeClass,intersects:q.intersects,indexOf:function(h,j){return h.indexOf(j)},scope:r.getDefaultScope(),css:{noSelect:r.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),_.setZoom(r.getZoom()),r[l]=_,r.bind("zoom",_.setZoom)),_},T=function(r){var d=r.el._jsPlumbDragOptions,l=!0;return d.canDrag&&(l=d.canDrag()),l&&(this.setHoverSuspended(!0),this.select({source:r.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:r.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),l},a=function(r){var d=this.getUIPosition(arguments,this.getZoom());if(d!=null){var l=r.el._jsPlumbDragOptions;this.draw(r.el,d,null,!0),l._dragging&&this.addClass(r.el,"jtk-dragged"),l._dragging=!0}},n=function(r){for(var d=r.selection,l,_=function(h){var j;h[1]!=null&&(l=this.getUIPosition([{el:h[2].el,pos:[h[1].left,h[1].top]}]),j=this.draw(h[2].el,l)),h[0]._jsPlumbDragOptions!=null&&delete h[0]._jsPlumbDragOptions._dragging,this.removeClass(h[0],"jtk-dragged"),this.select({source:h[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:h[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),r.e._drawResult=r.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(r.e._drawResult.c,j.c),Array.prototype.push.apply(r.e._drawResult.e,j.e),Array.prototype.push.apply(r.e._drawResult.a,j.a),this.getDragManager().dragEnded(h[2].el)}.bind(this),x=0;x<d.length;x++)_(d[x]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},v=function(r,d){var l=function(_){if(d[_]!=null)if(X.isString(d[_])){var x=d[_].match(/-=/)?-1:1,h=d[_].substring(2);return r[_]+x*h}else return d[_];else return r[_]};return[l("left"),l("top")]},E=function(r,d){if(d==null)return[0,0];var l=M(d),_=e(l,0);return[_[r+"X"],_[r+"Y"]]},O=E.bind(this,"page"),C=E.bind(this,"screen"),f=E.bind(this,"client"),e=function(r,d){return r.item?r.item(d):r[d]},M=function(r){return r.touches&&r.touches.length>0?r.touches:r.changedTouches&&r.changedTouches.length>0?r.changedTouches:r.targetTouches&&r.targetTouches.length>0?r.targetTouches:[r]},L=function(r){var d={},l=[],_={},x={},h={};this.register=function(j){var b=r.getId(j),A;d[b]||(d[b]=j,l.push(j),_[b]={});var g=function(S){if(S){for(var N=0;N<S.childNodes.length;N++)if(S.childNodes[N].nodeType!==3&&S.childNodes[N].nodeType!==8){var B=jsPlumb.getElement(S.childNodes[N]),Y=r.getId(S.childNodes[N],null,!0);if(Y&&x[Y]&&x[Y]>0){A||(A=r.getOffset(j));var i=r.getOffset(B);_[b][Y]={id:Y,offset:{left:i.left-A.left,top:i.top-A.top}},h[Y]=b}g(S.childNodes[N])}}};g(j)},this.updateOffsets=function(j,b){if(j!=null){b=b||{};var A=jsPlumb.getElement(j),g=r.getId(A),S=_[g],N;if(S){for(var B in S)if(S.hasOwnProperty(B)){var Y=jsPlumb.getElement(B),i=b[B]||r.getOffset(Y);if(Y.offsetParent==null&&_[g][B]!=null)continue;N||(N=r.getOffset(A)),_[g][B]={id:B,offset:{left:i.left-N.left,top:i.top-N.top}},h[B]=g}}}},this.endpointAdded=function(j,b){b=b||r.getId(j);var A=document.body,g=j.parentNode;for(x[b]=x[b]?x[b]+1:1;g!=null&&g!==A;){var S=r.getId(g,null,!0);if(S&&d[S]){var N=r.getOffset(g);if(_[S][b]==null){var B=r.getOffset(j);_[S][b]={id:b,offset:{left:B.left-N.left,top:B.top-N.top}},h[b]=S}break}g=g.parentNode}},this.endpointDeleted=function(j){if(x[j.elementId]&&(x[j.elementId]--,x[j.elementId]<=0))for(var b in _)_.hasOwnProperty(b)&&_[b]&&(delete _[b][j.elementId],delete h[j.elementId])},this.changeId=function(j,b){_[b]=_[j],_[j]={},h[b]=h[j],h[j]=null},this.getElementsForDraggable=function(j){return _[j]},this.elementRemoved=function(j){var b=h[j];b&&(_[b]&&delete _[b][j],delete h[j])},this.reset=function(){d={},l=[],_={},x={}},this.dragEnded=function(j){if(j.offsetParent!=null){var b=r.getId(j),A=h[b];A&&this.updateOffsets(A)}},this.setParent=function(j,b,A,g,S){var N=h[b];_[g]||(_[g]={});var B=r.getOffset(A),Y=S||r.getOffset(j);N&&_[N]&&delete _[N][b],_[g][b]={id:b,offset:{left:Y.left-B.left,top:Y.top-B.top}},h[b]=g},this.clearParent=function(j,b){var A=h[b];A&&(delete _[A][b],delete h[b])},this.revalidateParent=function(j,b,A){var g=h[b];if(g){var S={};S[b]=A,this.updateOffsets(g,S),r.revalidate(g)}},this.getDragAncestor=function(j){var b=jsPlumb.getElement(j),A=r.getId(b),g=h[A];return g?jsPlumb.getElement(g):null}},U=function(r,d,l){d=X.fastTrim(d),typeof r.className.baseVal<"u"?r.className.baseVal=d:r.className=d;try{var _=r.classList;if(_!=null){for(;_.length>0;)_.remove(_.item(0));for(var x=0;x<l.length;x++)l[x]&&_.add(l[x])}}catch(h){X.log("JSPLUMB: cannot set class list",h)}},G=function(r){return typeof r.className.baseVal>"u"?r.className:r.className.baseVal},P=function(r,d,l){d=d==null?[]:X.isArray(d)?d:d.split(/\s+/),l=l==null?[]:X.isArray(l)?l:l.split(/\s+/);var _=G(r),x=_.split(/\s+/),h=function(j,b){for(var A=0;A<b.length;A++)if(j)x.indexOf(b[A])===-1&&x.push(b[A]);else{var g=x.indexOf(b[A]);g!==-1&&x.splice(g,1)}};h(!0,d),h(!1,l),U(r,x.join(" "),x)};K.jsPlumb.extend(K.jsPlumbInstance.prototype,{headless:!1,pageLocation:O,screenLocation:C,clientLocation:f,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new L(this)),this.dragManager},recalculateOffsets:function(r){this.getDragManager().updateOffsets(r)},createElement:function(r,d,l,_){return this.createElementNS(null,r,d,l,_)},createElementNS:function(r,d,l,_,x){var h=r==null?document.createElement(d):document.createElementNS(r,d),j;l=l||{};for(j in l)h.style[j]=l[j];_&&(h.className=_),x=x||{};for(j in x)h.setAttribute(j,""+x[j]);return h},getAttribute:function(r,d){return r.getAttribute!=null?r.getAttribute(d):null},setAttribute:function(r,d,l){r.setAttribute!=null&&r.setAttribute(d,l)},setAttributes:function(r,d){for(var l in d)d.hasOwnProperty(l)&&r.setAttribute(l,d[l])},appendToRoot:function(r){document.body.appendChild(r)},getRenderModes:function(){return["svg"]},getClass:G,addClass:function(r,d){jsPlumb.each(r,function(l){P(l,d)})},hasClass:function(r,d){return r=jsPlumb.getElement(r),r.classList?r.classList.contains(d):G(r).indexOf(d)!==-1},removeClass:function(r,d){jsPlumb.each(r,function(l){P(l,null,d)})},toggleClass:function(r,d){jsPlumb.hasClass(r,d)?jsPlumb.removeClass(r,d):jsPlumb.addClass(r,d)},updateClasses:function(r,d,l){jsPlumb.each(r,function(_){P(_,d,l)})},setClass:function(r,d){d!=null&&jsPlumb.each(r,function(l){U(l,d,d.split(/\s+/))})},setPosition:function(r,d){r.style.left=d.left+"px",r.style.top=d.top+"px"},getPosition:function(r){var d=function(l){var _=r.style[l];return _?_.substring(0,_.length-2):0};return{left:d("left"),top:d("top")}},getStyle:function(r,d){return typeof window.getComputedStyle<"u"?getComputedStyle(r,null).getPropertyValue(d):r.currentStyle[d]},getSelector:function(r,d){var l=null;return arguments.length===1?l=r.nodeType!=null?r:document.querySelectorAll(r):l=r.querySelectorAll(d),l},getOffset:function(r,d,l){r=jsPlumb.getElement(r),l=l||this.getContainer();for(var _={left:r.offsetLeft,top:r.offsetTop},x=d||l!=null&&r!==l&&r.offsetParent!==l?r.offsetParent:null,h=function(A){A!=null&&A!==document.body&&(A.scrollTop>0||A.scrollLeft>0)&&(_.left-=A.scrollLeft,_.top-=A.scrollTop)}.bind(this);x!=null;)_.left+=x.offsetLeft,_.top+=x.offsetTop,h(x),x=d?x.offsetParent:x.offsetParent===l?null:x.offsetParent;if(l!=null&&!d&&(l.scrollTop>0||l.scrollLeft>0)){var j=r.offsetParent!=null?this.getStyle(r.offsetParent,"position"):"static",b=this.getStyle(r,"position");b!=="absolute"&&b!=="fixed"&&j!=="absolute"&&j!=="fixed"&&(_.left-=l.scrollLeft,_.top-=l.scrollTop)}return _},getPositionOnElement:function(r,d,l){var _=typeof d.getBoundingClientRect<"u"?d.getBoundingClientRect():{left:0,top:0,width:0,height:0},x=document.body,h=document.documentElement,j=window.pageYOffset||h.scrollTop||x.scrollTop,b=window.pageXOffset||h.scrollLeft||x.scrollLeft,A=h.clientTop||x.clientTop||0,g=h.clientLeft||x.clientLeft||0,S=0,N=0,B=_.top+j-A+S*l,Y=_.left+b-g+N*l,i=jsPlumb.pageLocation(r),o=_.width||d.offsetWidth*l,t=_.height||d.offsetHeight*l,p=(i[0]-Y)/o,m=(i[1]-B)/t;return[p,m]},getAbsolutePosition:function(r){var d=function(l){var _=r.style[l];if(_)return parseFloat(_.substring(0,_.length-2))};return[d("left"),d("top")]},setAbsolutePosition:function(r,d,l,_){l?this.animate(r,{left:"+="+(d[0]-l[0]),top:"+="+(d[1]-l[1])},_):(r.style.left=d[0]+"px",r.style.top=d[1]+"px")},getSize:function(r){return[r.offsetWidth,r.offsetHeight]},getWidth:function(r){return r.offsetWidth},getHeight:function(r){return r.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(r,d){var l;return r=X.isArray(r)||r.length!=null&&!X.isString(r)?r:[r],Array.prototype.slice.call(r).forEach(function(_){l=this.info(_),l.el&&this._initDraggableIfNecessary(l.el,!0,d,l.id,!0)}.bind(this)),this},snapToGrid:function(r,d,l){var _=[],x=function(b){var A=this.info(b);if(A.el!=null&&A.el._katavorioDrag){var g=A.el._katavorioDrag.snap(d,l);this.revalidate(A.el),_.push([A.el,g])}}.bind(this);if(arguments.length===1||arguments.length===3)x(r,d,l);else{var h=this.getManagedElements();for(var j in h)x(j,arguments[0],arguments[1])}return _},initDraggable:function(r,d,l){u(this,l).draggable(r,d),r._jsPlumbDragOptions=d},destroyDraggable:function(r,d){u(this,d).destroyDraggable(r),r._jsPlumbDragOptions=null,r._jsPlumbRelatedElement=null},unbindDraggable:function(r,d,l,_){u(this,_).destroyDraggable(r,d,l)},setDraggable:function(r,d){return jsPlumb.each(r,function(l){this.isDragSupported(l)&&(this._draggableStates[this.getAttribute(l,"id")]=d,this.setElementDraggable(l,d))}.bind(this))},_draggableStates:{},toggleDraggable:function(r){var d;return jsPlumb.each(r,function(l){var _=this.getAttribute(l,"id");return d=this._draggableStates[_]==null?!1:this._draggableStates[_],d=!d,this._draggableStates[_]=d,this.setDraggable(l,d),d}.bind(this)),d},_initDraggableIfNecessary:function(r,d,l,_,x){if(!jsPlumb.headless){var h=d==null?!1:d;if(h&&jsPlumb.isDragSupported(r,this)){var j=l||this.Defaults.DragOptions;if(j=jsPlumb.extend({},j),jsPlumb.isAlreadyDraggable(r,this))l.force&&this.initDraggable(r,j);else{var b=jsPlumb.dragEvents.drag,A=jsPlumb.dragEvents.stop,g=jsPlumb.dragEvents.start;this.manage(_,r),j[g]=X.wrap(j[g],T.bind(this)),j[b]=X.wrap(j[b],a.bind(this)),j[A]=X.wrap(j[A],n.bind(this));var S=this.getId(r);this._draggableStates[S]=!0;var N=this._draggableStates[S];j.disabled=N==null?!1:!N,this.initDraggable(r,j),this.getDragManager().register(r),x&&this.fire("elementDraggable",{el:r,options:j})}}}},animationSupported:!0,getElement:function(r){return r==null?null:(r=typeof r=="string"?r:r.tagName==null&&r.length!=null&&r.enctype==null?r[0]:r,typeof r=="string"?document.getElementById(r):r)},removeElement:function(r){u(this).elementRemoved(r),this.getEventManager().remove(r)},doAnimate:function(r,d,l){l=l||{};var _=this.getOffset(r),x=v(_,d),h=x[0]-_.left,j=x[1]-_.top,b=l.duration||250,A=15,g=b/A,S=A/b*h,N=A/b*j,B=0,Y=setInterval(function(){c.setPosition(r,{left:_.left+S*(B+1),top:_.top+N*(B+1)}),l.step!=null&&l.step(B,Math.ceil(g)),B++,B>=g&&(window.clearInterval(Y),l.complete!=null&&l.complete())},A)},destroyDroppable:function(r,d){u(this,d).destroyDroppable(r)},unbindDroppable:function(r,d,l,_){u(this,_).destroyDroppable(r,d,l)},droppable:function(r,d){r=X.isArray(r)||r.length!=null&&!X.isString(r)?r:[r];var l;return d=d||{},d.allowLoopback=!1,Array.prototype.slice.call(r).forEach(function(_){l=this.info(_),l.el&&this.initDroppable(l.el,d)}.bind(this)),this},initDroppable:function(r,d,l){u(this,l).droppable(r,d)},isAlreadyDraggable:function(r){return r._katavorioDrag!=null},isDragSupported:function(r,d){return!0},isDropSupported:function(r,d){return!0},isElementDraggable:function(r){return r=c.getElement(r),r._katavorioDrag&&r._katavorioDrag.isEnabled()},getDragObject:function(r){return r[0].drag.getDragElement()},getDragScope:function(r){return r._katavorioDrag&&r._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(r){return r[0].e},getUIPosition:function(r,d){var l=r[0].el;if(l.offsetParent==null)return null;var _=r[0].finalPos||r[0].pos,x={left:_[0],top:_[1]};if(l._katavorioDrag&&l.offsetParent!==this.getContainer()){var h=this.getOffset(l.offsetParent);x.left+=h.left,x.top+=h.top}return x},setDragFilter:function(r,d,l){r._katavorioDrag&&r._katavorioDrag.setFilter(d,l)},setElementDraggable:function(r,d){r=c.getElement(r),r._katavorioDrag&&r._katavorioDrag.setEnabled(d)},setDragScope:function(r,d){r._katavorioDrag&&r._katavorioDrag.k.setDragScope(r,d)},setDropScope:function(r,d){r._katavorioDrop&&r._katavorioDrop.length>0&&r._katavorioDrop[0].k.setDropScope(r,d)},addToPosse:function(r,d){var l=Array.prototype.slice.call(arguments,1),_=u(this);c.each(r,function(x){x=[c.getElement(x)],x.push.apply(x,l),_.addToPosse.apply(_,x)})},setPosse:function(r,d){var l=Array.prototype.slice.call(arguments,1),_=u(this);c.each(r,function(x){x=[c.getElement(x)],x.push.apply(x,l),_.setPosse.apply(_,x)})},removeFromPosse:function(r,d){var l=Array.prototype.slice.call(arguments,1),_=u(this);c.each(r,function(x){x=[c.getElement(x)],x.push.apply(x,l),_.removeFromPosse.apply(_,x)})},removeFromAllPosses:function(r){var d=u(this);c.each(r,function(l){d.removeFromAllPosses(c.getElement(l))})},setPosseState:function(r,d,l){var _=u(this);c.each(r,function(x){_.setPosseState(c.getElement(x),d,l)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(r){r._katavorioDrag&&r._katavorioDrag.abort()},addToDragSelection:function(r){var d=this.getElement(r);d!=null&&(d._isJsPlumbGroup||d._jsPlumbGroup==null)&&u(this).select(r)},removeFromDragSelection:function(r){u(this).deselect(r)},getDragSelection:function(){return u(this).getSelection()},clearDragSelection:function(){u(this).deselectAll()},trigger:function(r,d,l,_){this.getEventManager().trigger(r,d,l,_)},doReset:function(){for(var r in this)r.indexOf("_katavorio_")===0&&this[r].reset()},getEventManager:function(){return $(this)},on:function(r,d,l){return this.getEventManager().on.apply(this,arguments),this},off:function(r,d,l){return this.getEventManager().off.apply(this,arguments),this}});var w=function(r){var d=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&document.body!=null?r():setTimeout(d,9)};d()};w(c.init)}.call(typeof window<"u"?window:jt)})(se);const De={props:{project:{required:!0}},name:"JsPlumb",data(){return{rowCount:0,itemCount:0}},mounted(){this.mountPlumb()},methods:{openFolder(){alert("hola")},determineIndent(It){let c=["left-1/4","left-1/2","left-3/4"][this.itemCount];return this.itemCount++,c},determineRow(It){let K=["","top-1/4","top-1/2"];return this.rowCount++,this.rowCount!=0&&(this.itemCount=0),K[It]},mountPlumb(){var It=this;se.jsPlumb.ready(function(){let K=window.jsp=se.jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11,id:"ARROW",events:{click:function(){alert("you clicked on the arrow overlay")}}}],["Label",{location:.1,id:"label",cssClass:"aLabel",events:{tap:function(){alert("hey")}}}]],Container:"canvas"}),c={connector:"StateMachine",paintStyle:{stroke:"red",strokeWidth:4},hoverPaintStyle:{stroke:"blue"},overlays:["Arrow"]};K.registerConnectionType("basic",c);let X={strokeWidth:2,stroke:"#61B7CF",joinstyle:"round",outlineStroke:"white",outlineWidth:2},nt={strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},q={fill:"#216477",stroke:"#216477"},$={endpoint:"Dot",paintStyle:{stroke:"#7AB02C",fill:"transparent",radius:7,strokeWidth:2},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:X,hoverPaintStyle:q,connectorHoverStyle:nt,dragOptions:{},overlays:[["Label",{location:[.5,1.5],label:"Drag",cssClass:"endpointSourceLabel",visible:!1}]]},u={endpoint:"Dot",paintStyle:{fill:"#7AB02C",radius:7},hoverPaintStyle:q,maxConnections:-1,dropOptions:{hoverClass:"hover",activeClass:"active"},isTarget:!0,overlays:[["Label",{location:[.5,-.5],label:"Drop",cssClass:"endpointTargetLabel",visible:!1}]]},T=function(n){n.getOverlay("label").setLabel(n.sourceId.substring(15)+"-"+n.targetId.substring(15))},a=function(n,v,E){for(let f=0;f<v.length;f++){let e=n+v[f];K.addEndpoint("flowchart"+n,$,{anchor:v[f],uuid:e})}for(var O=0;O<E.length;O++){var C=n+E[O];K.addEndpoint("flowchart"+n,u,{anchor:E[O],uuid:C})}};K.batch(function(){let n=["LeftMiddle","RightMiddle"];a("Window4",n,n),a("Window5",n,n),a("Window2",n,n),a("Window3",n,n),a("Window1",n,n),It.project.forEach(function(v,E){console.log(typeof v),v.forEach(function(O,C){a("Window"+C,n,n)})}),K.bind("connection",function(v,E){T(v.connection)}),K.draggable(se.jsPlumb.getSelector(".flowchart-demo .window"),{grid:[20,20]}),K.connect({uuids:["Window0RightMiddle","Window1LeftMiddle"]}),K.bind("click",function(v,E){v.toggleType("basic")}),K.bind("connectionDrag",function(v){console.log("connection "+v.id+" is being dragged. suspendedElement is ",v.suspendedElement," of type ",v.suspendedElementType)}),K.bind("connectionDragStop",function(v){console.log("connection "+v.id+" was dragged")}),K.bind("connectionMoved",function(v){console.log("connection "+v.connection.id+" was moved")})}),se.jsPlumb.fire("jsPlumbDemoLoaded",K)})}}},xe={id:"canvas",class:"jtk-demo-canvas canvas-wide flowchart-demo jtk-surface jtk-surface-nopan relative"},Ae=["id"];function we(It,K,c,X,nt,q){return ne(),ie("div",xe,[(ne(!0),ie(ye,null,be(c.project,($,u)=>(ne(),ie("div",{class:_e(["h-16 p-10 absolute w-full",q.determineRow(u)])},[Ce(de(q.determineRow(u))+" ",1),Ee("div",null,"row header "+de(u),1),(ne(!0),ie(ye,null,be($,(T,a)=>(ne(),ie("div",{class:_e(["window jtk-node",q.determineIndent(a)]),id:"flowchartWindow"+a,onClick:K[0]||(K[0]=(...n)=>q.openFolder&&q.openFolder(...n))},de(T[4]),11,Ae))),256))],2))),256))])}const Oe=Se(De,[["render",we]]);export{Oe as default};
