import{J as Rt,K as Cn,M as vn,N as pn,q as Qe,I as $e,o as qt,c as ie,a as ye,m as ve,O as Fe,T as tn,f as en,r as En,F as be,l as Ee,P as Sn,Q as nn,h as Zt,R as xn,j as he,S as le,i as Dn,U as wn,C as Oe,V as rn,W as sn,X as An,w as gn,G as Ue,Y as On,g as fe,d as de,t as on}from"./app.5b28b3be.js";import{_ as Tn}from"./_plugin-vue_export-helper.cdc0426e.js";var Le={};(function(tt){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(v){return v==0?0:v>0?1:-1});var p={subtract:function(v,S){return{x:v.x-S.x,y:v.y-S.y}},dotProduct:function(v,S){return v.x*S.x+v.y*S.y},square:function(v){return Math.sqrt(v.x*v.x+v.y*v.y)},scale:function(v,S){return{x:v.x*S,y:v.y*S}}},n=64,j=Math.pow(2,-n-1),X=function(v,S){for(var H=[],V=J(v,S),Y=S.length-1,i=2*Y-1,a=l(V,i,H,0),t=p.subtract(v,S[0]),g=p.square(t),m=0,N=0;N<a;N++){t=p.subtract(v,y(S,Y,H[N],null,null));var R=p.square(t);R<g&&(g=R,m=H[N])}return t=p.subtract(v,S[Y]),R=p.square(t),R<g&&(g=R,m=1),{location:m,distance:g}},W=function(v,S){var H=X(v,S);return{point:y(S,S.length-1,H.location,null,null),location:H.location}},J=function(v,S){for(var H=S.length-1,V=2*H-1,Y=[],i=[],a=[],t=[],g=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],m=0;m<=H;m++)Y[m]=p.subtract(S[m],v);for(var m=0;m<=H-1;m++)i[m]=p.subtract(S[m+1],S[m]),i[m]=p.scale(i[m],3);for(var N=0;N<=H-1;N++)for(var R=0;R<=H;R++)a[N]||(a[N]=[]),a[N][R]=p.dotProduct(i[N],Y[R]);for(m=0;m<=V;m++)t[m]||(t[m]=[]),t[m].y=0,t[m].x=parseFloat(m)/V;for(var K=H,B=H-1,Z=0;Z<=K+B;Z++){var ut=Math.max(0,Z-B),ot=Math.min(Z,K);for(m=ut;m<=ot;m++){var st=Z-m;t[m+st].y+=a[st][m]*g[st][m]}}return t},l=function(v,S,H,V){var Y=[],i=[],a,t,g=[],m=[];switch(T(v,S)){case 0:return 0;case 1:{if(V>=n)return H[0]=(v[0].x+v[S].x)/2,1;if(u(v,S))return H[0]=r(v,S),1;break}}y(v,S,.5,Y,i),a=l(Y,S,g,V+1),t=l(i,S,m,V+1);for(var N=0;N<a;N++)H[N]=g[N];for(var N=0;N<t;N++)H[N+a]=m[N];return a+t},T=function(v,S){var H=0,V,Y;V=Y=Math.sgn(v[0].y);for(var i=1;i<=S;i++)V=Math.sgn(v[i].y),V!=Y&&H++,Y=V;return H},u=function(v,S){var H,V,Y,i,a,t,g,m,N,R,K,B,Z,ut,ot,st;t=v[0].y-v[S].y,g=v[S].x-v[0].x,m=v[0].x*v[S].y-v[S].x*v[0].y;var at,gt;at=gt=0;for(var dt=1;dt<S;dt++){var lt=t*v[dt].x+g*v[dt].y+m;lt>at?at=lt:lt<gt&&(gt=lt)}return K=0,B=1,Z=0,ut=t,ot=g,st=m-at,N=K*ot-ut*B,R=1/N,V=(B*st-ot*Z)*R,ut=t,ot=g,st=m-gt,N=K*ot-ut*B,R=1/N,Y=(B*st-ot*Z)*R,i=Math.min(V,Y),a=Math.max(V,Y),H=a-i,H<j?1:0},r=function(v,S){var H=1,V=0,Y=v[S].x-v[0].x,i=v[S].y-v[0].y,a=v[0].x-0,t=v[0].y-0,g=Y*V-i*H,m=1/g,N=(Y*t-i*a)*m;return 0+H*N},y=function(v,S,H,V,Y){for(var i=[[]],a=0;a<=S;a++)i[0][a]=v[a];for(var t=1;t<=S;t++)for(var a=0;a<=S-t;a++)i[t]||(i[t]=[]),i[t][a]||(i[t][a]={}),i[t][a].x=(1-H)*i[t-1][a].x+H*i[t-1][a+1].x,i[t][a].y=(1-H)*i[t-1][a].y+H*i[t-1][a+1].y;if(V!=null)for(a=0;a<=S;a++)V[a]=i[a][0];if(Y!=null)for(a=0;a<=S;a++)Y[a]=i[S-a][a];return i[S][0]},x={},I=function(v){var S=x[v];if(!S){S=[];var H=function(){return function(R){return Math.pow(R,v)}},V=function(){return function(R){return Math.pow(1-R,v)}},Y=function(R){return function(K){return R}},i=function(){return function(R){return R}},a=function(){return function(R){return 1-R}},t=function(R){return function(K){for(var B=1,Z=0;Z<R.length;Z++)B=B*R[Z](K);return B}};S.push(new H);for(var g=1;g<v;g++){for(var m=[new Y(v)],N=0;N<v-g;N++)m.push(new i);for(var N=0;N<g;N++)m.push(new a);S.push(new t(m))}S.push(new V),x[v]=S}return S},C=function(v,S){for(var H=I(v.length-1),V=0,Y=0,i=0;i<v.length;i++)V=V+v[i].x*H[i](S),Y=Y+v[i].y*H[i](S);return{x:V,y:Y}},d=function(v,S){return Math.sqrt(Math.pow(v.x-S.x,2)+Math.pow(v.y-S.y,2))},e=function(v){return v[0].x===v[1].x&&v[0].y===v[1].y},L=function(v,S,H){if(e(v))return{point:v[0],location:S};for(var V=C(v,S),Y=0,i=S,a=H>0?1:-1,t=null;Y<Math.abs(H);)i+=.005*a,t=C(v,i),Y+=d(t,V),V=t;return{point:t,location:i}},F=function(v){var S=new Date().getTime();if(e(v))return 0;for(var H=C(v,0),V=0,Y=0,i=1,a=null;Y<1;)Y+=.005*i,a=C(v,Y),V+=d(a,H),H=a;return console.log("length",new Date().getTime()-S),V},U=function(v,S,H){return L(v,S,H).point},G=function(v,S,H){return L(v,S,H).location},E=function(v,S){var H=C(v,S),V=C(v.slice(0,v.length-1),S),Y=V.y-H.y,i=V.x-H.x;return Y===0?1/0:Math.atan(Y/i)},O=function(v,S,H){var V=L(v,S,H);return V.location>1&&(V.location=1),V.location<0&&(V.location=0),E(v,V.location)},s=function(v,S,H,V){V=V==null?0:V;var Y=L(v,S,V),i=E(v,Y.location),a=Math.atan(-1/i),t=H/2*Math.sin(a),g=H/2*Math.cos(a);return[{x:Y.point.x+g,y:Y.point.y+t},{x:Y.point.x-g,y:Y.point.y-t}]},f=function(v,S,H,V,Y){var i=V-S,a=v-H,t=v*(S-V)+S*(H-v),g=h(Y),m=[i*g[0][0]+a*g[1][0],i*g[0][1]+a*g[1][1],i*g[0][2]+a*g[1][2],i*g[0][3]+a*g[1][3]+t],N=_.apply(null,m),R=[];if(N!=null)for(var K=0;K<3;K++){var B=N[K],Z=Math.pow(B,2),ut=Math.pow(B,3),ot=[g[0][0]*ut+g[0][1]*Z+g[0][2]*B+g[0][3],g[1][0]*ut+g[1][1]*Z+g[1][2]*B+g[1][3]],st;H-v!==0?st=(ot[0]-v)/(H-v):st=(ot[1]-S)/(V-S),B>=0&&B<=1&&st>=0&&st<=1&&R.push(ot)}return R},c=function(v,S,H,V,Y){var i=[];return i.push.apply(i,f(v,S,v+H,S,Y)),i.push.apply(i,f(v+H,S,v+H,S+V,Y)),i.push.apply(i,f(v+H,S+V,v,S+V,Y)),i.push.apply(i,f(v,S+V,v,S,Y)),i},P=function(v,S){var H=[];return H.push.apply(H,f(v.x,v.y,v.x+v.w,v.y,S)),H.push.apply(H,f(v.x+v.w,v.y,v.x+v.w,v.y+v.h,S)),H.push.apply(H,f(v.x+v.w,v.y+v.h,v.x,v.y+v.h,S)),H.push.apply(H,f(v.x,v.y+v.h,v.x,v.y,S)),H};function D(v,S){return[-v[0][S]+3*v[1][S]+-3*v[2][S]+v[3][S],3*v[0][S]-6*v[1][S]+3*v[2][S],-3*v[0][S]+3*v[1][S],v[0][S]]}function h(v){return[D(v,"x"),D(v,"y")]}function M(v){return v<0?-1:v>0?1:0}function _(v,S,H,V){var Y=S/v,i=H/v,a=V/v,t=(3*i-Math.pow(Y,2))/9,g=(9*Y*i-27*a-2*Math.pow(Y,3))/54,m=Math.pow(t,3)+Math.pow(g,2),N,R,K=[];if(m>=0)N=M(g+Math.sqrt(m))*Math.pow(Math.abs(g+Math.sqrt(m)),1/3),R=M(g-Math.sqrt(m))*Math.pow(Math.abs(g-Math.sqrt(m)),1/3),K[0]=-Y/3+(N+R),K[1]=-Y/3-(N+R)/2,K[2]=-Y/3-(N+R)/2,Math.abs(Math.sqrt(3)*(N-R)/2)!==0&&(K[1]=-1,K[2]=-1);else{var B=Math.acos(g/Math.sqrt(-Math.pow(t,3)));K[0]=2*Math.sqrt(-t)*Math.cos(B/3)-Y/3,K[1]=2*Math.sqrt(-t)*Math.cos((B+2*Math.PI)/3)-Y/3,K[2]=2*Math.sqrt(-t)*Math.cos((B+4*Math.PI)/3)-Y/3}for(var Z=0;Z<3;Z++)(K[Z]<0||K[Z]>1)&&(K[Z]=-1);return K}var A=this.jsBezier={distanceFromCurve:X,gradientAtPoint:E,gradientAtPointAlongCurveFrom:O,nearestPointOnCurve:W,pointOnCurve:C,pointAlongCurveFrom:U,perpendicularToCurveAt:s,locationAlongCurveFrom:G,getLength:F,lineIntersection:f,boxIntersection:c,boundingBoxIntersection:P,version:"0.9.0"};tt.jsBezier=A}).call(typeof window<"u"?window:Rt),function(){var p=this,n=p.Biltong={version:"0.4.0"};tt.Biltong=n;var j=function(u){return Object.prototype.toString.call(u)==="[object Array]"},X=function(u,r,y){return u=j(u)?u:[u.x,u.y],r=j(r)?r:[r.x,r.y],y(u,r)},W=n.gradient=function(u,r){return X(u,r,function(y,x){return x[0]==y[0]?x[1]>y[1]?1/0:-1/0:x[1]==y[1]?x[0]>y[0]?0:-0:(x[1]-y[1])/(x[0]-y[0])})};n.normal=function(u,r){return-1/W(u,r)},n.lineLength=function(u,r){return X(u,r,function(y,x){return Math.sqrt(Math.pow(x[1]-y[1],2)+Math.pow(x[0]-y[0],2))})};var J=n.quadrant=function(u,r){return X(u,r,function(y,x){return x[0]>y[0]||x[0]==y[0]?x[1]>y[1]?2:1:x[1]>y[1]?3:4})};n.theta=function(u,r){return X(u,r,function(y,x){var I=W(y,x),C=Math.atan(I),d=J(y,x);return(d==4||d==3)&&(C+=Math.PI),C<0&&(C+=2*Math.PI),C})},n.intersects=function(u,r){var y=u.x,x=u.x+u.w,I=u.y,C=u.y+u.h,d=r.x,e=r.x+r.w,L=r.y,F=r.y+r.h;return y<=d&&d<=x&&I<=L&&L<=C||y<=e&&e<=x&&I<=L&&L<=C||y<=d&&d<=x&&I<=F&&F<=C||y<=e&&d<=x&&I<=F&&F<=C||d<=y&&y<=e&&L<=I&&I<=F||d<=x&&x<=e&&L<=I&&I<=F||d<=y&&y<=e&&L<=C&&C<=F||d<=x&&y<=e&&L<=C&&C<=F},n.encloses=function(u,r,y){var x=u.x,I=u.x+u.w,C=u.y,d=u.y+u.h,e=r.x,L=r.x+r.w,F=r.y,U=r.y+r.h,G=function(E,O,s,f){return y?E<=O&&s>=f:E<O&&s>f};return G(x,e,I,L)&&G(C,F,d,U)};var l=[null,[1,-1],[1,1],[-1,1],[-1,-1]],T=[null,[-1,-1],[-1,1],[1,1],[1,-1]];n.pointOnLine=function(u,r,y){var x=W(u,r),I=J(u,r),C=y>0?l[I]:T[I],d=Math.atan(x),e=Math.abs(y*Math.sin(d))*C[1],L=Math.abs(y*Math.cos(d))*C[0];return{x:u.x+L,y:u.y+e}},n.perpendicularLineTo=function(u,r,y){var x=W(u,r),I=Math.atan(-1/x),C=y/2*Math.sin(I),d=y/2*Math.cos(I);return[{x:r.x+d,y:r.y+C},{x:r.x-d,y:r.y-C}]}}.call(typeof window<"u"?window:Rt),function(){function p(i,a,t,g,m,N,R,K){return new Touch({target:a,identifier:Y(),pageX:t,pageY:g,screenX:m,screenY:N,clientX:R||m,clientY:K||N})}function n(){var i=[];return Array.prototype.push.apply(i,arguments),i.item=function(a){return this[a]},i}function j(i,a,t,g,m,N,R,K){return n(p.apply(null,arguments))}var X=this,W=function(i,a,t){t=t||i.parentNode;for(var g=t.querySelectorAll(a),m=0;m<g.length;m++)if(g[m]===i)return!0;return!1},J=function(i){return typeof i=="string"||i.constructor===String?document.getElementById(i):i},l=function(i){return i.srcElement||i.target},T=function(i,a,t,g){if(g){if(typeof i.path<"u"&&i.path.indexOf)return{path:i.path,end:i.path.indexOf(t)};var m={path:[],end:-1},N=function(R){m.path.push(R),R===t?m.end=m.path.length-1:R.parentNode!=null&&N(R.parentNode)};return N(a),m}else return{path:[a],end:1}},u=function(i,a){for(var t=0,g=i.length;t<g&&i[t]!=a;t++);t<i.length&&i.splice(t,1)},r=1,y=function(i,a,t){var g=r++;return i.__ta=i.__ta||{},i.__ta[a]=i.__ta[a]||{},i.__ta[a][g]=t,t.__tauid=g,g},x=function(i,a,t){if(i.__ta&&i.__ta[a]&&delete i.__ta[a][t.__tauid],t.__taExtra){for(var g=0;g<t.__taExtra.length;g++)H(i,t.__taExtra[g][0],t.__taExtra[g][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()},I=function(i,a,t,g){if(i==null)return t;var m=i.split(","),N=function(R){N.__tauid=t.__tauid;var K=l(R),B=K,Z=T(R,K,a,i!=null);if(Z.end!=-1)for(var ut=0;ut<Z.end;ut++){B=Z.path[ut];for(var ot=0;ot<m.length;ot++)W(B,m[ot],a)&&t.apply(B,arguments)}};return C(t,g,N),N},C=function(i,a,t){i.__taExtra=i.__taExtra||[],i.__taExtra.push([a,t])},d=function(i,a,t,g){if(E&&s[a]){var m=I(g,i,t,s[a]);S(i,s[a],m,t)}a==="focus"&&i.getAttribute("tabindex")==null&&i.setAttribute("tabindex","1"),S(i,a,I(g,i,t,a),t)},e=function(i,a,t,g){if(i.__taSmartClicks==null){var m=function(K){i.__tad=D(K)},N=function(K){i.__tau=D(K)},R=function(K){if(i.__tad&&i.__tau&&i.__tad[0]===i.__tau[0]&&i.__tad[1]===i.__tau[1])for(var B=0;B<i.__taSmartClicks.length;B++)i.__taSmartClicks[B].apply(l(K),[K])};d(i,"mousedown",m,g),d(i,"mouseup",N,g),d(i,"click",R,g),i.__taSmartClicks=[]}i.__taSmartClicks.push(t),t.__taUnstore=function(){u(i.__taSmartClicks,t)}},L={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},F=function(i,a){return function(t,g,m,N){if(g=="contextmenu"&&O)d(t,g,m,N);else{if(t.__taTapHandler==null){var R=t.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},K=function(ot){for(var st=l(ot),at=T(ot,st,t,N!=null),gt=!1,dt=0;dt<at.end;dt++){if(gt)return;st=at.path[dt];for(var lt=0;lt<R.downSelectors.length;lt++)if(R.downSelectors[lt]==null||W(st,R.downSelectors[lt],t)){R.down=!0,setTimeout(Z,i),setTimeout(ut,a),gt=!0;break}}},B=function(ot){if(R.down){var st=l(ot),at,gt;R.taps++;var dt=v(ot);for(var lt in L)if(L.hasOwnProperty(lt)){var yt=L[lt];if(yt.touches===dt&&(yt.taps===1||yt.taps===R.taps))for(var mt=0;mt<R[lt].length;mt++){gt=T(ot,st,t,R[lt][mt][1]!=null);for(var et=0;et<gt.end;et++)if(at=gt.path[et],R[lt][mt][1]==null||W(at,R[lt][mt][1],t)){R[lt][mt][0].apply(at,[ot]);break}}}}},Z=function(){R.down=!1},ut=function(){R.taps=0};d(t,"mousedown",K),d(t,"mouseup",B)}t.__taTapHandler.downSelectors.push(N),t.__taTapHandler[g].push([m,N]),m.__taUnstore=function(){u(t.__taTapHandler[g],m)}}}},U=function(i,a,t,g){for(var m in t.__tamee[i])t.__tamee[i].hasOwnProperty(m)&&t.__tamee[i][m].apply(g,[a])},G=function(){var i=[];return function(a,t,g,m){if(!a.__tamee){a.__tamee={over:!1,mouseenter:[],mouseexit:[]};var N=function(K){var B=l(K);(m==null&&B==a&&!a.__tamee.over||W(B,m,a)&&(B.__tamee==null||!B.__tamee.over))&&(U("mouseenter",K,a,B),B.__tamee=B.__tamee||{},B.__tamee.over=!0,i.push(B))},R=function(K){for(var B=l(K),Z=0;Z<i.length;Z++)B==i[Z]&&!W(K.relatedTarget||K.toElement,"*",B)&&(B.__tamee.over=!1,i.splice(Z,1),U("mouseexit",K,a,B))};S(a,"mouseover",I(m,a,N,"mouseover"),N),S(a,"mouseout",I(m,a,R,"mouseout"),R)}g.__taUnstore=function(){delete a.__tamee[t][g.__tauid]},y(a,t,g),a.__tamee[t][g.__tauid]=g}},E="ontouchstart"in document.documentElement||navigator.maxTouchPoints,O="onmousedown"in document.documentElement,s={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},f=function(){var i=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(a)!=null&&(i=parseFloat(RegExp.$1))}return i}(),c=f>-1&&f<9,P=function(i,a){if(i==null)return[0,0];var t=A(i),g=_(t,0);return[g[a+"X"],g[a+"Y"]]},D=function(i){return i==null?[0,0]:c?[i.clientX+document.documentElement.scrollLeft,i.clientY+document.documentElement.scrollTop]:P(i,"page")},h=function(i){return P(i,"screen")},M=function(i){return P(i,"client")},_=function(i,a){return i.item?i.item(a):i[a]},A=function(i){return i.touches&&i.touches.length>0?i.touches:i.changedTouches&&i.changedTouches.length>0?i.changedTouches:i.targetTouches&&i.targetTouches.length>0?i.targetTouches:[i]},v=function(i){return A(i).length},S=function(i,a,t,g){if(y(i,a,t),g.__tauid=t.__tauid,i.addEventListener)i.addEventListener(a,t,!1);else if(i.attachEvent){var m=a+t.__tauid;i["e"+m]=t,i[m]=function(){i["e"+m]&&i["e"+m](window.event)},i.attachEvent("on"+a,i[m])}},H=function(i,a,t){t!=null&&V(i,function(){var g=J(this);if(x(g,a,t),t.__tauid!=null){if(g.removeEventListener)g.removeEventListener(a,t,!1),E&&s[a]&&g.removeEventListener(s[a],t,!1);else if(this.detachEvent){var m=a+t.__tauid;g[m]&&g.detachEvent("on"+a,g[m]),g[m]=null,g["e"+m]=null}}t.__taTouchProxy&&H(i,t.__taTouchProxy[1],t.__taTouchProxy[0])})},V=function(i,a){if(i!=null){i=typeof Window<"u"&&typeof i.top!="unknown"&&i==i.top?[i]:typeof i!="string"&&i.tagName==null&&i.length!=null?i:typeof i=="string"?document.querySelectorAll(i):[i];for(var t=0;t<i.length;t++)a.apply(i[t])}},Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var a=Math.random()*16|0,t=i=="x"?a:a&3|8;return t.toString(16)})};X.Mottle=function(i){i=i||{};var a=i.clickThreshold||250,t=i.dblClickThreshold||450,g=new G,m=new F(a,t),N=i.smartClicks,R=function(K,B,Z,ut){Z!=null&&V(K,function(){var ot=J(this);N&&B==="click"?e(ot,B,Z,ut):B==="tap"||B==="dbltap"||B==="contextmenu"?m(ot,B,Z,ut):B==="mouseenter"||B=="mouseexit"?g(ot,B,Z,ut):d(ot,B,Z,ut)})};this.remove=function(K){return V(K,function(){var B=J(this);if(B.__ta){for(var Z in B.__ta)if(B.__ta.hasOwnProperty(Z))for(var ut in B.__ta[Z])B.__ta[Z].hasOwnProperty(ut)&&H(B,Z,B.__ta[Z][ut])}B.parentNode&&B.parentNode.removeChild(B)}),this},this.on=function(K,B,Z,ut){var ot=arguments[0],st=arguments.length==4?arguments[2]:null,at=arguments[1],gt=arguments[arguments.length-1];return R(ot,at,gt,st),this},this.off=function(K,B,Z){return H(K,B,Z),this},this.trigger=function(K,B,Z,ut){var ot=O&&(typeof MouseEvent>"u"||Z==null||Z.constructor===MouseEvent),st=E&&!O&&s[B]?s[B]:B,at=!(E&&!O&&s[B]),gt=D(Z),dt=h(Z),lt=M(Z);return V(K,function(){var yt=J(this),mt;Z=Z||{screenX:dt[0],screenY:dt[1],clientX:lt[0],clientY:lt[1]};var et=function(ht){ut&&(ht.payload=ut)},$={TouchEvent:function(ht){var Ct=j(window,yt,0,gt[0],gt[1],dt[0],dt[1],lt[0],lt[1]),wt=ht.initTouchEvent||ht.initEvent;wt(st,!0,!0,window,null,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,Ct,Ct,Ct,1,0)},MouseEvents:function(ht){ht.initMouseEvent(st,!0,!0,window,0,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,1,yt)}};if(document.createEvent){var q=!at&&!ot&&E&&s[B],nt=q?"TouchEvent":"MouseEvents";mt=document.createEvent(nt),$[nt](mt),et(mt),yt.dispatchEvent(mt)}else document.createEventObject&&(mt=document.createEventObject(),mt.eventType=mt.eventName=st,mt.screenX=dt[0],mt.screenY=dt[1],mt.clientX=lt[0],mt.clientY=lt[1],et(mt),yt.fireEvent("on"+st,mt))}),this}},X.Mottle.consume=function(i,a){i.stopPropagation?i.stopPropagation():i.returnValue=!1,!a&&i.preventDefault&&i.preventDefault()},X.Mottle.pageLocation=D,X.Mottle.setForceTouchEvents=function(i){E=i},X.Mottle.setForceMouseEvents=function(i){O=i},X.Mottle.version="0.8.0",tt.Mottle=X.Mottle}.call(typeof window>"u"?Rt:window),function(){var p=this,n=function(i,a,t){return i.indexOf(a)===-1?(t?i.unshift(a):i.push(a),!0):!1},j=function(i,a){var t=i.indexOf(a);t!==-1&&i.splice(t,1)},X=function(i,a){for(var t=[],g=0;g<i.length;g++)a.indexOf(i[g])===-1&&t.push(i[g]);return t},W=function(i){return i==null?!1:typeof i=="string"||i.constructor===String},J=function(i){var a=i.getBoundingClientRect(),t=document.body,g=document.documentElement,m=window.pageYOffset||g.scrollTop||t.scrollTop,N=window.pageXOffset||g.scrollLeft||t.scrollLeft,R=g.clientTop||t.clientTop||0,K=g.clientLeft||t.clientLeft||0,B=a.top+m-R,Z=a.left+N-K;return{top:Math.round(B),left:Math.round(Z)}},l=function(i,a,t){t=t||i.parentNode;for(var g=t.querySelectorAll(a),m=0;m<g.length;m++)if(g[m]===i)return!0;return!1},T=function(i,a,t){if(l(a,t,i))return a;for(var g=a.parentNode;g!=null&&g!==i;){if(l(g,t,i))return g;g=g.parentNode}},u=function(i,a,t){for(var g=null,m=a.getAttribute("katavorio-draggable"),N=m!=null?"[katavorio-draggable='"+m+"'] ":"",R=0;R<i.length;R++)if(g=T(a,t,N+i[R].selector),g!=null){if(i[R].filter){var K=l(t,i[R].filter,g),B=i[R].filterExclude===!0;if(B&&!K||K)return null}return[i[R],g]}return null},r=function(){var i=-1;if(navigator.appName==="Microsoft Internet Explorer"){var a=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(a)!=null&&(i=parseFloat(RegExp.$1))}return i}(),y=10,x=10,I=r>-1&&r<9,C=r===9,d=function(i){if(I)return[i.clientX+document.documentElement.scrollLeft,i.clientY+document.documentElement.scrollTop];var a=L(i),t=e(a,0);return C?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},e=function(i,a){return i.item?i.item(a):i[a]},L=function(i){return i.touches&&i.touches.length>0?i.touches:i.changedTouches&&i.changedTouches.length>0?i.changedTouches:i.targetTouches&&i.targetTouches.length>0?i.targetTouches:[i]},F={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},U="katavorio-drag-scope",G=["stop","start","drag","drop","over","out","beforeStart"],E=function(){},O=function(){return!0},s=function(i,a,t){for(var g=0;g<i.length;g++)i[g]!=t&&a(i[g])},f=function(i,a,t,g){s(i,function(m){m.setActive(a),a&&m.updatePosition(),t&&m.setHover(g,a)})},c=function(i,a){if(i!=null){i=!W(i)&&i.tagName==null&&i.length!=null?i:[i];for(var t=0;t<i.length;t++)a.apply(i[t],[i[t]])}},P=function(i){i.stopPropagation?(i.stopPropagation(),i.preventDefault()):i.returnValue=!1},D="input,textarea,select,button,option",h=function(i,a,t){var g=i.srcElement||i.target;return!l(g,t.getInputFilterSelector(),a)},M=function(i,a,t,g){this.params=a||{},this.el=i,this.params.addClass(this.el,this._class),this.uuid=H();var m=!0;return this.setEnabled=function(N){m=N},this.isEnabled=function(){return m},this.toggleEnabled=function(){m=!m},this.setScope=function(N){this.scopes=N?N.split(/\s+/):[g]},this.addScope=function(N){var R={};c(this.scopes,function(B){R[B]=!0}),c(N?N.split(/\s+/):[],function(B){R[B]=!0}),this.scopes=[];for(var K in R)this.scopes.push(K)},this.removeScope=function(N){var R={};c(this.scopes,function(B){R[B]=!0}),c(N?N.split(/\s+/):[],function(B){delete R[B]}),this.scopes=[];for(var K in R)this.scopes.push(K)},this.toggleScope=function(N){var R={};c(this.scopes,function(B){R[B]=!0}),c(N?N.split(/\s+/):[],function(B){R[B]?delete R[B]:R[B]=!0}),this.scopes=[];for(var K in R)this.scopes.push(K)},this.setScope(a.scope),this.k=a.katavorio,a.katavorio},_=function(){return!0},A=function(){return!1},v=function(i,a,t,g){this._class=t.draggable;var m=M.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var N=[0,0],R=null,K=null,B=[0,0],Z=!1,ut=[0,0],ot=this.params.consumeStartEvent!==!1,st=this.el,at=this.params.clone;this.params.scroll;var gt=a.multipleDrop!==!1,dt=!1,lt,yt,mt=null,et=[],$=null,q=a.ghostProxyParent,nt,ht,Ct,wt;if(a.ghostProxy===!0?lt=_:a.ghostProxy&&typeof a.ghostProxy=="function"?lt=a.ghostProxy:lt=function(it,Pt){return $&&$.useGhostProxy?$.useGhostProxy(it,Pt):!1},a.makeGhostProxy?yt=a.makeGhostProxy:yt=function(it){return $&&$.makeGhostProxy?$.makeGhostProxy(it):it.cloneNode(!0)},a.selector){var It=i.getAttribute("katavorio-draggable");It==null&&(It=""+new Date().getTime(),i.setAttribute("katavorio-draggable",It)),et.push(a)}var jt=a.snapThreshold,Tt=function(it,Pt,Et,_t,xt){var Ot=Math.floor(it[0]/Pt),o=Pt*Ot,w=o+Pt,b=Math.abs(it[0]-o)<=_t?o:Math.abs(w-it[0])<=_t?w:it[0],k=Math.floor(it[1]/Et),z=Et*k,Q=z+Et,rt=Math.abs(it[1]-z)<=xt?z:Math.abs(Q-it[1])<=xt?Q:it[1];return[b,rt]};this.posses=[],this.posseRoles={},this.toGrid=function(it){if(this.params.grid==null)return it;var Pt=this.params.grid?this.params.grid[0]/2:jt||y/2,Et=this.params.grid?this.params.grid[1]/2:jt||x/2;return Tt(it,this.params.grid[0],this.params.grid[1],Pt,Et)},this.snap=function(it,Pt){if(st!=null){it=it||(this.params.grid?this.params.grid[0]:y),Pt=Pt||(this.params.grid?this.params.grid[1]:x);var Et=this.params.getPosition(st),_t=this.params.grid?this.params.grid[0]/2:jt,xt=this.params.grid?this.params.grid[1]/2:jt,Ot=Tt(Et,it,Pt,_t,xt);return this.params.setPosition(st,Ot),Ot}},this.setUseGhostProxy=function(it){lt=it?_:A};var Nt,Kt=function(it){return a.allowNegative===!1?[Math.max(0,it[0]),Math.max(0,it[1])]:it},kt=function(it){Nt=typeof it=="function"?it:it?function(Pt,Et,_t,xt){return Kt([Math.max(0,Math.min(_t.w-xt[0],Pt[0])),Math.max(0,Math.min(_t.h-xt[1],Pt[1]))])}.bind(this):function(Pt){return Kt(Pt)}}.bind(this);kt(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(it){kt(it)};var Ut=function(it,Pt,Et,_t){return $!=null&&$.constrain&&typeof $.constrain=="function"?$.constrain(it,Pt,Et,_t):Nt(it,Pt,Et,_t)},Ft;this.setRevert=function(it){Ft=it},this.params.revert&&(Ft=this.params.revert);var Yt=function(it){return typeof it=="function"?(it._katavorioId=H(),it._katavorioId):it},Gt={},Ht=function(it){for(var Pt in Gt){var Et=Gt[Pt],_t=Et[0](it);if(Et[1]&&(_t=!_t),!_t)return!1}return!0},$t=this.setFilter=function(it,Pt){if(it){var Et=Yt(it);Gt[Et]=[function(_t){var xt=_t.srcElement||_t.target,Ot;return W(it)?Ot=l(xt,it,i):typeof it=="function"&&(Ot=it(_t,i)),Ot},Pt!==!1]}};this.addFilter=$t,this.removeFilter=function(it){var Pt=typeof it=="function"?it._katavorioId:it;delete Gt[Pt]},this.clearAllFilters=function(){Gt={}},this.canDrag=this.params.canDrag||O;var zt,At=[],Vt=[];this.addSelector=function(it){it.selector&&et.push(it)},this.downListener=function(it){if(!it.defaultPrevented){var Pt=this.rightButtonCanDrag||it.which!==3&&it.button!==2;if(Pt&&this.isEnabled()&&this.canDrag()){var Et=Ht(it)&&h(it,this.el,this.k);if(Et){if($=null,mt=null,et.length>0){var _t=u(et,this.el,it.target||it.srcElement);if(_t!=null&&($=_t[0],mt=_t[1]),mt==null)return}else mt=this.el;if(at)if(st=mt.cloneNode(!0),this.params.addClass(st,F.clonedDrag),st.setAttribute("id",null),st.style.position="absolute",this.params.parent!=null){var xt=this.params.getPosition(this.el);st.style.left=xt[0]+"px",st.style.top=xt[1]+"px",this.params.parent.appendChild(st)}else{var Ot=J(mt);st.style.left=Ot.left+"px",st.style.top=Ot.top+"px",document.body.appendChild(st)}else st=mt;ot&&P(it),N=d(it),st&&st.parentNode&&(ut=[st.parentNode.scrollLeft,st.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),m.markSelection(this),m.markPosses(this),this.params.addClass(document.body,t.noSelect),te("beforeStart",{el:this.el,pos:R,e:it,drag:this})}else this.params.consumeFilteredEvents&&P(it)}}}.bind(this),this.moveListener=function(it){if(N){if(!Z){var Pt=te("start",{el:this.el,pos:R,e:it,drag:this});if(Pt!==!1){if(!N)return;this.mark(!0),Z=!0}else this.abort()}if(N){Vt.length=0;var Et=d(it),_t=Et[0]-N[0],xt=Et[1]-N[1],Ot=this.params.ignoreZoom?1:m.getZoom();st&&st.parentNode&&(_t+=st.parentNode.scrollLeft-ut[0],xt+=st.parentNode.scrollTop-ut[1]),_t/=Ot,xt/=Ot,this.moveBy(_t,xt,it),m.updateSelection(_t,xt,this),m.updatePosses(_t,xt,this)}}}.bind(this),this.upListener=function(it){N&&(N=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,t.noSelect),this.unmark(it),m.unmarkSelection(this,it),m.unmarkPosses(this,it),this.stop(it),m.notifyPosseDragStop(this,it),Z=!1,Vt.length=0,at?(st&&st.parentNode&&st.parentNode.removeChild(st),st=null):Ft&&Ft(st,this.params.getPosition(st))===!0&&(this.params.setPosition(st,R),te("revert",st)))}.bind(this),this.getFilters=function(){return Gt},this.abort=function(){N!=null&&this.upListener()},this.getDragElement=function(it){return it?mt||this.el:st||this.el};var Lt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};a.events.start&&Lt.start.push(a.events.start),a.events.beforeStart&&Lt.beforeStart.push(a.events.beforeStart),a.events.stop&&Lt.stop.push(a.events.stop),a.events.drag&&Lt.drag.push(a.events.drag),a.events.revert&&Lt.revert.push(a.events.revert),this.on=function(it,Pt){Lt[it]&&Lt[it].push(Pt)},this.off=function(it,Pt){if(Lt[it]){for(var Et=[],_t=0;_t<Lt[it].length;_t++)Lt[it][_t]!==Pt&&Et.push(Lt[it][_t]);Lt[it]=Et}};var te=function(it,Pt){var Et=null;if($&&$[it])Et=$[it](Pt);else if(Lt[it])for(var _t=0;_t<Lt[it].length;_t++)try{var xt=Lt[it][_t](Pt);xt!=null&&(Et=xt)}catch{}return Et};this.notifyStart=function(it){te("start",{el:this.el,pos:this.params.getPosition(st),e:it,drag:this})},this.stop=function(it,Pt){if(Pt||Z){var Et=[],_t=m.getSelection(),xt=this.params.getPosition(st);if(_t.length>0)for(var Ot=0;Ot<_t.length;Ot++){var o=this.params.getPosition(_t[Ot].el);Et.push([_t[Ot].el,{left:o[0],top:o[1]},_t[Ot]])}else Et.push([st,{left:xt[0],top:xt[1]},this]);te("stop",{el:st,pos:se||xt,finalPos:xt,e:it,drag:this,selection:Et})}},this.mark=function(it){R=this.params.getPosition(st),K=this.params.getPosition(st,!0),B=[K[0]-R[0],K[1]-R[1]],this.size=this.params.getSize(st),At=m.getMatchingDroppables(this),f(At,!0,!1,this),this.params.addClass(st,this.params.dragClass||t.drag);var Pt;this.params.getConstrainingRectangle?Pt=this.params.getConstrainingRectangle(st):Pt=this.params.getSize(st.parentNode),zt={w:Pt[0],h:Pt[1]},Ct=0,wt=0,it&&m.notifySelectionDragStart(this)};var se;this.unmark=function(it,Pt){if(f(At,!1,!0,this),dt&&lt(mt,st)?(se=[st.offsetLeft-Ct,st.offsetTop-wt],st.parentNode.removeChild(st),st=mt):se=null,this.params.removeClass(st,this.params.dragClass||t.drag),At.length=0,dt=!1,!Pt){Vt.length>0&&se&&a.setPosition(mt,se),Vt.sort(V);for(var Et=0;Et<Vt.length;Et++){var _t=Vt[Et].drop(this,it);if(_t===!0)break}}},this.moveBy=function(it,Pt,Et){Vt.length=0;var _t=this.toGrid([R[0]+it,R[1]+Pt]),xt=Ut(_t,st,zt,this.size);if(lt(this.el,st))if(_t[0]!==xt[0]||_t[1]!==xt[1]){if(!dt){var Ot=yt(mt);a.addClass(Ot,F.ghostProxy),q?(q.appendChild(Ot),nt=a.getPosition(mt.parentNode,!0),ht=a.getPosition(a.ghostProxyParent,!0),Ct=nt[0]-ht[0],wt=nt[1]-ht[1]):mt.parentNode.appendChild(Ot),st=Ot,dt=!0}xt=_t}else dt&&(st.parentNode.removeChild(st),st=mt,dt=!1,nt=null,ht=null,Ct=0,wt=0);var o={x:xt[0],y:xt[1],w:this.size[0],h:this.size[1]},w={x:o.x+B[0],y:o.y+B[1],w:o.w,h:o.h},b=null;this.params.setPosition(st,[xt[0]+Ct,xt[1]+wt]);for(var k=0;k<At.length;k++){var z={x:At[k].pagePosition[0],y:At[k].pagePosition[1],w:At[k].size[0],h:At[k].size[1]};this.params.intersects(w,z)&&(gt||b==null||b===At[k].el)&&At[k].canDrop(this)?(b||(b=At[k].el),Vt.push(At[k]),At[k].setHover(this,!0,Et)):At[k].isHover()&&At[k].setHover(this,!1,Et)}te("drag",{el:this.el,pos:xt,e:Et,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?$t(this.params.handle,!1):$t(this.params.filter,this.params.filterExclude)},S=function(i,a,t,g){this._class=t.droppable,this.params=a||{},this.rank=a.rank||0,this._activeClass=this.params.activeClass||t.active,this._hoverClass=this.params.hoverClass||t.hover,M.apply(this,arguments);var m=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(N){this.params[N?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(N){return!0},this.isHover=function(){return m},this.setHover=function(N,R,K){(R||this.el._katavorioDragHover==null||this.el._katavorioDragHover===N.el._katavorio)&&(this.params[R?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=R?N.el._katavorio:null,m!==R&&this.params.events[R?"over":"out"]({el:this.el,e:K,drag:N,drop:this}),m=R)},this.drop=function(N,R){return this.params.events.drop({drag:N,e:R,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,m=null}},H=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var a=Math.random()*16|0,t=i==="x"?a:a&3|8;return t.toString(16)})},V=function(i,a){return i.rank<a.rank?1:i.rank>a.rank?-1:0},Y=function(i){return i==null||(i=typeof i=="string"||i.constructor===String?document.getElementById(i):i,i==null)?null:(i._katavorio=i._katavorio||H(),i)};p.Katavorio=function(i){var a=[],t={};this._dragsByScope={},this._dropsByScope={};var g=1,m=function(et,$){c(et,function(q){for(var nt=0;nt<q.scopes.length;nt++)$[q.scopes[nt]]=$[q.scopes[nt]]||[],$[q.scopes[nt]].push(q)})},N=function(et,$){var q=0;return c(et,function(nt){for(var ht=0;ht<nt.scopes.length;ht++)if($[nt.scopes[ht]]){var Ct=i.indexOf($[nt.scopes[ht]],nt);Ct!==-1&&($[nt.scopes[ht]].splice(Ct,1),q++)}}),q>0};this.getMatchingDroppables=function(et){for(var $=[],q={},nt=0;nt<et.scopes.length;nt++){var ht=this._dropsByScope[et.scopes[nt]];if(ht)for(var Ct=0;Ct<ht.length;Ct++)ht[Ct].canDrop(et)&&!q[ht[Ct].uuid]&&(ht[Ct].allowLoopback||ht[Ct].el!==et.el)&&(q[ht[Ct].uuid]=!0,$.push(ht[Ct]))}return $.sort(V),$};var R=function(et){et=et||{};var $={events:{}},q;for(q in i)$[q]=i[q];for(q in et)$[q]=et[q];for(q=0;q<G.length;q++)$.events[G[q]]=et[G[q]]||E;return $.katavorio=this,$}.bind(this),K=function(et,$){for(var q=0;q<G.length;q++)$[G[q]]&&et.on(G[q],$[G[q]])}.bind(this),B={},Z=i.css||{},ut=i.scope||U;for(var ot in F)B[ot]=F[ot];for(var ot in Z)B[ot]=Z[ot];var st=i.inputFilterSelector||D;this.getInputFilterSelector=function(){return st},this.setInputFilterSelector=function(et){return st=et,this},this.draggable=function(et,$){var q=[];return c(et,function(nt){if(nt=Y(nt),nt!=null)if(nt._katavorioDrag==null){var ht=R($);nt._katavorioDrag=new v(nt,ht,B,ut),m(nt._katavorioDrag,this._dragsByScope),q.push(nt._katavorioDrag),i.addClass(nt,ht.selector?B.delegatedDraggable:B.draggable)}else K(nt._katavorioDrag,$)}.bind(this)),q},this.droppable=function(et,$){var q=[];return c(et,function(nt){if(nt=Y(nt),nt!=null){var ht=new S(nt,R($),B,ut);nt._katavorioDrop=nt._katavorioDrop||[],nt._katavorioDrop.push(ht),m(ht,this._dropsByScope),q.push(ht),i.addClass(nt,B.droppable)}}.bind(this)),q},this.select=function(et){return c(et,function(){var $=Y(this);$&&$._katavorioDrag&&(t[$._katavorio]||(a.push($._katavorioDrag),t[$._katavorio]=[$,a.length-1],i.addClass($,B.selected)))}),this},this.deselect=function(et){return c(et,function(){var $=Y(this);if($&&$._katavorio){var q=t[$._katavorio];if(q){for(var nt=[],ht=0;ht<a.length;ht++)a[ht].el!==$&&nt.push(a[ht]);a=nt,delete t[$._katavorio],i.removeClass($,B.selected)}}}),this},this.deselectAll=function(){for(var et in t){var $=t[et];i.removeClass($[0],B.selected)}a.length=0,t={}},this.markSelection=function(et){s(a,function($){$.mark()},et)},this.markPosses=function(et){et.posses&&c(et.posses,function($){et.posseRoles[$]&&yt[$]&&s(yt[$].members,function(q){q.mark()},et)})},this.unmarkSelection=function(et,$){s(a,function(q){q.unmark($)},et)},this.unmarkPosses=function(et,$){et.posses&&c(et.posses,function(q){et.posseRoles[q]&&yt[q]&&s(yt[q].members,function(nt){nt.unmark($,!0)},et)})},this.getSelection=function(){return a.slice(0)},this.updateSelection=function(et,$,q){s(a,function(nt){nt.moveBy(et,$)},q)};var at=function(et,$){$.posses&&c($.posses,function(q){$.posseRoles[q]&&yt[q]&&s(yt[q].members,function(nt){et(nt)},$)})};this.updatePosses=function(et,$,q){at(function(nt){nt.moveBy(et,$)},q)},this.notifyPosseDragStop=function(et,$){at(function(q){q.stop($,!0)},et)},this.notifySelectionDragStop=function(et,$){s(a,function(q){q.stop($,!0)},et)},this.notifySelectionDragStart=function(et,$){s(a,function(q){q.notifyStart($)},et)},this.setZoom=function(et){g=et},this.getZoom=function(){return g};var gt=function(et,$,q,nt){c(et,function(ht){N(ht,q),ht[nt]($),m(ht,q)})};c(["set","add","remove","toggle"],function(et){this[et+"Scope"]=function($,q){gt($._katavorioDrag,q,this._dragsByScope,et+"Scope"),gt($._katavorioDrop,q,this._dropsByScope,et+"Scope")}.bind(this),this[et+"DragScope"]=function($,q){gt($.constructor===v?$:$._katavorioDrag,q,this._dragsByScope,et+"Scope")}.bind(this),this[et+"DropScope"]=function($,q){gt($.constructor===S?$:$._katavorioDrop,q,this._dropsByScope,et+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(et,$){for(var q in this._dragsByScope)s(this._dragsByScope[q],function(nt){nt.snap(et,$)})},this.getDragsForScope=function(et){return this._dragsByScope[et]},this.getDropsForScope=function(et){return this._dropsByScope[et]};var dt=function(et,$,q){if(et=Y(et),et[$]){var nt=a.indexOf(et[$]);nt>=0&&a.splice(nt,1),N(et[$],q)&&c(et[$],function(ht){ht.destroy()}),delete et[$]}},lt=function(et,$,q,nt){et=Y(et),et[$]&&et[$].off(q,nt)};this.elementRemoved=function(et){et._katavorioDrag&&this.destroyDraggable(et),et._katavorioDrop&&this.destroyDroppable(et)},this.destroyDraggable=function(et,$,q){arguments.length===1?dt(et,"_katavorioDrag",this._dragsByScope):lt(et,"_katavorioDrag",$,q)},this.destroyDroppable=function(et,$,q){arguments.length===1?dt(et,"_katavorioDrop",this._dropsByScope):lt(et,"_katavorioDrop",$,q)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},a=[],t={},yt={}};var yt={},mt=function(et,$,q){var nt=W($)?$:$.id,ht=W($)?!0:$.active!==!1,Ct=yt[nt]||function(){var wt={name:nt,members:[]};return yt[nt]=wt,wt}();return c(et,function(wt){if(wt._katavorioDrag){if(q&&wt._katavorioDrag.posseRoles[Ct.name]!=null)return;n(Ct.members,wt._katavorioDrag),n(wt._katavorioDrag.posses,Ct.name),wt._katavorioDrag.posseRoles[Ct.name]=ht}}),Ct};this.addToPosse=function(et,$){for(var q=[],nt=1;nt<arguments.length;nt++)q.push(mt(et,arguments[nt]));return q.length===1?q[0]:q},this.setPosse=function(et,$){for(var q=[],nt=1;nt<arguments.length;nt++)q.push(mt(et,arguments[nt],!0).name);return c(et,function(ht){if(ht._katavorioDrag){var Ct=X(ht._katavorioDrag.posses,q),wt=[];Array.prototype.push.apply(wt,ht._katavorioDrag.posses);for(var It=0;It<Ct.length;It++)this.removeFromPosse(ht,Ct[It])}}.bind(this)),q.length===1?q[0]:q},this.removeFromPosse=function(et,$){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var q=1;q<arguments.length;q++)$=arguments[q],c(et,function(nt){if(nt._katavorioDrag&&nt._katavorioDrag.posses){var ht=nt._katavorioDrag;c($,function(Ct){j(yt[Ct].members,ht),j(ht.posses,Ct),delete ht.posseRoles[Ct]})}})},this.removeFromAllPosses=function(et){c(et,function($){if($._katavorioDrag&&$._katavorioDrag.posses){var q=$._katavorioDrag;c(q.posses,function(nt){j(yt[nt].members,q)}),q.posses.length=0,q.posseRoles={}}})},this.setPosseState=function(et,$,q){var nt=yt[$];nt&&c(et,function(ht){ht._katavorioDrag&&ht._katavorioDrag.posses&&(ht._katavorioDrag.posseRoles[nt.name]=q)})}},p.Katavorio.version="1.0.0",tt.Katavorio=p.Katavorio}.call(typeof window<"u"?window:Rt),function(){var p=this;p.jsPlumbUtil=p.jsPlumbUtil||{};var n=p.jsPlumbUtil;tt.jsPlumbUtil=n;function j(i){return Object.prototype.toString.call(i)==="[object Array]"}n.isArray=j;function X(i){return Object.prototype.toString.call(i)==="[object Number]"}n.isNumber=X;function W(i){return typeof i=="string"}n.isString=W;function J(i){return typeof i=="boolean"}n.isBoolean=J;function l(i){return i==null}n.isNull=l;function T(i){return i==null?!1:Object.prototype.toString.call(i)==="[object Object]"}n.isObject=T;function u(i){return Object.prototype.toString.call(i)==="[object Date]"}n.isDate=u;function r(i){return Object.prototype.toString.call(i)==="[object Function]"}n.isFunction=r;function y(i){return r(i)&&i.name!=null&&i.name.length>0}n.isNamedFunction=y;function x(i){for(var a in i)if(i.hasOwnProperty(a))return!1;return!0}n.isEmpty=x;function I(i){if(W(i))return""+i;if(J(i))return!!i;if(u(i))return new Date(i.getTime());if(r(i))return i;if(j(i)){for(var a=[],t=0;t<i.length;t++)a.push(I(i[t]));return a}else if(T(i)){var g={};for(var m in i)g[m]=I(i[m]);return g}else return i}n.clone=I;function C(i,a,t,g){var m={},N,R,K={};for(t=t||[],g=g||[],R=0;R<t.length;R++)m[t[R]]=!0;for(R=0;R<g.length;R++)K[g[R]]=!0;var B=I(i);for(R in a)if(B[R]==null||K[R])B[R]=a[R];else if(W(a[R])||J(a[R]))m[R]?(N=[],N.push.apply(N,j(B[R])?B[R]:[B[R]]),N.push.apply(N,J(a[R])?a[R]:[a[R]]),B[R]=N):B[R]=a[R];else if(j(a[R]))N=[],j(B[R])&&N.push.apply(N,B[R]),N.push.apply(N,a[R]),B[R]=N;else if(T(a[R])){T(B[R])||(B[R]={});for(var Z in a[R])B[R][Z]=a[R][Z]}return B}n.merge=C;function d(i,a,t){if(i!=null){var g=i,m=g;return a.replace(/([^\.])+/g,function(N,R,K,B){var Z=N.match(/([^\[0-9]+){1}(\[)([0-9+])/),ut=K+N.length>=B.length,ot=function(){return m[Z[1]]||function(){return m[Z[1]]=[],m[Z[1]]}()};if(ut)Z?ot()[Z[3]]=t:m[N]=t;else if(Z){var st=ot();m=st[Z[3]]||function(){return st[Z[3]]={},st[Z[3]]}()}else m=m[N]||function(){return m[N]={},m[N]}();return""}),i}}n.replace=d;function e(i,a,t){for(var g=0;g<t.length;g++){var m=t[g][0][t[g][1]].apply(t[g][0],t[g][2]);if(m===a)return m}return i}n.functionChain=e;function L(i,a,t,g){var m=function(R){var K=R.match(/(\${.*?})/g);if(K!=null)for(var B=0;B<K.length;B++){var Z=a[K[B].substring(2,K[B].length-1)]||"";Z!=null&&(R=R.replace(K[B],Z))}return R},N=function(R){if(R!=null){if(W(R))return m(R);if(r(R)&&!g&&(t==null||(R.name||"").indexOf(t)===0))return R(a);if(j(R)){for(var K=[],B=0;B<R.length;B++)K.push(N(R[B]));return K}else if(T(R)){var Z={};for(var ut in R)Z[ut]=N(R[ut]);return Z}else return R}};return N(i)}n.populate=L;function F(i,a){if(i){for(var t=0;t<i.length;t++)if(a(i[t]))return t}return-1}n.findWithFunction=F;function U(i,a){var t=F(i,a);return t>-1&&i.splice(t,1),t!==-1}n.removeWithFunction=U;function G(i,a){var t=i.indexOf(a);return t>-1&&i.splice(t,1),t!==-1}n.remove=G;function E(i,a,t){F(i,t)===-1&&i.push(a)}n.addWithFunction=E;function O(i,a,t,g){var m=i[a];return m==null&&(m=[],i[a]=m),m[g?"unshift":"push"](t),m}n.addToList=O;function s(i,a,t){return i.indexOf(a)===-1?(t?i.unshift(a):i.push(a),!0):!1}n.suggest=s;function f(i,a,t){var g;a=j(a)?a:[a];var m=function(B){for(var Z=B.__proto__;Z!=null;)if(Z.prototype!=null){for(var ut in Z.prototype)Z.prototype.hasOwnProperty(ut)&&!i.prototype.hasOwnProperty(ut)&&(i.prototype[ut]=Z.prototype[ut]);Z=Z.prototype.__proto__}else Z=null};for(g=0;g<a.length;g++){for(var N in a[g].prototype)a[g].prototype.hasOwnProperty(N)&&!i.prototype.hasOwnProperty(N)&&(i.prototype[N]=a[g].prototype[N]);m(a[g])}var R=function(B,Z){return function(){for(g=0;g<a.length;g++)a[g].prototype[B]&&a[g].prototype[B].apply(this,arguments);return Z.apply(this,arguments)}},K=function(B){for(var Z in B)i.prototype[Z]=R(Z,B[Z])};if(arguments.length>2)for(g=2;g<arguments.length;g++)K(arguments[g]);return i}n.extend=f;for(var c=[],P=0;P<256;P++)c[P]=(P<16?"0":"")+P.toString(16);function D(){var i=Math.random()*4294967295|0,a=Math.random()*4294967295|0,t=Math.random()*4294967295|0,g=Math.random()*4294967295|0;return c[i&255]+c[i>>8&255]+c[i>>16&255]+c[i>>24&255]+"-"+c[a&255]+c[a>>8&255]+"-"+c[a>>16&15|64]+c[a>>24&255]+"-"+c[t&63|128]+c[t>>8&255]+"-"+c[t>>16&255]+c[t>>24&255]+c[g&255]+c[g>>8&255]+c[g>>16&255]+c[g>>24&255]}n.uuid=D;function h(i){if(i==null)return null;for(var a=i.replace(/^\s\s*/,""),t=/\s/,g=a.length;t.test(a.charAt(--g)););return a.slice(0,g+1)}n.fastTrim=h;function M(i,a){i=i.length==null||typeof i=="string"?[i]:i;for(var t=0;t<i.length;t++)a(i[t])}n.each=M;function _(i,a){for(var t=[],g=0;g<i.length;g++)t.push(a(i[g]));return t}n.map=_;function A(i,a,t){t=t||"parent";var g=function(B){return B?a[B]:null},m=function(B){return B?g(B[t]):null},N=function(B,Z){if(B==null)return Z;var ut=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];Z.mergeStrategy==="override"&&Array.prototype.push.apply(ut,["events","overlays"]);var ot=C(B,Z,[],ut);return N(m(B),ot)},R=function(B){if(B==null)return{};if(typeof B=="string")return g(B);if(B.length){for(var Z=!1,ut=0,ot=void 0;!Z&&ut<B.length;)ot=R(B[ut]),ot?Z=!0:ut++;return ot}},K=R(i);return K?N(m(K),K):{}}n.mergeWithParents=A,n.logEnabled=!0;function v(){if(n.logEnabled&&typeof console<"u")try{var i=arguments[arguments.length-1];console.log(i)}catch{}}n.log=v;function S(i,a,t){return function(){var g=null;try{a!=null&&(g=a.apply(this,arguments))}catch(m){v("jsPlumb function failed : "+m)}if(i!=null&&(t==null||g!==t))try{g=i.apply(this,arguments)}catch(m){v("wrapped function failed : "+m)}return g}}n.wrap=S;var H=function(){function i(){var a=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,g,m){var N=function(K){O(a._listeners,K,g,m),g.__jsPlumb=g.__jsPlumb||{},g.__jsPlumb[D()]=K};if(typeof t=="string")N(t);else if(t.length!=null)for(var R=0;R<t.length;R++)N(t[R]);return a},this.fire=function(t,g,m){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var N=this._listeners[t].length,R=0,K=!1,B=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,g,m))for(;!K&&R<N&&B!==!1;){if(this.eventsToDieOn[t])this._listeners[t][R].apply(this,[g,m]);else try{B=this._listeners[t][R].apply(this,[g,m])}catch(Z){v("jsPlumb: fire failed for event "+t+" : "+Z)}R++,(this._listeners==null||this._listeners[t]==null)&&(K=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=a.queue.pop();t&&a.fire.apply(a,t)},this.unbind=function(t,g){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var m=void 0;for(var N in t.__jsPlumb)m=t.__jsPlumb[N],G(this._listeners[m]||[],t)}}else arguments.length===2&&G(this._listeners[t]||[],g);return this},this.getListener=function(t){return a._listeners[t]},this.setSuspendEvents=function(t){a.eventsSuspended=t},this.isSuspendEvents=function(){return a.eventsSuspended},this.silently=function(t){a.setSuspendEvents(!0);try{t()}catch(g){v("Cannot execute silent function "+g)}a.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in a._listeners)a._listeners[t]=null}}return i}();n.EventGenerator=H;function V(i,a,t){var g=[i[0]-a[0],i[1]-a[1]],m=Math.cos(t/360*Math.PI*2),N=Math.sin(t/360*Math.PI*2);return[g[0]*m-g[1]*N+a[0],g[1]*m+g[0]*N+a[1],m,N]}n.rotatePoint=V;function Y(i,a){var t=V(i,[0,0],a);return[Math.round(t[0]),Math.round(t[1])]}n.rotateAnchorOrientation=Y}.call(typeof window<"u"?window:Rt),function(){var p=this;p.jsPlumbUtil.matchesSelector=function(n,j,X){X=X||n.parentNode;for(var W=X.querySelectorAll(j),J=0;J<W.length;J++)if(W[J]===n)return!0;return!1},p.jsPlumbUtil.consume=function(n,j){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!j&&n.preventDefault&&n.preventDefault()},p.jsPlumbUtil.sizeElement=function(n,j,X,W,J){n&&(n.style.height=J+"px",n.height=J,n.style.width=W+"px",n.width=W,n.style.left=j+"px",n.style.top=X+"px")}}.call(typeof window<"u"?window:Rt),function(){var p={deriveAnchor:function(W,J,l,T){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[W][J]}},n=this,j=function(W,J){this.count=0,this.instance=W,this.lists={},this.options=J||{},this.instance.addList=function(l,T){return this.listManager.addList(l,T)},this.instance.removeList=function(l){this.listManager.removeList(l)},this.instance.bind("manageElement",function(l){for(var T=this.instance.getSelector(l.el,"[jtk-scrollable-list]"),u=0;u<T.length;u++)this.addList(T[u])}.bind(this)),this.instance.bind("unmanageElement",function(l){this.removeList(l.el)}),this.instance.bind("connection",function(l,T){T==null&&(this._maybeUpdateParentList(l.source),this._maybeUpdateParentList(l.target))}.bind(this))};n.jsPlumbListManager=j,j.prototype={addList:function(W,J){var l=this.instance.extend({},p);this.instance.extend(l,this.options),J=this.instance.extend(l,J||{});var T=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[T]=new X(this.instance,W,J,T)},removeList:function(W){var J=this.lists[W._jsPlumbList];J&&(J.destroy(),delete this.lists[W._jsPlumbList])},_maybeUpdateParentList:function(W){for(var J=W.parentNode,l=this.instance.getContainer();J!=null&&J!==l;){if(J._jsPlumbList!=null&&this.lists[J._jsPlumbList]!=null){J._jsPlumbScrollHandler();return}J=J.parentNode}}};var X=function(W,J,l,T){J._jsPlumbList=T;function u(I,C,d,e){return l.anchor?l.anchor:l.deriveAnchor(I,C,d,e)}function r(I,C,d,e){return l.deriveEndpoint?l.deriveEndpoint(I,C,d,e):l.endpoint?l.endpoint:d.type}function y(I){for(var C=I.parentNode,d=W.getContainer();C!=null&&C!==d;){if(W.hasClass(C,"jtk-managed")){W.recalculateOffsets(C);return}C=C.parentNode}}var x=function(I){for(var C=W.getSelector(J,".jtk-managed"),d=W.getId(J),e=0;e<C.length;e++){if(C[e].offsetTop<J.scrollTop)C[e]._jsPlumbProxies||(C[e]._jsPlumbProxies=C[e]._jsPlumbProxies||[],W.select({source:C[e]}).each(function(F){W.proxyConnection(F,0,J,d,function(){return r("top",0,F.endpoints[0],F)},function(){return u("top",0,F.endpoints[0],F)}),C[e]._jsPlumbProxies.push([F,0])}),W.select({target:C[e]}).each(function(F){W.proxyConnection(F,1,J,d,function(){return r("top",1,F.endpoints[1],F)},function(){return u("top",1,F.endpoints[1],F)}),C[e]._jsPlumbProxies.push([F,1])}));else if(C[e].offsetTop+C[e].offsetHeight>J.scrollTop+J.offsetHeight)C[e]._jsPlumbProxies||(C[e]._jsPlumbProxies=C[e]._jsPlumbProxies||[],W.select({source:C[e]}).each(function(F){W.proxyConnection(F,0,J,d,function(){return r("bottom",0,F.endpoints[0],F)},function(){return u("bottom",0,F.endpoints[0],F)}),C[e]._jsPlumbProxies.push([F,0])}),W.select({target:C[e]}).each(function(F){W.proxyConnection(F,1,J,d,function(){return r("bottom",1,F.endpoints[1],F)},function(){return u("bottom",1,F.endpoints[1],F)}),C[e]._jsPlumbProxies.push([F,1])}));else if(C[e]._jsPlumbProxies){for(var L=0;L<C[e]._jsPlumbProxies.length;L++)W.unproxyConnection(C[e]._jsPlumbProxies[L][0],C[e]._jsPlumbProxies[L][1],d);delete C[e]._jsPlumbProxies}W.revalidate(C[e])}y(J)};W.setAttribute(J,"jtk-scrollable-list","true"),J._jsPlumbScrollHandler=x,W.on(J,"scroll",x),x(),this.destroy=function(){W.off(J,"scroll",x),delete J._jsPlumbScrollHandler;for(var I=W.getSelector(J,".jtk-managed"),C=W.getId(J),d=0;d<I.length;d++)if(I[d]._jsPlumbProxies){for(var e=0;e<I[d]._jsPlumbProxies.length;e++)W.unproxyConnection(I[d]._jsPlumbProxies[e][0],I[d]._jsPlumbProxies[e][1],C);delete I[d]._jsPlumbProxies}}}}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumbUtil,j=function(d){if(d._jsPlumb.paintStyle&&d._jsPlumb.hoverPaintStyle){var e={};C.extend(e,d._jsPlumb.paintStyle),C.extend(e,d._jsPlumb.hoverPaintStyle),delete d._jsPlumb.hoverPaintStyle,e.gradient&&d._jsPlumb.paintStyle.fill&&delete e.gradient,d._jsPlumb.hoverPaintStyle=e}},X=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],W=function(d,e,L,F){var U=d.getAttachedElements();if(U)for(var G=0,E=U.length;G<E;G++)(!F||F!==U[G])&&U[G].setHover(e,!0,L)},J=function(d){return d==null?null:d.split(" ")},l=function(d,e,L){for(var F in e)d[F]=L},T=function(d,e,L){if(d.getDefaultType){var F=d.getTypeDescriptor(),U={},G=d.getDefaultType(),E=n.merge({},G);l(U,G,"__default");for(var O=0,s=d._jsPlumb.types.length;O<s;O++){var f=d._jsPlumb.types[O];if(f!=="__default"){var c=d._jsPlumb.instance.getType(f,F);if(c!=null){var P=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],D=[];c.mergeStrategy==="override"?Array.prototype.push.apply(P,["events","overlays","cssClass"]):D.push("cssClass"),E=n.merge(E,c,D,P),l(U,c,f)}}}e&&(E=n.populate(E,e,"_")),d.applyType(E,L,U),L||d.repaint()}},u=p.jsPlumbUIComponent=function(d){n.EventGenerator.apply(this,arguments);var e=this,L=arguments,F=e.idPrefix,U=F+new Date().getTime();this._jsPlumb={instance:d._jsPlumb,parameters:d.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:d.beforeDetach,beforeDrop:d.beforeDrop,overlayPlacements:[],hoverClass:d.hoverClass||d._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(D,h,M){this._jsPlumb.typeCache[M]=this._jsPlumb.typeCache[M]||{},this._jsPlumb.typeCache[M][D]=h},this.getCachedTypeItem=function(D,h){return this._jsPlumb.typeCache[h]?this._jsPlumb.typeCache[h][D]:null},this.getId=function(){return U};var G=d.overlays||[],E={};if(this.defaultOverlayKeys){for(var O=0;O<this.defaultOverlayKeys.length;O++)Array.prototype.push.apply(G,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[O]]||[]);for(O=0;O<G.length;O++){var s=C.convertToFullOverlaySpec(G[O]);E[s[1].id]=s}}var f={overlays:E,parameters:d.parameters||{},scope:d.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return f},this.appendToDefaultType=function(D){for(var h in D)f[h]=D[h]},d.events)for(var c in d.events)e.bind(c,d.events[c]);this.clone=function(){var D=Object.create(this.constructor.prototype);return this.constructor.apply(D,L),D}.bind(this),this.isDetachAllowed=function(D){var h=!0;if(this._jsPlumb.beforeDetach)try{h=this._jsPlumb.beforeDetach(D)}catch(M){n.log("jsPlumb: beforeDetach callback failed",M)}return h},this.isDropAllowed=function(D,h,M,_,A,v,S){var H=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:D,targetId:h,scope:M,connection:_,dropEndpoint:A,source:v,target:S});if(this._jsPlumb.beforeDrop)try{H=this._jsPlumb.beforeDrop({sourceId:D,targetId:h,scope:M,connection:_,dropEndpoint:A,source:v,target:S})}catch(V){n.log("jsPlumb: beforeDrop callback failed",V)}return H};var P=[];this.setListenerComponent=function(D){for(var h=0;h<P.length;h++)P[h][3]=D}},r=function(d,e){var L=d._jsPlumb.types[e],F=d._jsPlumb.instance.getType(L,d.getTypeDescriptor());F!=null&&F.cssClass&&d.canvas&&d._jsPlumb.instance.removeClass(d.canvas,F.cssClass)};n.extend(p.jsPlumbUIComponent,n.EventGenerator,{getParameter:function(d){return this._jsPlumb.parameters[d]},setParameter:function(d,e){this._jsPlumb.parameters[d]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(d){this._jsPlumb.parameters=d},getClass:function(){return C.getClass(this.canvas)},hasClass:function(d){return C.hasClass(this.canvas,d)},addClass:function(d){C.addClass(this.canvas,d)},removeClass:function(d){C.removeClass(this.canvas,d)},updateClasses:function(d,e){C.updateClasses(this.canvas,d,e)},setType:function(d,e,L){this.clearTypes(),this._jsPlumb.types=J(d)||[],T(this,e,L)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(d,e){T(this,d,e)},hasType:function(d){return this._jsPlumb.types.indexOf(d)!==-1},addType:function(d,e,L){var F=J(d),U=!1;if(F!=null){for(var G=0,E=F.length;G<E;G++)this.hasType(F[G])||(this._jsPlumb.types.push(F[G]),U=!0);U&&T(this,e,L)}},removeType:function(d,e,L){var F=J(d),U=!1,G=function(s){var f=this._jsPlumb.types.indexOf(s);return f!==-1?(r(this,f),this._jsPlumb.types.splice(f,1),!0):!1}.bind(this);if(F!=null){for(var E=0,O=F.length;E<O;E++)U=G(F[E])||U;U&&T(this,e,L)}},clearTypes:function(d,e){for(var L=this._jsPlumb.types.length,F=0;F<L;F++)r(this,0),this._jsPlumb.types.splice(0,1);T(this,d,e)},toggleType:function(d,e,L){var F=J(d);if(F!=null){for(var U=0,G=F.length;U<G;U++){var E=this._jsPlumb.types.indexOf(F[U]);E!==-1?(r(this,E),this._jsPlumb.types.splice(E,1)):this._jsPlumb.types.push(F[U])}T(this,e,L)}},applyType:function(d,e){if(this.setPaintStyle(d.paintStyle,e),this.setHoverPaintStyle(d.hoverPaintStyle,e),d.parameters)for(var L in d.parameters)this.setParameter(L,d.parameters[L]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(d,e){this._jsPlumb.paintStyle=d,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,j(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(d,e){this._jsPlumb.hoverPaintStyle=d,j(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(d){(d||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(d,e,L){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=d;var F=d?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[F](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[F](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=d?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(L=L||jsPlumbUtil.uuid(),this.repaint({timestamp:L,recalc:!1}))),this.getAttachedElements&&!e&&W(this,d,jsPlumbUtil.uuid(),this)}}});var y=0,x=function(){var d=y+1;return y++,d},I=p.jsPlumbInstance=function(d){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},d&&C.extend(this.Defaults,d),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},n.EventGenerator.apply(this);var e=this,L=x(),F=e.bind,U={},G=1,E=function(o){if(o==null)return null;if(o.nodeType===3||o.nodeType===8)return{el:o,text:!0};var w=e.getElement(o);return{el:w,id:n.isString(o)&&w==null?o:lt(w)}};this.getInstanceIndex=function(){return L},this.setZoom=function(o,w){return G=o,e.fire("zoom",G),w&&e.repaintEverything(),!0},this.getZoom=function(){return G};for(var O in this.Defaults)U[O]=this.Defaults[O];var s,f=[];this.unbindContainer=function(){if(s!=null&&f.length>0)for(var o=0;o<f.length;o++)e.off(s,f[o][0],f[o][1])},this.setContainer=function(o){this.unbindContainer(),o=this.getElement(o),this.select().each(function(vt){vt.moveParent(o)}),this.selectEndpoints().each(function(vt){vt.moveParent(o)});var w=s;s=o,f.length=0;for(var b={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},k=function(vt,ft,St){var bt=ft.srcElement||ft.target,Dt=(bt&&bt.parentNode?bt.parentNode._jsPlumb:null)||(bt?bt._jsPlumb:null)||(bt&&bt.parentNode&&bt.parentNode.parentNode?bt.parentNode.parentNode._jsPlumb:null);if(Dt){Dt.fire(vt,Dt,ft);var Mt=St&&b[St+vt]||vt;e.fire(Mt,Dt.component||Dt,ft)}},z=function(vt,ft,St){f.push([vt,St]),e.on(s,vt,ft,St)},Q=function(vt){z(vt,".jtk-connector",function(ft){k(vt,ft)}),z(vt,".jtk-endpoint",function(ft){k(vt,ft,"endpoint")}),z(vt,".jtk-overlay",function(ft){k(vt,ft)})},rt=0;rt<X.length;rt++)Q(X[rt]);for(var pt in _){var ct=_[pt].el;ct.parentNode===w&&(w.removeChild(ct),s.appendChild(ct))}},this.getContainer=function(){return s},this.bind=function(o,w){o==="ready"&&P?w():F.apply(e,[o,w])},e.importDefaults=function(o){for(var w in o)e.Defaults[w]=o[w];return o.Container&&e.setContainer(o.Container),e},e.restoreDefaults=function(){return e.Defaults=C.extend({},U),e};var c=null,P=!1,D=[],h={},M={},_={},A={},v={},S=!1,H=[],V=!1,Y=null,i=this.Defaults.Scope,a=1,t=function(){return""+a++},g=function(o,w){s?s.appendChild(o):w?this.getElement(w).appendChild(o):this.appendToRoot(o)}.bind(this),m=function(o,w,b,k){var z={c:[],e:[]};if(!V&&(o=e.getElement(o),o!=null)){var Q=lt(o),rt=o.querySelectorAll(".jtk-managed");b==null&&(b=jsPlumbUtil.uuid()),At({elId:Q,offset:w,recalc:!1,timestamp:b});for(var pt=0;pt<rt.length;pt++)At({elId:rt[pt].getAttribute("id"),recalc:!0,timestamp:b});var ct=e.router.redraw(Q,w,b,null,k);if(Array.prototype.push.apply(z.c,ct.c),Array.prototype.push.apply(z.e,ct.e),rt)for(var vt=0;vt<rt.length;vt++)ct=e.router.redraw(rt[vt].getAttribute("id"),null,b,null,k,!0),Array.prototype.push.apply(z.c,ct.c),Array.prototype.push.apply(z.e,ct.e)}return z},N=function(o){return M[o]},R=function(o,w){for(var b=o.scope.split(/\s/),k=w.scope.split(/\s/),z=0;z<b.length;z++)for(var Q=0;Q<k.length;Q++)if(k[Q]===b[z])return!0;return!1},K=function(o,w){var b=C.extend({},o);for(var k in w)w[k]&&(b[k]=w[k]);return b},B=function(o,w){var b=C.extend({},o);if(w&&C.extend(b,w),b.source&&(b.source.endpoint?b.sourceEndpoint=b.source:b.source=e.getElement(b.source)),b.target&&(b.target.endpoint?b.targetEndpoint=b.target:b.target=e.getElement(b.target)),o.uuids&&(b.sourceEndpoint=N(o.uuids[0]),b.targetEndpoint=N(o.uuids[1])),b.sourceEndpoint&&b.sourceEndpoint.isFull()){n.log(e,"could not add connection; source endpoint is full");return}if(b.targetEndpoint&&b.targetEndpoint.isFull()){n.log(e,"could not add connection; target endpoint is full");return}if(!b.type&&b.sourceEndpoint&&(b.type=b.sourceEndpoint.connectionType),b.sourceEndpoint&&b.sourceEndpoint.connectorOverlays){b.overlays=b.overlays||[];for(var k=0,z=b.sourceEndpoint.connectorOverlays.length;k<z;k++)b.overlays.push(b.sourceEndpoint.connectorOverlays[k])}b.sourceEndpoint&&b.sourceEndpoint.scope&&(b.scope=b.sourceEndpoint.scope),!b["pointer-events"]&&b.sourceEndpoint&&b.sourceEndpoint.connectorPointerEvents&&(b["pointer-events"]=b.sourceEndpoint.connectorPointerEvents);var Q=function(pt,ct,vt){var ft=K(ct,{anchor:b.anchors?b.anchors[vt]:b.anchor,endpoint:b.endpoints?b.endpoints[vt]:b.endpoint,paintStyle:b.endpointStyles?b.endpointStyles[vt]:b.endpointStyle,hoverPaintStyle:b.endpointHoverStyles?b.endpointHoverStyles[vt]:b.endpointHoverStyle});return e.addEndpoint(pt,ft)},rt=function(pt,ct,vt,ft){if(b[pt]&&!b[pt].endpoint&&!b[pt+"Endpoint"]&&!b.newConnection){var St=lt(b[pt]),bt=vt[St];if(bt=bt?bt[ft]:null,bt){if(!bt.enabled)return!1;var Dt=C.extend({},bt.def);delete Dt.label;var Mt=bt.endpoint!=null&&bt.endpoint._jsPlumb?bt.endpoint:Q(b[pt],Dt,ct);if(Mt.isFull())return!1;b[pt+"Endpoint"]=Mt,!b.scope&&Dt.scope&&(b.scope=Dt.scope),bt.uniqueEndpoint?bt.endpoint?Mt.finalEndpoint=bt.endpoint:(bt.endpoint=Mt,Mt.setDeleteOnEmpty(!1)):Mt.setDeleteOnEmpty(!0),ct===0&&bt.def.connectorOverlays&&(b.overlays=b.overlays||[],Array.prototype.push.apply(b.overlays,bt.def.connectorOverlays))}}};if(rt("source",0,this.sourceEndpointDefinitions,b.type||"default")!==!1&&rt("target",1,this.targetEndpointDefinitions,b.type||"default")!==!1)return b.sourceEndpoint&&b.targetEndpoint&&(R(b.sourceEndpoint,b.targetEndpoint)||(b=null)),b}.bind(e),Z=function(o){var w=e.Defaults.ConnectionType||e.getDefaultConnectionType();o._jsPlumb=e,o.newConnection=Z,o.newEndpoint=ot,o.endpointsByUUID=M,o.endpointsByElement=h,o.finaliseConnection=ut,o.id="con_"+t();var b=new w(o);return b.isDetachable()&&(b.endpoints[0].initDraggable("_jsPlumbSource"),b.endpoints[1].initDraggable("_jsPlumbTarget")),b},ut=e.finaliseConnection=function(o,w,b,k){if(w=w||{},o.suspendedEndpoint||D.push(o),o.pending=null,o.endpoints[0].isTemporarySource=!1,k!==!1&&e.router.newConnection(o),m(o.source),!w.doNotFireConnectionEvent&&w.fireEvent!==!1){var z={connection:o,source:o.source,target:o.target,sourceId:o.sourceId,targetId:o.targetId,sourceEndpoint:o.endpoints[0],targetEndpoint:o.endpoints[1]};e.fire("connection",z,b)}},ot=function(o,w){var b=e.Defaults.EndpointType||C.Endpoint,k=C.extend({},o);k._jsPlumb=e,k.newConnection=Z,k.newEndpoint=ot,k.endpointsByUUID=M,k.endpointsByElement=h,k.fireDetachEvent=et,k.elementId=w||lt(k.source);var z=new b(k);return z.id="ep_"+t(),zt(k.elementId,k.source),C.headless||e.getDragManager().endpointAdded(k.source,w),z},st=function(o,w,b){var k=h[o];if(k&&k.length)for(var z=0,Q=k.length;z<Q;z++){for(var rt=0,pt=k[z].connections.length;rt<pt;rt++){var ct=w(k[z].connections[rt]);if(ct)return}b&&b(k[z])}},at=function(o,w,b){w=w==="block";var k=null;b&&(k=function(Q){Q.setVisible(w,!0,!0)});var z=E(o);st(z.id,function(Q){if(w&&b){var rt=Q.sourceId===z.id?1:0;Q.endpoints[rt].isVisible()&&Q.setVisible(!0)}else Q.setVisible(w)},k)},gt=function(o,w){var b=null;w&&(b=function(k){var z=k.isVisible();k.setVisible(!z)}),st(o,function(k){var z=k.isVisible();k.setVisible(!z)},b)},dt=function(o){var w=A[o];return w?{o:w,s:H[o]}:At({elId:o})},lt=function(o,w,b){if(n.isString(o))return o;if(o==null)return null;var k=e.getAttribute(o,"id");return(!k||k==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?k=w:(arguments.length===1||arguments.length===3&&!arguments[2])&&(k="jsPlumb_"+L+"_"+t()),b||e.setAttribute(o,"id",k)),k};this.setConnectionBeingDragged=function(o){S=o},this.isConnectionBeingDragged=function(){return S},this.getManagedElements=function(){return _},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(o,w,b){b=b||{};var k=C.extend({},b);C.extend(k,w),k.endpoint=k.endpoint||e.Defaults.Endpoint,k.paintStyle=k.paintStyle||e.Defaults.EndpointStyle;for(var z=[],Q=n.isArray(o)||o.length!=null&&!n.isString(o)?o:[o],rt=0,pt=Q.length;rt<pt;rt++){k.source=e.getElement(Q[rt]),Ht(k.source);var ct=lt(k.source),vt=ot(k,ct),ft=zt(ct,k.source,null,!V).info.o;n.addToList(h,ct,vt),V||vt.paint({anchorLoc:vt.anchor.compute({xy:[ft.left,ft.top],wh:H[ct],element:vt,timestamp:Y,rotation:this.getRotation(ct)}),timestamp:Y}),z.push(vt)}return z.length===1?z[0]:z},this.addEndpoints=function(o,w,b){for(var k=[],z=0,Q=w.length;z<Q;z++){var rt=e.addEndpoint(o,w[z],b);n.isArray(rt)?Array.prototype.push.apply(k,rt):k.push(rt)}return k},this.animate=function(o,w,b){if(!this.animationSupported)return!1;b=b||{};var k=e.getElement(o),z=lt(k),Q=C.animEvents.step,rt=C.animEvents.complete;b[Q]=n.wrap(b[Q],function(){e.revalidate(z)}),b[rt]=n.wrap(b[rt],function(){e.revalidate(z)}),e.doAnimate(k,w,b)},this.checkCondition=function(o,w){var b=e.getListener(o),k=!0;if(b&&b.length>0){var z=Array.prototype.slice.call(arguments,1);try{for(var Q=0,rt=b.length;Q<rt;Q++)k=k&&b[Q].apply(b[Q],z)}catch(pt){n.log(e,"cannot check condition ["+o+"]"+pt)}}return k},this.connect=function(o,w){var b=B(o,w),k;if(b){if(b.source==null&&b.sourceEndpoint==null){n.log("Cannot establish connection - source does not exist");return}if(b.target==null&&b.targetEndpoint==null){n.log("Cannot establish connection - target does not exist");return}Ht(b.source),k=Z(b),ut(k,b)}return k};var yt=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],mt=function(o,w,b,k){var z,Q=yt[b],rt=o[Q.elId];o[Q.el];var pt,ct,vt=o.endpoints[b],ft={index:b,originalSourceId:b===0?rt:o.sourceId,newSourceId:o.sourceId,originalTargetId:b===1?rt:o.targetId,newTargetId:o.targetId,connection:o};if(w.constructor===C.Endpoint)z=w,z.addConnection(o),w=z.element;else if(pt=lt(w),ct=this[Q.epDefs][pt],pt===o[Q.elId])z=null;else if(ct)for(var St in ct){if(!ct[St].enabled)return;z=ct[St].endpoint!=null&&ct[St].endpoint._jsPlumb?ct[St].endpoint:this.addEndpoint(w,ct[St].def),ct[St].uniqueEndpoint&&(ct[St].endpoint=z),z.addConnection(o)}else z=o.makeEndpoint(b===0,w,pt);return z!=null&&(vt.detachFromConnection(o),o.endpoints[b]=z,o[Q.el]=z.element,o[Q.elId]=z.elementId,ft[b===0?"newSourceId":"newTargetId"]=z.elementId,$(ft),k||o.repaint()),ft.element=w,ft}.bind(this);this.setSource=function(o,w,b){var k=mt(o,w,0,b);this.router.sourceOrTargetChanged(k.originalSourceId,k.newSourceId,o,k.el,0)},this.setTarget=function(o,w,b){var k=mt(o,w,1,b);this.router.sourceOrTargetChanged(k.originalTargetId,k.newTargetId,o,k.el,1)},this.deleteEndpoint=function(o,w,b){var k=typeof o=="string"?M[o]:o;return k&&e.deleteObject({endpoint:k,dontUpdateHover:w,deleteAttachedObjects:b}),e},this.deleteEveryEndpoint=function(){var o=e.setSuspendDrawing(!0);for(var w in h){var b=h[w];if(b&&b.length)for(var k=0,z=b.length;k<z;k++)e.deleteEndpoint(b[k],!0)}h={},_={},M={},A={},v={},e.router.reset();var Q=e.getDragManager();return Q&&Q.reset(),o||e.setSuspendDrawing(!1),e};var et=function(o,w,b){var k=e.Defaults.ConnectionType||e.getDefaultConnectionType(),z=o.constructor===k,Q=z?{connection:o,source:o.source,target:o.target,sourceId:o.sourceId,targetId:o.targetId,sourceEndpoint:o.endpoints[0],targetEndpoint:o.endpoints[1]}:o;w&&e.fire("connectionDetached",Q,b),e.fire("internal.connectionDetached",Q,b),e.router.connectionDetached(Q)},$=e.fireMoveEvent=function(o,w){e.fire("connectionMoved",o,w)};this.unregisterEndpoint=function(o){o._jsPlumb.uuid&&(M[o._jsPlumb.uuid]=null),e.router.deleteEndpoint(o);for(var w in h){var b=h[w];if(b){for(var k=[],z=0,Q=b.length;z<Q;z++)b[z]!==o&&k.push(b[z]);h[w]=k}h[w].length<1&&delete h[w]}};var q="isDetachAllowed",nt="beforeDetach",ht="checkCondition";this.deleteConnection=function(o,w){return o!=null&&(w=w||{},w.force||n.functionChain(!0,!1,[[o.endpoints[0],q,[o]],[o.endpoints[1],q,[o]],[o,q,[o]],[e,ht,[nt,o]]]))?(o.setHover(!1),et(o,!o.pending&&w.fireEvent!==!1,w.originalEvent),o.endpoints[0].detachFromConnection(o),o.endpoints[1].detachFromConnection(o),n.removeWithFunction(D,function(b){return o.id===b.id}),o.cleanup(),o.destroy(),!0):!1},this.deleteEveryConnection=function(o){o=o||{};var w=D.length,b=0;return e.batch(function(){for(var k=0;k<w;k++)b+=e.deleteConnection(D[0],o)?1:0}),b},this.deleteConnectionsForElement=function(o,w){w=w||{},o=e.getElement(o);var b=lt(o),k=h[b];if(k&&k.length)for(var z=0,Q=k.length;z<Q;z++)k[z].deleteEveryConnection(w);return e},this.deleteObject=function(o){var w={endpoints:{},connections:{},endpointCount:0,connectionCount:0},b=o.deleteAttachedObjects!==!1,k=function(ft){ft!=null&&w.connections[ft.id]==null&&(!o.dontUpdateHover&&ft._jsPlumb!=null&&ft.setHover(!1),w.connections[ft.id]=ft,w.connectionCount++)},z=function(ft){if(ft!=null&&w.endpoints[ft.id]==null&&(!o.dontUpdateHover&&ft._jsPlumb!=null&&ft.setHover(!1),w.endpoints[ft.id]=ft,w.endpointCount++,b))for(var St=0;St<ft.connections.length;St++){var bt=ft.connections[St];k(bt)}};o.connection?k(o.connection):z(o.endpoint);for(var Q in w.connections){var rt=w.connections[Q];if(rt._jsPlumb){n.removeWithFunction(D,function(ft){return rt.id===ft.id}),et(rt,o.fireEvent===!1?!1:!rt.pending,o.originalEvent);var pt=o.deleteAttachedObjects==null?null:!o.deleteAttachedObjects;rt.endpoints[0].detachFromConnection(rt,null,pt),rt.endpoints[1].detachFromConnection(rt,null,pt),rt.cleanup(!0),rt.destroy(!0)}}for(var ct in w.endpoints){var vt=w.endpoints[ct];vt._jsPlumb&&(e.unregisterEndpoint(vt),vt.cleanup(!0),vt.destroy(!0))}return w};var Ct=function(o,w,b,k){for(var z=0,Q=o.length;z<Q;z++)o[z][w].apply(o[z],b);return k(o)},wt=function(o,w,b){for(var k=[],z=0,Q=o.length;z<Q;z++)k.push([o[z][w].apply(o[z],b),o[z]]);return k},It=function(o,w,b){return function(){return Ct(o,w,arguments,b)}},jt=function(o,w){return function(){return wt(o,w,arguments)}},Tt=function(o,w){var b=[];if(o)if(typeof o=="string"){if(o==="*")return o;b.push(o)}else if(w)b=o;else if(o.length)for(var k=0,z=o.length;k<z;k++)b.push(E(o[k]).id);else b.push(E(o).id);return b},Nt=function(o,w,b){return o==="*"?!0:o.length>0?o.indexOf(w)!==-1:!b};this.getConnections=function(o,w){o?o.constructor===String&&(o={scope:o}):o={};for(var b=o.scope||e.getDefaultScope(),k=Tt(b,!0),z=Tt(o.source),Q=Tt(o.target),rt=!w&&k.length>1?{}:[],pt=function(Dt,Mt){if(!w&&k.length>1){var Bt=rt[Dt];Bt==null&&(Bt=rt[Dt]=[]),Bt.push(Mt)}else rt.push(Mt)},ct=0,vt=D.length;ct<vt;ct++){var ft=D[ct],St=ft.proxies&&ft.proxies[0]?ft.proxies[0].originalEp.elementId:ft.sourceId,bt=ft.proxies&&ft.proxies[1]?ft.proxies[1].originalEp.elementId:ft.targetId;Nt(k,ft.scope)&&Nt(z,St)&&Nt(Q,bt)&&pt(ft.scope,ft)}return rt};var Kt=function(o,w){return function(b){for(var k=0,z=o.length;k<z;k++)b(o[k]);return w(o)}},kt=function(o){return function(w){return o[w]}},Ut=function(o,w){var b={length:o.length,each:Kt(o,w),get:kt(o)},k=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],z=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],Q,rt;for(Q=0,rt=k.length;Q<rt;Q++)b[k[Q]]=It(o,k[Q],w);for(Q=0,rt=z.length;Q<rt;Q++)b[z[Q]]=jt(o,z[Q]);return b},Ft=function(o){var w=Ut(o,Ft);return C.extend(w,{setDetachable:It(o,"setDetachable",Ft),setReattach:It(o,"setReattach",Ft),setConnector:It(o,"setConnector",Ft),delete:function(){for(var b=0,k=o.length;b<k;b++)e.deleteConnection(o[b])},isDetachable:jt(o,"isDetachable"),isReattach:jt(o,"isReattach")})},Yt=function(o){var w=Ut(o,Yt);return C.extend(w,{setEnabled:It(o,"setEnabled",Yt),setAnchor:It(o,"setAnchor",Yt),isEnabled:jt(o,"isEnabled"),deleteEveryConnection:function(){for(var b=0,k=o.length;b<k;b++)o[b].deleteEveryConnection()},delete:function(){for(var b=0,k=o.length;b<k;b++)e.deleteEndpoint(o[b])}})};this.select=function(o){return o=o||{},o.scope=o.scope||"*",Ft(o.connections||e.getConnections(o,!0))},this.selectEndpoints=function(o){o=o||{},o.scope=o.scope||"*";var w=!o.element&&!o.source&&!o.target,b=w?"*":Tt(o.element),k=w?"*":Tt(o.source),z=w?"*":Tt(o.target),Q=Tt(o.scope,!0),rt=[];for(var pt in h){var ct=Nt(b,pt,!0),vt=Nt(k,pt,!0),ft=k!=="*",St=Nt(z,pt,!0),bt=z!=="*";if(ct||vt||St){t:for(var Dt=0,Mt=h[pt].length;Dt<Mt;Dt++){var Bt=h[pt][Dt];if(Nt(Q,Bt.scope,!0)){var Se=ft&&k.length>0&&!Bt.isSource,xe=bt&&z.length>0&&!Bt.isTarget;if(Se||xe)continue t;rt.push(Bt)}}}}return Yt(rt)},this.getAllConnections=function(){return D},this.getDefaultScope=function(){return i},this.getEndpoint=N,this.getEndpoints=function(o){return h[E(o).id]||[]},this.getDefaultEndpointType=function(){return C.Endpoint},this.getDefaultConnectionType=function(){return C.Connection},this.getId=lt,this.draw=m,this.info=E,this.appendElement=g;var Gt=!1;this.isHoverSuspended=function(){return Gt},this.setHoverSuspended=function(o){Gt=o},this.hide=function(o,w){return at(o,"none",w),e},this.idstamp=t;var Ht=function(o){if(!s&&o){var w=e.getElement(o);w.offsetParent&&e.setContainer(w.offsetParent)}},$t=function(){e.Defaults.Container&&e.setContainer(e.Defaults.Container)},zt=e.manage=function(o,w,b,k){return _[o]?k&&(_[o].info=At({elId:o,timestamp:Y,recalc:!0})):(_[o]={el:w,endpoints:[],connections:[],rotation:0},_[o].info=At({elId:o,timestamp:Y}),e.addClass(w,"jtk-managed"),b||e.fire("manageElement",{id:o,info:_[o].info,el:w})),_[o]};this.unmanage=function(o){if(_[o]){var w=_[o].el;e.removeClass(w,"jtk-managed"),delete _[o],e.fire("unmanageElement",{id:o,el:w})}},this.rotate=function(o,w,b){return _[o]&&(_[o].rotation=w,_[o].el.style.transform="rotate("+w+"deg)",_[o].el.style.transformOrigin="center center",b!==!0)?this.revalidate(o):{c:[],e:[]}},this.getRotation=function(o){return _[o]&&_[o].rotation||0};var At=function(o){var w=o.timestamp,b=o.recalc,k=o.offset,z=o.elId,Q;return V&&!w&&(w=Y),!b&&w&&w===v[z]?{o:o.offset||A[z],s:H[z]}:(b||!k&&A[z]==null?(Q=_[z]?_[z].el:null,Q!=null&&(H[z]=e.getSize(Q),A[z]=e.getOffset(Q),v[z]=w)):(A[z]=k||A[z],H[z]==null&&(Q=_[z].el,Q!=null&&(H[z]=e.getSize(Q))),v[z]=w),A[z]&&!A[z].right&&(A[z].right=A[z].left+H[z][0],A[z].bottom=A[z].top+H[z][1],A[z].width=H[z][0],A[z].height=H[z][1],A[z].centerx=A[z].left+A[z].width/2,A[z].centery=A[z].top+A[z].height/2),{o:A[z],s:H[z]})};this.updateOffset=At,this.init=function(){P||($t(),e.router=new p.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,P=!0,e.fire("ready",e))}.bind(this),this.log=c,this.jsPlumbUIComponent=u,this.makeAnchor=function(){var o,w=function(rt,pt){if(p.jsPlumb.Anchors[rt])return new p.jsPlumb.Anchors[rt](pt);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+rt+"'"}};if(arguments.length===0)return null;var b=arguments[0],k=arguments[1],z=null;if(b.compute&&b.getOrientation)return b;if(typeof b=="string")z=w(arguments[0],{elementId:k,jsPlumbInstance:e});else if(n.isArray(b))if(n.isArray(b[0])||n.isString(b[0]))b.length===2&&n.isObject(b[1])?n.isString(b[0])?(o=p.jsPlumb.extend({elementId:k,jsPlumbInstance:e},b[1]),z=w(b[0],o)):(o=p.jsPlumb.extend({elementId:k,jsPlumbInstance:e,anchors:b[0]},b[1]),z=new p.jsPlumb.DynamicAnchor(o)):z=new C.DynamicAnchor({anchors:b,selector:null,elementId:k,jsPlumbInstance:e});else{var Q={x:b[0],y:b[1],orientation:b.length>=4?[b[2],b[3]]:[0,0],offsets:b.length>=6?[b[4],b[5]]:[0,0],elementId:k,jsPlumbInstance:e,cssClass:b.length===7?b[6]:null};z=new p.jsPlumb.Anchor(Q),z.clone=function(){return new p.jsPlumb.Anchor(Q)}}return z.id||(z.id="anchor_"+t()),z},this.makeAnchors=function(o,w,b){for(var k=[],z=0,Q=o.length;z<Q;z++)typeof o[z]=="string"?k.push(p.jsPlumb.Anchors[o[z]]({elementId:w,jsPlumbInstance:b})):n.isArray(o[z])&&k.push(e.makeAnchor(o[z],w,b));return k},this.makeDynamicAnchor=function(o,w){return new p.jsPlumb.DynamicAnchor({anchors:o,selector:w,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Vt=function(o,w,b,k,z){for(var Q=o.target||o.srcElement,rt=!1,pt=k.getSelector(w,b),ct=0;ct<pt.length;ct++)if(pt[ct]===Q){rt=!0;break}return z?!rt:rt},Lt=function(o,w,b,k,z){var Q=new u(w),rt=w._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return o.def.enabled},isFull:function(){var ct=e.select({target:o.id}).length;return o.def.maxConnections>0&&ct>=o.def.maxConnections},element:o.el,elementId:o.id,isSource:k,isTarget:z,addClass:function(ct){e.addClass(o.el,ct)},removeClass:function(ct){e.removeClass(o.el,ct)},onDrop:function(ct){var vt=ct.endpoints[0];vt.anchor.locked=!1},isDropAllowed:function(){return Q.isDropAllowed.apply(Q,arguments)},isRedrop:function(ct){return ct.suspendedElement!=null&&ct.suspendedEndpoint!=null&&ct.suspendedEndpoint.element===o.el},getEndpoint:function(ct){var vt=o.def.endpoint;if(vt==null||vt._jsPlumb==null){var ft=e.deriveEndpointAndAnchorSpec(ct.getType().join(" "),!0),St=ft.endpoints?p.jsPlumb.extend(w,{endpoint:o.def.def.endpoint||ft.endpoints[1]}):w;ft.anchors&&(St=p.jsPlumb.extend(St,{anchor:o.def.def.anchor||ft.anchors[1]})),vt=e.addEndpoint(o.el,St),vt._mtNew=!0}if(w.uniqueEndpoint&&(o.def.endpoint=vt),vt.setDeleteOnEmpty(!0),ct.isDetachable()&&vt.initDraggable(),vt.anchor.positionFinder!=null){var bt=e.getUIPosition(arguments,e.getZoom()),Dt=e.getOffset(o.el),Mt=e.getSize(o.el),Bt=bt==null?[0,0]:vt.anchor.positionFinder(bt,Dt,Mt,vt.anchor.constructorParams);vt.anchor.x=Bt[0],vt.anchor.y=Bt[1]}return vt},maybeCleanup:function(ct){ct._mtNew&&ct.connections.length===0?e.deleteObject({endpoint:ct}):delete ct._mtNew}}),pt=p.jsPlumb.dragEvents.drop;return b.scope=b.scope||w.scope||e.Defaults.Scope,b[pt]=n.wrap(b[pt],rt,!0),b.rank=w.rank||0,z&&(b[p.jsPlumb.dragEvents.over]=function(){return!0}),w.allowLoopback===!1&&(b.canDrop=function(ct){var vt=ct.getDragElement()._jsPlumbRelatedElement;return vt!==o.el}),e.initDroppable(o.el,b,"internal"),rt};this.makeTarget=function(o,w,b){var k=p.jsPlumb.extend({_jsPlumb:this},b);p.jsPlumb.extend(k,w);for(var z=k.maxConnections||-1,Q=function(vt){var ft=E(vt),St=ft.id,bt=p.jsPlumb.extend({},k.dropOptions||{}),Dt=k.connectionType||"default";this.targetEndpointDefinitions[St]=this.targetEndpointDefinitions[St]||{},Ht(St),ft.el._isJsPlumbGroup&&bt.rank==null&&(bt.rank=-1);var Mt={def:p.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:z,enabled:!0};k.createEndpoint&&(Mt.uniqueEndpoint=!0,Mt.endpoint=e.addEndpoint(vt,Mt.def),Mt.endpoint.setDeleteOnEmpty(!1)),ft.def=Mt,this.targetEndpointDefinitions[St][Dt]=Mt,Lt(ft,k,bt,k.isSource===!0,!0),ft.el._katavorioDrop[ft.el._katavorioDrop.length-1].targetDef=Mt}.bind(this),rt=o.length&&o.constructor!==String?o:[o],pt=0,ct=rt.length;pt<ct;pt++)Q(rt[pt]);return this},this.unmakeTarget=function(o,w){var b=E(o);return e.destroyDroppable(b.el,"internal"),w||delete this.targetEndpointDefinitions[b.id],this},this.makeSource=function(o,w,b){var k=p.jsPlumb.extend({_jsPlumb:this},b);p.jsPlumb.extend(k,w);var z=k.connectionType||"default",Q=e.deriveEndpointAndAnchorSpec(z);k.endpoint=k.endpoint||Q.endpoints[0],k.anchor=k.anchor||Q.anchors[0];for(var rt=k.maxConnections||-1,pt=k.onMaxConnections,ct=function(bt){var Dt=bt.id,Mt=this.getElement(bt.el);this.sourceEndpointDefinitions[Dt]=this.sourceEndpointDefinitions[Dt]||{},Ht(Dt);var Bt={def:p.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:rt,enabled:!0};k.createEndpoint&&(Bt.uniqueEndpoint=!0,Bt.endpoint=e.addEndpoint(o,Bt.def),Bt.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[Dt][z]=Bt,bt.def=Bt;var Se=p.jsPlumb.dragEvents.stop,xe=p.jsPlumb.dragEvents.drag,re=p.jsPlumb.extend({},k.dragOptions||{}),qe=re.drag,Ke=re.stop,Xt=null,De=!1;re.scope=re.scope||k.scope,re[xe]=n.wrap(re[xe],function(){qe&&qe.apply(this,arguments),De=!1}),re[Se]=n.wrap(re[Se],function(){if(Ke&&Ke.apply(this,arguments),this.currentlyDragging=!1,Xt._jsPlumb!=null){var Qt=k.anchor||this.Defaults.Anchor,Wt=Xt.anchor,we=Xt.connections[0],oe=this.makeAnchor(Qt,Dt,this),ge=Xt.element;if(oe.positionFinder!=null){var ee=e.getOffset(ge),ae=this.getSize(ge),Ae={left:ee.left+Wt.x*ae[0],top:ee.top+Wt.y*ae[1]},me=oe.positionFinder(Ae,ee,ae,oe.constructorParams);oe.x=me[0],oe.y=me[1]}Xt.setAnchor(oe,!0),Xt.repaint(),this.repaint(Xt.elementId),we!=null&&this.repaint(we.targetId)}}.bind(this));var Ze=function(Qt){if(!(Qt.which===3||Qt.button===2)){Dt=this.getId(this.getElement(bt.el));var Wt=this.sourceEndpointDefinitions[Dt][z];if(!!Wt.enabled){if(k.filter){var we=n.isString(k.filter)?Vt(Qt,bt.el,k.filter,this,k.filterExclude):k.filter(Qt,bt.el);if(we===!1)return}var oe=this.select({source:Dt}).length;if(Wt.maxConnections>=0&&oe>=Wt.maxConnections)return pt&&pt({element:bt.el,maxConnections:rt},Qt),!1;var ge=p.jsPlumb.getPositionOnElement(Qt,Mt,G),ee={};p.jsPlumb.extend(ee,Wt.def),ee.isTemporarySource=!0,ee.anchor=[ge[0],ge[1],0,0],ee.dragOptions=re,Wt.def.scope&&(ee.scope=Wt.def.scope),Xt=this.addEndpoint(Dt,ee),De=!0,Xt.setDeleteOnEmpty(!0),Wt.uniqueEndpoint&&(Wt.endpoint?Xt.finalEndpoint=Wt.endpoint:(Wt.endpoint=Xt,Xt.setDeleteOnEmpty(!1)));var ae=function(){e.off(Xt.canvas,"mouseup",ae),e.off(bt.el,"mouseup",ae),De&&(De=!1,e.deleteEndpoint(Xt))};e.on(Xt.canvas,"mouseup",ae),e.on(bt.el,"mouseup",ae);var Ae={};if(Wt.def.extract)for(var me in Wt.def.extract){var Je=(Qt.srcElement||Qt.target).getAttribute(me);Je&&(Ae[Wt.def.extract[me]]=Je)}e.trigger(Xt.canvas,"mousedown",Qt,Ae),n.consume(Qt)}}}.bind(this);this.on(bt.el,"mousedown",Ze),Bt.trigger=Ze,k.filter&&(n.isString(k.filter)||n.isFunction(k.filter))&&e.setDragFilter(bt.el,k.filter);var Pn=p.jsPlumb.extend({},k.dropOptions||{});Lt(bt,k,Pn,!0,k.isTarget===!0)}.bind(this),vt=o.length&&o.constructor!==String?o:[o],ft=0,St=vt.length;ft<St;ft++)ct(E(vt[ft]));return this},this.unmakeSource=function(o,w,b){var k=E(o);e.destroyDroppable(k.el,"internal");var z=this.sourceEndpointDefinitions[k.id];if(z){for(var Q in z)if(w==null||w===Q){var rt=z[Q].trigger;rt&&e.off(k.el,"mousedown",rt),b||delete this.sourceEndpointDefinitions[k.id][Q]}}return this},this.unmakeEverySource=function(){for(var o in this.sourceEndpointDefinitions)e.unmakeSource(o,null,!0);return this.sourceEndpointDefinitions={},this};var te=function(o,w,b){w=n.isArray(w)?w:[w];var k=lt(o);b=b||"default";for(var z=0;z<w.length;z++){var Q=this[w[z]][k];if(Q&&Q[b])return Q[b].def.scope||this.Defaults.Scope}}.bind(this),se=function(o,w,b,k){b=n.isArray(b)?b:[b];var z=lt(o);k=k||"default";for(var Q=0;Q<b.length;Q++){var rt=this[b[Q]][z];rt&&rt[k]&&(rt[k].def.scope=w)}}.bind(this);this.getScope=function(o,w){return te(o,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(o){return te(o,"sourceEndpointDefinitions")},this.getTargetScope=function(o){return te(o,"targetEndpointDefinitions")},this.setScope=function(o,w,b){this.setSourceScope(o,w,b),this.setTargetScope(o,w,b)},this.setSourceScope=function(o,w,b){se(o,w,"sourceEndpointDefinitions",b),this.setDragScope(o,w)},this.setTargetScope=function(o,w,b){se(o,w,"targetEndpointDefinitions",b),this.setDropScope(o,w)},this.unmakeEveryTarget=function(){for(var o in this.targetEndpointDefinitions)e.unmakeTarget(o,!0);return this.targetEndpointDefinitions={},this};var it=function(o,w,b,k,z){var Q=o==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,rt,pt,ct;if(z=z||"default",w.length&&!n.isString(w)){rt=[];for(var vt=0,ft=w.length;vt<ft;vt++)pt=E(w[vt]),Q[pt.id]&&Q[pt.id][z]&&(rt[vt]=Q[pt.id][z].enabled,ct=k?!rt[vt]:b,Q[pt.id][z].enabled=ct,e[ct?"removeClass":"addClass"](pt.el,"jtk-"+o+"-disabled"))}else{pt=E(w);var St=pt.id;Q[St]&&Q[St][z]&&(rt=Q[St][z].enabled,ct=k?!rt:b,Q[St][z].enabled=ct,e[ct?"removeClass":"addClass"](pt.el,"jtk-"+o+"-disabled"))}return rt}.bind(this),Pt=function(o,w){if(o!=null){if(n.isString(o)||!o.length)return w.apply(this,[o]);if(o.length)return w.apply(this,[o[0]])}}.bind(this);this.toggleSourceEnabled=function(o,w){return it("source",o,null,!0,w),this.isSourceEnabled(o,w)},this.setSourceEnabled=function(o,w,b){return it("source",o,w,null,b)},this.isSource=function(o,w){return w=w||"default",Pt(o,function(b){var k=this.sourceEndpointDefinitions[E(b).id];return k!=null&&k[w]!=null}.bind(this))},this.isSourceEnabled=function(o,w){return w=w||"default",Pt(o,function(b){var k=this.sourceEndpointDefinitions[E(b).id];return k&&k[w]&&k[w].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(o,w){return it("target",o,null,!0,w),this.isTargetEnabled(o,w)},this.isTarget=function(o,w){return w=w||"default",Pt(o,function(b){var k=this.targetEndpointDefinitions[E(b).id];return k!=null&&k[w]!=null}.bind(this))},this.isTargetEnabled=function(o,w){return w=w||"default",Pt(o,function(b){var k=this.targetEndpointDefinitions[E(b).id];return k&&k[w]&&k[w].enabled===!0}.bind(this))},this.setTargetEnabled=function(o,w,b){return it("target",o,w,null,b)},this.ready=function(o){e.bind("ready",o)};var Et=function(o,w){if(typeof o=="object"&&o.length)for(var b=0,k=o.length;b<k;b++)w(o[b]);else w(o);return e};this.repaint=function(o,w,b){return Et(o,function(k){m(k,w,b)})},this.revalidate=function(o,w,b){var k=b?o:e.getId(o);e.updateOffset({elId:k,recalc:!0,timestamp:w});var z=e.getDragManager();return z&&z.updateOffsets(k),m(o,null,w)},this.repaintEverything=function(){var o=jsPlumbUtil.uuid(),w;for(w in h)e.updateOffset({elId:w,recalc:!0,timestamp:o});for(w in h)m(w,null,o);return this},this.removeAllEndpoints=function(o,w,b){b=b||[];var k=function(z){var Q=E(z),rt=h[Q.id],pt,ct;if(rt)for(b.push(Q),pt=0,ct=rt.length;pt<ct;pt++)e.deleteEndpoint(rt[pt],!1);if(delete h[Q.id],w&&Q.el&&Q.el.nodeType!==3&&Q.el.nodeType!==8)for(pt=0,ct=Q.el.childNodes.length;pt<ct;pt++)k(Q.el.childNodes[pt])};return k(o),this};var _t=function(o,w){e.removeAllEndpoints(o.id,!0,w);for(var b=e.getDragManager(),k=function(Q){b&&b.elementRemoved(Q.id),e.router.elementRemoved(Q.id),e.isSource(Q.el)&&e.unmakeSource(Q.el),e.isTarget(Q.el)&&e.unmakeTarget(Q.el),e.destroyDraggable(Q.el),e.destroyDroppable(Q.el),delete e.floatingConnections[Q.id],delete _[Q.id],delete A[Q.id],Q.el&&(e.removeElement(Q.el),Q.el._jsPlumb=null)},z=1;z<w.length;z++)k(w[z]);k(o)};this.remove=function(o,w){var b=E(o),k=[];return b.text&&b.el.parentNode?b.el.parentNode.removeChild(b.el):b.id&&e.batch(function(){_t(b,k)},w===!0),e},this.empty=function(o,w){var b=[],k=function(z,Q){var rt=E(z);if(rt.text)rt.el.parentNode.removeChild(rt.el);else if(rt.el){for(;rt.el.childNodes.length>0;)k(rt.el.childNodes[0]);Q||_t(rt,b)}};return e.batch(function(){k(o,!0)},w===!1),e},this.reset=function(o){e.silently(function(){Gt=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),o||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},D.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),s=null,f=null};var xt=function(o){o.canvas&&o.canvas.parentNode&&o.canvas.parentNode.removeChild(o.canvas),o.cleanup(),o.destroy()};this.clear=function(){e.select().each(xt),e.selectEndpoints().each(xt),h={},M={}},this.setDefaultScope=function(o){return i=o,e},this.deriveEndpointAndAnchorSpec=function(o,w){for(var b=((w?"":"default ")+o).split(/[\s]/),k=null,z=null,Q=null,rt=null,pt=0;pt<b.length;pt++){var ct=e.getType(b[pt],"connection");ct&&(ct.endpoints&&(k=ct.endpoints),ct.endpoint&&(z=ct.endpoint),ct.anchors&&(rt=ct.anchors),ct.anchor&&(Q=ct.anchor))}return{endpoints:k||[z,z],anchors:rt||[Q,Q]}},this.setId=function(o,w,b){var k;n.isString(o)?k=o:(o=this.getElement(o),k=this.getId(o));var z=this.getConnections({source:k,scope:"*"},!0),Q=this.getConnections({target:k,scope:"*"},!0);w=""+w,b?o=this.getElement(w):(o=this.getElement(k),this.setAttribute(o,"id",w)),h[w]=h[k]||[];for(var rt=0,pt=h[w].length;rt<pt;rt++)h[w][rt].setElementId(w),h[w][rt].setReferenceElement(o);delete h[k],this.sourceEndpointDefinitions[w]=this.sourceEndpointDefinitions[k],delete this.sourceEndpointDefinitions[k],this.targetEndpointDefinitions[w]=this.targetEndpointDefinitions[k],delete this.targetEndpointDefinitions[k],this.router.changeId(k,w);var ct=this.getDragManager();ct&&ct.changeId(k,w),_[w]=_[k],delete _[k];var vt=function(ft,St,bt){for(var Dt=0,Mt=ft.length;Dt<Mt;Dt++)ft[Dt].endpoints[St].setElementId(w),ft[Dt].endpoints[St].setReferenceElement(o),ft[Dt][bt+"Id"]=w,ft[Dt][bt]=o};vt(z,0,"source"),vt(Q,1,"target"),this.repaint(w)},this.setDebugLog=function(o){c=o},this.setSuspendDrawing=function(o,w){var b=V;return V=o,o?Y=new Date().getTime():Y=null,w&&this.repaintEverything(),b},this.isSuspendDrawing=function(){return V},this.getSuspendedAt=function(){return Y},this.batch=function(o,w){var b=this.isSuspendDrawing();b||this.setSuspendDrawing(!0);try{o()}catch(k){n.log("Function run while suspended failed",k)}b||this.setSuspendDrawing(!1,!w)},this.doWhileSuspended=this.batch,this.getCachedData=dt,this.show=function(o,w){return at(o,"block",w),e},this.toggleVisible=gt,this.addListener=this.bind;var Ot=[];this.registerFloatingConnection=function(o,w,b){Ot[o.id]=w,n.addToList(h,o.id,b)},this.getFloatingConnectionFor=function(o){return Ot[o]},this.listManager=new p.jsPlumbListManager(this,this.Defaults.ListStyle)};n.extend(p.jsPlumbInstance,n.EventGenerator,{setAttribute:function(d,e,L){this.setAttribute(d,e,L)},getAttribute:function(d,e){return this.getAttribute(p.jsPlumb.getElement(d),e)},convertToFullOverlaySpec:function(d){return n.isString(d)&&(d=[d,{}]),d[1].id=d[1].id||n.uuid(),d},registerConnectionType:function(d,e){if(this._connectionTypes[d]=p.jsPlumb.extend({},e),e.overlays){for(var L={},F=0;F<e.overlays.length;F++){var U=this.convertToFullOverlaySpec(e.overlays[F]);L[U[1].id]=U}this._connectionTypes[d].overlays=L}},registerConnectionTypes:function(d){for(var e in d)this.registerConnectionType(e,d[e])},registerEndpointType:function(d,e){if(this._endpointTypes[d]=p.jsPlumb.extend({},e),e.overlays){for(var L={},F=0;F<e.overlays.length;F++){var U=this.convertToFullOverlaySpec(e.overlays[F]);L[U[1].id]=U}this._endpointTypes[d].overlays=L}},registerEndpointTypes:function(d){for(var e in d)this.registerEndpointType(e,d[e])},getType:function(d,e){return e==="connection"?this._connectionTypes[d]:this._endpointTypes[d]},setIdChanged:function(d,e){this.setId(d,e,!0)},setParent:function(d,e){var L=this.getElement(d),F=this.getId(L),U=this.getElement(e),G=this.getId(U),E=this.getDragManager();L.parentNode.removeChild(L),U.appendChild(L),E&&E.setParent(L,F,U,G)},extend:function(d,e,L){var F;if(L)for(F=0;F<L.length;F++)d[L[F]]=e[L[F]];else for(F in e)d[F]=e[F];return d},floatingConnections:{},getFloatingAnchorIndex:function(d){return d.endpoints[0].isFloating()?0:d.endpoints[1].isFloating()?1:-1},proxyConnection:function(d,e,L,F,U,G){var E,O=d.endpoints[e].elementId,s=d.endpoints[e];d.proxies=d.proxies||[],d.proxies[e]?E=d.proxies[e].ep:E=this.addEndpoint(L,{endpoint:U(d,e),anchor:G(d,e),parameters:{isProxyEndpoint:!0}}),E.setDeleteOnEmpty(!0),d.proxies[e]={ep:E,originalEp:s},e===0?this.router.sourceOrTargetChanged(O,F,d,L,0):this.router.sourceOrTargetChanged(O,F,d,L,1),s.detachFromConnection(d,null,!0),E.connections=[d],d.endpoints[e]=E,s.setVisible(!1),d.setVisible(!0),this.revalidate(L)},unproxyConnection:function(d,e,L){if(!(d._jsPlumb==null||d.proxies==null||d.proxies[e]==null)){var F=d.proxies[e].originalEp.element,U=d.proxies[e].originalEp.elementId;d.endpoints[e]=d.proxies[e].originalEp,e===0?this.router.sourceOrTargetChanged(L,U,d,F,0):this.router.sourceOrTargetChanged(L,U,d,F,1),d.proxies[e].ep.detachFromConnection(d,null),d.proxies[e].originalEp.addConnection(d),d.isVisible()&&d.proxies[e].originalEp.setVisible(!0),delete d.proxies[e]}}});var C=new I;p.jsPlumb=C,C.getInstance=function(d,e){var L=new I(d);if(e)for(var F in e)L[F]=e[F];return L.init(),L},C.each=function(d,e){if(d!=null)if(typeof d=="string")e(C.getElement(d));else if(d.length!=null)for(var L=0;L<d.length;L++)e(C.getElement(d[L]));else e(d)},tt.jsPlumb=C}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X="__label",W=function(l,T){var u={cssClass:T.cssClass,labelStyle:l.labelStyle,id:X,component:l,_jsPlumb:l._jsPlumb.instance},r=n.extend(u,T);return new n.Overlays[l._jsPlumb.instance.getRenderMode()].Label(r)},J=function(l,T){var u=null;if(j.isArray(T)){var r=T[0],y=n.extend({component:l,_jsPlumb:l._jsPlumb.instance},T[1]);T.length===3&&n.extend(y,T[2]),u=new n.Overlays[l._jsPlumb.instance.getRenderMode()][r](y)}else T.constructor===String?u=new n.Overlays[l._jsPlumb.instance.getRenderMode()][T]({component:l,_jsPlumb:l._jsPlumb.instance}):u=T;return u.id=u.id||j.uuid(),l.cacheTypeItem("overlay",u,u.id),l._jsPlumb.overlays[u.id]=u,u};n.OverlayCapableJsPlumbUIComponent=function(l){p.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},l.label&&(this.getDefaultType().overlays[X]=["Label",{label:l.label,location:l.labelLocation||this.defaultLabelLocation||.5,labelStyle:l.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:X}]),this.setListenerComponent=function(T){if(this._jsPlumb)for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u].setListenerComponent(T)}},n.OverlayCapableJsPlumbUIComponent.applyType=function(l,T){if(T.overlays){var u={},r;for(r in T.overlays){var y=l._jsPlumb.overlays[T.overlays[r][1].id];if(y)y.updateFrom(T.overlays[r][1]),u[T.overlays[r][1].id]=!0,y.reattach(l._jsPlumb.instance,l);else{var x=l.getCachedTypeItem("overlay",T.overlays[r][1].id);x!=null?(x.reattach(l._jsPlumb.instance,l),x.setVisible(!0),x.updateFrom(T.overlays[r][1]),l._jsPlumb.overlays[x.id]=x):x=l.addOverlay(T.overlays[r],!0),u[x.id]=!0}}for(r in l._jsPlumb.overlays)u[l._jsPlumb.overlays[r].id]==null&&l.removeOverlay(l._jsPlumb.overlays[r].id,!0)}},j.extend(n.OverlayCapableJsPlumbUIComponent,p.jsPlumbUIComponent,{setHover:function(l,T){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u][l?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(l,T){var u=J(this,l);if(this.getData&&u.type==="Label"&&j.isArray(l)){var r=this.getData(),y=l[1];if(r){var x=y.labelLocationAttribute||"labelLocation",I=r?r[x]:null;I&&(u.loc=I)}}return T||this.repaint(),u},getOverlay:function(l){return this._jsPlumb.overlays[l]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(l){var T=this.getOverlay(l);T&&T.hide()},hideOverlays:function(){for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].hide()},showOverlay:function(l){var T=this.getOverlay(l);T&&T.show()},showOverlays:function(){for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].show()},removeAllOverlays:function(l){for(var T in this._jsPlumb.overlays)this._jsPlumb.overlays[T].cleanup&&this._jsPlumb.overlays[T].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},l||this.repaint()},removeOverlay:function(l,T){var u=this._jsPlumb.overlays[l];u&&(u.setVisible(!1),!T&&u.cleanup&&u.cleanup(),delete this._jsPlumb.overlays[l],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[l],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[l])},removeOverlays:function(){for(var l=0,T=arguments.length;l<T;l++)this.removeOverlay(arguments[l])},moveParent:function(l){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),l.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),l.appendChild(this.canvas);for(var T in this._jsPlumb.overlays)if(this._jsPlumb.overlays[T].isAppendedAtTopLevel){var u=this._jsPlumb.overlays[T].getElement();u.parentNode.removeChild(u),l.appendChild(u)}}},getLabel:function(){var l=this.getOverlay(X);return l!=null?l.getLabel():null},getLabelOverlay:function(){return this.getOverlay(X)},setLabel:function(l){var T=this.getOverlay(X);if(T)l.constructor===String||l.constructor===Function?T.setLabel(l):(l.label&&T.setLabel(l.label),l.location&&T.setLocation(l.location));else{var u=l.constructor===String||l.constructor===Function?{label:l}:l;T=W(this,u),this._jsPlumb.overlays[X]=T}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(l){for(var T in this._jsPlumb.overlays)this._jsPlumb.overlays[T].cleanup(l),this._jsPlumb.overlays[T].destroy(l);l&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(l){this[l?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(l,T){this._jsPlumb.overlayPositions[l.id]=T},getAbsoluteOverlayPosition:function(l){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[l.id]:null},_clazzManip:function(l,T,u){if(!u)for(var r in this._jsPlumb.overlays)this._jsPlumb.overlays[r][l+"Class"](T)},addClass:function(l,T){this._clazzManip("add",l,T)},removeClass:function(l,T){this._clazzManip("remove",l,T)}})}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X=function(u,r,y){var x=!1;return{drag:function(){if(x)return x=!1,!0;if(r.element){var I=y.getUIPosition(arguments,y.getZoom());I!=null&&y.setPosition(r.element,I),y.repaint(r.element,I),u.paint({anchorPoint:u.anchor.getCurrentLocation({element:u})})}},stopDrag:function(){x=!0}}},W=function(u,r,y,x){var I=r.createElement("div",{position:"absolute"});r.appendElement(I);var C=r.getId(I);r.setPosition(I,y),I.style.width=x[0]+"px",I.style.height=x[1]+"px",r.manage(C,I,!0),u.id=C,u.element=I},J=function(u,r,y,x,I,C,d,e){var L=new n.FloatingAnchor({reference:r,referenceCanvas:x,jsPlumbInstance:C});return d({paintStyle:u,endpoint:y,anchor:L,source:I,scope:e})},l=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],T=function(u,r){var y=0;if(r!=null){for(var x=0;x<u.connections.length;x++)if(u.connections[x].sourceId===r||u.connections[x].targetId===r){y=x;break}}return u.connections[y]};n.Endpoint=function(u){var r=u._jsPlumb,y=u.newConnection,x=u.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],n.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:u.connectionType,maxConnections:u.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:u.maxConnections,paintStyle:u.endpointStyle||u.paintStyle||u.style||this._jsPlumb.instance.Defaults.EndpointStyle||n.Defaults.EndpointStyle,hoverPaintStyle:u.endpointHoverStyle||u.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||n.Defaults.EndpointHoverStyle,connectorStyle:u.connectorStyle,connectorHoverStyle:u.connectorHoverStyle,connectorClass:u.connectorClass,connectorHoverClass:u.connectorHoverClass,connectorOverlays:u.connectorOverlays,connector:u.connector,connectorTooltip:u.connectorTooltip}),this._jsPlumb.enabled=u.enabled!==!1,this._jsPlumb.visible=!0,this.element=n.getElement(u.source),this._jsPlumb.uuid=u.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(u.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=u.elementId,this.dragProxy=u.dragProxy,this._jsPlumb.connectionCost=u.connectionCost,this._jsPlumb.connectionsDirected=u.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var I=u.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(E){I=E};var C=function(){var E=r.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var O=r.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(E),this.addClass(O),n.updateClasses(this.element,O,E)}.bind(this);this.prepareAnchor=function(E){var O=this._jsPlumb.instance.makeAnchor(E,this.elementId,r);return O.bind("anchorChanged",function(s){this.fire("anchorChanged",{endpoint:this,anchor:s}),C()}.bind(this)),O},this.setPreparedAnchor=function(E,O){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=E,C(),O||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(E,O){var s=this.prepareAnchor(E);return this.setPreparedAnchor(s,O),this};var d=function(E){if(this.connections.length>0)for(var O=0;O<this.connections.length;O++)this.connections[O].setHover(E,!1);else this.setHover(E)}.bind(this);this.bind("mouseover",function(){d(!0)}),this.bind("mouseout",function(){d(!1)}),u._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(E,O){var s=function(P,D){var h=r.getRenderMode();if(n.Endpoints[h][P])return new n.Endpoints[h][P](D);if(!r.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+P+"'"}},f={_jsPlumb:this._jsPlumb.instance,cssClass:u.cssClass,container:u.container,tooltip:u.tooltip,connectorTooltip:u.connectorTooltip,endpoint:this},c;return j.isString(E)?c=s(E,f):j.isArray(E)?(f=j.merge(E[1],f),c=s(E[0],f)):c=E.clone(),c.clone=function(){if(j.isString(E))return s(E,f);if(j.isArray(E))return f=j.merge(E[1],f),s(E[0],f)}.bind(this),c.typeId=O,c},this.setEndpoint=function(E,O){var s=this.prepareEndpoint(E);this.setPreparedEndpoint(s,!0)},this.setPreparedEndpoint=function(E,O){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=E,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},n.extend(this,u,l),this.isSource=u.isSource||!1,this.isTemporarySource=u.isTemporarySource||!1,this.isTarget=u.isTarget||!1,this.connections=u.connections||[],this.connectorPointerEvents=u["connector-pointer-events"],this.scope=u.scope||r.getDefaultScope(),this.timestamp=null,this.reattachConnections=u.reattach||r.Defaults.ReattachConnections,this.connectionsDetachable=r.Defaults.ConnectionsDetachable,(u.connectionsDetachable===!1||u.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=u.dragAllowedWhenFull!==!1,u.onMaxConnections&&this.bind("maxConnections",u.onMaxConnections),this.addConnection=function(E){this.connections.push(E),this[(this.connections.length>0?"add":"remove")+"Class"](r.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](r.endpointFullClass)},this.detachFromConnection=function(E,O,s){O=O==null?this.connections.indexOf(E):O,O>=0&&(this.connections.splice(O,1),this[(this.connections.length>0?"add":"remove")+"Class"](r.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](r.endpointFullClass)),!s&&I&&this.connections.length===0&&r.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:s!==!0})},this.deleteEveryConnection=function(E){for(var O=this.connections.length,s=0;s<O;s++)r.deleteConnection(this.connections[0],E)},this.detachFrom=function(E,O,s){for(var f=[],c=0;c<this.connections.length;c++)(this.connections[c].endpoints[1]===E||this.connections[c].endpoints[0]===E)&&f.push(this.connections[c]);for(var P=0,D=f.length;P<D;P++)r.deleteConnection(f[0]);return this},this.getElement=function(){return this.element},this.setElement=function(E){var O=this._jsPlumb.instance.getId(E),s=this.elementId;return j.removeWithFunction(u.endpointsByElement[this.elementId],function(f){return f.id===this.id}.bind(this)),this.element=n.getElement(E),this.elementId=r.getId(this.element),r.router.rehomeEndpoint(this,s,this.element),r.dragManager.endpointAdded(this.element),j.addToList(u.endpointsByElement,O,this),this},this.makeInPlaceCopy=function(){var E=this.anchor.getCurrentLocation({element:this}),O=this.anchor.getOrientation(this),s=this.anchor.getCssClass(),f={bind:function(){},compute:function(){return[E[0],E[1]]},getCurrentLocation:function(){return[E[0],E[1]]},getOrientation:function(){return O},getCssClass:function(){return s}};return x({dropOptions:u.dropOptions,anchor:f,source:this.element,paintStyle:this.getPaintStyle(),endpoint:u.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(E){E=E||{};var O=E.timestamp,s=E.recalc!==!1;if(!O||this.timestamp!==O){var f=r.updateOffset({elId:this.elementId,timestamp:O}),c=E.offset?E.offset.o:f.o;if(c!=null){var P=E.anchorPoint,D=E.connectorPaintStyle;if(P==null){var h=E.dimensions||f.s,M={xy:[c.left,c.top],wh:h,element:this,timestamp:O};if(s&&this.anchor.isDynamic&&this.connections.length>0){var _=T(this,E.elementWithPrecedence),A=_.endpoints[0]===this?1:0,v=A===0?_.sourceId:_.targetId,S=r.getCachedData(v),H=S.o,V=S.s;M.index=A===0?1:0,M.connection=_,M.txy=[H.left,H.top],M.twh=V,M.tElement=_.endpoints[A],M.tRotation=r.getRotation(v)}else this.connections.length>0&&(M.connection=this.connections[0]);M.rotation=r.getRotation(this.elementId),P=this.anchor.compute(M)}this.endpoint.compute(P,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,D||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=O;for(var Y in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(Y)){var i=this._jsPlumb.overlays[Y];i.isVisible()&&(this._jsPlumb.overlayPlacements[Y]=i.draw(this.endpoint,this._jsPlumb.paintStyleInUse),i.paint(this._jsPlumb.overlayPlacements[Y]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&n.isDragSupported(this.element)){var E={id:null,element:null},O=null,s=!1,f=null,c=X(this,E,r),P=u.dragOptions||{},D={},h=n.dragEvents.start,M=n.dragEvents.stop,_=n.dragEvents.drag,A=n.dragEvents.beforeStart,v,S=function(Y){v=Y.e.payload||{}},H=function(Y){O=this.connectorSelector();var i=!0;this.isEnabled()||(i=!1),O==null&&!this.isSource&&!this.isTemporarySource&&(i=!1),this.isSource&&this.isFull()&&!(O!=null&&this.dragAllowedWhenFull)&&(i=!1),O!=null&&!O.isDetachable(this)&&(this.isFull()?i=!1:O=null);var a=r.checkCondition(O==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:O});if(a===!1?i=!1:typeof a=="object"?n.extend(a,v||{}):a=v||{},i===!1)return r.stopDrag&&r.stopDrag(this.canvas),c.stopDrag(),!1;for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(!1);this.addClass("endpointDrag"),r.setConnectionBeingDragged(!0),O&&!this.isFull()&&this.isSource&&(O=null),r.updateOffset({elId:this.elementId});var g=this._jsPlumb.instance.getOffset(this.canvas),m=this.canvas,N=this._jsPlumb.instance.getSize(this.canvas);W(E,r,g,N),r.setAttributes(this.canvas,{dragId:E.id,elId:this.elementId});var R=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var K=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);K.endpoints[1]&&(R=K.endpoints[1])}var B=this._jsPlumb.instance.makeAnchor("Center");B.isFloating=!0,this._jsPlumb.floatingEndpoint=J(this.getPaintStyle(),B,R,this.canvas,E.element,r,x,this.scope);var Z=this._jsPlumb.floatingEndpoint.anchor;if(O==null)this.setHover(!1,!1),O=y({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:E.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:u.connectorStyle,hoverPaintStyle:u.connectorHoverStyle,connector:u.connector,overlays:u.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:u.scope,data:a}),O.pending=!0,O.addClass(r.draggingClass),this._jsPlumb.floatingEndpoint.addClass(r.draggingClass),this._jsPlumb.floatingEndpoint.anchor=Z,r.fire("connectionDrag",O),r.router.newConnection(O);else{s=!0,O.setHover(!1);var ut=O.endpoints[0].id===this.id?0:1;this.detachFromConnection(O,null,!0);var ot=r.getDragScope(m);r.setAttribute(this.canvas,"originalScope",ot),r.fire("connectionDrag",O),ut===0?(f=[O.source,O.sourceId,m,ot],r.router.sourceOrTargetChanged(O.endpoints[ut].elementId,E.id,O,E.element,0)):(f=[O.target,O.targetId,m,ot],r.router.sourceOrTargetChanged(O.endpoints[ut].elementId,E.id,O,E.element,1)),O.suspendedEndpoint=O.endpoints[ut],O.suspendedElement=O.endpoints[ut].getElement(),O.suspendedElementId=O.endpoints[ut].elementId,O.suspendedElementType=ut===0?"source":"target",O.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=O.suspendedEndpoint,O.endpoints[ut]=this._jsPlumb.floatingEndpoint,O.addClass(r.draggingClass),this._jsPlumb.floatingEndpoint.addClass(r.draggingClass)}r.registerFloatingConnection(E,O,this._jsPlumb.floatingEndpoint),r.currentlyDragging=!0}.bind(this),V=function(){if(r.setConnectionBeingDragged(!1),O&&O.endpoints!=null){var Y=r.getDropEvent(arguments),i=r.getFloatingAnchorIndex(O);if(O.endpoints[i===0?1:0].anchor.locked=!1,O.removeClass(r.draggingClass),this._jsPlumb&&(O.deleteConnectionNow||O.endpoints[i]===this._jsPlumb.floatingEndpoint)&&s&&O.suspendedEndpoint){i===0?(O.floatingElement=O.source,O.floatingId=O.sourceId,O.floatingEndpoint=O.endpoints[0],O.floatingIndex=0,O.source=f[0],O.sourceId=f[1]):(O.floatingElement=O.target,O.floatingId=O.targetId,O.floatingEndpoint=O.endpoints[1],O.floatingIndex=1,O.target=f[0],O.targetId=f[1]);var a=this._jsPlumb.floatingEndpoint;r.setDragScope(f[2],f[3]),O.endpoints[i]=O.suspendedEndpoint,O.isReattach()||O._forceReattach||O._forceDetach||!r.deleteConnection(O,{originalEvent:Y})?(O.setHover(!1),O._forceDetach=null,O._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(O),O.suspendedEndpoint.addConnection(O),i===1?r.router.sourceOrTargetChanged(O.floatingId,O.targetId,O,O.target,i):r.router.sourceOrTargetChanged(O.floatingId,O.sourceId,O,O.source,i),r.repaint(f[1])):r.deleteObject({endpoint:a})}this.deleteAfterDragStop?r.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),r.fire("connectionDragStop",O,Y),O.pending&&r.fire("connectionAborted",O,Y),r.currentlyDragging=!1,O.suspendedElement=null,O.suspendedEndpoint=null,O=null}E&&E.element&&r.remove(E.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);P=n.extend(D,P),P.scope=this.scope||P.scope,P[A]=j.wrap(P[A],S,!1),P[h]=j.wrap(P[h],H,!1),P[_]=j.wrap(P[_],c.drag),P[M]=j.wrap(P[M],V),P.multipleDrop=!1,P.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}.bind(this),r.initDraggable(this.canvas,P,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var L=u.endpoint||this._jsPlumb.instance.Defaults.Endpoint||n.Defaults.Endpoint;this.setEndpoint(L,!0);var F=u.anchor?u.anchor:u.anchors?u.anchors:r.Defaults.Anchor||"Top";this.setAnchor(F,!0);var U=["default",u.type||""].join(" ");this.addType(U,u.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var G=function(E,O,s,f){if(n.isDropSupported(this.element)){var c=u.dropOptions||r.Defaults.DropOptions||n.Defaults.DropOptions;c=n.extend({},c),c.scope=c.scope||this.scope;var P=n.dragEvents.drop,D=n.dragEvents.over,h=n.dragEvents.out,M=this,_=r.EndpointDropHandler({getEndpoint:function(){return M},jsPlumb:r,enabled:function(){return s!=null?s.isEnabled():!0},isFull:function(){return s.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(A){M.addClass(A)},removeClass:function(A){M.removeClass(A)},isDropAllowed:function(){return M.isDropAllowed.apply(M,arguments)},reference:f,isRedrop:function(A,v){return A.suspendedEndpoint&&v.reference&&A.suspendedEndpoint.id===v.reference.id}});c[P]=j.wrap(c[P],_,!0),c[D]=j.wrap(c[D],function(){var A=n.getDragObject(arguments),v=r.getAttribute(n.getElement(A),"dragId"),S=r.getFloatingConnectionFor(v);if(S!=null){var H=r.getFloatingAnchorIndex(S),V=this.isTarget&&H!==0||S.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===S.suspendedEndpoint.id;if(V){var Y=r.checkCondition("checkDropAllowed",{sourceEndpoint:S.endpoints[H],targetEndpoint:this,connection:S});this[(Y?"add":"remove")+"Class"](r.endpointDropAllowedClass),this[(Y?"remove":"add")+"Class"](r.endpointDropForbiddenClass),S.endpoints[H].anchor.over(this.anchor,this)}}}.bind(this)),c[h]=j.wrap(c[h],function(){var A=n.getDragObject(arguments),v=A==null?null:r.getAttribute(n.getElement(A),"dragId"),S=v?r.getFloatingConnectionFor(v):null;if(S!=null){var H=r.getFloatingAnchorIndex(S),V=this.isTarget&&H!==0||S.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===S.suspendedEndpoint.id;V&&(this.removeClass(r.endpointDropAllowedClass),this.removeClass(r.endpointDropForbiddenClass),S.endpoints[H].anchor.out())}}.bind(this)),r.initDroppable(E,c,"internal",O)}}.bind(this);return this.anchor.isFloating||G(this.canvas,!(u._transient||this.anchor.isFloating),this,u.reference),this},j.extend(n.Endpoint,n.OverlayCapableJsPlumbUIComponent,{setVisible:function(u,r,y){if(this._jsPlumb.visible=u,this.canvas&&(this.canvas.style.display=u?"block":"none"),this[u?"showOverlays":"hideOverlays"](),!r){for(var x=0;x<this.connections.length;x++)if(this.connections[x].setVisible(u),!y){var I=this===this.connections[x].endpoints[0]?1:0;this.connections[x].endpoints[I].connections.length===1&&this.connections[x].endpoints[I].setVisible(u,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(u,r){this.setPaintStyle(u.endpointStyle||u.paintStyle,r),this.setHoverPaintStyle(u.endpointHoverStyle||u.hoverPaintStyle,r),u.maxConnections!=null&&(this._jsPlumb.maxConnections=u.maxConnections),u.scope&&(this.scope=u.scope),n.extend(this,u,l),u.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,u.cssClass),n.OverlayCapableJsPlumbUIComponent.applyType(this,u)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(u){this._jsPlumb.enabled=u},cleanup:function(){var u=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");n.removeClass(this.element,u),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(u){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(u)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(u){var r=!1;if(u){for(var y=0;y<this.connections.length;y++)if(this.connections[y].endpoints[1]===u||this.connections[y].endpoints[0]===u){r=!0;break}}return r},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(u){this._jsPlumb.connectionCost=u},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(u){this._jsPlumb.connectionsDirected=u},setElementId:function(u){this.elementId=u,this.anchor.elementId=u},setReferenceElement:function(u){this.element=n.getElement(u)},setDragAllowedWhenFull:function(u){this.dragAllowedWhenFull=u},equals:function(u){return this.anchor.equals(u.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(u){return this.anchor.compute(u)}}),p.jsPlumbInstance.prototype.EndpointDropHandler=function(u){return function(r){var y=u.jsPlumb;u.removeClass(y.endpointDropAllowedClass),u.removeClass(y.endpointDropForbiddenClass);var x=y.getDropEvent(arguments),I=y.getDragObject(arguments),C=y.getAttribute(I,"dragId");y.getAttribute(I,"elId");var d=y.getAttribute(I,"originalScope"),e=y.getFloatingConnectionFor(C);if(e!=null){var L=e.suspendedEndpoint!=null;if(!(L&&e.suspendedEndpoint._jsPlumb==null)){var F=u.getEndpoint(e);if(F!=null){if(u.isRedrop(e,u)){e._forceReattach=!0,e.setHover(!1),u.maybeCleanup&&u.maybeCleanup(F);return}var U=y.getFloatingAnchorIndex(e);if(U===0&&!u.isSource||U===1&&!u.isTarget){u.maybeCleanup&&u.maybeCleanup(F);return}u.onDrop&&u.onDrop(e),d&&y.setDragScope(I,d);var G=u.isFull(r);if(G&&F.fire("maxConnections",{endpoint:this,connection:e,maxConnections:F._jsPlumb.maxConnections},x),!G&&u.enabled()){var E=!0;U===0?(e.floatingElement=e.source,e.floatingId=e.sourceId,e.floatingEndpoint=e.endpoints[0],e.floatingIndex=0,e.source=u.element,e.sourceId=y.getId(u.element)):(e.floatingElement=e.target,e.floatingId=e.targetId,e.floatingEndpoint=e.endpoints[1],e.floatingIndex=1,e.target=u.element,e.targetId=y.getId(u.element)),L&&e.suspendedEndpoint.id!==F.id&&(!e.isDetachAllowed(e)||!e.endpoints[U].isDetachAllowed(e)||!e.suspendedEndpoint.isDetachAllowed(e)||!y.checkCondition("beforeDetach",e))&&(E=!1);var O=function(f){e.endpoints[U].detachFromConnection(e),e.suspendedEndpoint&&e.suspendedEndpoint.detachFromConnection(e),e.endpoints[U]=F,F.addConnection(e);var c=F.getParameters();for(var P in c)e.setParameter(P,c[P]);if(!L)c.draggable&&y.initDraggable(this.element,u.dragOptions,"internal",y);else{var D=e.suspendedEndpoint.elementId;y.fireMoveEvent({index:U,originalSourceId:U===0?D:e.sourceId,newSourceId:U===0?F.elementId:e.sourceId,originalTargetId:U===1?D:e.targetId,newTargetId:U===1?F.elementId:e.targetId,originalSourceEndpoint:U===0?e.suspendedEndpoint:e.endpoints[0],newSourceEndpoint:U===0?F:e.endpoints[0],originalTargetEndpoint:U===1?e.suspendedEndpoint:e.endpoints[1],newTargetEndpoint:U===1?F:e.endpoints[1],connection:e},x)}if(U===1?y.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):y.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),e.endpoints[0].finalEndpoint){var h=e.endpoints[0];h.detachFromConnection(e),e.endpoints[0]=e.endpoints[0].finalEndpoint,e.endpoints[0].addConnection(e)}j.isObject(f)&&e.mergeData(f),y.finaliseConnection(e,null,x,!1),e.setHover(!1),y.revalidate(e.endpoints[0].element)}.bind(this),s=function(){e.suspendedEndpoint&&(e.endpoints[U]=e.suspendedEndpoint,e.setHover(!1),e._forceDetach=!0,U===0?(e.source=e.suspendedEndpoint.element,e.sourceId=e.suspendedEndpoint.elementId):(e.target=e.suspendedEndpoint.element,e.targetId=e.suspendedEndpoint.elementId),e.suspendedEndpoint.addConnection(e),U===1?y.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):y.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),y.repaint(e.sourceId),e._forceDetach=!1)};if(E=E&&u.isDropAllowed(e.sourceId,e.targetId,e.scope,e,F),E)return O(E),!0;s()}u.maybeCleanup&&u.maybeCleanup(F),y.currentlyDragging=!1}}}}}}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X=function(l,T,u,r,y){if(n.Connectors[T]=n.Connectors[T]||{},n.Connectors[T][u]==null){if(n.Connectors[u]==null){if(l.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+u+"'")}n.Connectors[T][u]=function(){n.Connectors[u].apply(this,arguments),n.ConnectorRenderers[T].apply(this,arguments)},j.extend(n.Connectors[T][u],[n.Connectors[u],n.ConnectorRenderers[T]])}return new n.Connectors[T][u](r,y)},W=function(l,T,u){return l?u.makeAnchor(l,T,u):null},J=function(l,T,u,r){T!=null&&(T._jsPlumbConnections=T._jsPlumbConnections||{},r?delete T._jsPlumbConnections[l.id]:T._jsPlumbConnections[l.id]=!0,j.isEmpty(T._jsPlumbConnections)?u.removeClass(T,u.connectedClass):u.addClass(T,u.connectedClass))};n.Connection=function(l){var T=l.newEndpoint;this.id=l.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=l.previousConnection,this.source=n.getElement(l.source),this.target=n.getElement(l.target),n.OverlayCapableJsPlumbUIComponent.apply(this,arguments),l.sourceEndpoint?(this.source=l.sourceEndpoint.getElement(),this.sourceId=l.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),l.targetEndpoint?(this.target=l.targetEndpoint.getElement(),this.targetId=l.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=l.scope,this.endpoints=[],this.endpointStyles=[];var u=this._jsPlumb.instance;u.manage(this.sourceId,this.source),u.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:l.cssClass,container:l.container,"pointer-events":l["pointer-events"],editorParams:l.editorParams,overlays:l.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(P,D,h,M,_){return h=h||this._jsPlumb.instance.getId(D),this.prepareEndpoint(u,T,this,M,P?0:1,l,D,h,_)},l.type&&(l.endpoints=l.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(l.type).endpoints);var r=this.makeEndpoint(!0,this.source,this.sourceId,l.sourceEndpoint),y=this.makeEndpoint(!1,this.target,this.targetId,l.targetEndpoint);r&&j.addToList(l.endpointsByElement,this.sourceId,r),y&&j.addToList(l.endpointsByElement,this.targetId,y),this.scope||(this.scope=this.endpoints[0].scope),l.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(l.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(l.deleteEndpointsOnEmpty));var x=u.Defaults.ConnectionsDetachable;l.detachable===!1&&(x=!1),this.endpoints[0].connectionsDetachable===!1&&(x=!1),this.endpoints[1].connectionsDetachable===!1&&(x=!1);var I=l.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||u.Defaults.ReattachConnections;this.appendToDefaultType({detachable:x,reattach:I,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||l.paintStyle||u.Defaults.PaintStyle||n.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||l.hoverPaintStyle||u.Defaults.HoverPaintStyle||n.Defaults.HoverPaintStyle});var C=u.getSuspendedAt();if(!u.isSuspendDrawing()){var d=u.getCachedData(this.sourceId),e=d.o,L=d.s,F=u.getCachedData(this.targetId),U=F.o,G=F.s,E=C||jsPlumbUtil.uuid(),O=this.endpoints[0].anchor.compute({xy:[e.left,e.top],wh:L,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[U.left,U.top],twh:G,tElement:this.endpoints[1],timestamp:E,rotation:u.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:O,timestamp:E}),O=this.endpoints[1].anchor.compute({xy:[U.left,U.top],wh:G,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[e.left,e.top],twh:L,tElement:this.endpoints[0],timestamp:E,rotation:u.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:O,timestamp:E})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(P){return this._jsPlumb.detachable===!1?!1:P!=null?P.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(P){this._jsPlumb.detachable=P===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(P){this._jsPlumb.reattach=P===!0},this._jsPlumb.cost=l.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=l.directed,l.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var s=n.extend({},this.endpoints[1].getParameters());n.extend(s,this.endpoints[0].getParameters()),n.extend(s,this.getParameters()),this.setParameters(s),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||l.connector||u.Defaults.Connector||n.Defaults.Connector,!0);var f=l.data==null||!j.isObject(l.data)?{}:l.data;this.getData=function(){return f},this.setData=function(P){f=P||{}},this.mergeData=function(P){f=n.extend(f,P)};var c=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,l.type].join(" ");/[^\s]/.test(c)&&this.addType(c,l.data,!0),this.updateConnectedClass()},j.extend(n.Connection,n.OverlayCapableJsPlumbUIComponent,{applyType:function(l,T,u){var r=null;l.connector!=null&&(r=this.getCachedTypeItem("connector",u.connector),r==null&&(r=this.prepareConnector(l.connector,u.connector),this.cacheTypeItem("connector",r,u.connector)),this.setPreparedConnector(r)),l.detachable!=null&&this.setDetachable(l.detachable),l.reattach!=null&&this.setReattach(l.reattach),l.scope&&(this.scope=l.scope),l.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,l.cssClass);var y=null;l.anchor?(y=this.getCachedTypeItem("anchors",u.anchor),y==null&&(y=[this._jsPlumb.instance.makeAnchor(l.anchor),this._jsPlumb.instance.makeAnchor(l.anchor)],this.cacheTypeItem("anchors",y,u.anchor))):l.anchors&&(y=this.getCachedTypeItem("anchors",u.anchors),y==null&&(y=[this._jsPlumb.instance.makeAnchor(l.anchors[0]),this._jsPlumb.instance.makeAnchor(l.anchors[1])],this.cacheTypeItem("anchors",y,u.anchors))),y!=null&&(this.endpoints[0].anchor=y[0],this.endpoints[1].anchor=y[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),n.OverlayCapableJsPlumbUIComponent.applyType(this,l)},addClass:function(l,T){T&&(this.endpoints[0].addClass(l),this.endpoints[1].addClass(l),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(l)),this.connector&&this.connector.addClass(l)},removeClass:function(l,T){T&&(this.endpoints[0].removeClass(l),this.endpoints[1].removeClass(l),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(l)),this.connector&&this.connector.removeClass(l)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(l){this._jsPlumb.visible=l,this.connector&&this.connector.setVisible(l),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(l){this._jsPlumb&&(J(this,this.source,this._jsPlumb.instance,l),J(this,this.target,this._jsPlumb.instance,l))},setHover:function(l){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(l),p.jsPlumb[l?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),p.jsPlumb[l?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(l){this._jsPlumb.cost=l},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(l,T){var u={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},r=this._jsPlumb.instance.getRenderMode(),y;return j.isString(l)?y=X(this._jsPlumb.instance,r,l,u,this):j.isArray(l)&&(l.length===1?y=X(this._jsPlumb.instance,r,l[0],u,this):y=X(this._jsPlumb.instance,r,l[0],j.merge(l[1],u),this)),T!=null&&(y.typeId=T),y},setPreparedConnector:function(l,T,u,r){if(this.connector!==l){var y,x="";if(this.connector!=null&&(y=this.connector,x=y.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=l,r&&this.cacheTypeItem("connector",l,r),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(x),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),y!=null)for(var I=this.getOverlays(),C=0;C<I.length;C++)I[C].transfer&&I[C].transfer(this.connector);u||this.setListenerComponent(this.connector),T||this.repaint()}},setConnector:function(l,T,u,r){var y=this.prepareConnector(l,r);this.setPreparedConnector(y,T,u,r)},paint:function(l){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){l=l||{};var T=l.timestamp,u=!1,r=u?this.sourceId:this.targetId,y=u?this.targetId:this.sourceId,x=u?0:1,I=u?1:0;if(T==null||T!==this._jsPlumb.lastPaintedAt){var C=this._jsPlumb.instance.updateOffset({elId:y}).o,d=this._jsPlumb.instance.updateOffset({elId:r}).o,e=this.endpoints[I],L=this.endpoints[x],F=e.anchor.getCurrentLocation({xy:[C.left,C.top],wh:[C.width,C.height],element:e,timestamp:T,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),U=L.anchor.getCurrentLocation({xy:[d.left,d.top],wh:[d.width,d.height],element:L,timestamp:T,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:F,targetPos:U,sourceOrientation:e.anchor.getOrientation(e),targetOrientation:L.anchor.getOrientation(L),sourceEndpoint:this.endpoints[I],targetEndpoint:this.endpoints[x],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:C,targetInfo:d});var G={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var E in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(E)){var O=this._jsPlumb.overlays[E];O.isVisible()&&(this._jsPlumb.overlayPlacements[E]=O.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(O)),G.minX=Math.min(G.minX,this._jsPlumb.overlayPlacements[E].minX),G.maxX=Math.max(G.maxX,this._jsPlumb.overlayPlacements[E].maxX),G.minY=Math.min(G.minY,this._jsPlumb.overlayPlacements[E].minY),G.maxY=Math.max(G.maxY,this._jsPlumb.overlayPlacements[E].maxY))}var s=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,f=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),c={xmin:Math.min(this.connector.bounds.minX-(s+f),G.minX),ymin:Math.min(this.connector.bounds.minY-(s+f),G.minY),xmax:Math.max(this.connector.bounds.maxX+(s+f),G.maxX),ymax:Math.max(this.connector.bounds.maxY+(s+f),G.maxY)};this.connector.paintExtents=c,this.connector.paint(this._jsPlumb.paintStyleInUse,null,c);for(var P in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(P)){var D=this._jsPlumb.overlays[P];D.isVisible()&&D.paint(this._jsPlumb.overlayPlacements[P],c)}}this._jsPlumb.lastPaintedAt=T}},repaint:function(l){var T=jsPlumb.extend(l||{},{});T.elId=this.sourceId,this.paint(T)},prepareEndpoint:function(l,T,u,r,y,x,I,C,d){var e;if(r)u.endpoints[y]=r,r.addConnection(u);else{x.endpoints||(x.endpoints=[null,null]);var L=d||x.endpoints[y]||x.endpoint||l.Defaults.Endpoints[y]||n.Defaults.Endpoints[y]||l.Defaults.Endpoint||n.Defaults.Endpoint;x.endpointStyles||(x.endpointStyles=[null,null]),x.endpointHoverStyles||(x.endpointHoverStyles=[null,null]);var F=x.endpointStyles[y]||x.endpointStyle||l.Defaults.EndpointStyles[y]||n.Defaults.EndpointStyles[y]||l.Defaults.EndpointStyle||n.Defaults.EndpointStyle;F.fill==null&&x.paintStyle!=null&&(F.fill=x.paintStyle.stroke),F.outlineStroke==null&&x.paintStyle!=null&&(F.outlineStroke=x.paintStyle.outlineStroke),F.outlineWidth==null&&x.paintStyle!=null&&(F.outlineWidth=x.paintStyle.outlineWidth);var U=x.endpointHoverStyles[y]||x.endpointHoverStyle||l.Defaults.EndpointHoverStyles[y]||n.Defaults.EndpointHoverStyles[y]||l.Defaults.EndpointHoverStyle||n.Defaults.EndpointHoverStyle;x.hoverPaintStyle!=null&&(U==null&&(U={}),U.fill==null&&(U.fill=x.hoverPaintStyle.stroke));var G=x.anchors?x.anchors[y]:x.anchor?x.anchor:W(l.Defaults.Anchors[y],C,l)||W(n.Defaults.Anchors[y],C,l)||W(l.Defaults.Anchor,C,l)||W(n.Defaults.Anchor,C,l),E=x.uuids?x.uuids[y]:null;e=T({paintStyle:F,hoverPaintStyle:U,endpoint:L,connections:[u],uuid:E,anchor:G,source:I,scope:x.scope,reattach:x.reattach||l.Defaults.ReattachConnections,detachable:x.detachable||l.Defaults.ConnectionsDetachable}),r==null&&e.setDeleteOnEmpty(!0),u.endpoints[y]=e,x.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e},replaceEndpoint:function(l,T){var u=this.endpoints[l],r=u.elementId,y=this._jsPlumb.instance.getEndpoints(r),x=y.indexOf(u),I=this.makeEndpoint(l===0,u.element,r,null,T);this.endpoints[l]=I,y.splice(x,1,I),this._jsPlumb.instance.deleteObject({endpoint:u,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:u,current:I}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumbUtil,j=p.jsPlumb;j.AnchorManager=function(l){var T={},u={},r={},y={},x=this,I={},C=l.jsPlumbInstance,d={},e=function(c,P,D,h,M,_,A,v){for(var S=[],H=P[M?0:1]/(h.length+1),V=0;V<h.length;V++){var Y=(V+1)*H,i=_*P[M?1:0];A&&(Y=P[M?0:1]-Y);var a=M?Y:i,t=D.left+a,g=a/P[0],m=M?i:Y,N=D.top+m,R=m/P[1];if(v!==0){var K=jsPlumbUtil.rotatePoint([t,N],[D.centerx,D.centery],v);t=K[0],N=K[1]}S.push([t,N,g,R,h[V][1],h[V][2]])}return S},L=function(c,P){return P[0][0]-c[0][0]},F=function(c,P){var D=c[0][0]<0?-Math.PI-c[0][0]:Math.PI-c[0][0],h=P[0][0]<0?-Math.PI-P[0][0]:Math.PI-P[0][0];return D-h},U={top:F,right:L,bottom:L,left:F},G=function(c,P){return c.sort(P)},E=function(c,P){var D=C.getCachedData(c),h=D.s,M=D.o,_=function(A,v,S,H,V,Y,i){if(H.length>0)for(var a=G(H,U[A]),t=A==="right"||A==="top",g=C.getRotation(c),m=e(A,v,S,a,V,Y,t,g),N=function(ut,ot){u[ut.id]=[ot[0],ot[1],ot[2],ot[3]],r[ut.id]=i},R=0;R<m.length;R++){var K=m[R][4],B=K.endpoints[0].elementId===c,Z=K.endpoints[1].elementId===c;B&&N(K.endpoints[0],m[R]),Z&&N(K.endpoints[1],m[R])}};_("bottom",h,M,P.bottom,!0,1,[0,1]),_("top",h,M,P.top,!0,0,[0,-1]),_("left",h,M,P.left,!1,0,[-1,0]),_("right",h,M,P.right,!1,1,[1,0])};this.reset=function(){T={},y={},I={}},this.addFloatingConnection=function(c,P){d[c]=P},this.newConnection=function(c){var P=c.sourceId,D=c.targetId,h=c.endpoints,M=!0,_=function(A,v,S,H,V){P===D&&S.isContinuous&&(c._jsPlumb.instance.removeElement(h[1].canvas),M=!1),n.addToList(y,H,[V,v,S.constructor===j.DynamicAnchor])};_(0,h[0],h[0].anchor,D,c),M&&_(1,h[1],h[1].anchor,P,c)};var O=function(c){(function(P,D){if(P){var h=function(M){return M[4]===D};n.removeWithFunction(P.top,h),n.removeWithFunction(P.left,h),n.removeWithFunction(P.bottom,h),n.removeWithFunction(P.right,h)}})(I[c.elementId],c.id)};this.connectionDetached=function(c,P){var D=c.connection||c,h=c.sourceId,M=c.targetId,_=D.endpoints,A=function(v,S,H,V,Y){n.removeWithFunction(y[V],function(i){return i[0].id===Y.id})};A(1,_[1],_[1].anchor,h,D),A(0,_[0],_[0].anchor,M,D),D.floatingId&&(A(D.floatingIndex,D.floatingEndpoint,D.floatingEndpoint.anchor,D.floatingId,D),O(D.floatingEndpoint)),O(D.endpoints[0]),O(D.endpoints[1]),P||(x.redraw(D.sourceId),D.targetId!==D.sourceId&&x.redraw(D.targetId))},this.addEndpoint=function(c,P){n.addToList(T,P,c)},this.changeId=function(c,P){y[P]=y[c],T[P]=T[c],delete y[c],delete T[c]},this.getConnectionsFor=function(c){return y[c]||[]},this.getEndpointsFor=function(c){return T[c]||[]},this.deleteEndpoint=function(c){n.removeWithFunction(T[c.elementId],function(P){return P.id===c.id}),O(c)},this.elementRemoved=function(c){delete d[c],delete T[c],T[c]=[]};var s=function(c,P,D,h,M,_,A,v,S,H,V,Y){var i=-1,a=h.endpoints[A],t=a.id,g=[1,0][A],m=[[P,D],h,M,_,t],N=c[S],R=a._continuousAnchorEdge?c[a._continuousAnchorEdge]:null,K,B;if(R){var Z=n.findWithFunction(R,function(ot){return ot[4]===t});if(Z!==-1)for(R.splice(Z,1),K=0;K<R.length;K++)B=R[K][1],n.addWithFunction(V,B,function(ot){return ot.id===B.id}),n.addWithFunction(Y,R[K][1].endpoints[A],function(ot){return ot.id===B.endpoints[A].id}),n.addWithFunction(Y,R[K][1].endpoints[g],function(ot){return ot.id===B.endpoints[g].id})}for(K=0;K<N.length;K++)B=N[K][1],l.idx===1&&N[K][3]===_&&i===-1&&(i=K),n.addWithFunction(V,B,function(ot){return ot.id===B.id}),n.addWithFunction(Y,N[K][1].endpoints[A],function(ot){return ot.id===B.endpoints[A].id}),n.addWithFunction(Y,N[K][1].endpoints[g],function(ot){return ot.id===B.endpoints[g].id});{var ut=v?i!==-1?i:0:N.length;N.splice(ut,0,m)}a._continuousAnchorEdge=S};this.sourceOrTargetChanged=function(c,P,D,h,M){if(M===0){if(c!==P){D.sourceId=P,D.source=h,n.removeWithFunction(y[c],function(H){return H[0].id===D.id});var _=n.findWithFunction(y[D.targetId],function(H){return H[0].id===D.id});_>-1&&(y[D.targetId][_][0]=D,y[D.targetId][_][1]=D.endpoints[0],y[D.targetId][_][2]=D.endpoints[0].anchor.constructor===j.DynamicAnchor),n.addToList(y,P,[D,D.endpoints[1],D.endpoints[1].anchor.constructor===j.DynamicAnchor]),D.endpoints[1].anchor.isContinuous&&(D.source===D.target?D._jsPlumb.instance.removeElement(D.endpoints[1].canvas):D.endpoints[1].canvas.parentNode==null&&D._jsPlumb.instance.appendElement(D.endpoints[1].canvas)),D.updateConnectedClass()}}else if(M===1){var A=D.endpoints[0].elementId;D.target=h,D.targetId=P;var v=n.findWithFunction(y[A],function(H){return H[0].id===D.id}),S=n.findWithFunction(y[c],function(H){return H[0].id===D.id});v!==-1&&(y[A][v][0]=D,y[A][v][1]=D.endpoints[1],y[A][v][2]=D.endpoints[1].anchor.constructor===j.DynamicAnchor),S>-1&&(y[c].splice(S,1),n.addToList(y,P,[D,D.endpoints[0],D.endpoints[0].anchor.constructor===j.DynamicAnchor])),D.updateConnectedClass()}},this.rehomeEndpoint=function(c,P,D){var h=T[P]||[],M=C.getId(D);if(M!==P){var _=h.indexOf(c);if(_>-1){var A=h.splice(_,1)[0];x.add(A,M)}}for(var v=0;v<c.connections.length;v++)c.connections[v].sourceId===P?x.sourceOrTargetChanged(P,c.elementId,c.connections[v],c.element,0):c.connections[v].targetId===P&&x.sourceOrTargetChanged(P,c.elementId,c.connections[v],c.element,1)},this.redraw=function(c,P,D,h,M,_){var A=[],v=[],S=[];if(!C.isSuspendDrawing()){var H=T[c]||[],V=y[c]||[];D=D||jsPlumbUtil.uuid(),h=h||{left:0,top:0},P&&(P={left:P.left+h.left,top:P.top+h.top});for(var Y=C.updateOffset({elId:c,offset:P,recalc:!1,timestamp:D}),i={},a=0;a<V.length;a++){var t=V[a][0],g=t.sourceId,m=t.targetId,N=t.endpoints[0].anchor.isContinuous,R=t.endpoints[1].anchor.isContinuous;if(N||R){var K=g+"_"+m,B=i[K],Z=t.sourceId===c?1:0,ut=C.getRotation(m),ot=C.getRotation(g);N&&!I[g]&&(I[g]={top:[],right:[],bottom:[],left:[]}),R&&!I[m]&&(I[m]={top:[],right:[],bottom:[],left:[]}),c!==m&&C.updateOffset({elId:m,timestamp:D}),c!==g&&C.updateOffset({elId:g,timestamp:D});var st=C.getCachedData(m),at=C.getCachedData(g);m===g&&(N||R)?(s(I[g],-Math.PI/2,0,t,!1,m,0,!1,"top",g,A,v),s(I[m],-Math.PI/2,0,t,!1,g,1,!1,"top",m,A,v)):(B||(B=this.calculateOrientation(g,m,at.o,st.o,t.endpoints[0].anchor,t.endpoints[1].anchor,t,ot,ut),i[K]=B),N&&s(I[g],B.theta,0,t,!1,m,0,!1,B.a[0],g,A,v),R&&s(I[m],B.theta2,-1,t,!0,g,1,!0,B.a[1],m,A,v)),N&&n.addWithFunction(S,g,function(mt){return mt===g}),R&&n.addWithFunction(S,m,function(mt){return mt===m}),n.addWithFunction(A,t,function(mt){return mt.id===t.id}),(N&&Z===0||R&&Z===1)&&n.addWithFunction(v,t.endpoints[Z],function(mt){return mt.id===t.endpoints[Z].id})}}for(a=0;a<H.length;a++)H[a].connections.length===0&&H[a].anchor.isContinuous&&(I[c]||(I[c]={top:[],right:[],bottom:[],left:[]}),s(I[c],-Math.PI/2,0,{endpoints:[H[a],H[a]],paint:function(){}},!1,c,0,!1,H[a].anchor.getDefaultFace(),c,A,v),n.addWithFunction(S,c,function(mt){return mt===c}));for(a=0;a<S.length;a++)E(S[a],I[S[a]]);for(a=0;a<H.length;a++)H[a].paint({timestamp:D,offset:Y,dimensions:Y.s,recalc:_!==!0});for(a=0;a<v.length;a++){var gt=C.getCachedData(v[a].elementId);v[a].paint({timestamp:null,offset:gt,dimensions:gt.s})}for(a=0;a<V.length;a++){var dt=V[a][1];if(dt.anchor.constructor===j.DynamicAnchor){dt.paint({elementWithPrecedence:c,timestamp:D}),n.addWithFunction(A,V[a][0],function(mt){return mt.id===V[a][0].id});for(var lt=0;lt<dt.connections.length;lt++)dt.connections[lt]!==V[a][0]&&n.addWithFunction(A,dt.connections[lt],function(mt){return mt.id===dt.connections[lt].id})}else n.addWithFunction(A,V[a][0],function(mt){return mt.id===V[a][0].id})}var yt=d[c];for(yt&&yt.paint({timestamp:D,recalc:!1,elId:c}),a=0;a<A.length;a++)A[a].paint({elId:c,timestamp:null,recalc:!1,clearEdits:M})}return{c:A,e:v}};var f=function(c){n.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var P=c.faces||["top","right","bottom","left"],D=c.clockwise!==!1,h={},M={top:"bottom",right:"left",left:"right",bottom:"top"},_={top:"right",right:"bottom",left:"top",bottom:"left"},A={top:"left",right:"top",left:"bottom",bottom:"right"},v=D?_:A,S=D?A:_,H=c.cssClass||"",V=null,Y=null,i=["left","right"],a=["top","bottom"],t=null,g=0;g<P.length;g++)h[P[g]]=!0;this.getDefaultFace=function(){return P.length===0?"top":P[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(m){return h[m]?m:h[M[m]]?M[m]:h[v[m]]?v[m]:h[S[m]]?S[m]:m},this.isEdgeSupported=function(m){return t==null?Y==null?h[m]===!0:Y===m:t.indexOf(m)!==-1},this.setCurrentFace=function(m,N){V=m,N&&Y!=null&&(Y=V)},this.getCurrentFace=function(){return V},this.getSupportedFaces=function(){var m=[];for(var N in h)h[N]&&m.push(N);return m},this.lock=function(){Y=V},this.unlock=function(){Y=null},this.isLocked=function(){return Y!=null},this.lockCurrentAxis=function(){V!=null&&(t=V==="left"||V==="right"?i:a)},this.unlockCurrentAxis=function(){t=null},this.compute=function(m){return u[m.element.id]||[0,0]},this.getCurrentLocation=function(m){return u[m.element.id]||[0,0]},this.getOrientation=function(m){return r[m.id]||[0,0]},this.getCssClass=function(){return H}};C.continuousAnchorFactory={get:function(c){return new f(c)},clear:function(c){delete u[c]}}},j.AnchorManager.prototype.calculateOrientation=function(l,T,u,r,y,x,I,C,d){var e={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},L=["left","top","right","bottom"];if(l===T)return{orientation:e.IDENTITY,a:["top","top"]};var F=Math.atan2(r.centery-u.centery,r.centerx-u.centerx),U=Math.atan2(u.centery-r.centery,u.centerx-r.centerx),G=[],E={};(function(D,h){for(var M=0;M<D.length;M++)if(E[D[M]]={left:[h[M][0].left,h[M][0].centery],right:[h[M][0].right,h[M][0].centery],top:[h[M][0].centerx,h[M][0].top],bottom:[h[M][0].centerx,h[M][0].bottom]},h[M][1]!==0)for(var _ in E[D[M]])E[D[M]][_]=jsPlumbUtil.rotatePoint(E[D[M]][_],[h[M][0].centerx,h[M][0].centery],h[M][1])})(["source","target"],[[u,C],[r,d]]);for(var O=0;O<L.length;O++)for(var s=0;s<L.length;s++)G.push({source:L[O],target:L[s],dist:Biltong.lineLength(E.source[L[O]],E.target[L[s]])});G.sort(function(D,h){return D.dist<h.dist?-1:D.dist>h.dist?1:0});for(var f=G[0].source,c=G[0].target,P=0;P<G.length&&(y.isContinuous&&y.locked?f=y.getCurrentFace():!y.isContinuous||y.isEdgeSupported(G[P].source)?f=G[P].source:f=null,x.isContinuous&&x.locked?c=x.getCurrentFace():!x.isContinuous||x.isEdgeSupported(G[P].target)?c=G[P].target:c=null,!(f!=null&&c!=null));P++);return y.isContinuous&&y.setCurrentFace(f),x.isContinuous&&x.setCurrentFace(c),{a:[f,c],theta:F,theta2:U}},j.Anchor=function(l){this.x=l.x||0,this.y=l.y||0,this.elementId=l.elementId,this.cssClass=l.cssClass||"",this.orientation=l.orientation||[0,0],this.lastReturnValue=null,this.offsets=l.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=l.relocatable!==!1,this.snapOnRelocate=l.snapOnRelocate!==!1,this.locked=!1,n.EventGenerator.apply(this),this.compute=function(T){var u=T.xy,r=T.wh,y=T.timestamp;if(y&&y===this.timestamp)return this.lastReturnValue;var x=[u[0]+this.x*r[0]+this.offsets[0],u[1]+this.y*r[1]+this.offsets[1],this.x,this.y],I=T.rotation;if(I!=null&&I!==0){var C=jsPlumbUtil.rotatePoint(x,[u[0]+r[0]/2,u[1]+r[1]/2],I);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*C[2]-this._unrotatedOrientation[1]*C[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*C[2]+this._unrotatedOrientation[0]*C[3]),this.lastReturnValue=[C[0],C[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=x;return this.timestamp=y,this.lastReturnValue},this.getCurrentLocation=function(T){return T=T||{},this.lastReturnValue==null||T.timestamp!=null&&this.timestamp!==T.timestamp?this.compute(T):this.lastReturnValue},this.setPosition=function(T,u,r,y,x){(!this.locked||x)&&(this.x=T,this.y=u,this.orientation=[r,y],this.lastReturnValue=null)}},n.extend(j.Anchor,n.EventGenerator,{equals:function(l){if(!l)return!1;var T=l.getOrientation(),u=this.getOrientation();return this.x===l.x&&this.y===l.y&&this.offsets[0]===l.offsets[0]&&this.offsets[1]===l.offsets[1]&&u[0]===T[0]&&u[1]===T[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),j.FloatingAnchor=function(l){j.Anchor.apply(this,arguments);var T=l.reference,u=l.referenceCanvas,r=j.getSize(u),y=0,x=0,I=null,C=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(d){var e=d.xy,L=[e[0]+r[0]/2,e[1]+r[1]/2];return C=L,L},this.getOrientation=function(d){if(I)return I;var e=T.getOrientation(d);return[Math.abs(e[0])*y*-1,Math.abs(e[1])*x*-1]},this.over=function(d,e){I=d.getOrientation(e)},this.out=function(){I=null},this.getCurrentLocation=function(d){return C==null?this.compute(d):C}},n.extend(j.FloatingAnchor,j.Anchor);var X=function(l,T,u){return l.constructor===j.Anchor?l:T.makeAnchor(l,u,T)};j.DynamicAnchor=function(l){j.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=l.elementId,this.jsPlumbInstance=l.jsPlumbInstance;for(var T=0;T<l.anchors.length;T++)this.anchors[T]=X(l.anchors[T],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var u=this.anchors.length>0?this.anchors[0]:null,r=u,y=function(I,C,d,e,L,F,U){var G=e[0]+I.x*L[0],E=e[1]+I.y*L[1],O=e[0]+L[0]/2,s=e[1]+L[1]/2;if(F!=null&&F!==0){var f=jsPlumbUtil.rotatePoint([G,E],[O,s],F);G=f[0],E=f[1]}return Math.sqrt(Math.pow(C-G,2)+Math.pow(d-E,2))+Math.sqrt(Math.pow(O-G,2)+Math.pow(s-E,2))},x=l.selector||function(I,C,d,e,L,F,U){for(var G=d[0]+e[0]/2,E=d[1]+e[1]/2,O=-1,s=1/0,f=0;f<U.length;f++){var c=y(U[f],G,E,I,C,L);c<s&&(O=f+0,s=c)}return U[O]};this.compute=function(I){var C=I.xy,d=I.wh,e=I.txy,L=I.twh,F=I.rotation,U=I.tRotation;return this.timestamp=I.timestamp,this.locked||e==null||L==null?(this.lastReturnValue=u.compute(I),this.lastReturnValue):(I.timestamp=null,u=x(C,d,e,L,F,U,this.anchors),this.x=u.x,this.y=u.y,u!==r&&this.fire("anchorChanged",u),r=u,this.lastReturnValue=u.compute(I),this.lastReturnValue)},this.getCurrentLocation=function(I){return u!=null?u.getCurrentLocation(I):null},this.getOrientation=function(I){return u!=null?u.getOrientation(I):[0,0]},this.over=function(I,C){u!=null&&u.over(I,C)},this.out=function(){u!=null&&u.out()},this.setAnchor=function(I){u=I},this.getCssClass=function(){return u&&u.getCssClass()||""},this.setAnchorCoordinates=function(I){var C=jsPlumbUtil.findWithFunction(this.anchors,function(d){return d.x===I[0]&&d.y===I[1]});return C!==-1?(this.setAnchor(this.anchors[C]),!0):!1}},n.extend(j.DynamicAnchor,j.Anchor);var W=function(l,T,u,r,y,x){j.Anchors[y]=function(I){var C=I.jsPlumbInstance.makeAnchor([l,T,u,r,0,0],I.elementId,I.jsPlumbInstance);return C.type=y,x&&x(C,I),C}};W(.5,0,0,-1,"TopCenter"),W(.5,1,0,1,"BottomCenter"),W(0,.5,-1,0,"LeftMiddle"),W(1,.5,1,0,"RightMiddle"),W(.5,0,0,-1,"Top"),W(.5,1,0,1,"Bottom"),W(0,.5,-1,0,"Left"),W(1,.5,1,0,"Right"),W(.5,.5,0,0,"Center"),W(1,0,0,-1,"TopRight"),W(1,1,0,1,"BottomRight"),W(0,0,0,-1,"TopLeft"),W(0,1,0,1,"BottomLeft"),j.Defaults.DynamicAnchors=function(l){return l.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],l.elementId,l.jsPlumbInstance)},j.Anchors.AutoDefault=function(l){var T=l.jsPlumbInstance.makeDynamicAnchor(j.Defaults.DynamicAnchors(l));return T.type="AutoDefault",T};var J=function(l,T){j.Anchors[l]=function(u){var r=u.jsPlumbInstance.makeAnchor(["Continuous",{faces:T}],u.elementId,u.jsPlumbInstance);return r.type=l,r}};j.Anchors.Continuous=function(l){return l.jsPlumbInstance.continuousAnchorFactory.get(l)},J("ContinuousLeft",["left"]),J("ContinuousTop",["top"]),J("ContinuousBottom",["bottom"]),J("ContinuousRight",["right"]),W(0,0,0,0,"Assign",function(l,T){var u=T.position||"Fixed";l.positionFinder=u.constructor===String?T.jsPlumbInstance.AnchorPositionFinders[u]:u,l.constructorParams=T}),p.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(l,T,u){return[(l.left-T.left)/u[0],(l.top-T.top)/u[1]]},Grid:function(l,T,u,r){var y=l.left-T.left,x=l.top-T.top,I=u[0]/r.grid[0],C=u[1]/r.grid[1],d=Math.floor(y/I),e=Math.floor(x/C);return[(d*I+I/2)/u[0],(e*C+C/2)/u[1]]}},j.Anchors.Perimeter=function(l){l=l||{};var T=l.anchorCount||60,u=l.shape;if(!u)throw new Error("no shape supplied to Perimeter Anchor type");var r=function(){for(var F=.5,U=Math.PI*2/T,G=0,E=[],O=0;O<T;O++){var s=F+F*Math.sin(G),f=F+F*Math.cos(G);E.push([s,f,0,0]),G+=U}return E},y=function(F){for(var U=T/F.length,G=[],E=function(s,f,c,P,D,h,M){U=T*D;for(var _=(c-s)/U,A=(P-f)/U,v=0;v<U;v++)G.push([s+_*v,f+A*v,h==null?0:h,M==null?0:M])},O=0;O<F.length;O++)E.apply(null,F[O]);return G},x=function(F){for(var U=[],G=0;G<F.length;G++)U.push([F[G][0],F[G][1],F[G][2],F[G][3],1/F.length,F[G][4],F[G][5]]);return y(U)},I=function(){return x([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},C={Circle:r,Ellipse:r,Diamond:function(){return x([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:I,Square:I,Triangle:function(){return x([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(F){for(var U=F.points,G=[],E=0,O=0;O<U.length-1;O++){var s=Math.sqrt(Math.pow(U[O][2]-U[O][0])+Math.pow(U[O][3]-U[O][1]));E+=s,G.push([U[O][0],U[O][1],U[O+1][0],U[O+1][1],s])}for(var f=0;f<G.length;f++)G[f][4]=G[f][4]/E;return y(G)}},d=function(F,U){for(var G=[],E=U/180*Math.PI,O=0;O<F.length;O++){var s=F[O][0]-.5,f=F[O][1]-.5;G.push([.5+(s*Math.cos(E)-f*Math.sin(E)),.5+(s*Math.sin(E)+f*Math.cos(E)),F[O][2],F[O][3]])}return G};if(!C[u])throw new Error("Shape ["+u+"] is unknown by Perimeter Anchor type");var e=C[u](l);l.rotation&&(e=d(e,l.rotation));var L=l.jsPlumbInstance.makeDynamicAnchor(e);return L.type="Perimeter",L}}.call(typeof window<"u"?window:Rt),function(){var p=this;p.jsPlumbUtil;var n=p.jsPlumb;n.DefaultRouter=function(j){this.jsPlumbInstance=j,this.anchorManager=new n.AnchorManager({jsPlumbInstance:j}),this.sourceOrTargetChanged=function(X,W,J,l,T){this.anchorManager.sourceOrTargetChanged(X,W,J,l,T)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(X,W){this.anchorManager.changeId(X,W)},this.elementRemoved=function(X){this.anchorManager.elementRemoved(X)},this.newConnection=function(X){this.anchorManager.newConnection(X)},this.connectionDetached=function(X,W){this.anchorManager.connectionDetached(X,W)},this.redraw=function(X,W,J,l,T,u){return this.anchorManager.redraw(X,W,J,l,T,u)},this.deleteEndpoint=function(X){this.anchorManager.deleteEndpoint(X)},this.rehomeEndpoint=function(X,W,J){this.anchorManager.rehomeEndpoint(X,W,J)},this.addEndpoint=function(X,W){this.anchorManager.addEndpoint(X,W)}}}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X=p.Biltong;n.Segments={AbstractSegment:function(r){this.params=r,this.findClosestPointOnPath=function(y,x){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(r.x1,r.x2),minY:Math.min(r.y1,r.y2),maxX:Math.max(r.x1,r.x2),maxY:Math.max(r.y1,r.y2)}},this.lineIntersection=function(y,x,I,C){return[]},this.boxIntersection=function(y,x,I,C){var d=[];return d.push.apply(d,this.lineIntersection(y,x,y+I,x)),d.push.apply(d,this.lineIntersection(y+I,x,y+I,x+C)),d.push.apply(d,this.lineIntersection(y+I,x+C,y,x+C)),d.push.apply(d,this.lineIntersection(y,x+C,y,x)),d},this.boundingBoxIntersection=function(y){return this.boxIntersection(y.x,y.y,y.w,y.y)}},Straight:function(r){n.Segments.AbstractSegment.apply(this,arguments);var y,x,I,C,d,e,L,F=function(){y=Math.sqrt(Math.pow(d-C,2)+Math.pow(L-e,2)),x=X.gradient({x:C,y:e},{x:d,y:L}),I=-1/x};this.type="Straight",this.getLength=function(){return y},this.getGradient=function(){return x},this.getCoordinates=function(){return{x1:C,y1:e,x2:d,y2:L}},this.setCoordinates=function(s){C=s.x1,e=s.y1,d=s.x2,L=s.y2,F()},this.setCoordinates({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}),this.getBounds=function(){return{minX:Math.min(C,d),minY:Math.min(e,L),maxX:Math.max(C,d),maxY:Math.max(e,L)}},this.pointOnPath=function(s,f){if(s===0&&!f)return{x:C,y:e};if(s===1&&!f)return{x:d,y:L};var c=f?s>0?s:y+s:s*y;return X.pointOnLine({x:C,y:e},{x:d,y:L},c)},this.gradientAtPoint=function(s){return x},this.pointAlongPathFrom=function(s,f,c){var P=this.pointOnPath(s,c),D=f<=0?{x:C,y:e}:{x:d,y:L};return f<=0&&Math.abs(f)>1&&(f*=-1),X.pointOnLine(P,D,f)};var U=function(s,f,c){return c>=Math.min(s,f)&&c<=Math.max(s,f)},G=function(s,f,c){return Math.abs(c-s)<Math.abs(c-f)?s:f};this.findClosestPointOnPath=function(s,f){var c={d:1/0,x:null,y:null,l:null,x1:C,x2:d,y1:e,y2:L};if(x===0)c.y=e,c.x=U(C,d,s)?s:G(C,d,s);else if(x===1/0||x===-1/0)c.x=C,c.y=U(e,L,f)?f:G(e,L,f);else{var P=e-x*C,D=f-I*s,h=(D-P)/(x-I),M=x*h+P;c.x=U(C,d,h)?h:G(C,d,h),c.y=U(e,L,M)?M:G(e,L,M)}var _=X.lineLength([c.x,c.y],[C,e]);return c.d=X.lineLength([s,f],[c.x,c.y]),c.l=_/y,c};var E=function(s,f,c){return c>f?f<=s&&s<=c:f>=s&&s>=c},O=E;this.lineIntersection=function(s,f,c,P){var D=Math.abs(X.gradient({x:s,y:f},{x:c,y:P})),h=Math.abs(x),M=h===1/0?C:e-h*C,_=[],A=D===1/0?s:f-D*s;if(D!==h)if(D===1/0&&h===0)O(s,C,d)&&O(e,f,P)&&(_=[s,e]);else if(D===0&&h===1/0)O(f,e,L)&&O(C,s,c)&&(_=[C,f]);else{var v,S;D===1/0?(v=s,O(v,C,d)&&(S=h*s+M,O(S,f,P)&&(_=[v,S]))):D===0?(S=f,O(S,e,L)&&(v=(f-M)/h,O(v,s,c)&&(_=[v,S]))):(v=(A-M)/(h-D),S=h*v+M,O(v,C,d)&&O(S,e,L)&&(_=[v,S]))}return _},this.boxIntersection=function(s,f,c,P){var D=[];return D.push.apply(D,this.lineIntersection(s,f,s+c,f)),D.push.apply(D,this.lineIntersection(s+c,f,s+c,f+P)),D.push.apply(D,this.lineIntersection(s+c,f+P,s,f+P)),D.push.apply(D,this.lineIntersection(s,f+P,s,f)),D},this.boundingBoxIntersection=function(s){return this.boxIntersection(s.x,s.y,s.w,s.h)}},Arc:function(r){n.Segments.AbstractSegment.apply(this,arguments);var y=function(G,E){return X.theta([r.cx,r.cy],[G,E])},x=function(G,E){if(G.anticlockwise){var O=G.startAngle<G.endAngle?G.startAngle+I:G.startAngle,s=Math.abs(O-G.endAngle);return O-s*E}else{var f=G.endAngle<G.startAngle?G.endAngle+I:G.endAngle,c=Math.abs(f-G.startAngle);return G.startAngle+c*E}},I=2*Math.PI;this.radius=r.r,this.anticlockwise=r.ac,this.type="Arc",r.startAngle&&r.endAngle?(this.startAngle=r.startAngle,this.endAngle=r.endAngle,this.x1=r.cx+this.radius*Math.cos(r.startAngle),this.y1=r.cy+this.radius*Math.sin(r.startAngle),this.x2=r.cx+this.radius*Math.cos(r.endAngle),this.y2=r.cy+this.radius*Math.sin(r.endAngle)):(this.startAngle=y(r.x1,r.y1),this.endAngle=y(r.x2,r.y2),this.x1=r.x1,this.y1=r.y1,this.x2=r.x2,this.y2=r.y2),this.endAngle<0&&(this.endAngle+=I),this.startAngle<0&&(this.startAngle+=I);var C=this.endAngle<this.startAngle?this.endAngle+I:this.endAngle;this.sweep=Math.abs(C-this.startAngle),this.anticlockwise&&(this.sweep=I-this.sweep);var d=2*Math.PI*this.radius,e=this.sweep/I,L=d*e;this.getLength=function(){return L},this.getBounds=function(){return{minX:r.cx-r.r,maxX:r.cx+r.r,minY:r.cy-r.r,maxY:r.cy+r.r}};var F=1e-10,U=function(G){var E=Math.floor(G),O=Math.ceil(G);return G-E<F?E:O-G<F?O:G};this.pointOnPath=function(G,E){if(G===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(G===1)return{x:this.x2,y:this.y2,theta:this.endAngle};E&&(G=G/L);var O=x(this,G),s=r.cx+r.r*Math.cos(O),f=r.cy+r.r*Math.sin(O);return{x:U(s),y:U(f),theta:O}},this.gradientAtPoint=function(G,E){var O=this.pointOnPath(G,E),s=X.normal([r.cx,r.cy],[O.x,O.y]);return!this.anticlockwise&&(s===1/0||s===-1/0)&&(s*=-1),s},this.pointAlongPathFrom=function(G,E,O){var s=this.pointOnPath(G,O),f=E/d*2*Math.PI,c=this.anticlockwise?-1:1,P=s.theta+c*f,D=r.cx+this.radius*Math.cos(P),h=r.cy+this.radius*Math.sin(P);return{x:D,y:h}}},Bezier:function(r){this.curve=[{x:r.x1,y:r.y1},{x:r.cp1x,y:r.cp1y},{x:r.cp2x,y:r.cp2y},{x:r.x2,y:r.y2}];var y=function(L){return L[0].x===L[1].x&&L[0].y===L[1].y},x=function(L,F){return Math.sqrt(Math.pow(L.x-F.x,2)+Math.pow(L.y-F.y,2))},I=function(L){var F={x:0,y:0};if(L===0)return this.curve[0];var U=this.curve.length-1;if(L===1)return this.curve[U];var G=this.curve,E=1-L;if(U===0)return this.curve[0];if(U===1)return{x:E*G[0].x+L*G[1].x,y:E*G[0].y+L*G[1].y};if(U<4){var O=E*E,s=L*L,f=0,c,P,D;return U===2?(G=[G[0],G[1],G[2],F],c=O,P=2*(E*L),D=s):U===3&&(c=O*E,P=3*(O*L),D=3*(E*s),f=L*s),{x:c*G[0].x+P*G[1].x+D*G[2].x+f*G[3].x,y:c*G[0].y+P*G[1].y+D*G[2].y+f*G[3].y}}else return F}.bind(this),C=function(L){var F=[];L--;for(var U=0;U<=L;U++)F.push(I(U/L));return F},d=function(){y(this.curve)&&(this.length=0);var L=16,F=C(L);this.length=0;for(var U=0;U<L-1;U++){var G=F[U],E=F[U+1];this.length+=x(G,E)}}.bind(this);n.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(r.x1,r.x2,r.cp1x,r.cp2x),minY:Math.min(r.y1,r.y2,r.cp1y,r.cp2y),maxX:Math.max(r.x1,r.x2,r.cp1x,r.cp2x),maxY:Math.max(r.y1,r.y2,r.cp1y,r.cp2y)},this.type="Bezier",d();var e=function(L,F,U){return U&&(F=p.jsBezier.locationAlongCurveFrom(L,F>0?0:1,F)),F};this.pointOnPath=function(L,F){return L=e(this.curve,L,F),p.jsBezier.pointOnCurve(this.curve,L)},this.gradientAtPoint=function(L,F){return L=e(this.curve,L,F),p.jsBezier.gradientAtPoint(this.curve,L)},this.pointAlongPathFrom=function(L,F,U){return L=e(this.curve,L,U),p.jsBezier.pointAlongCurveFrom(this.curve,L,F)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(L,F){var U=p.jsBezier.nearestPointOnCurve({x:L,y:F},this.curve);return{d:Math.sqrt(Math.pow(U.point.x-L,2)+Math.pow(U.point.y-F,2)),x:U.point.x,y:U.point.y,l:1-U.location,s:this}},this.lineIntersection=function(L,F,U,G){return p.jsBezier.lineIntersection(L,F,U,G,this.curve)}}},n.SegmentRenderer={getPath:function(r,y){return{Straight:function(x){var I=r.getCoordinates();return(x?"M "+I.x1+" "+I.y1+" ":"")+"L "+I.x2+" "+I.y2},Bezier:function(x){var I=r.params;return(x?"M "+I.x2+" "+I.y2+" ":"")+"C "+I.cp2x+" "+I.cp2y+" "+I.cp1x+" "+I.cp1y+" "+I.x1+" "+I.y1},Arc:function(x){var I=r.params,C=r.sweep>Math.PI?1:0,d=r.anticlockwise?0:1;return(x?"M"+r.x1+" "+r.y1+" ":"")+"A "+r.radius+" "+I.r+" 0 "+C+","+d+" "+r.x2+" "+r.y2}}[r.type](y)}};var W=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};n.Connectors.AbstractConnector=function(r){W.apply(this,arguments);var y=[],x=0,I=[],C=[],d=r.stub||0,e=j.isArray(d)?d[0]:d,L=j.isArray(d)?d[1]:d,F=r.gap||0,U=j.isArray(F)?F[0]:F,G=j.isArray(F)?F[1]:F,E=null,O=null;this.getPathData=function(){for(var h="",M=0;M<y.length;M++)h+=n.SegmentRenderer.getPath(y[M],M===0),h+=" ";return h},this.findSegmentForPoint=function(h,M){for(var _={d:1/0,s:null,x:null,y:null,l:null},A=0;A<y.length;A++){var v=y[A].findClosestPointOnPath(h,M);v.d<_.d&&(_.d=v.d,_.l=v.l,_.x=v.x,_.y=v.y,_.s=y[A],_.x1=v.x1,_.x2=v.x2,_.y1=v.y1,_.y2=v.y2,_.index=A,_.connectorLocation=I[A][0]+v.l*(I[A][1]-I[A][0]))}return _},this.lineIntersection=function(h,M,_,A){for(var v=[],S=0;S<y.length;S++)v.push.apply(v,y[S].lineIntersection(h,M,_,A));return v},this.boxIntersection=function(h,M,_,A){for(var v=[],S=0;S<y.length;S++)v.push.apply(v,y[S].boxIntersection(h,M,_,A));return v},this.boundingBoxIntersection=function(h){for(var M=[],_=0;_<y.length;_++)M.push.apply(M,y[_].boundingBoxIntersection(h));return M};var s=function(){for(var h=0,M=0;M<y.length;M++){var _=y[M].getLength();C[M]=_/x,I[M]=[h,h+=_/x]}},f=function(h,M){var _,A,v;if(M&&(h=h>0?h/x:(x+h)/x),h===1)_=y.length-1,v=1;else if(h===0)v=0,_=0;else if(h>=.5){for(_=0,v=0,A=I.length-1;A>-1;A--)if(I[A][1]>=h&&I[A][0]<=h){_=A,v=(h-I[A][0])/C[A];break}}else for(_=I.length-1,v=1,A=0;A<I.length;A++)if(I[A][1]>=h){_=A,v=(h-I[A][0])/C[A];break}return{segment:y[_],proportion:v,index:_}},c=function(h,M,_){if(!(_.x1===_.x2&&_.y1===_.y2)){var A=new n.Segments[M](_);y.push(A),x+=A.getLength(),h.updateBounds(A)}},P=function(){x=y.length=I.length=C.length=0};this.setSegments=function(h){E=[],x=0;for(var M=0;M<h.length;M++)E.push(h[M]),x+=h[M].getLength()},this.getLength=function(){return x};var D=function(h){this.strokeWidth=h.strokeWidth;var M=X.quadrant(h.sourcePos,h.targetPos),_=h.targetPos[0]<h.sourcePos[0],A=h.targetPos[1]<h.sourcePos[1],v=h.strokeWidth||1,S=h.sourceEndpoint.anchor.getOrientation(h.sourceEndpoint),H=h.targetEndpoint.anchor.getOrientation(h.targetEndpoint),V=_?h.targetPos[0]:h.sourcePos[0],Y=A?h.targetPos[1]:h.sourcePos[1],i=Math.abs(h.targetPos[0]-h.sourcePos[0]),a=Math.abs(h.targetPos[1]-h.sourcePos[1]);if(S[0]===0&&S[1]===0||H[0]===0&&H[1]===0){var t=i>a?0:1,g=[1,0][t];S=[],H=[],S[t]=h.sourcePos[t]>h.targetPos[t]?-1:1,H[t]=h.sourcePos[t]>h.targetPos[t]?1:-1,S[g]=0,H[g]=0}var m=_?i+U*S[0]:U*S[0],N=A?a+U*S[1]:U*S[1],R=_?G*H[0]:i+G*H[0],K=A?G*H[1]:a+G*H[1],B=S[0]*H[0]+S[1]*H[1],Z={sx:m,sy:N,tx:R,ty:K,lw:v,xSpan:Math.abs(R-m),ySpan:Math.abs(K-N),mx:(m+R)/2,my:(N+K)/2,so:S,to:H,x:V,y:Y,w:i,h:a,segment:M,startStubX:m+S[0]*e,startStubY:N+S[1]*e,endStubX:R+H[0]*L,endStubY:K+H[1]*L,isXGreaterThanStubTimes2:Math.abs(m-R)>e+L,isYGreaterThanStubTimes2:Math.abs(N-K)>e+L,opposite:B===-1,perpendicular:B===0,orthogonal:B===1,sourceAxis:S[0]===0?"y":"x",points:[V,Y,i,a,m,N,R,K],stubs:[e,L]};return Z.anchorOrientation=Z.opposite?"opposite":Z.orthogonal?"orthogonal":"perpendicular",Z};return this.getSegments=function(){return y},this.updateBounds=function(h){var M=h.getBounds();this.bounds.minX=Math.min(this.bounds.minX,M.minX),this.bounds.maxX=Math.max(this.bounds.maxX,M.maxX),this.bounds.minY=Math.min(this.bounds.minY,M.minY),this.bounds.maxY=Math.max(this.bounds.maxY,M.maxY)},this.pointOnPath=function(h,M){var _=f(h,M);return _.segment&&_.segment.pointOnPath(_.proportion,!1)||[0,0]},this.gradientAtPoint=function(h,M){var _=f(h,M);return _.segment&&_.segment.gradientAtPoint(_.proportion,!1)||0},this.pointAlongPathFrom=function(h,M,_){var A=f(h,_);return A.segment&&A.segment.pointAlongPathFrom(A.proportion,M,!1)||[0,0]},this.compute=function(h){O=D.call(this,h),P(),this._compute(O,h),this.x=O.points[0],this.y=O.points[1],this.w=O.points[2],this.h=O.points[3],this.segment=O.segment,s()},{addSegment:c,prepareCompute:D,sourceStub:e,targetStub:L,maxStub:Math.max(e,L),sourceGap:U,targetGap:G,maxGap:Math.max(U,G)}},j.extend(n.Connectors.AbstractConnector,W),n.Endpoints.AbstractEndpoint=function(r){W.apply(this,arguments);var y=this.compute=function(x,I,C,d){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:y,cssClass:r.cssClass}},j.extend(n.Endpoints.AbstractEndpoint,W),n.Endpoints.Dot=function(r){this.type="Dot",n.Endpoints.AbstractEndpoint.apply(this,arguments),r=r||{},this.radius=r.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(y,x,I,C){this.radius=I.radius||this.radius;var d=y[0]-this.radius,e=y[1]-this.radius,L=this.radius*2,F=this.radius*2;if(I.stroke){var U=I.strokeWidth||1;d-=U,e-=U,L+=U*2,F+=U*2}return[d,e,L,F,this.radius]}},j.extend(n.Endpoints.Dot,n.Endpoints.AbstractEndpoint),n.Endpoints.Rectangle=function(r){this.type="Rectangle",n.Endpoints.AbstractEndpoint.apply(this,arguments),r=r||{},this.width=r.width||20,this.height=r.height||20,this._compute=function(y,x,I,C){var d=I.width||this.width,e=I.height||this.height,L=y[0]-d/2,F=y[1]-e/2;return[L,F,d,e]}},j.extend(n.Endpoints.Rectangle,n.Endpoints.AbstractEndpoint);var J=function(r){n.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};j.extend(J,n.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(r){this._jsPlumb.displayElements.push(r)}}),n.Endpoints.Image=function(r){this.type="Image",J.apply(this,arguments),n.Endpoints.AbstractEndpoint.apply(this,arguments);var y=r.onload,x=r.src||r.url,I=r.cssClass?" "+r.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=r.width,this._jsPlumb.heightToUse=r.height,this._jsPlumb.endpoint=r.endpoint,this._jsPlumb.img.onload=function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,y&&y(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(C,d){var e=C.constructor===String?C:C.src;y=d,this._jsPlumb.img.src=e,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(x,y),this._compute=function(C,d,e,L){return this.anchorPoint=C,this._jsPlumb.ready?[C[0]-this._jsPlumb.widthToUse/2,C[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=n.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+I),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(C,d,e){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var L=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,F=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;j.sizeElement(this.canvas,L,F,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(C,d){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(C,d):p.setTimeout(function(){this.paint(C,d)}.bind(this),200))}},j.extend(n.Endpoints.Image,[J,n.Endpoints.AbstractEndpoint],{cleanup:function(r){r&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),n.Endpoints.Blank=function(r){n.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",J.apply(this,arguments),this._compute=function(x,I,C,d){return[x[0],x[1],10,0]};var y=r.cssClass?" "+r.cssClass:"";this.canvas=n.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+y),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(x,I){j.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},j.extend(n.Endpoints.Blank,[n.Endpoints.AbstractEndpoint,J],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),n.Endpoints.Triangle=function(r){this.type="Triangle",n.Endpoints.AbstractEndpoint.apply(this,arguments);var y=this;r=r||{},r.width=r.width||55,r.height=r.height||55,this.width=r.width,this.height=r.height,this._compute=function(x,I,C,d){var e=C.width||y.width,L=C.height||y.height,F=x[0]-e/2,U=x[1]-L/2;return[F,U,e,L]}};var l=n.Overlays.AbstractOverlay=function(r){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=r.component,this.loc=r.location==null?.5:r.location,this.endpointLoc=r.endpointLocation==null?[.5,.5]:r.endpointLocation,this.visible=r.visible!==!1};l.prototype={cleanup:function(r){r&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(r,y){},setVisible:function(r){this.visible=r,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(r){this.loc+=r,this.component.repaint()},setLocation:function(r){this.loc=r,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},n.Overlays.Arrow=function(r){this.type="Arrow",l.apply(this,arguments),this.isAppendedAtTopLevel=!1,r=r||{};var y=this;this.length=r.length||20,this.width=r.width||20,this.id=r.id,this.direction=(r.direction||1)<0?-1:1;var x=r.paintStyle||{"stroke-width":1},I=r.foldback||.623;this.computeMaxSize=function(){return y.width*1.5},this.elementCreated=function(C,d){if(this.path=C,r.events)for(var e in r.events)n.on(C,e,r.events[e])},this.draw=function(C,d){var e,L,F,U,G;if(C.pointAlongPathFrom){if(j.isString(this.loc)||this.loc>1||this.loc<0){var E=parseInt(this.loc,10),O=this.loc<0?1:0;e=C.pointAlongPathFrom(O,E,!1),L=C.pointAlongPathFrom(O,E-this.direction*this.length/2,!1),F=X.pointOnLine(e,L,this.length)}else if(this.loc===1){if(e=C.pointOnPath(this.loc),L=C.pointAlongPathFrom(this.loc,-this.length),F=X.pointOnLine(e,L,this.length),this.direction===-1){var s=F;F=e,e=s}}else if(this.loc===0){if(F=C.pointOnPath(this.loc),L=C.pointAlongPathFrom(this.loc,this.length),e=X.pointOnLine(F,L,this.length),this.direction===-1){var f=F;F=e,e=f}}else e=C.pointAlongPathFrom(this.loc,this.direction*this.length/2),L=C.pointOnPath(this.loc),F=X.pointOnLine(e,L,this.length);U=X.perpendicularLineTo(e,F,this.width),G=X.pointOnLine(e,F,I*this.length);var c={hxy:e,tail:U,cxy:G},P=x.stroke||d.stroke,D=x.fill||d.stroke,h=x.strokeWidth||d.strokeWidth;return{component:C,d:c,"stroke-width":h,stroke:P,fill:D,minX:Math.min(e.x,U[0].x,U[1].x),maxX:Math.max(e.x,U[0].x,U[1].x),minY:Math.min(e.y,U[0].y,U[1].y),maxY:Math.max(e.y,U[0].y,U[1].y)}}else return{component:C,minX:0,maxX:0,minY:0,maxY:0}}},j.extend(n.Overlays.Arrow,l,{updateFrom:function(r){this.length=r.length||this.length,this.width=r.width||this.width,this.direction=r.direction!=null?r.direction:this.direction,this.foldback=r.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),n.Overlays.PlainArrow=function(r){r=r||{};var y=n.extend(r,{foldback:1});n.Overlays.Arrow.call(this,y),this.type="PlainArrow"},j.extend(n.Overlays.PlainArrow,n.Overlays.Arrow),n.Overlays.Diamond=function(r){r=r||{};var y=r.length||40,x=n.extend(r,{length:y/2,foldback:2});n.Overlays.Arrow.call(this,x),this.type="Diamond"},j.extend(n.Overlays.Diamond,n.Overlays.Arrow);var T=function(r,y){return(r._jsPlumb.cachedDimensions==null||y)&&(r._jsPlumb.cachedDimensions=r.getDimensions()),r._jsPlumb.cachedDimensions},u=function(r){n.jsPlumbUIComponent.apply(this,arguments),l.apply(this,arguments);var y=this.fire;this.fire=function(){y.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=r.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=r.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=r.create,this._jsPlumb.initiallyInvisible=r.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var x=this._jsPlumb.div=n.getElement(this._jsPlumb.create(this._jsPlumb.component));x.style.position="absolute",jsPlumb.addClass(x,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:r.cssClass?r.cssClass:"")),this._jsPlumb.instance.appendElement(x),this._jsPlumb.instance.getId(x),this.canvas=x;var I="translate(-50%, -50%)";x.style.webkitTransform=I,x.style.mozTransform=I,x.style.msTransform=I,x.style.oTransform=I,x.style.transform=I,x._jsPlumb=this,r.visible===!1&&(x.style.display="none")}return this._jsPlumb.div},this.draw=function(x,I,C){var d=T(this);if(d!=null&&d.length===2){var e={x:0,y:0};if(C)e={x:C[0],y:C[1]};else if(x.pointOnPath){var L=this.loc,F=!1;(j.isString(this.loc)||this.loc<0||this.loc>1)&&(L=parseInt(this.loc,10),F=!0),e=x.pointOnPath(L,F)}else{var U=this.loc.constructor===Array?this.loc:this.endpointLoc;e={x:U[0]*x.w,y:U[1]*x.h}}var G=e.x-d[0]/2,E=e.y-d[1]/2;return{component:x,d:{minx:G,miny:E,td:d,cxy:e},minX:G,maxX:G+d[0],minY:E,maxY:E+d[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}};j.extend(u,[n.jsPlumbUIComponent,l],{getDimensions:function(){return[1,1]},setVisible:function(r){this._jsPlumb.div&&(this._jsPlumb.div.style.display=r?"block":"none",r&&this._jsPlumb.initiallyInvisible&&(T(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(r){r?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(r,y){this._jsPlumb.div!=null&&r.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var r=T(this);return Math.max(r[0],r[1])},paint:function(r,y){this._jsPlumb.initialised||(this.getElement(),r.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=r.component.x+r.d.minx+"px",this._jsPlumb.div.style.top=r.component.y+r.d.miny+"px"}}),n.Overlays.Custom=function(r){this.type="Custom",u.apply(this,arguments)},j.extend(n.Overlays.Custom,u),n.Overlays.GuideLines=function(){var r=this;r.length=50,r.strokeWidth=5,this.type="GuideLines",l.apply(this,arguments),n.jsPlumbUIComponent.apply(this,arguments),this.draw=function(y,x){var I=y.pointAlongPathFrom(r.loc,r.length/2),C=y.pointOnPath(r.loc),d=X.pointOnLine(I,C,r.length),e=X.perpendicularLineTo(I,d,40),L=X.perpendicularLineTo(d,I,20);return{connector:y,head:I,tail:d,headLine:L,tailLine:e,minX:Math.min(I.x,d.x,L[0].x,L[1].x),minY:Math.min(I.y,d.y,L[0].y,L[1].y),maxX:Math.max(I.x,d.x,L[0].x,L[1].x),maxY:Math.max(I.y,d.y,L[0].y,L[1].y)}}},n.Overlays.Label=function(r){this.labelStyle=r.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var y=n.extend({create:function(){return n.createElement("div")}},r);if(n.Overlays.Custom.call(this,y),this.type="Label",this.label=r.label||"",this.labelText=null,this.labelStyle){var x=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",x.style.font=this.labelStyle.font,x.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(x.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var I=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";x.style.border=this.labelStyle.borderWidth+"px solid "+I}this.labelStyle.padding&&(x.style.padding=this.labelStyle.padding)}},j.extend(n.Overlays.Label,n.Overlays.Custom,{cleanup:function(r){r&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(r){this.label=r,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),u.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var r=this.label(this);this.getElement().innerHTML=r.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(r){r.label!=null&&this.setLabel(r.label)}})}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumbUtil,j=p.jsPlumbInstance,X="jtk-group-collapsed",W="jtk-group-expanded",J="[jtk-group-content]",l="elementDraggable",T="stop",u="revert",r="_groupManager",y="_jsPlumbGroup",x="_jsPlumbGroupDrag",I="group:addMember",C="group:removeMember",d="group:add",e="group:remove",L="group:expand",F="group:collapse",U="groupDragStop",G="connectionMoved",E="internal.connectionDetached",O="removeAll",s="orphanAll",f="show",c="hide",P=function(h){var M={},_={},A={},v=this;function S(t,g){for(var m=h.getContainer(),N=!1;!N;){if(t==null||t===m)return!1;if(t===g)return!0;t=t.parentNode}}h.bind("connection",function(t){var g=h.getGroupFor(t.source),m=h.getGroupFor(t.target);g!=null&&m!=null&&g===m?(_[t.connection.id]=g,A[t.connection.id]=g):(g!=null&&(n.suggest(g.connections.source,t.connection),_[t.connection.id]=g),m!=null&&(n.suggest(m.connections.target,t.connection),A[t.connection.id]=m))});function H(t){delete t.proxies;var g=_[t.id],m;g!=null&&(m=function(N){return N.id===t.id},n.removeWithFunction(g.connections.source,m),n.removeWithFunction(g.connections.target,m),delete _[t.id]),g=A[t.id],g!=null&&(m=function(N){return N.id===t.id},n.removeWithFunction(g.connections.source,m),n.removeWithFunction(g.connections.target,m),delete A[t.id])}h.bind(E,function(t){H(t.connection)}),h.bind(G,function(t){var g=t.index===0?_:A,m=g[t.connection.id];if(m){var N=m.connections[t.index===0?"source":"target"],R=N.indexOf(t.connection);R!==-1&&N.splice(R,1)}}),this.addGroup=function(t){h.addClass(t.getEl(),W),M[t.id]=t,t.manager=this,a(t),h.fire(d,{group:t})},this.addToGroup=function(t,g,m){if(t=this.getGroup(t),t){var N=t.getEl();if(g._isJsPlumbGroup)return;var R=g._jsPlumbGroup;if(R!==t){h.removeFromDragSelection(g);var K=h.getOffset(g,!0),B=t.collapsed?h.getOffset(N,!0):h.getOffset(t.getDragArea(),!0);R!=null&&(R.remove(g,!1,m,!1,t),v.updateConnectionsForGroup(R)),t.add(g,m);var Z=function(at,gt){var dt=gt===0?1:0;at.each(function(lt){lt.setVisible(!1),lt.endpoints[dt].element._jsPlumbGroup===t?(lt.endpoints[dt].setVisible(!1),i(lt,dt,t)):(lt.endpoints[gt].setVisible(!1),Y(lt,gt,t))})};t.collapsed&&(Z(h.select({source:g}),0),Z(h.select({target:g}),1));var ut=h.getId(g);h.dragManager.setParent(g,ut,N,h.getId(N),K);var ot={left:K.left-B.left,top:K.top-B.top};if(h.setPosition(g,ot),h.dragManager.revalidateParent(g,ut,K),v.updateConnectionsForGroup(t),h.revalidate(ut),!m){var st={group:t,el:g,pos:ot};R&&(st.sourceGroup=R),h.fire(I,st)}}}},this.removeFromGroup=function(t,g,m){if(t=this.getGroup(t),t){if(t.collapsed){var N=function(R,K){for(var B=0;B<R.length;B++){var Z=R[B];if(Z.proxies){for(var ut=0;ut<Z.proxies.length;ut++)if(Z.proxies[ut]!=null){var ot=Z.proxies[ut].originalEp.element;(ot===g||S(ot,g))&&i(Z,K,t)}}}};N(t.connections.source.slice(),0),N(t.connections.target.slice(),1)}t.remove(g,null,m)}},this.getGroup=function(t){var g=t;if(n.isString(t)&&(g=M[t],g==null))throw new TypeError("No such group ["+t+"]");return g},this.getGroups=function(){var t=[];for(var g in M)t.push(M[g]);return t},this.removeGroup=function(t,g,m,N){t=this.getGroup(t),this.expandGroup(t,!0);var R=t[g?O:s](m,N);return h.remove(t.getEl()),delete M[t.id],delete h._groups[t.id],h.fire(e,{group:t}),R},this.removeAllGroups=function(t,g,m){for(var N in M)this.removeGroup(M[N],t,g,m)};function V(t,g){for(var m=t.getEl().querySelectorAll(".jtk-managed"),N=0;N<m.length;N++)h[g?f:c](m[N],!0)}var Y=function(t,g,m){var N=t.endpoints[g===0?1:0].element;if(!(N[y]&&!N[y].shouldProxy()&&N[y].collapsed)){var R=m.getEl(),K=h.getId(R);h.proxyConnection(t,g,R,K,function(B,Z){return m.getEndpoint(B,Z)},function(B,Z){return m.getAnchor(B,Z)})}};this.collapseGroup=function(t){if(t=this.getGroup(t),!(t==null||t.collapsed)){var g=t.getEl();if(V(t,!1),t.shouldProxy()){var m=function(N,R){for(var K=0;K<N.length;K++){var B=N[K];Y(B,R,t)}};m(t.connections.source,0),m(t.connections.target,1)}t.collapsed=!0,h.removeClass(g,W),h.addClass(g,X),h.revalidate(g),h.fire(F,{group:t})}};var i=function(t,g,m){h.unproxyConnection(t,g,h.getId(m.getEl()))};this.expandGroup=function(t,g){if(t=this.getGroup(t),!(t==null||!t.collapsed)){var m=t.getEl();if(V(t,!0),t.shouldProxy()){var N=function(R,K){for(var B=0;B<R.length;B++){var Z=R[B];i(Z,K,t)}};N(t.connections.source,0),N(t.connections.target,1)}t.collapsed=!1,h.addClass(m,W),h.removeClass(m,X),h.revalidate(m),this.repaintGroup(t),g||h.fire(L,{group:t})}},this.repaintGroup=function(t){t=this.getGroup(t);for(var g=t.getMembers(),m=0;m<g.length;m++)h.revalidate(g[m])};function a(t){for(var g=t.getMembers().slice(),m=[],N=0;N<g.length;N++)Array.prototype.push.apply(m,g[N].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(g,m);var R=h.getConnections({source:g,scope:"*"},!0),K=h.getConnections({target:g,scope:"*"},!0),B={};t.connections.source.length=0,t.connections.target.length=0;var Z=function(ut){for(var ot=0;ot<ut.length;ot++)if(!B[ut[ot].id]){B[ut[ot].id]=!0;var st=h.getGroupFor(ut[ot].source),at=h.getGroupFor(ut[ot].target);st===t?(at!==t&&t.connections.source.push(ut[ot]),_[ut[ot].id]=t):at===t&&(t.connections.target.push(ut[ot]),A[ut[ot].id]=t)}};Z(R),Z(K)}this.updateConnectionsForGroup=a,this.refreshAllGroups=function(){for(var t in M)a(M[t]),h.dragManager.updateOffsets(h.getId(M[t].getEl()))}},D=function(h,M){var _=this,A=M.el;this.getEl=function(){return A},this.id=M.id||n.uuid(),A._isJsPlumbGroup=!0;var v=this.getDragArea=function(){var at=h.getSelector(A,J);return at&&at.length>0?at[0]:A},S=M.ghost===!0,H=S||M.constrain===!0,V=M.revert!==!1,Y=M.orphan===!0,i=M.prune===!0,a=M.dropOverride===!0,t=M.proxied!==!1,g=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(at,gt){return M.anchor||"Continuous"},this.getEndpoint=function(at,gt){return M.endpoint||["Dot",{radius:10}]},this.collapsed=!1,M.draggable!==!1){var m={drag:function(){for(var at=0;at<g.length;at++)h.draw(g[at])},stop:function(at){h.fire(U,jsPlumb.extend(at,{group:_}))},scope:x};M.dragOptions&&p.jsPlumb.extend(m,M.dragOptions),h.draggable(M.el,m)}M.droppable!==!1&&h.droppable(M.el,{drop:function(at){var gt=at.drag.el;if(!gt._isJsPlumbGroup){var dt=gt._jsPlumbGroup;if(dt!==_){if(dt!=null&&dt.overrideDrop(gt,_))return;h.getGroupManager().addToGroup(_,gt,!1)}}}});var N=function(at,gt){for(var dt=at.nodeType==null?at:[at],lt=0;lt<dt.length;lt++)gt(dt[lt])};this.overrideDrop=function(at,gt){return a&&(V||i||Y)},this.add=function(at,gt){var dt=v();N(at,function(lt){if(lt._jsPlumbGroup!=null){if(lt._jsPlumbGroup===_)return;lt._jsPlumbGroup.remove(lt,!0,gt,!1)}lt._jsPlumbGroup=_,g.push(lt),h.isAlreadyDraggable(lt)&&st(lt),lt.parentNode!==dt&&dt.appendChild(lt)}),h.getGroupManager().updateConnectionsForGroup(_)},this.remove=function(at,gt,dt,lt,yt){N(at,function(mt){if(mt._jsPlumbGroup===_){if(delete mt._jsPlumbGroup,n.removeWithFunction(g,function($){return $===mt}),gt)try{_.getDragArea().removeChild(mt)}catch($){jsPlumbUtil.log("Could not remove element from Group "+$)}if(ot(mt),!dt){var et={group:_,el:mt};yt&&(et.targetGroup=yt),h.fire(C,et)}}}),lt||h.getGroupManager().updateConnectionsForGroup(_)},this.removeAll=function(at,gt){for(var dt=0,lt=g.length;dt<lt;dt++){var yt=g[0];_.remove(yt,at,gt,!0),h.remove(yt,!0)}g.length=0,h.getGroupManager().updateConnectionsForGroup(_)},this.orphanAll=function(){for(var at={},gt=0;gt<g.length;gt++){var dt=B(g[gt]);at[dt[0]]=dt[1]}return g.length=0,at},this.getMembers=function(){return g},A[y]=this,h.bind(l,function(at){at.el._jsPlumbGroup===this&&st(at.el)}.bind(this));function R(at){return at.offsetParent}function K(at,gt){var dt=R(at),lt=h.getSize(dt),yt=h.getSize(at),mt=gt[0],et=mt+yt[0],$=gt[1],q=$+yt[1];return et>0&&mt<lt[0]&&q>0&&$<lt[1]}function B(at){var gt=h.getId(at),dt=h.getOffset(at);return at.parentNode.removeChild(at),h.getContainer().appendChild(at),h.setPosition(at,dt),ot(at),h.dragManager.clearParent(at,gt),[gt,dt]}function Z(at){var gt=[];function dt(yt,mt,et){var $=null;if(!K(yt,[mt,et])){var q=yt._jsPlumbGroup;i?h.remove(yt):$=B(yt),q.remove(yt)}return $}for(var lt=0;lt<at.selection.length;lt++)gt.push(dt(at.selection[lt][0],at.selection[lt][1].left,at.selection[lt][1].top));return gt.length===1?gt[0]:gt}function ut(at){var gt=h.getId(at);h.revalidate(at),h.dragManager.revalidateParent(at,gt)}function ot(at){!at._katavorioDrag||((i||Y)&&at._katavorioDrag.off(T,Z),!i&&!Y&&V&&(at._katavorioDrag.off(u,ut),at._katavorioDrag.setRevert(null)))}function st(at){!at._katavorioDrag||((i||Y)&&at._katavorioDrag.on(T,Z),H&&at._katavorioDrag.setConstrain(!0),S&&at._katavorioDrag.setUseGhostProxy(!0),!i&&!Y&&V&&(at._katavorioDrag.on(u,ut),at._katavorioDrag.setRevert(function(gt,dt){return!K(gt,dt)})))}this.shouldProxy=function(){return t},h.getGroupManager().addGroup(this)};j.prototype.addGroup=function(h){var M=this;if(M._groups=M._groups||{},M._groups[h.id]!=null)throw new TypeError("cannot create Group ["+h.id+"]; a Group with that ID exists");if(h.el[y]!=null)throw new TypeError("cannot create Group ["+h.id+"]; the given element is already a Group");var _=new D(M,h);return M._groups[_.id]=_,h.collapsed&&this.collapseGroup(_),_},j.prototype.addToGroup=function(h,M,_){var A=function(S){var H=this.getId(S);this.manage(H,S),this.getGroupManager().addToGroup(h,S,_)}.bind(this);if(Array.isArray(M))for(var v=0;v<M.length;v++)A(M[v]);else A(M)},j.prototype.removeFromGroup=function(h,M,_){this.getGroupManager().removeFromGroup(h,M,_),this.getContainer().appendChild(M)},j.prototype.removeGroup=function(h,M,_,A){return this.getGroupManager().removeGroup(h,M,_,A)},j.prototype.removeAllGroups=function(h,M,_){this.getGroupManager().removeAllGroups(h,M,_)},j.prototype.getGroup=function(h){return this.getGroupManager().getGroup(h)},j.prototype.getGroups=function(){return this.getGroupManager().getGroups()},j.prototype.expandGroup=function(h){this.getGroupManager().expandGroup(h)},j.prototype.collapseGroup=function(h){this.getGroupManager().collapseGroup(h)},j.prototype.repaintGroup=function(h){this.getGroupManager().repaintGroup(h)},j.prototype.toggleGroup=function(h){h=this.getGroupManager().getGroup(h),h!=null&&this.getGroupManager()[h.collapsed?"expandGroup":"collapseGroup"](h)},j.prototype.getGroupManager=function(){var h=this[r];return h==null&&(h=this[r]=new P(this)),h},j.prototype.removeGroupManager=function(){delete this[r]},j.prototype.getGroupFor=function(h){if(h=this.getElement(h),h){for(var M=this.getContainer(),_=!1,A=null;!_;)h==null||h===M?_=!0:h[y]?(A=h[y],_=!0):h=h.parentNode;return A}}}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X="Straight",W="Arc",J=function(l){this.type="Flowchart",l=l||{},l.stub=l.stub==null?30:l.stub;var T,u=n.Connectors.AbstractConnector.apply(this,arguments),r=l.midpoint==null||isNaN(l.midpoint)?.5:l.midpoint,y=l.alwaysRespectStubs===!0,x=null,I=null,C=l.cornerRadius!=null?l.cornerRadius:0;l.loopbackRadius;var d=function(E){return E<0?-1:E===0?0:1},e=function(E){return[d(E[2]-E[0]),d(E[3]-E[1])]},L=function(E,O,s,f){if(!(x===O&&I===s)){var c=x==null?f.sx:x,P=I==null?f.sy:I,D=c===O?"v":"h";x=O,I=s,E.push([c,P,O,s,D])}},F=function(E){return Math.sqrt(Math.pow(E[0]-E[2],2)+Math.pow(E[1]-E[3],2))},U=function(E){var O=[];return O.push.apply(O,E),O},G=function(E,O,s){for(var f=null,c,P,D,h=0;h<O.length-1;h++){if(f=f||U(O[h]),c=U(O[h+1]),P=e(f),D=e(c),C>0&&f[4]!==c[4]){var M=Math.min(F(f),F(c)),_=Math.min(C,M/2);f[2]-=P[0]*_,f[3]-=P[1]*_,c[0]+=D[0]*_,c[1]+=D[1]*_;var A=P[1]===D[0]&&D[0]===1||P[1]===D[0]&&D[0]===0&&P[0]!==D[1]||P[1]===D[0]&&D[0]===-1,v=c[1]>f[3]?1:-1,S=c[0]>f[2]?1:-1,H=v===S,V=H&&A||!H&&!A?c[0]:f[2],Y=H&&A||!H&&!A?f[3]:c[1];u.addSegment(E,X,{x1:f[0],y1:f[1],x2:f[2],y2:f[3]}),u.addSegment(E,W,{r:_,x1:f[2],y1:f[3],x2:c[0],y2:c[1],cx:V,cy:Y,ac:A})}else{var i=f[2]===f[0]?0:f[2]>f[0]?s.lw/2:-(s.lw/2),a=f[3]===f[1]?0:f[3]>f[1]?s.lw/2:-(s.lw/2);u.addSegment(E,X,{x1:f[0]-i,y1:f[1]-a,x2:f[2]+i,y2:f[3]+a})}f=c}c!=null&&u.addSegment(E,X,{x1:c[0],y1:c[1],x2:c[2],y2:c[3]})};this.midpoint=r,this._compute=function(E,O){T=[],x=null,I=null;var s=function(){return[E.startStubX,E.startStubY,E.endStubX,E.endStubY]},f={perpendicular:s,orthogonal:s,opposite:function(a){var t=E,g=a==="x"?0:1,m={x:function(){return t.so[g]===1&&(t.startStubX>t.endStubX&&t.tx>t.startStubX||t.sx>t.endStubX&&t.tx>t.sx)||t.so[g]===-1&&(t.startStubX<t.endStubX&&t.tx<t.startStubX||t.sx<t.endStubX&&t.tx<t.sx)},y:function(){return t.so[g]===1&&(t.startStubY>t.endStubY&&t.ty>t.startStubY||t.sy>t.endStubY&&t.ty>t.sy)||t.so[g]===-1&&(t.startStubY<t.endStubY&&t.ty<t.startStubY||t.sy<t.endStubY&&t.ty<t.sy)}};return!y&&m[a]()?{x:[(E.sx+E.tx)/2,E.startStubY,(E.sx+E.tx)/2,E.endStubY],y:[E.startStubX,(E.sy+E.ty)/2,E.endStubX,(E.sy+E.ty)/2]}[a]:[E.startStubX,E.startStubY,E.endStubX,E.endStubY]}},c=f[E.anchorOrientation](E.sourceAxis),P=E.sourceAxis==="x"?0:1,D=E.sourceAxis==="x"?1:0,h=c[P],M=c[D],_=c[P+2],A=c[D+2];L(T,c[0],c[1],E);var v=E.startStubX+(E.endStubX-E.startStubX)*r,S=E.startStubY+(E.endStubY-E.startStubY)*r,H={x:[0,1],y:[1,0]},V={perpendicular:function(a){var t=E,g={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},m={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},N={x:[[v,t.startStubY],[v,t.endStubY]],y:[[t.startStubX,S],[t.endStubX,S]]},R={x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]},K={x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]},B={x:[[t.startStubX,S],[t.endStubX,S],[t.endStubX,t.endStubY]],y:[[v,t.startStubY],[v,t.endStubY],[t.endStubX,t.endStubY]]},Z={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},ut=H[a][0],ot=H[a][1],st=t.so[ut]+1,at=t.to[ot]+1,gt=t.to[ot]===-1&&Z[a][1]<Z[a][0]||t.to[ot]===1&&Z[a][1]>Z[a][0],dt=m[a][st][0],lt=m[a][st][1],yt=g[a][st][at];if(t.segment===yt[3]||t.segment===yt[2]&&gt)return N[a];if(t.segment===yt[2]&&lt<dt)return R[a];if(t.segment===yt[2]&&lt>=dt||t.segment===yt[1]&&!gt)return B[a];if(t.segment===yt[0]||t.segment===yt[1]&&gt)return K[a]},orthogonal:function(a,t,g,m,N){var R=E,K={x:R.so[0]===-1?Math.min(t,m):Math.max(t,m),y:R.so[1]===-1?Math.min(t,m):Math.max(t,m)}[a];return{x:[[K,g],[K,N],[m,N]],y:[[g,K],[N,K],[N,m]]}[a]},opposite:function(a,t,g,m){var N=E,R={x:"y",y:"x"}[a],K={x:"height",y:"width"}[a],B=N["is"+a.toUpperCase()+"GreaterThanStubTimes2"];if(O.sourceEndpoint.elementId===O.targetEndpoint.elementId){var Z=g+(1-O.sourceEndpoint.anchor[R])*O.sourceInfo[K]+u.maxStub;return{x:[[t,Z],[m,Z]],y:[[Z,t],[Z,m]]}[a]}else{if(!B||N.so[P]===1&&t>m||N.so[P]===-1&&t<m)return{x:[[t,S],[m,S]],y:[[v,t],[v,m]]}[a];if(N.so[P]===1&&t<m||N.so[P]===-1&&t>m)return{x:[[v,N.sy],[v,N.ty]],y:[[N.sx,S],[N.tx,S]]}[a]}}},Y=V[E.anchorOrientation](E.sourceAxis,h,M,_,A);if(Y)for(var i=0;i<Y.length;i++)L(T,Y[i][0],Y[i][1],E);L(T,c[2],c[3],E),L(T,E.tx,E.ty,E),G(this,T,E)}};n.Connectors.Flowchart=J,j.extend(n.Connectors.Flowchart,n.Connectors.AbstractConnector)}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil;n.Connectors.AbstractBezierConnector=function(W){W=W||{};var J=W.showLoopback!==!1;W.curviness;var l=W.margin||5;W.proximityLimit;var T=W.orientation&&W.orientation==="clockwise",u=W.loopbackRadius||25,r;return this._compute=function(y,x){var I=x.sourcePos,C=x.targetPos,d=Math.abs(I[0]-C[0]),e=Math.abs(I[1]-C[1]);if(!J||x.sourceEndpoint.elementId!==x.targetEndpoint.elementId)this._computeBezier(y,x,I,C,d,e);else{var L=x.sourcePos[0],F=x.sourcePos[1]-l,U=L,G=F-u,E=U-u,O=G-u;d=2*u,e=2*u,y.points[0]=E,y.points[1]=O,y.points[2]=d,y.points[3]=e,r.addSegment(this,"Arc",{loopback:!0,x1:L-E+4,y1:F-O,startAngle:0,endAngle:2*Math.PI,r:u,ac:!T,x2:L-E-4,y2:F-O,cx:U-E,cy:G-O})}},r=n.Connectors.AbstractConnector.apply(this,arguments),r},j.extend(n.Connectors.AbstractBezierConnector,n.Connectors.AbstractConnector);var X=function(W){W=W||{},this.type="Bezier";var J=n.Connectors.AbstractBezierConnector.apply(this,arguments),l=W.curviness||150,T=10;this.getCurviness=function(){return l},this._findControlPoint=function(u,r,y,x,I,C,d){var e=C[0]!==d[0]||C[1]===d[1],L=[];return e?(d[0]===0?L.push(y[0]<r[0]?u[0]+T:u[0]-T):L.push(u[0]+l*d[0]),d[1]===0?L.push(y[1]<r[1]?u[1]+T:u[1]-T):L.push(u[1]+l*C[1])):(C[0]===0?L.push(r[0]<y[0]?u[0]+T:u[0]-T):L.push(u[0]-l*C[0]),C[1]===0?L.push(r[1]<y[1]?u[1]+T:u[1]-T):L.push(u[1]+l*d[1])),L},this._computeBezier=function(u,r,y,x,I,C){var d,e,L=y[0]<x[0]?I:0,F=y[1]<x[1]?C:0,U=y[0]<x[0]?0:I,G=y[1]<x[1]?0:C;d=this._findControlPoint([L,F],y,x,r.sourceEndpoint,r.targetEndpoint,u.so,u.to),e=this._findControlPoint([U,G],x,y,r.targetEndpoint,r.sourceEndpoint,u.to,u.so),J.addSegment(this,"Bezier",{x1:L,y1:F,x2:U,y2:G,cp1x:d[0],cp1y:d[1],cp2x:e[0],cp2y:e[1]})}};n.Connectors.Bezier=X,j.extend(X,n.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X=function(l,T,u,r){return l<=u&&r<=T?1:l<=u&&T<=r?2:u<=l&&r>=T?3:4},W=function(l,T,u,r,y,x,I,C,d){if(C<=d)return[l,T];if(u===1)return r[3]<=0&&y[3]>=1?[l+(r[2]<.5?-1*x:x),T]:r[2]>=1&&y[2]<=0?[l,T+(r[3]<.5?-1*I:I)]:[l+-1*x,T+-1*I];if(u===2)return r[3]>=1&&y[3]<=0?[l+(r[2]<.5?-1*x:x),T]:r[2]>=1&&y[2]<=0?[l,T+(r[3]<.5?-1*I:I)]:[l+x,T+-1*I];if(u===3)return r[3]>=1&&y[3]<=0?[l+(r[2]<.5?-1*x:x),T]:r[2]<=0&&y[2]>=1?[l,T+(r[3]<.5?-1*I:I)]:[l+-1*x,T+-1*I];if(u===4)return r[3]<=0&&y[3]>=1?[l+(r[2]<.5?-1*x:x),T]:r[2]<=0&&y[2]>=1?[l,T+(r[3]<.5?-1*I:I)]:[l+x,T+-1*I]},J=function(l){l=l||{},this.type="StateMachine";var T=n.Connectors.AbstractBezierConnector.apply(this,arguments),u=l.curviness||10,r=l.margin||5,y=l.proximityLimit||80;l.orientation&&l.orientation;var x;this._computeBezier=function(I,C,d,e,L,F){var U=C.sourcePos[0]<C.targetPos[0]?0:L,G=C.sourcePos[1]<C.targetPos[1]?0:F,E=C.sourcePos[0]<C.targetPos[0]?L:0,O=C.sourcePos[1]<C.targetPos[1]?F:0;C.sourcePos[2]===0&&(U-=r),C.sourcePos[2]===1&&(U+=r),C.sourcePos[3]===0&&(G-=r),C.sourcePos[3]===1&&(G+=r),C.targetPos[2]===0&&(E-=r),C.targetPos[2]===1&&(E+=r),C.targetPos[3]===0&&(O-=r),C.targetPos[3]===1&&(O+=r);var s=(U+E)/2,f=(G+O)/2,c=X(U,G,E,O),P=Math.sqrt(Math.pow(E-U,2)+Math.pow(O-G,2)),D,h,M,_;x=W(s,f,c,C.sourcePos,C.targetPos,u,u,P,y),D=x[0],h=x[0],M=x[1],_=x[1],T.addSegment(this,"Bezier",{x1:E,y1:O,x2:U,y2:G,cp1x:D,cp1y:M,cp2x:h,cp2y:_})}};n.Connectors.StateMachine=J,j.extend(J,n.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X="Straight",W=function(J){this.type=X;var l=n.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(T,u){l.addSegment(this,X,{x1:T.sx,y1:T.sy,x2:T.startStubX,y2:T.startStubY}),l.addSegment(this,X,{x1:T.startStubX,y1:T.startStubY,x2:T.endStubX,y2:T.endStubY}),l.addSegment(this,X,{x1:T.endStubX,y1:T.endStubY,x2:T.tx,y2:T.ty})}};n.Connectors.Straight=W,j.extend(W,n.Connectors.AbstractConnector)}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},W="stroke-dasharray",J="dashstyle",l="linearGradient",T="radialGradient",u="defs",r="fill",y="stop",x="stroke",I="stroke-width",C="style",d="none",e="jsplumb_gradient_",L="strokeWidth",F={svg:"http://www.w3.org/2000/svg"},U=function(_,A){for(var v in A)_.setAttribute(v,""+A[v])},G=function(_,A){return A=A||{},A.version="1.1",A.xmlns=F.svg,n.createElementNS(F.svg,_,null,null,A)},E=function(_){return"position:absolute;left:"+_[0]+"px;top:"+_[1]+"px"},O=function(_){for(var A=_.querySelectorAll(" defs,linearGradient,radialGradient"),v=0;v<A.length;v++)A[v].parentNode.removeChild(A[v])},s=function(_,A,v,S,H){var V=e+H._jsPlumb.instance.idstamp();O(_);var Y;v.gradient.offset?Y=G(T,{id:V}):Y=G(l,{id:V,gradientUnits:"userSpaceOnUse"});var i=G(u);_.appendChild(i),i.appendChild(Y);for(var a=0;a<v.gradient.stops.length;a++){var t=H.segment===1||H.segment===2?a:v.gradient.stops.length-1-a,g=v.gradient.stops[t][1],m=G(y,{offset:Math.floor(v.gradient.stops[a][0]*100)+"%","stop-color":g});Y.appendChild(m)}var N=v.stroke?x:r;A.setAttribute(N,"url(#"+V+")")},f=function(_,A,v,S,H){if(A.setAttribute(r,v.fill?v.fill:d),A.setAttribute(x,v.stroke?v.stroke:d),v.gradient?s(_,A,v,S,H):(O(_),A.setAttribute(C,"")),v.strokeWidth&&A.setAttribute(I,v.strokeWidth),v[J]&&v[L]&&!v[W]){var V=v[J].indexOf(",")===-1?" ":",",Y=v[J].split(V),i="";Y.forEach(function(t){i+=Math.floor(t*v.strokeWidth)+V}),A.setAttribute(W,i)}else v[W]&&A.setAttribute(W,v[W]);for(var a in X)v[a]&&A.setAttribute(X[a],v[a])},c=function(_,A,v){_.childNodes.length>v?_.insertBefore(A,_.childNodes[v]):_.appendChild(A)};j.svg={node:G,attr:U,pos:E};var P=function(_){var A=_.pointerEventsSpec||"all",v={};n.jsPlumbUIComponent.apply(this,_.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var S=_.cssClass+" "+(_.originalArgs[0].cssClass||""),H={style:"",width:0,height:0,"pointer-events":A,position:"absolute"};this.svg=G("svg",H),_.useDivWrapper?(this.canvas=n.createElement("div",{position:"absolute"}),j.sizeElement(this.canvas,0,0,1,1),this.canvas.className=S):(U(this.svg,{class:S}),this.canvas=this.svg),_._jsPlumb.appendElement(this.canvas,_.originalArgs[0].parent),_.useDivWrapper&&this.canvas.appendChild(this.svg);var V=[this.canvas];return this.getDisplayElements=function(){return V},this.appendDisplayElement=function(Y){V.push(Y)},this.paint=function(Y,i,a){if(Y!=null){var t=[this.x,this.y],g=[this.w,this.h],m;a!=null&&(a.xmin<0&&(t[0]+=a.xmin),a.ymin<0&&(t[1]+=a.ymin),g[0]=a.xmax+(a.xmin<0?-a.xmin:0),g[1]=a.ymax+(a.ymin<0?-a.ymin:0)),_.useDivWrapper?(j.sizeElement(this.canvas,t[0],t[1],g[0]>0?g[0]:1,g[1]>0?g[1]:1),t[0]=0,t[1]=0,m=E([0,0])):m=E([t[0],t[1]]),v.paint.apply(this,arguments),U(this.svg,{style:m,width:g[0]||1,height:g[1]||1})}},{renderer:v}};j.extend(P,n.jsPlumbUIComponent,{cleanup:function(_){_||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(_){var A=_.getContainer();this.canvas&&this.canvas.parentNode==null&&A.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&A.appendChild(this.bgCanvas)},setVisible:function(_){this.canvas&&(this.canvas.style.display=_?"block":"none")}}),n.ConnectorRenderers.svg=function(_){var A=this,v=P.apply(this,[{cssClass:_._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:_._jsPlumb}]);v.renderer.paint=function(S,H,V){var Y=A.getSegments(),i="",a=[0,0];if(V.xmin<0&&(a[0]=-V.xmin),V.ymin<0&&(a[1]=-V.ymin),Y.length>0){i=A.getPathData();var t={d:i,transform:"translate("+a[0]+","+a[1]+")","pointer-events":_["pointer-events"]||"visibleStroke"},g=null,m=[A.x,A.y,A.w,A.h];if(S.outlineStroke){var N=S.outlineWidth||1,R=S.strokeWidth+2*N;g=n.extend({},S),delete g.gradient,g.stroke=S.outlineStroke,g.strokeWidth=R,A.bgPath==null?(A.bgPath=G("path",t),n.addClass(A.bgPath,n.connectorOutlineClass),c(A.svg,A.bgPath,0)):U(A.bgPath,t),f(A.svg,A.bgPath,g,m,A)}A.path==null?(A.path=G("path",t),c(A.svg,A.path,S.outlineStroke?1:0)):U(A.path,t),f(A.svg,A.path,S,m,A)}}},j.extend(n.ConnectorRenderers.svg,P);var D=n.SvgEndpoint=function(_){var A=P.apply(this,[{cssClass:_._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:_._jsPlumb}]);A.renderer.paint=function(v){var S=n.extend({},v);S.outlineStroke&&(S.stroke=S.outlineStroke),this.node==null?(this.node=this.makeNode(S),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),f(this.svg,this.node,S,[this.x,this.y,this.w,this.h],this),E(this.node,[this.x,this.y])}.bind(this)};j.extend(D,P),n.Endpoints.svg.Dot=function(){n.Endpoints.Dot.apply(this,arguments),D.apply(this,arguments),this.makeNode=function(_){return G("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(_){U(_,{cx:this.w/2,cy:this.h/2,r:this.radius})}},j.extend(n.Endpoints.svg.Dot,[n.Endpoints.Dot,D]),n.Endpoints.svg.Rectangle=function(){n.Endpoints.Rectangle.apply(this,arguments),D.apply(this,arguments),this.makeNode=function(_){return G("rect",{width:this.w,height:this.h})},this.updateNode=function(_){U(_,{width:this.w,height:this.h})}},j.extend(n.Endpoints.svg.Rectangle,[n.Endpoints.Rectangle,D]),n.Endpoints.svg.Image=n.Endpoints.Image,n.Endpoints.svg.Blank=n.Endpoints.Blank,n.Overlays.svg.Label=n.Overlays.Label,n.Overlays.svg.Custom=n.Overlays.Custom;var h=function(_,A){_.apply(this,A),n.jsPlumbUIComponent.apply(this,A),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(S,H){if(S.component.svg&&H){this.path==null&&(this.path=G("path",{"pointer-events":"all"}),S.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,S.component),this.canvas=S.component.svg);var V=A&&A.length===1&&A[0].cssClass||"",Y=[0,0];H.xmin<0&&(Y[0]=-H.xmin),H.ymin<0&&(Y[1]=-H.ymin),U(this.path,{d:v(S.d),class:V,stroke:S.stroke?S.stroke:null,fill:S.fill?S.fill:null,transform:"translate("+Y[0]+","+Y[1]+")"})}};var v=function(S){return isNaN(S.cxy.x)||isNaN(S.cxy.y)?"":"M"+S.hxy.x+","+S.hxy.y+" L"+S.tail[0].x+","+S.tail[0].y+" L"+S.cxy.x+","+S.cxy.y+" L"+S.tail[1].x+","+S.tail[1].y+" L"+S.hxy.x+","+S.hxy.y};this.transfer=function(S){S.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),S.canvas.appendChild(this.path))}},M={cleanup:function(_){this.path!=null&&(_?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(_,A){this.path&&A.canvas&&A.canvas.appendChild(this.path)},setVisible:function(_){this.path!=null&&(this.path.style.display=_?"block":"none")}};j.extend(h,[n.jsPlumbUIComponent,n.Overlays.AbstractOverlay]),n.Overlays.svg.Arrow=function(){h.apply(this,[n.Overlays.Arrow,arguments])},j.extend(n.Overlays.svg.Arrow,[n.Overlays.Arrow,h],M),n.Overlays.svg.PlainArrow=function(){h.apply(this,[n.Overlays.PlainArrow,arguments])},j.extend(n.Overlays.svg.PlainArrow,[n.Overlays.PlainArrow,h],M),n.Overlays.svg.Diamond=function(){h.apply(this,[n.Overlays.Diamond,arguments])},j.extend(n.Overlays.svg.Diamond,[n.Overlays.Diamond,h],M),n.Overlays.svg.GuideLines=function(){var _=null,A=this,v,S;n.Overlays.GuideLines.apply(this,arguments),this.paint=function(V,Y){_==null&&(_=G("path"),V.connector.svg.appendChild(_),A.attachListeners(_,V.connector),A.attachListeners(_,A),v=G("path"),V.connector.svg.appendChild(v),A.attachListeners(v,V.connector),A.attachListeners(v,A),S=G("path"),V.connector.svg.appendChild(S),A.attachListeners(S,V.connector),A.attachListeners(S,A));var i=[0,0];Y.xmin<0&&(i[0]=-Y.xmin),Y.ymin<0&&(i[1]=-Y.ymin),U(_,{d:H(V.head,V.tail),stroke:"red",fill:null,transform:"translate("+i[0]+","+i[1]+")"}),U(v,{d:H(V.tailLine[0],V.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+i[0]+","+i[1]+")"}),U(S,{d:H(V.headLine[0],V.headLine[1]),stroke:"green",fill:null,transform:"translate("+i[0]+","+i[1]+")"})};var H=function(V,Y){return"M "+V.x+","+V.y+" L"+Y.x+","+Y.y}},j.extend(n.Overlays.svg.GuideLines,n.Overlays.GuideLines)}.call(typeof window<"u"?window:Rt),function(){var p=this,n=p.jsPlumb,j=p.jsPlumbUtil,X=p.Katavorio,W=p.Biltong,J=function(s){var f=s._mottle;return f||(f=s._mottle=new p.Mottle),f},l=function(s,f){f=f||"main";var c="_katavorio_"+f,P=s[c],D=s.getEventManager();return P||(P=new X({bind:D.on,unbind:D.off,getSize:n.getSize,getConstrainingRectangle:function(h){return[h.parentNode.scrollWidth,h.parentNode.scrollHeight]},getPosition:function(h,M){var _=s.getOffset(h,M,h._katavorioDrag?h.offsetParent:null);return[_.left,_.top]},setPosition:function(h,M){h.style.left=M[0]+"px",h.style.top=M[1]+"px"},addClass:n.addClass,removeClass:n.removeClass,intersects:W.intersects,indexOf:function(h,M){return h.indexOf(M)},scope:s.getDefaultScope(),css:{noSelect:s.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),P.setZoom(s.getZoom()),s[c]=P,s.bind("zoom",P.setZoom)),P},T=function(s){var f=s.el._jsPlumbDragOptions,c=!0;return f.canDrag&&(c=f.canDrag()),c&&(this.setHoverSuspended(!0),this.select({source:s.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:s.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),c},u=function(s){var f=this.getUIPosition(arguments,this.getZoom());if(f!=null){var c=s.el._jsPlumbDragOptions;this.draw(s.el,f,null,!0),c._dragging&&this.addClass(s.el,"jtk-dragged"),c._dragging=!0}},r=function(s){for(var f=s.selection,c,P=function(h){var M;h[1]!=null&&(c=this.getUIPosition([{el:h[2].el,pos:[h[1].left,h[1].top]}]),M=this.draw(h[2].el,c)),h[0]._jsPlumbDragOptions!=null&&delete h[0]._jsPlumbDragOptions._dragging,this.removeClass(h[0],"jtk-dragged"),this.select({source:h[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:h[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),s.e._drawResult=s.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(s.e._drawResult.c,M.c),Array.prototype.push.apply(s.e._drawResult.e,M.e),Array.prototype.push.apply(s.e._drawResult.a,M.a),this.getDragManager().dragEnded(h[2].el)}.bind(this),D=0;D<f.length;D++)P(f[D]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},y=function(s,f){var c=function(P){if(f[P]!=null)if(j.isString(f[P])){var D=f[P].match(/-=/)?-1:1,h=f[P].substring(2);return s[P]+D*h}else return f[P];else return s[P]};return[c("left"),c("top")]},x=function(s,f){if(f==null)return[0,0];var c=L(f),P=e(c,0);return[P[s+"X"],P[s+"Y"]]},I=x.bind(this,"page"),C=x.bind(this,"screen"),d=x.bind(this,"client"),e=function(s,f){return s.item?s.item(f):s[f]},L=function(s){return s.touches&&s.touches.length>0?s.touches:s.changedTouches&&s.changedTouches.length>0?s.changedTouches:s.targetTouches&&s.targetTouches.length>0?s.targetTouches:[s]},F=function(s){var f={},c=[],P={},D={},h={};this.register=function(M){var _=s.getId(M),A;f[_]||(f[_]=M,c.push(M),P[_]={});var v=function(S){if(S){for(var H=0;H<S.childNodes.length;H++)if(S.childNodes[H].nodeType!==3&&S.childNodes[H].nodeType!==8){var V=jsPlumb.getElement(S.childNodes[H]),Y=s.getId(S.childNodes[H],null,!0);if(Y&&D[Y]&&D[Y]>0){A||(A=s.getOffset(M));var i=s.getOffset(V);P[_][Y]={id:Y,offset:{left:i.left-A.left,top:i.top-A.top}},h[Y]=_}v(S.childNodes[H])}}};v(M)},this.updateOffsets=function(M,_){if(M!=null){_=_||{};var A=jsPlumb.getElement(M),v=s.getId(A),S=P[v],H;if(S){for(var V in S)if(S.hasOwnProperty(V)){var Y=jsPlumb.getElement(V),i=_[V]||s.getOffset(Y);if(Y.offsetParent==null&&P[v][V]!=null)continue;H||(H=s.getOffset(A)),P[v][V]={id:V,offset:{left:i.left-H.left,top:i.top-H.top}},h[V]=v}}}},this.endpointAdded=function(M,_){_=_||s.getId(M);var A=document.body,v=M.parentNode;for(D[_]=D[_]?D[_]+1:1;v!=null&&v!==A;){var S=s.getId(v,null,!0);if(S&&f[S]){var H=s.getOffset(v);if(P[S][_]==null){var V=s.getOffset(M);P[S][_]={id:_,offset:{left:V.left-H.left,top:V.top-H.top}},h[_]=S}break}v=v.parentNode}},this.endpointDeleted=function(M){if(D[M.elementId]&&(D[M.elementId]--,D[M.elementId]<=0))for(var _ in P)P.hasOwnProperty(_)&&P[_]&&(delete P[_][M.elementId],delete h[M.elementId])},this.changeId=function(M,_){P[_]=P[M],P[M]={},h[_]=h[M],h[M]=null},this.getElementsForDraggable=function(M){return P[M]},this.elementRemoved=function(M){var _=h[M];_&&(P[_]&&delete P[_][M],delete h[M])},this.reset=function(){f={},c=[],P={},D={}},this.dragEnded=function(M){if(M.offsetParent!=null){var _=s.getId(M),A=h[_];A&&this.updateOffsets(A)}},this.setParent=function(M,_,A,v,S){var H=h[_];P[v]||(P[v]={});var V=s.getOffset(A),Y=S||s.getOffset(M);H&&P[H]&&delete P[H][_],P[v][_]={id:_,offset:{left:Y.left-V.left,top:Y.top-V.top}},h[_]=v},this.clearParent=function(M,_){var A=h[_];A&&(delete P[A][_],delete h[_])},this.revalidateParent=function(M,_,A){var v=h[_];if(v){var S={};S[_]=A,this.updateOffsets(v,S),s.revalidate(v)}},this.getDragAncestor=function(M){var _=jsPlumb.getElement(M),A=s.getId(_),v=h[A];return v?jsPlumb.getElement(v):null}},U=function(s,f,c){f=j.fastTrim(f),typeof s.className.baseVal<"u"?s.className.baseVal=f:s.className=f;try{var P=s.classList;if(P!=null){for(;P.length>0;)P.remove(P.item(0));for(var D=0;D<c.length;D++)c[D]&&P.add(c[D])}}catch(h){j.log("JSPLUMB: cannot set class list",h)}},G=function(s){return typeof s.className.baseVal>"u"?s.className:s.className.baseVal},E=function(s,f,c){f=f==null?[]:j.isArray(f)?f:f.split(/\s+/),c=c==null?[]:j.isArray(c)?c:c.split(/\s+/);var P=G(s),D=P.split(/\s+/),h=function(M,_){for(var A=0;A<_.length;A++)if(M)D.indexOf(_[A])===-1&&D.push(_[A]);else{var v=D.indexOf(_[A]);v!==-1&&D.splice(v,1)}};h(!0,f),h(!1,c),U(s,D.join(" "),D)};p.jsPlumb.extend(p.jsPlumbInstance.prototype,{headless:!1,pageLocation:I,screenLocation:C,clientLocation:d,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new F(this)),this.dragManager},recalculateOffsets:function(s){this.getDragManager().updateOffsets(s)},createElement:function(s,f,c,P){return this.createElementNS(null,s,f,c,P)},createElementNS:function(s,f,c,P,D){var h=s==null?document.createElement(f):document.createElementNS(s,f),M;c=c||{};for(M in c)h.style[M]=c[M];P&&(h.className=P),D=D||{};for(M in D)h.setAttribute(M,""+D[M]);return h},getAttribute:function(s,f){return s.getAttribute!=null?s.getAttribute(f):null},setAttribute:function(s,f,c){s.setAttribute!=null&&s.setAttribute(f,c)},setAttributes:function(s,f){for(var c in f)f.hasOwnProperty(c)&&s.setAttribute(c,f[c])},appendToRoot:function(s){document.body.appendChild(s)},getRenderModes:function(){return["svg"]},getClass:G,addClass:function(s,f){jsPlumb.each(s,function(c){E(c,f)})},hasClass:function(s,f){return s=jsPlumb.getElement(s),s.classList?s.classList.contains(f):G(s).indexOf(f)!==-1},removeClass:function(s,f){jsPlumb.each(s,function(c){E(c,null,f)})},toggleClass:function(s,f){jsPlumb.hasClass(s,f)?jsPlumb.removeClass(s,f):jsPlumb.addClass(s,f)},updateClasses:function(s,f,c){jsPlumb.each(s,function(P){E(P,f,c)})},setClass:function(s,f){f!=null&&jsPlumb.each(s,function(c){U(c,f,f.split(/\s+/))})},setPosition:function(s,f){s.style.left=f.left+"px",s.style.top=f.top+"px"},getPosition:function(s){var f=function(c){var P=s.style[c];return P?P.substring(0,P.length-2):0};return{left:f("left"),top:f("top")}},getStyle:function(s,f){return typeof window.getComputedStyle<"u"?getComputedStyle(s,null).getPropertyValue(f):s.currentStyle[f]},getSelector:function(s,f){var c=null;return arguments.length===1?c=s.nodeType!=null?s:document.querySelectorAll(s):c=s.querySelectorAll(f),c},getOffset:function(s,f,c){s=jsPlumb.getElement(s),c=c||this.getContainer();for(var P={left:s.offsetLeft,top:s.offsetTop},D=f||c!=null&&s!==c&&s.offsetParent!==c?s.offsetParent:null,h=function(A){A!=null&&A!==document.body&&(A.scrollTop>0||A.scrollLeft>0)&&(P.left-=A.scrollLeft,P.top-=A.scrollTop)}.bind(this);D!=null;)P.left+=D.offsetLeft,P.top+=D.offsetTop,h(D),D=f?D.offsetParent:D.offsetParent===c?null:D.offsetParent;if(c!=null&&!f&&(c.scrollTop>0||c.scrollLeft>0)){var M=s.offsetParent!=null?this.getStyle(s.offsetParent,"position"):"static",_=this.getStyle(s,"position");_!=="absolute"&&_!=="fixed"&&M!=="absolute"&&M!=="fixed"&&(P.left-=c.scrollLeft,P.top-=c.scrollTop)}return P},getPositionOnElement:function(s,f,c){var P=typeof f.getBoundingClientRect<"u"?f.getBoundingClientRect():{left:0,top:0,width:0,height:0},D=document.body,h=document.documentElement,M=window.pageYOffset||h.scrollTop||D.scrollTop,_=window.pageXOffset||h.scrollLeft||D.scrollLeft,A=h.clientTop||D.clientTop||0,v=h.clientLeft||D.clientLeft||0,S=0,H=0,V=P.top+M-A+S*c,Y=P.left+_-v+H*c,i=jsPlumb.pageLocation(s),a=P.width||f.offsetWidth*c,t=P.height||f.offsetHeight*c,g=(i[0]-Y)/a,m=(i[1]-V)/t;return[g,m]},getAbsolutePosition:function(s){var f=function(c){var P=s.style[c];if(P)return parseFloat(P.substring(0,P.length-2))};return[f("left"),f("top")]},setAbsolutePosition:function(s,f,c,P){c?this.animate(s,{left:"+="+(f[0]-c[0]),top:"+="+(f[1]-c[1])},P):(s.style.left=f[0]+"px",s.style.top=f[1]+"px")},getSize:function(s){return[s.offsetWidth,s.offsetHeight]},getWidth:function(s){return s.offsetWidth},getHeight:function(s){return s.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(s,f){var c;return s=j.isArray(s)||s.length!=null&&!j.isString(s)?s:[s],Array.prototype.slice.call(s).forEach(function(P){c=this.info(P),c.el&&this._initDraggableIfNecessary(c.el,!0,f,c.id,!0)}.bind(this)),this},snapToGrid:function(s,f,c){var P=[],D=function(_){var A=this.info(_);if(A.el!=null&&A.el._katavorioDrag){var v=A.el._katavorioDrag.snap(f,c);this.revalidate(A.el),P.push([A.el,v])}}.bind(this);if(arguments.length===1||arguments.length===3)D(s,f,c);else{var h=this.getManagedElements();for(var M in h)D(M,arguments[0],arguments[1])}return P},initDraggable:function(s,f,c){l(this,c).draggable(s,f),s._jsPlumbDragOptions=f},destroyDraggable:function(s,f){l(this,f).destroyDraggable(s),s._jsPlumbDragOptions=null,s._jsPlumbRelatedElement=null},unbindDraggable:function(s,f,c,P){l(this,P).destroyDraggable(s,f,c)},setDraggable:function(s,f){return jsPlumb.each(s,function(c){this.isDragSupported(c)&&(this._draggableStates[this.getAttribute(c,"id")]=f,this.setElementDraggable(c,f))}.bind(this))},_draggableStates:{},toggleDraggable:function(s){var f;return jsPlumb.each(s,function(c){var P=this.getAttribute(c,"id");return f=this._draggableStates[P]==null?!1:this._draggableStates[P],f=!f,this._draggableStates[P]=f,this.setDraggable(c,f),f}.bind(this)),f},_initDraggableIfNecessary:function(s,f,c,P,D){if(!jsPlumb.headless){var h=f==null?!1:f;if(h&&jsPlumb.isDragSupported(s,this)){var M=c||this.Defaults.DragOptions;if(M=jsPlumb.extend({},M),jsPlumb.isAlreadyDraggable(s,this))c.force&&this.initDraggable(s,M);else{var _=jsPlumb.dragEvents.drag,A=jsPlumb.dragEvents.stop,v=jsPlumb.dragEvents.start;this.manage(P,s),M[v]=j.wrap(M[v],T.bind(this)),M[_]=j.wrap(M[_],u.bind(this)),M[A]=j.wrap(M[A],r.bind(this));var S=this.getId(s);this._draggableStates[S]=!0;var H=this._draggableStates[S];M.disabled=H==null?!1:!H,this.initDraggable(s,M),this.getDragManager().register(s),D&&this.fire("elementDraggable",{el:s,options:M})}}}},animationSupported:!0,getElement:function(s){return s==null?null:(s=typeof s=="string"?s:s.tagName==null&&s.length!=null&&s.enctype==null?s[0]:s,typeof s=="string"?document.getElementById(s):s)},removeElement:function(s){l(this).elementRemoved(s),this.getEventManager().remove(s)},doAnimate:function(s,f,c){c=c||{};var P=this.getOffset(s),D=y(P,f),h=D[0]-P.left,M=D[1]-P.top,_=c.duration||250,A=15,v=_/A,S=A/_*h,H=A/_*M,V=0,Y=setInterval(function(){n.setPosition(s,{left:P.left+S*(V+1),top:P.top+H*(V+1)}),c.step!=null&&c.step(V,Math.ceil(v)),V++,V>=v&&(window.clearInterval(Y),c.complete!=null&&c.complete())},A)},destroyDroppable:function(s,f){l(this,f).destroyDroppable(s)},unbindDroppable:function(s,f,c,P){l(this,P).destroyDroppable(s,f,c)},droppable:function(s,f){s=j.isArray(s)||s.length!=null&&!j.isString(s)?s:[s];var c;return f=f||{},f.allowLoopback=!1,Array.prototype.slice.call(s).forEach(function(P){c=this.info(P),c.el&&this.initDroppable(c.el,f)}.bind(this)),this},initDroppable:function(s,f,c){l(this,c).droppable(s,f)},isAlreadyDraggable:function(s){return s._katavorioDrag!=null},isDragSupported:function(s,f){return!0},isDropSupported:function(s,f){return!0},isElementDraggable:function(s){return s=n.getElement(s),s._katavorioDrag&&s._katavorioDrag.isEnabled()},getDragObject:function(s){return s[0].drag.getDragElement()},getDragScope:function(s){return s._katavorioDrag&&s._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(s){return s[0].e},getUIPosition:function(s,f){var c=s[0].el;if(c.offsetParent==null)return null;var P=s[0].finalPos||s[0].pos,D={left:P[0],top:P[1]};if(c._katavorioDrag&&c.offsetParent!==this.getContainer()){var h=this.getOffset(c.offsetParent);D.left+=h.left,D.top+=h.top}return D},setDragFilter:function(s,f,c){s._katavorioDrag&&s._katavorioDrag.setFilter(f,c)},setElementDraggable:function(s,f){s=n.getElement(s),s._katavorioDrag&&s._katavorioDrag.setEnabled(f)},setDragScope:function(s,f){s._katavorioDrag&&s._katavorioDrag.k.setDragScope(s,f)},setDropScope:function(s,f){s._katavorioDrop&&s._katavorioDrop.length>0&&s._katavorioDrop[0].k.setDropScope(s,f)},addToPosse:function(s,f){var c=Array.prototype.slice.call(arguments,1),P=l(this);n.each(s,function(D){D=[n.getElement(D)],D.push.apply(D,c),P.addToPosse.apply(P,D)})},setPosse:function(s,f){var c=Array.prototype.slice.call(arguments,1),P=l(this);n.each(s,function(D){D=[n.getElement(D)],D.push.apply(D,c),P.setPosse.apply(P,D)})},removeFromPosse:function(s,f){var c=Array.prototype.slice.call(arguments,1),P=l(this);n.each(s,function(D){D=[n.getElement(D)],D.push.apply(D,c),P.removeFromPosse.apply(P,D)})},removeFromAllPosses:function(s){var f=l(this);n.each(s,function(c){f.removeFromAllPosses(n.getElement(c))})},setPosseState:function(s,f,c){var P=l(this);n.each(s,function(D){P.setPosseState(n.getElement(D),f,c)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(s){s._katavorioDrag&&s._katavorioDrag.abort()},addToDragSelection:function(s){var f=this.getElement(s);f!=null&&(f._isJsPlumbGroup||f._jsPlumbGroup==null)&&l(this).select(s)},removeFromDragSelection:function(s){l(this).deselect(s)},getDragSelection:function(){return l(this).getSelection()},clearDragSelection:function(){l(this).deselectAll()},trigger:function(s,f,c,P){this.getEventManager().trigger(s,f,c,P)},doReset:function(){for(var s in this)s.indexOf("_katavorio_")===0&&this[s].reset()},getEventManager:function(){return J(this)},on:function(s,f,c){return this.getEventManager().on.apply(this,arguments),this},off:function(s,f,c){return this.getEventManager().off.apply(this,arguments),this}});var O=function(s){var f=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&document.body!=null?s():setTimeout(f,9)};f()};O(n.init)}.call(typeof window<"u"?window:Rt)})(Le);function _e(tt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_e=function(p){return typeof p}:_e=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},_e(tt)}function an(tt,p,n,j,X,W,J){try{var l=tt[W](J),T=l.value}catch(u){n(u);return}l.done?p(T):Promise.resolve(T).then(j,X)}function Mn(tt){return function(){var p=this,n=arguments;return new Promise(function(j,X){var W=tt.apply(p,n);function J(T){an(W,j,X,J,l,"next",T)}function l(T){an(W,j,X,J,l,"throw",T)}J(void 0)})}}function jn(tt,p){if(!(tt instanceof p))throw new TypeError("Cannot call a class as a function")}function ln(tt,p){for(var n=0;n<p.length;n++){var j=p[n];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(tt,j.key,j)}}function kn(tt,p,n){return p&&ln(tt.prototype,p),n&&ln(tt,n),tt}function pe(tt,p,n){return p in tt?Object.defineProperty(tt,p,{value:n,enumerable:!0,configurable:!0,writable:!0}):tt[p]=n,tt}function un(tt,p){var n=Object.keys(tt);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(tt);p&&(j=j.filter(function(X){return Object.getOwnPropertyDescriptor(tt,X).enumerable})),n.push.apply(n,j)}return n}function Jt(tt){for(var p=1;p<arguments.length;p++){var n=arguments[p]!=null?arguments[p]:{};p%2?un(Object(n),!0).forEach(function(j){pe(tt,j,n[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach(function(j){Object.defineProperty(tt,j,Object.getOwnPropertyDescriptor(n,j))})}return tt}function ce(tt){return Ln(tt)||In(tt)||Fn(tt)||Rn()}function Ln(tt){if(Array.isArray(tt))return Ve(tt)}function In(tt){if(typeof Symbol<"u"&&Symbol.iterator in Object(tt))return Array.from(tt)}function Fn(tt,p){if(!!tt){if(typeof tt=="string")return Ve(tt,p);var n=Object.prototype.toString.call(tt).slice(8,-1);if(n==="Object"&&tt.constructor&&(n=tt.constructor.name),n==="Map"||n==="Set")return Array.from(tt);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(tt,p)}}function Ve(tt,p){(p==null||p>tt.length)&&(p=tt.length);for(var n=0,j=new Array(p);n<p;n++)j[n]=tt[n];return j}function Rn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Nn='button:not([disabled]), select:not([disabled]), a[href]:not([disabled]), area[href]:not([disabled]), [contentEditable=""]:not([disabled]), [contentEditable="true"]:not([disabled]), [contentEditable="TRUE"]:not([disabled]), textarea:not([disabled]), iframe:not([disabled]), input:not([disabled]), summary:not([disabled]), [tabindex]:not([tabindex="-1"])',Gn=function(p){return p.key==="Tab"||p.keyCode===9},Bn=function(p,n){return ce(p.querySelectorAll(n)||[])},Un=function(p){return Bn(p,Nn)},cn=function(p){return p==document.activeElement},Hn=function(){return!document.activeElement},zn=function(){function tt(){jn(this,tt),this.root=null,this.elements=[],this.onKeyDown=this.onKeyDown.bind(this),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this),this.firstElement=this.firstElement.bind(this),this.lastElement=this.lastElement.bind(this)}return kn(tt,[{key:"lastElement",value:function(){return this.elements[this.elements.length-1]||null}},{key:"firstElement",value:function(){return this.elements[0]||null}},{key:"onKeyDown",value:function(n){if(!!Gn(n)){if(n.shiftKey){cn(this.firstElement())&&(this.lastElement().focus(),n.preventDefault());return}if(Hn()||cn(this.lastElement())){this.firstElement().focus(),n.preventDefault();return}}}},{key:"enabled",value:function(){return!!this.root}},{key:"enable",value:function(n){!n||(this.root=n,this.elements=Un(this.root),this.root.addEventListener("keydown",this.onKeyDown))}},{key:"disable",value:function(){this.root.removeEventListener("keydown",this.onKeyDown),this.root=null}}]),tt}(),Vn=function(p,n,j){var X=p.style[n];return p.style[n]=j,function(){p.style[n]=X}},hn=function(p){var n=p.targetTouches?p.targetTouches[0]:p,j=n.clientX,X=n.clientY;return{x:j,y:X}},Yn=function(p){return p.charAt(0).toUpperCase()+p.slice(1)},Te=function(p,n,j){return typeof p!="number"&&(p=Math.min(n,j)||n),typeof j!="number"&&(j=Math.max(n,p)),Math.min(Math.max(n,p),j)},fn=function(p){return p&&Number(p.replace(/px$/,""))||0},Xn=function(p,n,j){if(j==="")return!0;var X=ce(n.querySelectorAll(j));return X.includes(p.target)},Re={down:{pc:"mousedown",m:"touchstart"},move:{pc:"mousemove",m:"touchmove"},up:{pc:"mouseup",m:"touchend"}},Me=function(p,n,j){n&&n.addEventListener(Re[p].pc,j),n&&n.addEventListener(Re[p].m,j,{passive:!1})},je=function(p,n,j){n&&n.removeEventListener(Re[p].pc,j),n&&n.removeEventListener(Re[p].m,j)},Ye=!1;if(typeof window<"u"){var dn={get passive(){Ye=!0}};window.addEventListener("testPassive",null,dn),window.removeEventListener("testPassive",null,dn)}var mn=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),ue=[],Ne=!1,Ie=0,yn=-1,Pe,Ce,Wn=function(p){if(!p||p.nodeType!==Node.ELEMENT_NODE)return!1;var n=window.getComputedStyle(p);return["auto","scroll"].includes(n.overflowY)&&p.scrollHeight>p.clientHeight},qn=function(p,n){return!(p.scrollTop===0&&n<0||p.scrollTop+p.clientHeight+n>=p.scrollHeight&&n>0)},Kn=function(p){for(var n=[];p;){if(n.push(p),p.classList.contains("vfm"))return n;p=p.parentElement}return n},Zn=function(p,n){var j=!1,X=Kn(p);return X.forEach(function(W){Wn(W)&&qn(W,n)&&(j=!0)}),j},bn=function(p){return ue.some(function(){return Zn(p,-Ie)})},Ge=function(p){var n=p||window.event;return bn(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},Jn=function(p){if(Ce===void 0){var n=!!p&&p.reserveScrollBarGap===!0,j=window.innerWidth-document.documentElement.clientWidth;if(n&&j>0){var X=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);Ce=document.body.style.paddingRight,document.body.style.paddingRight="".concat(X+j,"px")}}Pe===void 0&&(Pe=document.body.style.overflow,document.body.style.overflow="hidden")},Qn=function(){Ce!==void 0&&(document.body.style.paddingRight=Ce,Ce=void 0),Pe!==void 0&&(document.body.style.overflow=Pe,Pe=void 0)},$n=function(p){return p?p.scrollHeight-p.scrollTop<=p.clientHeight:!1},ti=function(p,n){return Ie=p.targetTouches[0].clientY-yn,bn(p.target)?!1:n&&n.scrollTop===0&&Ie>0||$n(n)&&Ie<0?Ge(p):(p.stopPropagation(),!0)},ei=function(p,n){if(!p){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!ue.some(function(X){return X.targetElement===p})){var j={targetElement:p,options:n||{}};ue=[].concat(ce(ue),[j]),mn?(p.ontouchstart=function(X){X.targetTouches.length===1&&(yn=X.targetTouches[0].clientY)},p.ontouchmove=function(X){X.targetTouches.length===1&&ti(X,p)},Ne||(document.addEventListener("touchmove",Ge,Ye?{passive:!1}:void 0),Ne=!0)):Jn(n)}},He=function(p){if(!p){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}ue=ue.filter(function(n){return n.targetElement!==p}),mn?(p.ontouchstart=null,p.ontouchmove=null,Ne&&ue.length===0&&(document.removeEventListener("touchmove",Ge,Ye?{passive:!1}:void 0),Ne=!1)):ue.length||Qn()},ke=function(){},ne={Enter:"enter",Entering:"entering",Leave:"leave",Leaving:"leavng"},ni={t:"ns-resize",tr:"nesw-resize",r:"ew-resize",br:"nwse-resize",b:"ns-resize",bl:"nesw-resize",l:"ew-resize",tl:"nwse-resize"},Be={props:{name:{type:String,default:null},modelValue:{type:Boolean,default:!1},ssr:{type:Boolean,default:!0},classes:{type:[String,Object,Array],default:""},overlayClass:{type:[String,Object,Array],default:""},contentClass:{type:[String,Object,Array],default:""},styles:{type:[Object,Array],default:function(){return{}}},overlayStyle:{type:[Object,Array],default:function(){return{}}},contentStyle:{type:[Object,Array],default:function(){return{}}},lockScroll:{type:Boolean,default:!0},hideOverlay:{type:Boolean,default:!1},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!1},preventClick:{type:Boolean,default:!1},attach:{type:null,default:!1,validator:function(p){var n=_e(p);return n==="boolean"||n==="string"?!0:p.nodeType===Node.ELEMENT_NODE}},transition:{type:[String,Object],default:"vfm"},overlayTransition:{type:[String,Object],default:"vfm"},keepOverlay:{type:Boolean,default:!1},zIndexAuto:{type:Boolean,default:!0},zIndexBase:{type:[String,Number],default:1e3},zIndex:{type:[Boolean,String,Number],default:!1},focusRetain:{type:Boolean,default:!0},focusTrap:{type:Boolean,default:!1},fitParent:{type:Boolean,default:!0},drag:{type:Boolean,default:!1},dragSelector:{type:String,default:""},keepChangedStyle:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},resizeDirections:{type:Array,default:function(){return["t","tr","r","br","b","bl","l","tl"]},validator:function(p){return["t","tr","r","br","b","bl","l","tl"].filter(function(n){return p.indexOf(n)!==-1}).length===p.length}},minWidth:{type:Number,default:0},minHeight:{type:Number,default:0},maxWidth:{type:Number,default:1/0},maxHeight:{type:Number,default:1/0}},emits:["update:modelValue","click-outside","before-open","opened","before-close","closed","_before-open","_opened","_closed","drag:start","drag:move","drag:end","resize:start","resize:move","resize:end"],setup:function(p,n){var j=n.emit,X=Symbol("vfm"),W=Zt(null),J=Zt(null),l=Zt(null),T=Zt(null),u=Zt(null),r=Zt(null),y=Zt(null),x=new zn,I=Zt(!1),C=xn({modal:!1,overlay:!1,resize:!1}),d=Zt(null),e=Zt(null),L=Zt(!1),F=Zt({}),U=Zt({}),G=Zt(null),E=Zt(null),O=ke,s=ke,f=he(function(){return typeof p.overlayTransition=="string"?{name:p.overlayTransition}:Jt({},p.overlayTransition)}),c=he(function(){return typeof p.transition=="string"?{name:p.transition}:Jt({},p.transition)}),P=he(function(){return(p.hideOverlay||d.value===ne.Leave)&&e.value===ne.Leave}),D=he(function(){return p.zIndex===!1?p.zIndexAuto?+p.zIndexBase+2*(y.value||0):!1:p.zIndex}),h=he(function(){return Jt({},D.value!==!1&&{zIndex:D.value})}),M=he(function(){var q=[U.value];return Array.isArray(p.contentStyle)?q.push.apply(q,ce(p.contentStyle)):q.push(p.contentStyle),q});le(function(){return p.modelValue},function(q){if(L.value){L.value=!1;return}if(A(),!q){if(st("before-close",!0)){s("hide");return}v()}}),le(function(){return p.lockScroll},S),le(function(){return p.hideOverlay},function(q){p.modelValue&&!q&&(C.overlay=!0)}),le(function(){return p.attach},A),le(P,function(q){q&&(I.value=!1,J.value.style.display="none")},{flush:"post"}),le(function(){return p.drag},function(q){I.value&&(q?lt():yt())}),le(function(){return p.resize},function(q){I.value&&(q?mt():et())}),le(function(){return p.keepChangedStyle},function(q){q||(U.value={})}),Dn(function(){p.api.modals.push(_()),A()}),wn(function(){var q;v(),p.lockScroll&&J.value&&He(J.value),W==null||(q=W.value)===null||q===void 0||q.remove();var nt=p.api.modals.findIndex(function(ht){return ht.uid===X});p.api.modals.splice(nt,1)});function _(){return{uid:X,props:p,emit:j,vfmContainer:J,vfmContent:l,vfmResize:T,vfmOverlayTransition:u,vfmTransition:r,getAttachElement:H,modalStackIndex:y,visibility:C,handleLockScroll:S,$focusTrap:x,toggle:gt,params:F}}function A(){if(p.modelValue){if(j("_before-open",ot({type:"_before-open"})),st("before-open",!1)){s("show");return}var q=H();if(q||p.attach===!1){if(p.attach!==!1)if(W.value)q.appendChild(W.value);else{I.value=!0,Oe(function(){A()});return}var nt=p.api.openedModals.findIndex(function(ht){return ht.uid===X});nt!==-1&&p.api.openedModals.splice(nt,1),p.api.openedModals.push(_()),y.value=p.api.openedModals.length-1,S(),p.api.openedModals.filter(function(ht){return ht.uid!==X}).forEach(function(ht,Ct){ht.getAttachElement()===q&&(ht.modalStackIndex.value=Ct,!ht.props.keepOverlay&&(ht.visibility.overlay=!1))}),I.value=!0,V()}else q!==!1&&console.warn("Unable to locate target ".concat(p.attach))}}function v(){var q=p.api.openedModals.findIndex(function(ht){return ht.uid===X});if(q!==-1&&p.api.openedModals.splice(q,1),p.api.openedModals.length>0){var nt=p.api.openedModals[p.api.openedModals.length-1];nt.props.focusTrap&&nt.$focusTrap.firstElement().focus(),(nt.props.focusRetain||nt.props.focusTrap)&&nt.vfmContainer.value.focus(),!nt.props.hideOverlay&&(nt.visibility.overlay=!0)}p.drag&&yt(),p.resize&&et(),G.value=null,Y()}function S(){p.modelValue&&Oe(function(){p.lockScroll?ei(J.value,{reserveScrollBarGap:!0}):He(J.value)})}function H(){var q;return p.attach===!1?q=!1:typeof p.attach=="string"?window?q=window.document.querySelector(p.attach):q=!1:q=p.attach,q}function V(){C.overlay=!0,C.modal=!0}function Y(){C.overlay=!1,C.modal=!1}function i(){d.value=ne.Entering}function a(){d.value=ne.Enter}function t(){d.value=ne.Leaving}function g(){d.value=ne.Leave}function m(){e.value=ne.Entering}function N(){e.value=ne.Enter,(p.focusRetain||p.focusTrap)&&J.value.focus(),p.focusTrap&&x.enable(J.value),p.drag&&lt(),p.resize&&mt(),j("_opened"),j("opened",ot({type:"opened"})),O("show")}function R(){e.value=ne.Leaving,x.enabled()&&x.disable()}function K(){e.value=ne.Leave,y.value=null,p.lockScroll&&He(J.value),p.keepChangedStyle||(U.value={});var q=!1,nt=ot({type:"closed",stop:function(){q=!0}});j("_closed"),j("closed",nt),O("hide"),!q&&(F.value={})}function B(q){E.value=q==null?void 0:q.target}function Z(){E.value===J.value&&G.value!=="resize:move"&&(j("click-outside",ot({type:"click-outside"})),p.clickToClose&&j("update:modelValue",!1))}function ut(){I.value&&p.escToClose&&j("update:modelValue",!1)}function ot(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Jt({ref:_()},q)}function st(q,nt){var ht=!1,Ct=ot({type:q,stop:function(){ht=!0}});return j(q,Ct),ht?(L.value=!0,Oe(function(){j("update:modelValue",nt)}),!0):!1}function at(q,nt,ht){G.value="".concat(nt,":").concat(ht),j(G.value,q)}function gt(q,nt){var ht=arguments;return new Promise(function(Ct,wt){O=function(Tt){Ct(Tt),O=ke},s=function(Tt){wt(Tt),s=ke};var It=typeof q=="boolean"?q:!p.modelValue;It&&ht.length===2&&(F.value=nt),j("update:modelValue",It)})}function dt(q){q.stopPropagation();var nt="resize",ht="drag",Ct=q.target.getAttribute("direction"),wt;if(Ct)wt=nt;else if(Xn(q,l.value,p.dragSelector))wt=ht;else return;at(q,wt,"start");var It=hn(q),jt=J.value.getBoundingClientRect(),Tt=l.value.getBoundingClientRect(),Nt=window.getComputedStyle(l.value).position==="absolute",Kt={top:fn(U.value.top),left:fn(U.value.left)},kt=function(){if(p.fitParent){var Gt={absolute:function(){return{minTop:0,minLeft:0,maxTop:jt.height-Tt.height,maxLeft:jt.width-Tt.width}},relative:function(){return{minTop:Kt.top+jt.top-Tt.top,minLeft:Kt.left+jt.left-Tt.left,maxTop:Kt.top+jt.bottom-Tt.bottom,maxLeft:Kt.left+jt.right-Tt.right}}};return Nt?Gt.absolute():Gt.relative()}else return{}}(),Ut=wt===nt&&Vn(document.body,"cursor",ni[Ct]),Ft=function(Ht){Ht.stopPropagation(),at(Ht,wt,"move");var $t=hn(Ht),zt={x:$t.x-It.x,y:$t.y-It.y};wt===nt&&(zt=$(Ct,zt,jt,Tt,Nt));var At,Vt;Nt?(At=Tt.top-jt.top+zt.y,Vt=Tt.left-jt.left+zt.x):(At=Kt.top+zt.y,Vt=Kt.left+zt.x),wt===ht&&p.fitParent&&(At=Te(kt.minTop,At,kt.maxTop),Vt=Te(kt.minLeft,Vt,kt.maxLeft));var Lt=Jt(Jt(Jt({position:"relative",top:At+"px",left:Vt+"px",margin:"unset",touchAction:"none"},Nt&&{position:"absolute",transform:"unset",width:Tt.width+"px",height:Tt.height+"px"}),zt.width&&{width:zt.width+"px"}),zt.height&&{height:zt.height+"px"});U.value=Jt(Jt({},U.value),Lt)},Yt=function Gt(Ht){Ht.stopPropagation(),wt===nt&&Ut&&Ut(),setTimeout(function(){at(Ht,wt,"end")}),je("move",document,Ft),je("up",document,Gt)};Me("move",document,Ft),Me("up",document,Yt)}function lt(){Me("down",l.value,dt),U.value.touchAction="none"}function yt(){je("down",l.value,dt)}function mt(){C.resize=!0,Oe(function(){Me("down",T.value,dt)})}function et(){je("down",T.value,dt),C.resize=!1}function $(q,nt,ht,Ct,wt){var It=function(kt){var Ut,Ft=nt[kt.axis];Ft=p.fitParent?Te(kt.min,Ft,kt.max):Ft;var Yt=Te(kt.minEdge,kt.getEdge(Ft),kt.maxEdge);return Ft=kt.getOffsetAxis(Yt,wt),Ut={},pe(Ut,kt.edgeName,Yt),pe(Ut,kt.axis,Ft),Ut},jt=function(kt,Ut,Ft,Yt){var Gt=Ct[Ut],Ht=ht[kt]-Ct[kt],$t=Yn(Ut);return{axis:Ft,edgeName:Ut,min:Yt?Ht:-Gt,max:Yt?Gt:Ht,minEdge:p["min".concat($t)],maxEdge:p["max".concat($t)],getEdge:function(At){return Ct[Ut]-At*(Yt?1:-1)},getOffsetAxis:function(At,Vt){var Lt=Ct[Ut]-At;return Vt?Yt?Lt:0:(Yt?1:-1)*Lt/2}}},Tt={t:["top","height","y",!0],b:["bottom","height","y",!1],l:["left","width","x",!0],r:["right","width","x",!1]},Nt={x:0,y:0};return q.split("").forEach(function(Kt){var kt=jt.apply(void 0,ce(Tt[Kt]));Nt=Jt(Jt({},Nt),It(kt))}),Nt}return{root:W,vfmContainer:J,vfmContent:l,vfmResize:T,vfmOverlayTransition:u,vfmTransition:r,computedOverlayTransition:f,computedTransition:c,visible:I,visibility:C,params:F,calculateZIndex:D,bindStyle:h,bindContentStyle:M,beforeOverlayEnter:i,afterOverlayEnter:a,beforeOverlayLeave:t,afterOverlayLeave:g,beforeModalEnter:m,afterModalEnter:N,beforeModalLeave:R,afterModalLeave:K,onMousedown:B,onMouseupContainer:Z,onEsc:ut}}},ze=Cn();vn("data-v-2836fdb5");var ii={key:0,ref:"vfmResize",class:"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none"};pn();var ri=ze(function(tt,p,n,j,X,W){return n.ssr||j.visible?Qe((qt(),ie("div",{key:0,ref:"root",style:j.bindStyle,class:["vfm vfm--inset",[n.attach===!1?"vfm--fixed":"vfm--absolute",{"vfm--prevent-none":n.preventClick}]],onKeydown:p[4]||(p[4]=Sn(function(){return j.onEsc&&j.onEsc.apply(j,arguments)},["esc"]))},[ye(tn,Fe(j.computedOverlayTransition,{onBeforeEnter:j.beforeOverlayEnter,onAfterEnter:j.afterOverlayEnter,onBeforeLeave:j.beforeOverlayLeave,onAfterLeave:j.afterOverlayLeave}),{default:ze(function(){return[!n.hideOverlay&&j.visibility.overlay?(qt(),ie("div",{key:0,class:["vfm__overlay vfm--overlay vfm--absolute vfm--inset",n.overlayClass],style:n.overlayStyle},null,6)):ve("v-if",!0)]}),_:1},16,["onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"]),ye(tn,Fe(j.computedTransition,{onBeforeEnter:j.beforeModalEnter,onAfterEnter:j.afterModalEnter,onBeforeLeave:j.beforeModalLeave,onAfterLeave:j.afterModalLeave}),{default:ze(function(){return[Qe(ye("div",{ref:"vfmContainer",class:["vfm__container vfm--absolute vfm--inset vfm--outline-none",n.classes],style:n.styles,"aria-expanded":j.visibility.modal.toString(),role:"dialog","aria-modal":"true",tabindex:"-1",onMouseup:p[2]||(p[2]=en(function(){return j.onMouseupContainer&&j.onMouseupContainer.apply(j,arguments)},["self"])),onMousedown:p[3]||(p[3]=en(function(){return j.onMousedown&&j.onMousedown.apply(j,arguments)},["self"]))},[ye("div",{ref:"vfmContent",class:["vfm__content",[n.contentClass,{"vfm--prevent-auto":n.preventClick}]],style:j.bindContentStyle,onMousedown:p[1]||(p[1]=function(J){return j.onMousedown(null)})},[En(tt.$slots,"default",{params:j.params,close:function(){return tt.$emit("update:modelValue",!1)}}),j.visibility.resize&&j.visibility.modal?(qt(),ie("div",ii,[(qt(!0),ie(be,null,Ee(n.resizeDirections,function(J){return qt(),ie("div",{key:J,direction:J,class:["vfm--resize-".concat(J),"vfm--absolute vfm--prevent-auto"]},null,10,["direction"])}),128))],512)):ve("v-if",!0)],38)],46,["aria-expanded"]),[[$e,j.visibility.modal]])]}),_:3},16,["onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],38)),[[$e,!n.ssr||j.visible]]):ve("v-if",!0)});function si(tt,p){p===void 0&&(p={});var n=p.insertAt;if(!(!tt||typeof document>"u")){var j=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",n==="top"&&j.firstChild?j.insertBefore(X,j.firstChild):j.appendChild(X),X.styleSheet?X.styleSheet.cssText=tt:X.appendChild(document.createTextNode(tt))}}var oi=`
.vfm--fixed[data-v-2836fdb5] {
  position: fixed;
}
.vfm--absolute[data-v-2836fdb5] {
  position: absolute;
}
.vfm--inset[data-v-2836fdb5] {
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.vfm--overlay[data-v-2836fdb5] {
  background-color: rgba(0, 0, 0, 0.5);
}
.vfm--prevent-none[data-v-2836fdb5] {
  pointer-events: none;
}
.vfm--prevent-auto[data-v-2836fdb5] {
  pointer-events: auto;
}
.vfm--outline-none[data-v-2836fdb5]:focus {
  outline: none;
}
.vfm-enter-active[data-v-2836fdb5],
.vfm-leave-active[data-v-2836fdb5] {
  transition: opacity 0.2s;
}
.vfm-enter-from[data-v-2836fdb5],
.vfm-leave-to[data-v-2836fdb5] {
  opacity: 0;
}
.vfm--touch-none[data-v-2836fdb5] {
  touch-action: none;
}
.vfm--select-none[data-v-2836fdb5] {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.vfm--resize-tr[data-v-2836fdb5],
.vfm--resize-br[data-v-2836fdb5],
.vfm--resize-bl[data-v-2836fdb5],
.vfm--resize-tl[data-v-2836fdb5] {
  width: 12px;
  height: 12px;
  z-index: 10;
}
.vfm--resize-t[data-v-2836fdb5] {
  top: -6px;
  left: 0;
  width: 100%;
  height: 12px;
  cursor: ns-resize;
}
.vfm--resize-tr[data-v-2836fdb5] {
  top: -6px;
  right: -6px;
  cursor: nesw-resize;
}
.vfm--resize-r[data-v-2836fdb5] {
  top: 0;
  right: -6px;
  width: 12px;
  height: 100%;
  cursor: ew-resize;
}
.vfm--resize-br[data-v-2836fdb5] {
  bottom: -6px;
  right: -6px;
  cursor: nwse-resize;
}
.vfm--resize-b[data-v-2836fdb5] {
  bottom: -6px;
  left: 0;
  width: 100%;
  height: 12px;
  cursor: ns-resize;
}
.vfm--resize-bl[data-v-2836fdb5] {
  bottom: -6px;
  left: -6px;
  cursor: nesw-resize;
}
.vfm--resize-l[data-v-2836fdb5] {
  top: 0;
  left: -6px;
  width: 12px;
  height: 100%;
  cursor: ew-resize;
}
.vfm--resize-tl[data-v-2836fdb5] {
  top: -6px;
  left: -6px;
  cursor: nwse-resize;
}
`;si(oi);Be.render=ri;Be.__scopeId="data-v-2836fdb5";Be.__file="lib/VueFinalModal.vue";var Xe={props:{},methods:{slice:function(p){this.api.dynamicModals.splice(p,1)},beforeOpen:function(p,n,j){var X=this;return Mn(function*(){p.ref.params.value=n.params,yield X.$nextTick(),yield X.$nextTick(),n.value||(X.slice(j),n.reject("show"))})()},isString:function(p){return typeof p=="string"}}},ai={class:"modals-container"};function li(tt,p,n,j,X,W){return qt(),ie("div",ai,[(qt(!0),ie(be,null,Ee(tt.api.dynamicModals,function(J,l){return qt(),ie(rn(J.component),Fe({key:J.id},J.bind,{modelValue:J.value,"onUpdate:modelValue":function(u){return J.value=u}},sn(J.on),{on_closed:function(u){return W.slice(l)},on_beforeOpen:function(u){return W.beforeOpen(u,J)},on_opened:J.opened}),An({_:2},[Ee(J.slots,function(T,u){return{name:u,fn:gn(function(){return[ve(" eslint-disable vue/no-v-html "),W.isString(T)?(qt(),ie("div",{key:0,innerHTML:T},null,8,["innerHTML"])):(qt(),ie(rn(T.component),Fe({key:1},T.bind,sn(T.on||{})),null,16))]})}})]),1040,["modelValue","onUpdate:modelValue","on_closed","on_beforeOpen","on_opened"])}),128))])}Xe.render=li;Xe.__file="lib/ModalsContainer.vue";function ui(){var tt=null;return{show:function(n){for(var j=this,X=arguments.length,W=new Array(X>1?X-1:0),J=1;J<X;J++)W[J-1]=arguments[J];switch(_e(n)){case"string":return this.toggle.apply(this,[n,!0].concat(W));case"object":return Promise.allSettled([new Promise(function(l,T){var u={value:!0,id:Symbol("dynamicModal"),component:tt,bind:{},slots:{},on:{},params:W[0],reject:T,opened:function(){l("show")}};j.dynamicModals.push(nn(Object.assign(u,n)))})])}},hide:function(){for(var n=arguments.length,j=new Array(n),X=0;X<n;X++)j[X]=arguments[X];return this.toggle(j,!1)},hideAll:function(){return this.hide.apply(this,ce(this.openedModals.map(function(n){return n.props.name})))},toggle:function(n){for(var j=arguments.length,X=new Array(j>1?j-1:0),W=1;W<j;W++)X[W-1]=arguments[W];var J=Array.isArray(n)?this.get.apply(this,ce(n)):this.get(n);return Promise.allSettled(J.map(function(l){return l.toggle.apply(l,X)}))},get:function(){for(var n=arguments.length,j=new Array(n),X=0;X<n;X++)j[X]=arguments[X];return this.modals.filter(function(W){return j.includes(W.props.name)})},dynamicModals:nn([]),openedModals:[],modals:[],_setDefaultModal:function(n){tt=n}}}function _n(tt,p){var n=Jt(Jt({},tt),{},{props:Jt({},tt.props)});return Object.assign(n.props,{api:{type:Object,default:function(){return p}}}),n}function ci(tt){var p=_n(Be,tt);return tt._setDefaultModal(p),p}function hi(tt){return _n(Xe,tt)}var fi="$vfm",di="VueFinalModal",vi="ModalsContainer",pi=function(){var p,n=ui();return p={},pe(p,fi,n),pe(p,di,ci(n)),pe(p,vi,hi(n)),p},We=pi();We.$vfm;var gi=We.VueFinalModal,mi=We.ModalsContainer;const yi={components:{VueFinalModal:gi,ModalsContainer:mi},props:{project:{required:!0}},name:"JsPlumb",data(){return{rowCount:0,itemCount:0,openedFolders:[],loading:!1,showModal:!1,loadedDocuments:[],loadedFolderId:null,newTitle:null}},mounted(){this.mountPlumb()},methods:{createFile(tt){Ue.Inertia.post("/project/file/create",{folder_id:tt,title:"test-title"})},openFile(tt){Ue.Inertia.get("/project/file/"+tt+"/show")},createFolder(tt){Ue.Inertia.post("/project/folder/create",{folder_id:tt,folder_name:this.new_folder})},fireModal(tt){this.loadedDocuments=this.project[tt].content,this.loadedFolderId=this.project[tt].id,this.showModal=!0},folderOpened(tt){return this.openedFolders.includes(tt)},toggleFolder(tt){if(this.openedFolders.includes(tt)){let p=this.openedFolders.indexOf(tt);p>-1&&this.openedFolders.splice(p,1)}else this.openedFolders.push(tt)},mountPlumb(){var tt=this;Le.jsPlumb.ready(function(){let p=window.jsp=Le.jsPlumb.getInstance({ConnectionOverlays:[["Diamond",{location:.5,visible:!0,width:20,length:20,id:"DIAMOND"}]],Container:"canvas"}),n={connector:"Flowchart",overlays:["Diamond"]};p.registerConnectionType("basic",n);let j=function(X){X.getOverlay("label").setLabel(X.sourceId.substring(15)+"-"+X.targetId.substring(15))};p.batch(function(){p.bind("connection",function(X,W){j(X.connection)}),tt.$refs.item.forEach(function(X,W){tt.$refs.item[W+1]&&p.connect({source:tt.$refs.item[W],target:tt.$refs.item[W+1],anchors:["Right","Left"],connector:"Flowchart",deleteEndpointsOnDetach:!1,detachable:!1,endpoint:"Rectangle",endpointStyle:{fill:"rgb(219,65,99)",width:5},paintStyle:{strokeWidth:3,stroke:"rgb(219,65,99)"}})}),p.bind("click",function(X,W){alert("hahaha")})}),Le.jsPlumb.fire("jsPlumbDemoLoaded",p)})}},computed:{}},bi=tt=>(vn("data-v-743f8abc"),tt=tt(),pn(),tt),_i={key:0,id:"canvas",class:"jtk-demo-canvas canvas-wide flowchart-demo jtk-surface jtk-surface-nopan relative"},Pi={class:"p-10 flex flex-row flex-wrap w-full my-7 justify-around"},Ci=["id","onClick"],Ei=bi(()=>de("span",{class:"modal__title"},"Hello, vue-final-modal",-1)),Si={class:"modal__content flex flex-row flex-wrap"},xi=["onClick"];function Di(tt,p,n,j,X,W){const J=On("vue-final-modal");return qt(),fe(be,null,[X.loading?ve("",!0):(qt(),fe("div",_i,[de("div",Pi,[(qt(!0),fe(be,null,Ee(n.project,(l,T)=>(qt(),fe("div",{class:"window jtk-node w-auto h-20 flex border-2 border-turquoise rounded justify-center items-center text-center cursor-pointer bg-white text-black font-display p-4 m-6",id:"flowchartWindow"+T,onClick:u=>W.fireModal(T),ref_for:!0,ref:"item"},on(l.title),9,Ci))),256))])])),de("div",null,[ye(J,{modelValue:X.showModal,"onUpdate:modelValue":p[2]||(p[2]=l=>X.showModal=l),classes:"modal-container","content-class":"modal-content"},{default:gn(()=>[de("div",{class:"modal__close",onClick:p[0]||(p[0]=l=>X.showModal=!1)}," x "),Ei,de("div",Si,[X.loadedDocuments?(qt(!0),fe(be,{key:0},Ee(X.loadedDocuments,(l,T)=>(qt(),fe("div",{onClick:u=>W.openFile(l.id),class:"cursor-pointer border-black border-2 rounded-md flex w-1/3 m-4 p-4"},on(l.title),9,xi))),256)):ve("",!0)]),de("div",{onClick:p[1]||(p[1]=l=>W.createFile(X.loadedFolderId)),class:"w-1/4 flex justify-center text-center rounded-md font-bold bg-green-500 text-white border-4 border-black hover:border-gray-300 cursor-pointer"}," Add new + ")]),_:1},8,["modelValue"])])],64)}const Oi=Tn(yi,[["render",Di],["__scopeId","data-v-743f8abc"]]);export{Oi as default};
